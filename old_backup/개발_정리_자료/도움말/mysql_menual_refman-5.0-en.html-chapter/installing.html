<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 2. Installing and Upgrading MySQL</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.0 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.0 Reference Manual"><link rel="prev" href="introduction.html" title="Chapter 1. General Information"><link rel="next" href="tutorial.html" title="Chapter 3. Tutorial"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 2. Installing and Upgrading MySQL</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="introduction.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="tutorial.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="installing"></a>Chapter 2. Installing and Upgrading MySQL</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="installing.html#installation-overview">2.1. MySQL Installation Overview</a></span></dt><dt><span class="section"><a href="installing.html#installation-version">2.2. Determining your current MySQL version</a></span></dt><dt><span class="section"><a href="installing.html#installing-es">2.3. Notes for MySQL Enterprise Server</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#installing-es-disttypes">2.3.1. Enterprise Server Distribution Types</a></span></dt><dt><span class="section"><a href="installing.html#installing-es-upgrade">2.3.2. Upgrading MySQL Enterprise Server</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#installing-cs">2.4. Notes for MySQL Community Server</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#installing-cs-overview">2.4.1. Overview of MySQL Community Server Installation</a></span></dt><dt><span class="section"><a href="installing.html#which-os">2.4.2. Operating Systems Supported by MySQL Community Server</a></span></dt><dt><span class="section"><a href="installing.html#which-version">2.4.3. Choosing Which MySQL Distribution to Install</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#getting-mysql">2.5. How to Get MySQL</a></span></dt><dt><span class="section"><a href="installing.html#verifying-package-integrity">2.6. Verifying Package Integrity Using MD5 Checksums or
      <code class="literal">GnuPG</code></a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#verifying-md5-checksum">2.6.1. Verifying the MD5 Checksum</a></span></dt><dt><span class="section"><a href="installing.html#checking-gpg-signature">2.6.2. Signature Checking Using <code class="literal">GnuPG</code></a></span></dt><dt><span class="section"><a href="installing.html#checking-rpm-signature">2.6.3. Signature Checking Using <code class="literal">RPM</code></a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#installation-layouts">2.7. Installation Layouts</a></span></dt><dt><span class="section"><a href="installing.html#quick-standard-installation">2.8. Standard MySQL Installation Using a Binary Distribution</a></span></dt><dt><span class="section"><a href="installing.html#windows-installation">2.9. Installing MySQL on Windows</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#windows-choosing-package">2.9.1. Choosing An Installation Package</a></span></dt><dt><span class="section"><a href="installing.html#windows-using-installer">2.9.2. Installing MySQL with the Automated Installer</a></span></dt><dt><span class="section"><a href="installing.html#windows-install-wizard">2.9.3. Using the MySQL Installation Wizard</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard">2.9.4. MySQL Server Instance Configuration Wizard</a></span></dt><dt><span class="section"><a href="installing.html#windows-install-archive">2.9.5. Installing MySQL from a Noinstall Zip Archive</a></span></dt><dt><span class="section"><a href="installing.html#windows-extract-archive">2.9.6. Extracting the Install Archive</a></span></dt><dt><span class="section"><a href="installing.html#windows-create-option-file">2.9.7. Creating an Option File</a></span></dt><dt><span class="section"><a href="installing.html#windows-select-server">2.9.8. Selecting a MySQL Server Type</a></span></dt><dt><span class="section"><a href="installing.html#windows-server-first-start">2.9.9. Starting the Server for the First Time</a></span></dt><dt><span class="section"><a href="installing.html#windows-start-command-line">2.9.10. Starting MySQL from the Windows Command Line</a></span></dt><dt><span class="section"><a href="installing.html#windows-start-service">2.9.11. Starting MySQL as a Windows Service</a></span></dt><dt><span class="section"><a href="installing.html#windows-testing">2.9.12. Testing The MySQL Installation</a></span></dt><dt><span class="section"><a href="installing.html#windows-troubleshooting">2.9.13. Troubleshooting a MySQL Installation Under Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-upgrading">2.9.14. Upgrading MySQL on Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-vs-unix">2.9.15. MySQL on Windows Compared to MySQL on Unix</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#linux-rpm">2.10. Installing MySQL from RPM Packages on Linux</a></span></dt><dt><span class="section"><a href="installing.html#mac-os-x-installation">2.11. Installing MySQL on Mac OS X</a></span></dt><dt><span class="section"><a href="installing.html#solaris-installation">2.12. Installing MySQL on Solaris</a></span></dt><dt><span class="section"><a href="installing.html#installation-i5os">2.13. Installing MySQL on i5/OS</a></span></dt><dt><span class="section"><a href="installing.html#netware-installation">2.14. Installing MySQL on NetWare</a></span></dt><dt><span class="section"><a href="installing.html#installing-binary">2.15. Installing MySQL from <code class="filename">tar.gz</code> Packages on Other
      Unix-Like Systems</a></span></dt><dt><span class="section"><a href="installing.html#installing-source">2.16. MySQL Installation Using a Source Distribution</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#quick-install">2.16.1. Source Installation Overview</a></span></dt><dt><span class="section"><a href="installing.html#configure-options">2.16.2. Typical <span><strong class="command">configure</strong></span> Options</a></span></dt><dt><span class="section"><a href="installing.html#installing-source-tree">2.16.3. Installing from the Development Source Tree</a></span></dt><dt><span class="section"><a href="installing.html#compilation-problems">2.16.4. Dealing with Problems Compiling MySQL</a></span></dt><dt><span class="section"><a href="installing.html#mit-pthreads">2.16.5. MIT-pthreads Notes</a></span></dt><dt><span class="section"><a href="installing.html#windows-source-build">2.16.6. Installing MySQL from Source on Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-client-compiling">2.16.7. Compiling MySQL Clients on Windows</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#post-installation">2.17. Post-Installation Setup and Testing</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#windows-post-installation">2.17.1. Windows Post-Installation Procedures</a></span></dt><dt><span class="section"><a href="installing.html#unix-post-installation">2.17.2. Unix Post-Installation Procedures</a></span></dt><dt><span class="section"><a href="installing.html#default-privileges">2.17.3. Securing the Initial MySQL Accounts</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#upgrade-downgrade">2.18. Upgrading or Downgrading MySQL</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#upgrade">2.18.1. Upgrading MySQL</a></span></dt><dt><span class="section"><a href="installing.html#downgrading">2.18.2. Downgrading MySQL</a></span></dt><dt><span class="section"><a href="installing.html#checking-index-changes">2.18.3. Checking Whether Table Indexes Must Be Rebuilt</a></span></dt><dt><span class="section"><a href="installing.html#rebuilding-tables">2.18.4. Rebuilding or Repairing Tables or Indexes</a></span></dt><dt><span class="section"><a href="installing.html#copying-databases">2.18.5. Copying MySQL Databases to Another Machine</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#operating-system-specific-notes">2.19. Operating System-Specific Notes</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#linux">2.19.1. Linux Notes</a></span></dt><dt><span class="section"><a href="installing.html#mac-os-x">2.19.2. Mac OS X Notes</a></span></dt><dt><span class="section"><a href="installing.html#solaris">2.19.3. Solaris Notes</a></span></dt><dt><span class="section"><a href="installing.html#bsd-notes">2.19.4. BSD Notes</a></span></dt><dt><span class="section"><a href="installing.html#other-unix-notes">2.19.5. Other Unix Notes</a></span></dt><dt><span class="section"><a href="installing.html#os-2">2.19.6. OS/2 Notes</a></span></dt></dl></dd><dt><span class="section"><a href="installing.html#environment-variables">2.20. Environment Variables</a></span></dt><dt><span class="section"><a href="installing.html#perl-support">2.21. Perl Installation Notes</a></span></dt><dd><dl><dt><span class="section"><a href="installing.html#perl-installation">2.21.1. Installing Perl on Unix</a></span></dt><dt><span class="section"><a href="installing.html#activestate-perl">2.21.2. Installing ActiveState Perl on Windows</a></span></dt><dt><span class="section"><a href="installing.html#perl-support-problems">2.21.3. Problems Using the Perl <code class="literal">DBI</code>/<code class="literal">DBD</code>
        Interface</a></span></dt></dl></dd></dl></div><a class="indexterm" name="id1664884"></a><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation-overview"></a>2.1. MySQL Installation Overview</h2></div></div></div><a class="indexterm" name="id1664905"></a><p>
      This chapter describes how to obtain and install MySQL. You can
      choose to install MySQL Enterprise or MySQL Community Server:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          MySQL Enterprise is Sun Microsystems, Inc.'s commercial
          offering for modern enterprise businesses. It includes MySQL
          Enterprise Server and the services provided by MySQL Network.
          To install MySQL Enterprise, see
          <a href="installing.html#installing-es" title="2.3. Notes for MySQL Enterprise Server">Section 2.3, “Notes for MySQL Enterprise Server”</a>.
        </p></li><li><p>
          MySQL Community Server is for users who are comfortable
          configuring and administering MySQL by themselves. To install
          MySQL Community Server, see <a href="installing.html#installing-cs" title="2.4. Notes for MySQL Community Server">Section 2.4, “Notes for MySQL Community Server”</a>.
        </p></li></ul></div><p>
      If you plan to upgrade an existing version of MySQL to a newer
      version rather than install MySQL for the first time, see
      <a href="installing.html#upgrade" title="2.18.1. Upgrading MySQL">Section 2.18.1, “Upgrading MySQL”</a>, for information about upgrade
      procedures and about issues that you should consider before
      upgrading.
    </p><p>
      If you are interested in migrating to MySQL from another database
      system, you may wish to read <a href="faqs.html#faqs-migration" title="A.8. MySQL 5.0 FAQ — Migration">Section A.8, “MySQL 5.0 FAQ — Migration”</a>,
      which contains answers to some common questions concerning
      migration issues.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation-version"></a>2.2. Determining your current MySQL version</h2></div></div></div><p>
    To determine the version and release of your currently installed
    MySQL installation, there are a number of options.
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        Using a command client (<code class="literal">mysql</code>), the server
        version of the MySQL server to which you are connected is shown
        once you are connected. The server version information includes
        <code class="literal">community</code> or <code class="literal">enterprise</code>
        accordingly.
      </p><p>
        For example, here is the output from a MySQL Community Server
        edition installed on Linux:
      </p><pre class="programlisting">Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 6
Server version: 5.0.27-standard MySQL Community Edition - Standard (GPL)

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt;</pre><p>
        This is an example of the output from MySQL Enterprise Server on
        Windows:

</p><pre class="programlisting">Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.0.28-enterprise-gpl-nt MySQL Enterprise Server (GPL)

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.
</pre><p>
      </p></li><li><p>
        You may also determine the version information using the version
        variables. Both the
        <a href="server-administration.html#option_mysqld_version">version</a> and
        <a href="server-administration.html#sysvar_version_comment">version_comment</a>
        variables contain version information for the server to which
        you are connected. Use the <a href="sql-syntax.html#show-variables" title="12.5.5.36. SHOW VARIABLES Syntax"><code class="literal">SHOW
        VARIABLES</code></a> statement to obtain the information you
        want, as shown in this example:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE "%version%";</code></strong>
+-------------------------+------------------------------------------+
| Variable_name           | Value                                    |
+-------------------------+------------------------------------------+
| protocol_version        | 10                                       |
| version                 | 5.0.27-standard                          |
| version_comment         | MySQL Community Edition - Standard (GPL) |
| version_compile_machine | i686                                     |
| version_compile_os      | pc-linux-gnu                             |
+-------------------------+------------------------------------------+
5 rows in set (0.04 sec)
</pre><p>

        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            MySQL Administrator shows the server version within the
            <span class="guilabel">Server Information</span> tab. However, only
            the value of <code class="literal">version</code> is shown.
          </p></div><p>
      </p></li><li><p>
        The <code class="literal">STATUS</code> command displays the version as
        well as version comment information. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>STATUS;</code></strong>
--------------
./client/mysql  Ver 14.12 Distrib 5.0.29, for pc-linux-gnu (i686) using readline 5.0

Connection id:          8
Current database:
Current user:           mc@localhost
SSL:                    Not in use
Current pager:          /usr/bin/less
Using outfile:          ''
Using delimiter:        ;
Server version:         5.0.27-standard MySQL Community Edition - Standard (GPL)
Protocol version:       10
Connection:             Localhost via UNIX socket
Server characterset:    latin1
Db     characterset:    latin1
Client characterset:    latin1
Conn.  characterset:    latin1
UNIX socket:            /tmp/mysql.sock
Uptime:                 1 day 3 hours 58 min 43 sec

Threads: 2  Questions: 17  Slow queries: 0  Opens: 11  Flush tables: 1  Open tables: 6  Queries per second avg: 0.000
--------------
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-es"></a>2.3. Notes for MySQL Enterprise Server</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#installing-es-disttypes">2.3.1. Enterprise Server Distribution Types</a></span></dt><dt><span class="section"><a href="installing.html#installing-es-upgrade">2.3.2. Upgrading MySQL Enterprise Server</a></span></dt></dl></div><a class="indexterm" name="id1665144"></a><p>
    To obtain MySQL Enterprise, visit
    <a href="http://enterprise.mysql.com" target="_top">http://enterprise.mysql.com</a> if you're a customer.
    Otherwise, visit
    <a href="http://www.mysql.com/products/enterprise/" target="_top">http://www.mysql.com/products/enterprise/</a>. The
    platforms that are officially supported for MySQL Enterprise are
    listed at
    <a href="http://www.mysql.com/support/supportedplatforms.html" target="_top">http://www.mysql.com/support/supportedplatforms.html</a>.
  </p><p>
    MySQL Enterprise Server is available for download in the form of
    <span class="emphasis"><em>Quarterly Service Pack (QSP)</em></span> or
    <span class="emphasis"><em>Monthly Rapid Update (MRU)</em></span> binary releases.
  </p><p>
    To install MySQL Enterprise Server, you should use the latest
    available Quarterly Service Pack (QSP). This includes an
    accumulation of the bug fixes provided in all predecessor QSP and
    MRU releases.
  </p><p>
    MRU releases are provided on a monthly basis and represent the most
    current Enterprise Server bug fixes. Each MRU is an accumulation of
    the bug fixes included in its predecessor. Customers should
    standardize on the latest MRU release only if it includes a needed
    bug fix.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="installing-es-disttypes"></a>2.3.1. Enterprise Server Distribution Types</h3></div></div></div><p>
      Enterprise Server releases will be created for the following
      packages from the MySQL 5.0 tree:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">mysql-enterprise</code>: Released under a
          commercial license and includes the following storage engines:
          <code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>, <code class="literal">InnoDB</code>,
          <code class="literal">ARCHIVE</code>, <code class="literal">BLACKHOLE</code>,
          <code class="literal">EXAMPLE</code>, <code class="literal">FEDERATED</code>.
        </p></li><li><p>
          <code class="literal">mysql-enterprise-gpl</code>: Same as
          <code class="literal">mysql-enterprise</code>, but released under the
          GPL.
        </p></li><li><p>
          <code class="literal">mysql-cluster</code>:
          <code class="literal">mysql-enterprise</code> plus MySQL Cluster
          (<code class="literal">NDB</code>).
        </p></li><li><p>
          <code class="literal">mysql-classic</code>: Released under a commercial
          license, does not include <code class="literal">InnoDB</code>.
        </p></li><li><p>
          <code class="literal">mysql-community</code>: Same as
          <code class="literal">mysql-enterprise-gpl</code>, but available for the
          community, and released every 6 months.
        </p></li></ul></div><p>
      To satisfy different user requirements, we provide several
      servers. <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is an optimized server that is
      a smaller, faster binary. <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-debug</strong></span></a> is
      compiled with debugging support but is otherwise configured
      identically to the nondebug server.
    </p><p>
      Each of these servers is compiled from the same source
      distribution, though with different configuration options. All
      native MySQL clients can connect to servers from either MySQL
      version.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="installing-es-upgrade"></a>2.3.2. Upgrading MySQL Enterprise Server</h3></div></div></div><p>
      When upgrading to MySQL Enterprise from Community Server you need
      only follow the installation process to install and upgrade the
      packages to the latest version provided by MySQL Enterprise. You
      will also need to install the latest MySQL Enterprise Service Pack
      and any outstanding MySQL Hot-fix packs.
    </p><p>
      Be aware, however, that you must take into account any of the
      changes when moving between major releases. You should also check
      the release notes for details on major changes between revisions
      of MySQL Enterprise Server (see <a href="news.html" title="Appendix C. MySQL Change History">Appendix C, <i>MySQL Change History</i></a>).
    </p><p>
      You should also review the notes and advice contained within
      <a href="installing.html#upgrade" title="2.18.1. Upgrading MySQL">Section 2.18.1, “Upgrading MySQL”</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-cs"></a>2.4. Notes for MySQL Community Server</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#installing-cs-overview">2.4.1. Overview of MySQL Community Server Installation</a></span></dt><dt><span class="section"><a href="installing.html#which-os">2.4.2. Operating Systems Supported by MySQL Community Server</a></span></dt><dt><span class="section"><a href="installing.html#which-version">2.4.3. Choosing Which MySQL Distribution to Install</a></span></dt></dl></div><a class="indexterm" name="id1665430"></a><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="installing-cs-overview"></a>2.4.1. Overview of MySQL Community Server Installation</h3></div></div></div><div class="orderedlist"><ol type="1"><li><p><b>Determine whether MySQL runs and is supported on your platform. </b>
            Not all platforms are equally suitable for running MySQL,
            and not all platforms on which MySQL is known to run are
            officially supported by Sun Microsystems, Inc. For a list of
            platforms on which MySQL Community Server runs, see
            <a href="installing.html#which-os" title="2.4.2. Operating Systems Supported by MySQL Community Server">Section 2.4.2, “Operating Systems Supported by MySQL Community Server”</a>.
          </p></li><li><p><b>Choose which distribution to install. </b>
            Several versions of MySQL are available, and most are
            available in multiple distribution formats. You can choose
            from prepackaged distributions containing binary
            (precompiled) programs or source code. When in doubt, use a
            binary distribution. We also provide public access to our
            current source trees for those who want to see our most
            recent developments and to help us test new code. To
            determine which version and type of distribution you should
            use, see <a href="installing.html#which-version" title="2.4.3. Choosing Which MySQL Distribution to Install">Section 2.4.3, “Choosing Which MySQL Distribution to Install”</a>.
          </p></li><li><p><b>Download the distribution that you want to install. </b>
            For download instructions, see
            <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>. To verify the integrity of
            the distribution, use the instructions in
            <a href="installing.html#verifying-package-integrity" title="2.6. Verifying Package Integrity Using MD5 Checksums or
      GnuPG">Section 2.6, “Verifying Package Integrity Using MD5 Checksums or
      <code class="literal">GnuPG</code>”</a>.
          </p></li><li><p><b>Install the distribution. </b>
            To install MySQL from a binary distribution, use the
            instructions in
            <a href="installing.html#quick-standard-installation" title="2.8. Standard MySQL Installation Using a Binary Distribution">Section 2.8, “Standard MySQL Installation Using a Binary Distribution”</a>. To install
            MySQL from a source distribution or from the current
            development source tree, use the instructions in
            <a href="installing.html#installing-source" title="2.16. MySQL Installation Using a Source Distribution">Section 2.16, “MySQL Installation Using a Source Distribution”</a>.
          </p><p>
          If you encounter installation difficulties, see
          <a href="installing.html#operating-system-specific-notes" title="2.19. Operating System-Specific Notes">Section 2.19, “Operating System-Specific Notes”</a>, for
          information on solving problems for particular platforms.
        </p></li><li><p><b>Perform any necessary post-installation setup. </b>
            After installing MySQL, read
            <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>, which contains
            important information about making sure the MySQL server is
            working properly. It also describes how to secure the
            initial MySQL user accounts, <span class="emphasis"><em>which have no
            passwords</em></span> until you assign passwords. The
            information in this section applies whether you install
            MySQL using a binary or source distribution.
          </p></li><li><p><b>Perform setup for running benchmarks (optional). </b>
            If you want to use the MySQL benchmark scripts, Perl support
            for MySQL must be available. See
            <a href="installing.html#perl-support" title="2.21. Perl Installation Notes">Section 2.21, “Perl Installation Notes”</a>, for more information.
          </p></li></ol></div><p>
      The sections immediately following this one contain necessary
      information about choosing, downloading, and verifying your
      distribution. The instructions in later sections of the chapter
      describe how to install the distribution that you choose. For
      binary distributions, see the instructions in
      <a href="installing.html#quick-standard-installation" title="2.8. Standard MySQL Installation Using a Binary Distribution">Section 2.8, “Standard MySQL Installation Using a Binary Distribution”</a>. To build MySQL from
      source, use the instructions in
      <a href="installing.html#installing-source" title="2.16. MySQL Installation Using a Source Distribution">Section 2.16, “MySQL Installation Using a Source Distribution”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="which-os"></a>2.4.2. Operating Systems Supported by MySQL Community Server</h3></div></div></div><a class="indexterm" name="id1665631"></a><a class="indexterm" name="id1665643"></a><a class="indexterm" name="id1665652"></a><a class="indexterm" name="id1665661"></a><a class="indexterm" name="id1665670"></a><p>
      This section lists the operating systems on which MySQL Community
      Server is known to run.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Sun Microsystems, Inc. does not necessarily provide official
        support for all the platforms listed in this section. For
        information about those platforms that are officially supported,
        see
        <a href="http://www.mysql.com/support/supportedplatforms.html" target="_top">MySQL
        Server Supported Platforms</a> on the MySQL Web site.
      </p></div><p>
      We use GNU Autoconf, so it is possible to port MySQL to all modern
      systems that have a C++ compiler and a working implementation of
      POSIX threads. (Thread support is needed for the server. To
      compile only the client code, the only requirement is a C++
      compiler.)
    </p><p>
      MySQL has been reported to compile successfully on the following
      combinations of operating system and thread package.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          AIX 4.x and 5.x with native threads. See
          <a href="installing.html#ibm-aix" title="2.19.5.3. IBM-AIX notes">Section 2.19.5.3, “IBM-AIX notes”</a>. AIX 5.3 should be upgraded to
          technology level 7 (5300-07).
        </p></li><li><p>
          Amiga.
        </p></li><li><p>
          FreeBSD 5.x and up with native threads.
        </p></li><li><p>
          HP-UX 11.x with native threads. See
          <a href="installing.html#hp-ux-11-x" title="2.19.5.2. HP-UX Version 11.x Notes">Section 2.19.5.2, “HP-UX Version 11.x Notes”</a>.
        </p></li><li><p>
          Linux. MySQL builds on all fairly recent Linux distributions
          with <code class="literal">glibc</code> 2.3. See
          <a href="installing.html#linux" title="2.19.1. Linux Notes">Section 2.19.1, “Linux Notes”</a>.
        </p></li><li><p>
          Mac OS X. See <a href="installing.html#mac-os-x" title="2.19.2. Mac OS X Notes">Section 2.19.2, “Mac OS X Notes”</a>.
        </p></li><li><p>
          NetBSD 1.3/1.4 Intel and NetBSD 1.3 Alpha. See
          <a href="installing.html#netbsd" title="2.19.4.2. NetBSD Notes">Section 2.19.4.2, “NetBSD Notes”</a>.
        </p></li><li><p>
          Novell NetWare 6.0 and 6.5. See
          <a href="installing.html#netware-installation" title="2.14. Installing MySQL on NetWare">Section 2.14, “Installing MySQL on NetWare”</a>.
        </p></li><li><p>
          OpenBSD 2.5 and with native threads. OpenBSD earlier than 2.5
          with the MIT-pthreads package. See <a href="installing.html#openbsd" title="2.19.4.3. OpenBSD 2.5 Notes">Section 2.19.4.3, “OpenBSD 2.5 Notes”</a>.
        </p></li><li><p>
          SCO OpenServer 5.0.X with a recent port of the FSU Pthreads
          package. See <a href="installing.html#sco" title="2.19.5.8. SCO UNIX and OpenServer 5.0.x Notes">Section 2.19.5.8, “SCO UNIX and OpenServer 5.0.x Notes”</a>.
        </p></li><li><p>
          SCO Openserver 6.0.x. See <a href="installing.html#sco-openserver" title="2.19.5.9. SCO OpenServer 6.0.x Notes">Section 2.19.5.9, “SCO OpenServer 6.0.x Notes”</a>.
        </p></li><li><p>
          SCO UnixWare 7.1.x. See <a href="installing.html#sco-unixware" title="2.19.5.10. SCO UnixWare 7.1.x and OpenUNIX 8.0.0 Notes">Section 2.19.5.10, “SCO UnixWare 7.1.x and OpenUNIX 8.0.0 Notes”</a>.
        </p></li><li><p>
          SGI Irix 6.x with native threads. See
          <a href="installing.html#sgi-irix" title="2.19.5.7. SGI Irix Notes">Section 2.19.5.7, “SGI Irix Notes”</a>.
        </p></li><li><p>
          Solaris 2.5 and above with native threads on SPARC and x86.
          See <a href="installing.html#solaris" title="2.19.3. Solaris Notes">Section 2.19.3, “Solaris Notes”</a>.
        </p></li><li><p>
          Tru64 Unix. See <a href="installing.html#alpha-dec-unix" title="2.19.5.5. Alpha-DEC-UNIX Notes (Tru64)">Section 2.19.5.5, “Alpha-DEC-UNIX Notes (Tru64)”</a>.
        </p></li><li><p>
          Windows 2000, XP, Windows Server 2003, Windows Vista, and
          Windows Server 2008. See
          <a href="installing.html#windows-installation" title="2.9. Installing MySQL on Windows">Section 2.9, “Installing MySQL on Windows”</a>.
        </p></li></ul></div><p>
      MySQL has also been known to run on other systems in the past. See
      <a href="installing.html#operating-system-specific-notes" title="2.19. Operating System-Specific Notes">Section 2.19, “Operating System-Specific Notes”</a>. Some porting
      effort might be required for current versions of MySQL on these
      systems.
    </p><p>
      Not all platforms are equally well suited for running MySQL. How
      well a certain platform is suited for a high-load mission-critical
      MySQL server is determined by the following factors:
    </p><div class="itemizedlist"><ul type="disc"><li><p><b>General stability of the thread library. </b>
            A platform may have an excellent reputation otherwise, but
            MySQL is only as stable as the thread library it calls, even
            if everything else is perfect.
          </p></li><li><p><b>The capability of the kernel and the thread library to take advantage of
            symmetric multi-processor (SMP) systems. </b>
            When a process creates a thread, it should be possible for
            that thread to run on a CPU different from the original
            process.
          </p></li><li><p><b>Multi-threading and handling of mutexes. </b>
            The capability of the kernel and the thread library to run
            many threads that acquire and release a mutex over a short
            critical region frequently without excessive context
            switches. If the implementation of
            <code class="literal">pthread_mutex_lock()</code> does not easily
            yield CPU time, this hurts MySQL tremendously. If this issue
            is not taken care of, adding extra CPUs actually makes MySQL
            slower.
          </p></li><li><p><b>File system stability and performance. </b>
            MySQL's stability and performance are directly affected by
            those of the operating platform's file system. In
            particular, where large tables are in use, performance is
            affected by the ability of the file system to deal with
            large files at all and to deal with them efficiently.
          </p></li><li><p><b>Expertise with the platform. </b>
            If we know a platform well, we enable platform-specific
            optimizations and fixes at compile time. We can also provide
            advice on configuring your system optimally for MySQL. This
            is also affected by the amount of testing we have done
            internally for similar configurations, as well as by the
            number of users that have run MySQL successfully on the
            platform in similar configurations. If these figures are
            high, the likelihood of encountering platform-specific
            surprises is much smaller.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="which-version"></a>2.4.3. Choosing Which MySQL Distribution to Install</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#choosing-version">2.4.3.1. Choosing Which Version of MySQL to Install</a></span></dt><dt><span class="section"><a href="installing.html#choosing-distribution-format">2.4.3.2. Choosing a Distribution Format</a></span></dt><dt><span class="section"><a href="installing.html#many-versions">2.4.3.3. How and When Updates Are Released</a></span></dt><dt><span class="section"><a href="installing.html#mysql-binaries">2.4.3.4. MySQL Binaries Compiled by Sun Microsystems, Inc.</a></span></dt></dl></div><p>
      When preparing to install MySQL, you should decide which version
      to use. MySQL development occurs in several release series, and
      you can pick the one that best fits your needs. After deciding
      which version to install, you can choose a distribution format.
      Releases are available in binary or source format.
    </p><a class="indexterm" name="id1666031"></a><a class="indexterm" name="id1666040"></a><a class="indexterm" name="id1666049"></a><a class="indexterm" name="id1666058"></a><a class="indexterm" name="id1666071"></a><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="choosing-version"></a>2.4.3.1. Choosing Which Version of MySQL to Install</h4></div></div></div><p>
        The first decision to make is whether you want to use a
        production (stable) release or a development release. In the
        MySQL development process, multiple release series co-exist,
        each at a different stage of maturity:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MySQL 6.0 is the current development release series.
          </p></li><li><p>
            MySQL 5.1 is the current General Availability (Production)
            release series. New releases are issued for bugfixes only;
            no new features are being added that could affect stability.
          </p></li><li><p>
            MySQL 5.0 is the previous stable (production-quality)
            release series.
          </p></li><li><p>
            MySQL 4.1, 4.0, and 3.23 are old stable (production-quality)
            release series. MySQL 4.1 is now at the end of the product
            lifecycle. Active development and support for these versions
            has ended.
          </p><p>
            Extended support for MySQL 4.1 remains available. According
            to the
            <a href="http://www.mysql.com/about/legal/lifecycle/" target="_top">MySQL
            Lifecycle Policy</a>, only Security and Severity Level 1
            issues are still being fixed for MySQL 4.1.
          </p></li></ul></div><p>
        We do not believe in a complete code freeze because this
        prevents us from making bugfixes and other fixes that must be
        done. By “<span class="quote">somewhat frozen</span>” we mean that we may add
        small things that should not affect anything that currently
        works in a production release. Naturally, relevant bugfixes from
        an earlier series propagate to later series.
      </p><p>
        Normally, if you are beginning to use MySQL for the first time
        or trying to port it to some system for which there is no binary
        distribution, go with the General Availability release series.
        Currently, this is MySQL 5.1. All MySQL releases, even those
        from development series, are checked with the MySQL benchmarks
        and an extensive test suite before being issued.
      </p><p>
        If you are running an older system and want to upgrade, but do
        not want to take the chance of having a nonseamless upgrade, you
        should upgrade to the latest version in the same release series
        you are using (where only the last part of the version number is
        newer than yours). We have tried to fix only fatal bugs and make
        only small, relatively “<span class="quote">safe</span>” changes to that
        version.
      </p><p>
        If you want to use new features not present in the production
        release series, you can use a version from a development series.
        Note that development releases are not as stable as production
        releases.
      </p><p>
        If you want to use the very latest sources containing all
        current patches and bugfixes, you can use one of our Bazaar
        repositories. These are not “<span class="quote">releases</span>” as such, but
        are available as previews of the code on which future releases
        are to be based.
      </p><a class="indexterm" name="id1666194"></a><a class="indexterm" name="id1666206"></a><p>
        The MySQL naming scheme uses release names that consist of three
        numbers and a suffix; for example,
        <span class="bold"><strong>mysql-5.0.12-beta</strong></span>. The numbers
        within the release name are interpreted as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The first number (<span class="bold"><strong>5</strong></span>) is the
            major version and describes the file format. All MySQL 5
            releases have the same file format.
          </p></li><li><p>
            The second number (<span class="bold"><strong>0</strong></span>) is
            the release level. Taken together, the major version and
            release level constitute the release series number.
          </p></li><li><p>
            The third number (<span class="bold"><strong>12</strong></span>) is
            the version number within the release series. This is
            incremented for each new release. Usually you want the
            latest version for the series you have chosen.
          </p></li></ul></div><p>
        For each minor update, the last number in the version string is
        incremented. When there are major new features or minor
        incompatibilities with previous versions, the second number in
        the version string is incremented. When the file format changes,
        the first number is increased.
      </p><p>
        Release names also include a suffix to indicates the stability
        level of the release. Releases within a series progress through
        a set of suffixes to indicate how the stability level improves.
        The possible suffixes are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>alpha</strong></span> indicates that the
            release is for preview purposes only. Known bugs should be
            documented in the News section (see <a href="news.html" title="Appendix C. MySQL Change History">Appendix C, <i>MySQL Change History</i></a>).
            Most alpha releases implement new commands and extensions.
            Active development that may involve major code changes can
            occur in an alpha release. However, we do conduct testing
            before issuing a release.
          </p></li><li><p>
            <span class="bold"><strong>beta</strong></span> indicates that the
            release is appropriate for use with new development. Within
            beta releases, the features and compatibility should remain
            consistent. However, beta releases may contain numerous and
            major unaddressed bugs.
          </p><p>
            No APIs, externally visible structures, or columns for SQL
            statements will change during future beta, release
            candidate, or production releases.
          </p></li><li><p>
            <span class="bold"><strong>rc</strong></span> indicates a Release
            Candidate. Release candidates are believed to be stable,
            having passed all of MySQL's internal testing, and with all
            known fatal runtime bugs fixed. However, the release has not
            been in widespread use long enough to know for sure that all
            bugs have been identified. Only minor fixes are added. (A
            release candidate is what formerly was known as a gamma
            release.)
          </p></li><li><p>
            If there is no suffix, it indicates that the release is a
            General Availability (GA) or Production release. GA releases
            are stable, having successfully passed through all earlier
            release stages and are believed to be reliable, free of
            serious bugs, and suitable for use in production systems.
            Only critical bugfixes are applied to the release.
          </p></li></ul></div><p>
        MySQL uses a naming scheme that is slightly different from most
        other products. In general, it is usually safe to use any
        version that has been out for a couple of weeks without being
        replaced by a new version within the same release series.
      </p><p>
        All releases of MySQL are run through our standard tests and
        benchmarks to ensure that they are relatively safe to use.
        Because the standard tests are extended over time to check for
        all previously found bugs, the test suite keeps getting better.
      </p><a class="indexterm" name="id1666366"></a><a class="indexterm" name="id1666378"></a><p>
        All releases have been tested at least with these tools:
      </p><div class="itemizedlist"><ul type="disc"><li><p><b>Our internal test suite. </b>
              The <code class="filename">mysql-test</code> directory contains an
              extensive set of test cases. We run these tests for every
              server binary. See <a href="extending-mysql.html#mysql-test-suite" title="21.1.2. MySQL Test Suite">Section 21.1.2, “MySQL Test Suite”</a>, for
              more information about this test suite.
            </p></li><li><p><b>The MySQL benchmark suite. </b>
              This suite runs a range of common queries. It is also a
              test to determine whether the latest batch of
              optimizations actually made the code faster. See
              <a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">Section 7.1.4, “The MySQL Benchmark Suite”</a>.
            </p></li><li><p><b>The <code class="literal">crash-me</code> test. </b>
              This test tries to determine what features the database
              supports and what its capabilities and limitations are.
              See <a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">Section 7.1.4, “The MySQL Benchmark Suite”</a>.
            </p></li></ul></div><p>
        We also test the newest MySQL version in our internal production
        environment, on at least one machine. We have more than 100GB of
        data to work with.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="choosing-distribution-format"></a>2.4.3.2. Choosing a Distribution Format</h4></div></div></div><p>
        After choosing which version of MySQL to install, you should
        decide whether to use a binary distribution or a source
        distribution. In most cases, you should probably use a binary
        distribution, if one exists for your platform. Binary
        distributions are available in native format for many platforms,
        such as RPM files for Linux or PKG package installers for Mac OS
        X or Solaris. Distributions also are available as Zip archives
        or compressed <span><strong class="command">tar</strong></span> files.
      </p><p>
        Reasons to choose a binary distribution include the following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Binary distributions generally are easier to install than
            source distributions.
          </p></li><li><p>
            To satisfy different user requirements, we provide several
            servers in binary distributions. <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
            is an optimized server that is a smaller, faster binary.
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-debug</strong></span></a> is compiled with debugging
            support.
          </p><p>
            Each of these servers is compiled from the same source
            distribution, though with different configuration options.
            All native MySQL clients can connect to servers from either
            MySQL version.
          </p></li></ul></div><p>
        Under some circumstances, you may be better off installing MySQL
        from a source distribution:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            You want to install MySQL at some explicit location. The
            standard binary distributions are ready to run at any
            installation location, but you might require even more
            flexibility to place MySQL components where you want.
          </p></li><li><p>
            You want to configure <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to ensure
            that features are available that might not be included in
            the standard binary distributions. Here is a list of the
            most common extra options that you may want to use to ensure
            feature availability:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="option">--with-berkeley-db</code> (not available on
                all platforms)
              </p></li><li><p>
                <code class="option">--with-libwrap</code>
              </p></li><li><p>
                <code class="option">--with-named-z-libs</code> (this is done for
                some of the binaries)
              </p></li><li><p>
                <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug[=full]</code></a>
              </p></li></ul></div></li><li><p>
            You want to configure <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> without some
            features that are included in the standard binary
            distributions. For example, distributions normally are
            compiled with support for all character sets. If you want a
            smaller MySQL server, you can recompile it with support for
            only the character sets you need.
          </p></li><li><p>
            You have a special compiler (such as
            <code class="literal">pgcc</code>) or want to use compiler options
            that are better optimized for your processor. Binary
            distributions are compiled with options that should work on
            a variety of processors from the same processor family.
          </p></li><li><p>
            You want to use the latest sources from one of the Bazaar
            repositories to have access to all current bugfixes. For
            example, if you have found a bug and reported it to the
            MySQL development team, the bugfix is committed to the
            source repository and you can access it there. The bugfix
            does not appear in a release until a release actually is
            issued.
          </p></li><li><p>
            You want to read (or modify) the C and C++ code that makes
            up MySQL. For this purpose, you should get a source
            distribution, because the source code is always the ultimate
            manual.
          </p></li><li><p>
            Source distributions contain more tests and examples than
            binary distributions.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="many-versions"></a>2.4.3.3. How and When Updates Are Released</h4></div></div></div><a class="indexterm" name="id1666685"></a><a class="indexterm" name="id1666698"></a><p>
        MySQL is evolving quite rapidly and we want to share new
        developments with other MySQL users. We try to produce a new
        release whenever we have new and useful features that others
        also seem to have a need for.
      </p><p>
        We also try to help users who request features that are easy to
        implement. We take note of what our licensed users want, and we
        especially take note of what our support customers want and try
        to help them in this regard.
      </p><p>
        No one is <span class="emphasis"><em>required</em></span> to download a new
        release. The <em class="citetitle">News</em> section helps you
        determine whether the new release has something you really want.
        See <a href="news.html" title="Appendix C. MySQL Change History">Appendix C, <i>MySQL Change History</i></a>.
      </p><p>
        We use the following policy when updating MySQL:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Enterprise Server releases are meant to appear every 18
            months, supplemented by quarterly service packs and monthly
            rapid updates. Community Server releases are meant to appear
            2–3 times per year.
          </p></li><li><p>
            Releases are issued within each series. For each release,
            the last number in the version is one more than the previous
            release within the same series.
          </p></li><li><p>
            Binary distributions for some platforms are made by us for
            major releases. Other people may make binary distributions
            for other systems, but probably less frequently.
          </p></li><li><p>
            We make fixes available as soon as we have identified and
            corrected small or noncritical but annoying bugs. The fixes
            are available in source form immediately from our public
            Bazaar repositories, and are included in the next release.
          </p></li><li><p>
            If by any chance a security vulnerability or critical bug is
            found in a release, our policy is to fix it in a new release
            as soon as possible. (We would like other companies to do
            this, too!)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-binaries"></a>2.4.3.4. MySQL Binaries Compiled by Sun Microsystems, Inc.</h4></div></div></div><a class="indexterm" name="id1666799"></a><p>
        Sun Microsystems, Inc. provides a set of binary distributions of
        MySQL. In addition to binaries provided in platform-specific
        package formats, we offer binary distributions for a number of
        platforms in the form of compressed <span><strong class="command">tar</strong></span> files
        (<code class="filename">.tar.gz</code> files). See
        <a href="installing.html#quick-standard-installation" title="2.8. Standard MySQL Installation Using a Binary Distribution">Section 2.8, “Standard MySQL Installation Using a Binary Distribution”</a>. For Windows
        distributions, see <a href="installing.html#windows-installation" title="2.9. Installing MySQL on Windows">Section 2.9, “Installing MySQL on Windows”</a>.
      </p><p>
        If you want to compile a debug version of MySQL from a source
        distribution, you should add
        <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug</code></a> or
        <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug=full</code></a> to the
        <span><strong class="command">configure</strong></span> command used to configure the
        distribution and remove any
        <code class="option">-fomit-frame-pointer</code> options.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="getting-mysql"></a>2.5. How to Get MySQL</h2></div></div></div><a class="indexterm" name="id1666876"></a><a class="indexterm" name="id1666885"></a><a class="indexterm" name="id1666894"></a><a class="indexterm" name="id1666907"></a><a class="indexterm" name="id1666916"></a><a class="indexterm" name="id1666925"></a><p>
      Check our downloads page at <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>
      for information about the current version of MySQL and for
      downloading instructions. For a complete up-to-date list of MySQL
      download mirror sites, see
      <a href="http://dev.mysql.com/downloads/mirrors.html" target="_top">http://dev.mysql.com/downloads/mirrors.html</a>. You can also find
      information there about becoming a MySQL mirror site and how to
      report a bad or out-of-date mirror.
    </p><p>
      Our main mirror is located at
      <a href="http://mirrors.sunsite.dk/mysql/" target="_top">http://mirrors.sunsite.dk/mysql/</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="verifying-package-integrity"></a>2.6. Verifying Package Integrity Using MD5 Checksums or
      <code class="literal">GnuPG</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#verifying-md5-checksum">2.6.1. Verifying the MD5 Checksum</a></span></dt><dt><span class="section"><a href="installing.html#checking-gpg-signature">2.6.2. Signature Checking Using <code class="literal">GnuPG</code></a></span></dt><dt><span class="section"><a href="installing.html#checking-rpm-signature">2.6.3. Signature Checking Using <code class="literal">RPM</code></a></span></dt></dl></div><p>
      After you have downloaded the MySQL package that suits your needs
      and before you attempt to install it, you should make sure that it
      is intact and has not been tampered with. There are three means of
      integrity checking:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          MD5 checksums
        </p></li><li><p>
          Cryptographic signatures using <code class="literal">GnuPG</code>, the
          GNU Privacy Guard
        </p></li><li><p>
          For RPM packages, the built-in RPM integrity verification
          mechanism
        </p></li></ul></div><p>
      The following sections describe how to use these methods.
    </p><p>
      If you notice that the MD5 checksum or GPG signatures do not
      match, first try to download the respective package one more time,
      perhaps from another mirror site. If you repeatedly cannot
      successfully verify the integrity of the package, please notify us
      about such incidents, including the full package name and the
      download site you have been using, at
      <code class="email">&lt;<a href="mailto:webmaster@mysql.com">webmaster@mysql.com</a>&gt;</code> or
      <code class="email">&lt;<a href="mailto:build@mysql.com">build@mysql.com</a>&gt;</code>. Do not report downloading problems
      using the bug-reporting system.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="verifying-md5-checksum"></a>2.6.1. Verifying the MD5 Checksum</h3></div></div></div><p>
        After you have downloaded a MySQL package, you should make sure
        that its MD5 checksum matches the one provided on the MySQL
        download pages. Each package has an individual checksum that you
        can verify with the following command, where
        <em class="replaceable"><code>package_name</code></em> is the name of the
        package you downloaded:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>md5sum <em class="replaceable"><code>package_name</code></em></code></strong>
</pre><p>
        Example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>md5sum mysql-standard-5.0.86-linux-i686.tar.gz</code></strong>
aaab65abbec64d5e907dcd41b8699945  mysql-standard-5.0.86-linux-i686.tar.gz
</pre><p>
        You should verify that the resulting checksum (the string of
        hexadecimal digits) matches the one displayed on the download
        page immediately below the respective package.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Make sure to verify the checksum of the <span class="emphasis"><em>archive
          file</em></span> (for example, the <code class="filename">.zip</code> or
          <code class="filename">.tar.gz</code> file) and not of the files that
          are contained inside of the archive.
        </p></div><p>
        Note that not all operating systems support the
        <span><strong class="command">md5sum</strong></span> command. On some, it is simply called
        <span><strong class="command">md5</strong></span>, and others do not ship it at all. On
        Linux, it is part of the <span class="bold"><strong>GNU Text
        Utilities</strong></span> package, which is available for a wide
        range of platforms. You can download the source code from
        <a href="http://www.gnu.org/software/textutils/" target="_top">http://www.gnu.org/software/textutils/</a> as well.
        If you have OpenSSL installed, you can use the command
        <span><strong class="command">openssl md5
        <em class="replaceable"><code>package_name</code></em></strong></span> instead. A
        Windows implementation of the <span><strong class="command">md5</strong></span> command
        line utility is available from
        <a href="http://www.fourmilab.ch/md5/" target="_top">http://www.fourmilab.ch/md5/</a>.
        <span><strong class="command">winMd5Sum</strong></span> is a graphical MD5 checking tool
        that can be obtained from
        <a href="http://www.nullriver.com/index/products/winmd5sum" target="_top">http://www.nullriver.com/index/products/winmd5sum</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="checking-gpg-signature"></a>2.6.2. Signature Checking Using <code class="literal">GnuPG</code></h3></div></div></div><p>
        Another method of verifying the integrity and authenticity of a
        package is to use cryptographic signatures. This is more
        reliable than using MD5 checksums, but requires more work.
      </p><p>
        We sign MySQL downloadable packages with
        <span><strong class="command">GnuPG</strong></span> (GNU Privacy Guard).
        <span><strong class="command">GnuPG</strong></span> is an Open Source alternative to the
        well-known Pretty Good Privacy (<span><strong class="command">PGP</strong></span>) by Phil
        Zimmermann. See <a href="http://www.gnupg.org/" target="_top">http://www.gnupg.org/</a> for more
        information about <span><strong class="command">GnuPG</strong></span> and how to obtain and
        install it on your system. Most Linux distributions ship with
        <span><strong class="command">GnuPG</strong></span> installed by default. For more
        information about <span><strong class="command">GnuPG</strong></span>, see
        <a href="http://www.openpgp.org/" target="_top">http://www.openpgp.org/</a>.
      </p><p>
        To verify the signature for a specific package, you first need
        to obtain a copy of our public GPG build key, which you can
        download from <a href="http://keyserver.pgp.com/" target="_top">http://keyserver.pgp.com/</a>. The key
        that you want to obtain is named
        <code class="literal">build@mysql.com</code>. Alternatively, you can cut
        and paste the key directly from the following text:
      </p><pre class="programlisting">-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

mQGiBD4+owwRBAC14GIfUfCyEDSIePvEW3SAFUdJBtoQHH/nJKZyQT7h9bPlUWC3
RODjQReyCITRrdwyrKUGku2FmeVGwn2u2WmDMNABLnpprWPkBdCk96+OmSLN9brZ
fw2vOUgCmYv2hW0hyDHuvYlQA/BThQoADgj8AW6/0Lo7V1W9/8VuHP0gQwCgvzV3
BqOxRznNCRCRxAuAuVztHRcEAJooQK1+iSiunZMYD1WufeXfshc57S/+yeJkegNW
hxwR9pRWVArNYJdDRT+rf2RUe3vpquKNQU/hnEIUHJRQqYHo8gTxvxXNQc7fJYLV
K2HtkrPbP72vwsEKMYhhr0eKCbtLGfls9krjJ6sBgACyP/Vb7hiPwxh6rDZ7ITnE
kYpXBACmWpP8NJTkamEnPCia2ZoOHODANwpUkP43I7jsDmgtobZX9qnrAXw+uNDI
QJEXM6FSbi0LLtZciNlYsafwAPEOMDKpMqAK6IyisNtPvaLd8lH0bPAnWqcyefep
rv0sxxqUEMcM3o7wwgfN83POkDasDbs3pjwPhxvhz6//62zQJ7Q7TXlTUUwgUGFj
a2FnZSBzaWduaW5nIGtleSAod3d3Lm15c3FsLmNvbSkgPGJ1aWxkQG15c3FsLmNv
bT6IXQQTEQIAHQUCR6yUtAUJDTBYqAULBwoDBAMVAwIDFgIBAheAAAoJEIxxjTtQ
cuH1rpIAn38+BlBI815Dou9VXMIAsQEk4G3tAJ9+Cz69Y/Xwm611lzteJrCAA32+
aYhMBBMRAgAMBQI+PqPRBYMJZgC7AAoJEElQ4SqycpHyJOEAn1mxHijft00bKXvu
cSo/pECUmppiAJ41M9MRVj5VcdH/KN/KjRtW6tHFPYhMBBMRAgAMBQI+QoIDBYMJ
YiKJAAoJELb1zU3GuiQ/lpEAoIhpp6BozKI8p6eaabzF5MlJH58pAKCu/ROofK8J
Eg2aLos+5zEYrB/LsohGBBARAgAGBQI/rOOvAAoJEK/FI0h4g3QP9pYAoNtSISDD
AAU2HafyAYlLD/yUC4hKAJ0czMsBLbo0M/xPaJ6Ox9Q5Hmw2uIhGBBARAgAGBQI/
tEN3AAoJEIWWr6swc05mxsMAnRag9X61Ygu1kbfBiqDku4czTd9pAJ4q5W8KZ0+2
ujTrEPN55NdWtnXj4YhGBBARAgAGBQJDW7PqAAoJEIvYLm8wuUtcf3QAnRCyqF0C
pMCTdIGc7bDO5I7CIMhTAJ0UTGx0O1d/VwvdDiKWj45N2tNbYIhGBBMRAgAGBQJE
8TMmAAoJEPZJxPRgk1MMCnEAoIm2pP0sIcVh9Yo0YYGAqORrTOL3AJwIbcy+e8HM
NSoNV5u51RnrVKie34hMBBARAgAMBQJBgcsBBYMGItmLAAoJEBhZ0B9ne6HsQo0A
nA/LCTQ3P5kvJvDhg1DsfVTFnJxpAJ49WFjg/kIcaN5iP1JfaBAITZI3H4hMBBAR
AgAMBQJBgcs0BYMGItlYAAoJEIHC9+viE7aSIiMAnRVTVVAfMXvJhV6D5uHfWeeD
046TAJ4kjwP2bHyd6DjCymq+BdEDz63axohMBBARAgAMBQJBgctiBYMGItkqAAoJ
EGtw7Nldw/RzCaoAmwWM6+Rj1zl4D/PIys5nW48Hql3hAJ0bLOBthv96g+7oUy9U
j09Uh41lF4hMBBARAgAMBQJB0JMkBYMF1BFoAAoJEH0lygrBKafCYlUAoIb1r5D6
qMLMPMO1krHk3MNbX5b5AJ4vryx5fw6iJctC5GWJ+Y8ytXab34hMBBARAgAMBQJC
K1u6BYMFeUjSAAoJEOYbpIkV67mr8xMAoJMy+UJC0sqXMPSxh3BUsdcmtFS+AJ9+
Z15LpoOnAidTT/K9iODXGViK6ohMBBIRAgAMBQJAKlk6BYMHektSAAoJEDyhHzSU
+vhhJlwAnA/gOdwOThjO8O+dFtdbpKuImfXJAJ0TL53QKp92EzscZSz49lD2YkoE
qohMBBIRAgAMBQJAPfq6BYMHZqnSAAoJEPLXXGPjnGWcst8AoLQ3MJWqttMNHDbl
xSyzXhFGhRU8AJ4ukRzfNJqElQHQ00ZM2WnCVNzOUIhMBBIRAgAMBQJBDgqEBYMG
lpoIAAoJEDnKK/Q9aopf/N0AniE2fcCKO1wDIwusuGVlC+JvnnWbAKDDoUSEYuNn
5qzRbrzWW5zBno/Nb4hMBBIRAgAMBQJCgKU0BYMFI/9YAAoJEAQNwIV8g5+o4yQA
nA9QOFLV5POCddyUMqB/fnctuO9eAJ4sJbLKP/Z3SAiTpKrNo+XZRxauqIhMBBMR
AgAMBQI+TU2EBYMJV1cIAAoJEC27dr+t1MkzBQwAoJU+RuTVSn+TI+uWxUpT82/d
s5NkAJ9bnNodffyMMK7GyMiv/TzifiTD+4hMBBMRAgAMBQJB14B2BYMFzSQWAAoJ
EGbv28jNgv0+P7wAn13uu8YkhwfNMJJhWdpK2/qM/4AQAJ40drnKW2qJ5EEIJwtx
pwapgrzWiYhMBBMRAgAMBQJCGIEOBYMFjCN+AAoJEHbBAxyiMW6hoO4An0Ith3Kx
5/sixbjZR9aEjoePGTNKAJ94SldLiESaYaJx2lGIlD9bbVoHQYhdBBMRAgAdBQJH
rJTPBQkNMFioBQsHCgMEAxUDAgMWAgECF4AACgkQjHGNO1By4fV0KgCgsLpG2wP0
rc3s07Fync9g7MfairMAoIUefSNKrGTsTxvLeyH4DLzJW/QFiHsEMBECADsFAkJ3
NfU0HQBPb3BzLi4uIHNob3VsZCBoYXZlIGJlZW4gbG9jYWwhIEknbSAqc28qIHN0
dXBpZC4uLgAKCRA5yiv0PWqKX+9HAJ0WjTx/rqgouK4QCrOV/2IOU+jMQQCfYSC8
JgsIIeN8aiyuStTdYrk0VWCIjwQwEQIATwUCRW8Av0gdAFNob3VsZCBoYXZlIGJl
ZW4gYSBsb2NhbCBzaWduYXR1cmUsIG9yIHNvbWV0aGluZyAtIFdURiB3YXMgSSB0
aGlua2luZz8ACgkQOcor9D1qil+g+wCfcFWoo5qUl4XTE9K8tH3Q+xGWeYYAnjii
KxjtOXc0ls+BlqXxbfZ9uqBsiQIiBBABAgAMBQJBgcuFBYMGItkHAAoJEKrj5s5m
oURoqC8QAIISudocbJRhrTAROOPoMsReyp46Jdp3iL1oFDGcPfkZSBwWh8L+cJjh
dycIwwSeZ1D2h9S5Tc4EnoE0khsS6wBpuAuih5s//coRqIIiLKEdhTmNqulkCH5m
imCzc5zXWZDW0hpLr2InGsZMuh2QCwAkB4RTBM+r18cUXMLV4YHKyjIVaDhsiPP/
MKUj6rJNsUDmDq1GiJdOjySjtCFjYADlQYSD7zcd1vpqQLThnZBESvEoCqumEfOP
xemNU6xAB0CL+pUpB40pE6Un6Krr5h6yZxYZ/N5vzt0Y3B5UUMkgYDSpjbulNvaU
TFiOxEU3gJvXc1+h0BsxM7FwBZnuMA8LEA+UdQb76YcyuFBcROhmcEUTiducLu84
E2BZ2NSBdymRQKSinhvXsEWlH6Txm1gtJLynYsvPi4B4JxKbb+awnFPusL8W+gfz
jbygeKdyqzYgKj3M79R3geaY7Q75Kxl1UogiOKcbI5VZvg47OQCWeeERnejqEAdx
EQiwGA/ARhVOP/1l0LQA7jg2P1xTtrBqqC2ufDB+v+jhXaCXxstKSW1lTbv/b0d6
454UaOUV7RisN39pE2zFvJvY7bwfiwbUJVmYLm4rWJAEOJLIDtDRtt2h8JahDObm
3CWkpadjw57S5v1c/mn+xV9yTgVx5YUfC/788L1HNKXfeVDq8zbAiQIiBBMBAgAM
BQJCnwocBYMFBZpwAAoJENjCCglaJFfPIT4P/25zvPp8ixqV85igs3rRqMBtBsj+
5EoEW6DJnlGhoi26yf1nasC2frVasWG7i4JIm0U3WfLZERGDjR/nqlOCEqsP5gS3
43N7r4UpDkBsYh0WxH/ZtST5llFK3zd7XgtxvqKL98l/OSgijH2W2SJ9DGpjtO+T
iegq7igtJzw7Vax9z/LQH2xhRQKZR9yernwMSYaJ72i9SyWbK3k0+e95fGnlR5pF
zlGq320rYHgD7v9yoQ2t1klsAxK6e3b7Z+RiJG6cAU8o8F0kGxjWzF4v8D1op7S+
IoRdB0Bap01ko0KLyt3+g4/33/2UxsW50BtfqcvYNJvU4bZns1YSqAgDOOanBhg8
Ip5XPlDxH6J/3997n5JNj/nk5ojfd8nYfe/5TjflWNiput6tZ7frEki1wl6pTNbv
V9C1eLUJMSXfDZyHtUXmiP9DKNpsucCUeBKWRKLqnsHLkLYydsIeUJ8+ciKc+EWh
FxEY+Ml72cXAaz5BuW9L8KHNzZZfez/ZJabiARQpFfjOwAnmhzJ9r++TEKRLEr96
taUI9/8nVPvT6LnBpcM38Td6dJ639YvuH3ilAqmPPw50YvglIEe4BUYD5r52Seqc
8XQowouGOuBX4vs7zgWFuYA/s9ebfGaIw+uJd/56Xl9ll6q5CghqB/yt1EceFEnF
CAjQc2SeRo6qzx22uQINBD4+ox0QCADv4Yl/Fsx1jjCyU+eMf2sXg3ap9awQ3+XF
pmglhzdrozTZYKceXpqFPb+0ErbDVAjhgW15HjuAK+2Bvo7Ukd986jYd8uZENGJG
N3UNMIep7JfsIeFyCGP901GVbZnSXlAURyZX1TRWGndoV9YLhSN+zctT6GQBbMTv
NoPlwf0nvK//rG5lXDjXXHSHhSqxNxYy7SIzUHMQupfUNjsvCg8Rv871GRt/h+Yt
7XUTMhoJrg+oBFdBlzh2FKKcy3ordfgGtGwpN+jMG7vgXjsPwiVt/m9Jgdu4Tmn/
WggPOeSD+nyRb7cXG5avJxyKoVNw3PbXnLJff0tcWeUvMpRv8XkbAAMFB/4vCqpr
wIatF+w4AnGKbrcId+3LmZRzmtRKdOyUZgQg4JHUF5Bq7I9ls8OwMP0xnVlpJp9q
cW/AUbouXH3GRTu3Or68ouhaSbi7nF/e+fnlWOdJ3VpD15CdRxeIvhycEahNs5Yj
f0RzLOCyXMF0L74w+NxBNwDunolRWw/qgAHcVBaDni25SjQRzxuwzxvcS/jYua5B
Pk10ocbAexdM+2XSSWThtCTg5qMeyLLUExqGlPbuNaMmUyIlz4hYnSaCGQoe33bq
z/KZ91/keR1DVzK+zPm2vJUjcXHvxd5Jh9C+67CqnYfXf2lcYSSDSfop1Q5611la
F7vRgY0/DXKNYlPUiEwEGBECAAwFAkeslPwFCQ0wWN8ACgkQjHGNO1By4fWlzgCf
Qj3rkfcljYZOuLOn50J7PFuF7FoAnjwWGhwVi9+Fm2B5RZvpo++BBkdP
=Xquv
-----END PGP PUBLIC KEY BLOCK-----

</pre><p>
        To import the build key into your personal public GPG keyring,
        use <span><strong class="command">gpg --import</strong></span>. For example, if you have
        saved the key in a file named
        <code class="filename">mysql_pubkey.asc</code>, the import command looks
        like this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gpg --import mysql_pubkey.asc</code></strong>
gpg: key 5072E1F5: public key "MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;" imported
gpg: Total number processed: 1
gpg:               imported: 1
gpg: no ultimately trusted keys found
</pre><p>
        You can also download the key from the public keyserver using
        the public key id, <code class="literal">5072E1F5</code>:
      </p><pre class="programlisting">shell&gt; gpg --recv-keys 5072E1F5
gpg: requesting key 5072E1F5 from hkp server subkeys.pgp.net
gpg: key 5072E1F5: "MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;" 2 new signatures
gpg: no ultimately trusted keys found
gpg: Total number processed: 1
gpg:         new signatures: 2
</pre><p>
        If you want to import the key into your RPM configuration to
        validate RPM install packages, you should be able to import the
        key directly:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm --import mysql_pubkey.asc</code></strong></pre><p>
        If you experience problems, try exporting the key from
        <span><strong class="command">gpg</strong></span> and importing:
      </p><pre class="programlisting">shell&gt; gpg --export -a 5072e1f5 &gt; 5072e1f5.asc
shell&gt; rpm --import 5072e1f5.asc</pre><p>
        Alternatively, <span><strong class="command">rpm</strong></span> also supports loading the
        key directly from a URL, and you cas use this manual page:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm --import http://dev.mysql.com/doc/refman/5.0/en/checking-gpg-signature.html</code></strong></pre><p>
        After you have downloaded and imported the public build key,
        download your desired MySQL package and the corresponding
        signature, which also is available from the download page. The
        signature file has the same name as the distribution file with
        an <code class="filename">.asc</code> extension, as shown by the examples
        in the following table.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Distribution file</td><td><code class="literal">mysql-standard-5.0.86-linux-i686.tar.gz</code></td></tr><tr><td>Signature file</td><td><code class="literal">mysql-standard-5.0.86-linux-i686.tar.gz.asc</code></td></tr></tbody></table></div><p>
        Make sure that both files are stored in the same directory and
        then run the following command to verify the signature for the
        distribution file:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gpg --verify <em class="replaceable"><code>package_name</code></em>.asc</code></strong>
</pre><p>
        Example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gpg --verify mysql-standard-5.0.86-linux-i686.tar.gz.asc</code></strong>
gpg: Signature made Tue 12 Jul 2005 23:35:41 EST using DSA key ID 5072E1F5
gpg: Good signature from "MySQL Package signing key (www.mysql.com) &lt;build@mysql.com&gt;"
</pre><p>
        The <code class="literal">Good signature</code> message indicates that
        everything is all right. You can ignore any <code class="literal">insecure
        memory</code> warning you might obtain.
      </p><p>
        See the GPG documentation for more information on how to work
        with public keys.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="checking-rpm-signature"></a>2.6.3. Signature Checking Using <code class="literal">RPM</code></h3></div></div></div><p>
        For RPM packages, there is no separate signature. RPM packages
        have a built-in GPG signature and MD5 checksum. You can verify a
        package by running the following command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm --checksig <em class="replaceable"><code>package_name</code></em>.rpm</code></strong>
</pre><p>
        Example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm --checksig MySQL-server-5.0.86-0.glibc23.i386.rpm</code></strong>
MySQL-server-5.0.86-0.glibc23.i386.rpm: md5 gpg OK
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are using RPM 4.1 and it shows the error
          <span class="errortext">(GPG) NOT OK (MISSING KEYS:
          GPG#5072e1f5)</span> even though you have imported the
          MySQL public build key into your own GPG keyring, you need to
          import the key into the RPM keyring first. RPM 4.1 no longer
          uses your personal GPG keyring (or GPG itself). Rather, it
          maintains its own keyring because it is a system-wide
          application and a user's GPG public keyring is a user-specific
          file. To import the MySQL public key into the RPM keyring,
          first obtain the key as described in
          <a href="installing.html#checking-gpg-signature" title="2.6.2. Signature Checking Using GnuPG">Section 2.6.2, “Signature Checking Using <code class="literal">GnuPG</code>”</a>. Then use
          <span><strong class="command">rpm --import</strong></span> to import the key. For
          example, if you have saved the public key in a file named
          <code class="filename">mysql_pubkey.asc</code>, import it using this
          command:
        </p></div><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm --import mysql_pubkey.asc</code></strong>
</pre><p>
        If you need to obtain the MySQL public key, see
        <a href="installing.html#checking-gpg-signature" title="2.6.2. Signature Checking Using GnuPG">Section 2.6.2, “Signature Checking Using <code class="literal">GnuPG</code>”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation-layouts"></a>2.7. Installation Layouts</h2></div></div></div><a class="indexterm" name="id1667710"></a><a class="indexterm" name="id1667719"></a><a class="indexterm" name="id1667728"></a><a class="indexterm" name="id1667740"></a><p>
      This section describes the default layout of the directories
      created by installing binary or source distributions provided by
      Sun Microsystems, Inc. A distribution provided by another vendor
      might use a layout different from those shown here.
    </p><p>
      For MySQL 5.0 on Windows, the default installation
      directory is <code class="filename">C:\Program Files\MySQL\MySQL Server
      5.0</code>. (Some Windows users prefer to install
      in <code class="filename">C:\mysql</code>, the directory that formerly was
      used as the default. However, the layout of the subdirectories
      remains the same.) The installation directory has the following
      subdirectories:
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Directory</strong></span></td><td><span class="bold"><strong>Contents</strong></span></td></tr><tr><td><code class="filename">bin</code></td><td>Client programs and the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server</td></tr><tr><td><code class="filename">data</code></td><td>Log files, databases</td></tr><tr><td><code class="filename">Docs</code></td><td>Manual in CHM format</td></tr><tr><td><code class="filename">examples</code></td><td>Example programs and scripts</td></tr><tr><td><code class="filename">include</code></td><td>Include (header) files</td></tr><tr><td><code class="filename">lib</code></td><td>Libraries</td></tr><tr><td><code class="filename">scripts</code></td><td>Utility scripts</td></tr><tr><td><code class="filename">share</code></td><td>Error message files</td></tr></tbody></table></div><p>
      Installations created from our Linux RPM distributions result in
      files under the following system directories:
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Directory</strong></span></td><td><span class="bold"><strong>Contents</strong></span></td></tr><tr><td><code class="filename">/usr/bin</code></td><td>Client programs and scripts</td></tr><tr><td><code class="filename">/usr/sbin</code></td><td>The <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server</td></tr><tr><td><code class="filename">/var/lib/mysql</code></td><td>Log files, databases</td></tr><tr><td><code class="filename">/usr/share/info</code></td><td>Manual in Info format</td></tr><tr><td><code class="filename">/usr/share/man</code></td><td>Unix man pages</td></tr><tr><td><code class="filename">/usr/include/mysql</code></td><td>Include (header) files</td></tr><tr><td><code class="filename">/usr/lib/mysql</code></td><td>Libraries</td></tr><tr><td><code class="filename">/usr/share/mysql</code></td><td>Error message and character set files</td></tr><tr><td><code class="filename">/usr/share/sql-bench</code></td><td>Benchmarks</td></tr></tbody></table></div><p>
      On Unix, a <span><strong class="command">tar</strong></span> file binary distribution is
      installed by unpacking it at the installation location you choose
      (typically <code class="filename">/usr/local/mysql</code>) and creates the
      following directories in that location:
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Directory</strong></span></td><td><span class="bold"><strong>Contents</strong></span></td></tr><tr><td><code class="filename">bin</code></td><td>Client programs and the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server</td></tr><tr><td><code class="filename">data</code></td><td>Log files, databases</td></tr><tr><td><code class="filename">docs</code></td><td>Manual in Info format</td></tr><tr><td><code class="filename">man</code></td><td>Unix manual pages</td></tr><tr><td><code class="filename">include</code></td><td>Include (header) files</td></tr><tr><td><code class="filename">lib</code></td><td>Libraries</td></tr><tr><td><code class="filename">scripts</code></td><td><a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a></td></tr><tr><td><code class="filename">share/mysql</code></td><td>Error message files</td></tr><tr><td><code class="filename">sql-bench</code></td><td>Benchmarks</td></tr></tbody></table></div><p>
      A source distribution is installed after you configure and compile
      it. By default, the installation step installs files under
      <code class="filename">/usr/local</code>, in the following subdirectories:
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Directory</strong></span></td><td><span class="bold"><strong>Contents</strong></span></td></tr><tr><td><code class="filename">bin</code></td><td>Client programs and scripts</td></tr><tr><td><code class="filename">include/mysql</code></td><td>Include (header) files</td></tr><tr><td><code class="filename">Docs</code></td><td>Manual in Info, CHM formats</td></tr><tr><td><code class="filename">man</code></td><td>Unix manual pages</td></tr><tr><td><code class="filename">lib/mysql</code></td><td>Libraries</td></tr><tr><td><code class="filename">libexec</code></td><td>The <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server</td></tr><tr><td><code class="filename">share/mysql</code></td><td>Error message files</td></tr><tr><td><code class="filename">sql-bench</code></td><td>Benchmarks and <code class="literal">crash-me</code> test</td></tr><tr><td><code class="filename">var</code></td><td>Databases and log files</td></tr></tbody></table></div><p>
      Within its installation directory, the layout of a source
      installation differs from that of a binary installation in the
      following ways:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server is installed in the
          <code class="filename">libexec</code> directory rather than in the
          <code class="filename">bin</code> directory.
        </p></li><li><p>
          The data directory is <code class="filename">var</code> rather than
          <code class="filename">data</code>.
        </p></li><li><p>
          <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> is installed in the
          <code class="filename">bin</code> directory rather than in the
          <code class="filename">scripts</code> directory.
        </p></li><li><p>
          The header file and library directories are
          <code class="filename">include/mysql</code> and
          <code class="filename">lib/mysql</code> rather than
          <code class="filename">include</code> and <code class="filename">lib</code>.
        </p></li></ul></div><p>
      You can create your own binary installation from a compiled source
      distribution by executing the
      <code class="filename">scripts/make_binary_distribution</code> script from
      the top directory of the source distribution.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quick-standard-installation"></a>2.8. Standard MySQL Installation Using a Binary Distribution</h2></div></div></div><p>
      The next several sections cover the installation of MySQL on
      platforms where we offer packages using the native packaging
      format of the respective platform. (This is also known as
      performing a binary installation.) However, binary distributions
      of MySQL are available for many other platforms as well. See
      <a href="installing.html#installing-binary" title="2.15. Installing MySQL from tar.gz Packages on Other
      Unix-Like Systems">Section 2.15, “Installing MySQL from <code class="filename">tar.gz</code> Packages on Other
      Unix-Like Systems”</a>, for generic installation
      instructions for these packages that apply to all platforms.
    </p><p>
      See <a href="installing.html#installing-cs" title="2.4. Notes for MySQL Community Server">Section 2.4, “Notes for MySQL Community Server”</a>, for more information on what
      other binary distributions are available and how to obtain them.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="windows-installation"></a>2.9. Installing MySQL on Windows</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#windows-choosing-package">2.9.1. Choosing An Installation Package</a></span></dt><dt><span class="section"><a href="installing.html#windows-using-installer">2.9.2. Installing MySQL with the Automated Installer</a></span></dt><dt><span class="section"><a href="installing.html#windows-install-wizard">2.9.3. Using the MySQL Installation Wizard</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard">2.9.4. MySQL Server Instance Configuration Wizard</a></span></dt><dt><span class="section"><a href="installing.html#windows-install-archive">2.9.5. Installing MySQL from a Noinstall Zip Archive</a></span></dt><dt><span class="section"><a href="installing.html#windows-extract-archive">2.9.6. Extracting the Install Archive</a></span></dt><dt><span class="section"><a href="installing.html#windows-create-option-file">2.9.7. Creating an Option File</a></span></dt><dt><span class="section"><a href="installing.html#windows-select-server">2.9.8. Selecting a MySQL Server Type</a></span></dt><dt><span class="section"><a href="installing.html#windows-server-first-start">2.9.9. Starting the Server for the First Time</a></span></dt><dt><span class="section"><a href="installing.html#windows-start-command-line">2.9.10. Starting MySQL from the Windows Command Line</a></span></dt><dt><span class="section"><a href="installing.html#windows-start-service">2.9.11. Starting MySQL as a Windows Service</a></span></dt><dt><span class="section"><a href="installing.html#windows-testing">2.9.12. Testing The MySQL Installation</a></span></dt><dt><span class="section"><a href="installing.html#windows-troubleshooting">2.9.13. Troubleshooting a MySQL Installation Under Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-upgrading">2.9.14. Upgrading MySQL on Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-vs-unix">2.9.15. MySQL on Windows Compared to MySQL on Unix</a></span></dt></dl></div><p>
      A native Windows distribution of MySQL has been available since
      version 3.21 and represents a sizable percentage of the daily
      downloads of MySQL. This section describes the process for
      installing MySQL on Windows.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you are upgrading MySQL from an existing installation older
        than MySQL 4.1.5, you must first perform the procedure described
        in <a href="installing.html#windows-upgrading" title="2.9.14. Upgrading MySQL on Windows">Section 2.9.14, “Upgrading MySQL on Windows”</a>.
      </p></div><p>
      To run MySQL on Windows, you need the following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A Windows operating system such as 2000, XP, Vista, or Windows
          Server 2003. Only 32-bit and 64-bit versions of Windows 2000
          and later are supported. Windows 95/98/ME and versions of
          Windows older than these are no longer supported.
        </p><p>
          A Windows operating system permits you to run the MySQL server
          as a service. See <a href="installing.html#windows-start-service" title="2.9.11. Starting MySQL as a Windows Service">Section 2.9.11, “Starting MySQL as a Windows Service”</a>.
        </p><p>
          Generally, you should install MySQL on Windows using an
          account that has administrator rights. Otherwise, you may
          encounter problems with certain operations such as editing the
          <code class="literal">PATH</code> environment variable or accessing the
          <span><strong class="command">Service Control Manager</strong></span>.
        </p></li><li><p>
          TCP/IP protocol support.
        </p></li><li><p>
          Enough space on the hard drive to unpack, install, and create
          the databases in accordance with your requirements (generally
          a minimum of 200 megabytes is recommended.)
        </p></li></ul></div><p>
      For a list of limitations within the Windows version of MySQL, see
      <a href="restrictions.html#limits-windows" title="D.7.3. Windows Platform Limitations">Section D.7.3, “Windows Platform Limitations”</a>.
    </p><p>
      There may also be other requirements, depending on how you plan to
      use MySQL:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you plan to connect to the MySQL server via ODBC, you need
          a Connector/ODBC driver. See
          <a href="connectors-apis.html" title="Chapter 20. Connectors and APIs">Chapter 20, <i>Connectors and APIs</i></a>.
        </p></li><li><p>
          If you need tables with a size larger than 4GB, install MySQL
          on an NTFS or newer file system. Don't forget to use
          <code class="literal">MAX_ROWS</code> and
          <code class="literal">AVG_ROW_LENGTH</code> when you create tables. See
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
        </p></li></ul></div><p>
      MySQL for Windows is available in several distribution formats:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Binary distributions are available that contain a setup
          program that installs everything you need so that you can
          start the server immediately. Another binary distribution
          format contains an archive that you simply unpack in the
          installation location and then configure yourself. For
          details, see <a href="installing.html#windows-choosing-package" title="2.9.1. Choosing An Installation Package">Section 2.9.1, “Choosing An Installation Package”</a>.
        </p></li><li><p>
          The source distribution contains all the code and support
          files for building the executables using the Visual Studio
          compiler system.
        </p></li></ul></div><p>
      Generally speaking, you should use a binary distribution that
      includes an installer. It is simpler to use than the others, and
      you need no additional tools to get MySQL up and running. The
      installer for the Windows version of MySQL, combined with a GUI
      Configuration Wizard, automatically installs MySQL, creates an
      option file, starts the server, and secures the default user
      accounts.
    </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
        Using virus scanning software such as Norton/Symantec Anti-Virus
        on directories containing MySQL data and temporary tables can
        cause issues, both in terms of the performance of MySQL and the
        virus-scanning software mis-identifying the contents of the
        files as containing spam. This is because of the fingerprinting
        mechanism used by the virus scanning software, and the way in
        which MySQL rapidly updates different files, which may be
        identified as a potential security risk.
      </p><p>
        After installing MySQL Server, it is recommended that you
        disable virus scanning on the main directory
        (<a href="server-administration.html#sysvar_datadir"><code class="literal">datadir</code></a>) being used to store
        your MySQL table data. There is usually a system built into the
        virus scanning software to allow certain directories to be
        specifically ignored during virus scanning.
      </p><p>
        In addition, by default, MySQL creates temporary files in the
        standard Windows temporary directory. To prevent the temporary
        files also being scanned, you should configure a separate
        temporary directory for MySQL temporary files and add this to
        the virus scanning exclusion list. To do this, add a
        configuration option for the
        <a href="server-administration.html#option_mysqld_tmpdir"><code class="option">tmpdir</code></a> parameter to your
        <code class="filename">my.ini</code> configuration file. For more
        information, see <a href="installing.html#windows-create-option-file" title="2.9.7. Creating an Option File">Section 2.9.7, “Creating an Option File”</a>.
      </p></div><p>
      The following section describes how to install MySQL on Windows
      using a binary distribution. To use an installation package that
      does not include an installer, follow the procedure described in
      <a href="installing.html#windows-install-archive" title="2.9.5. Installing MySQL from a Noinstall Zip Archive">Section 2.9.5, “Installing MySQL from a Noinstall Zip Archive”</a>. To install using a
      source distribution, see <a href="installing.html#windows-source-build" title="2.16.6. Installing MySQL from Source on Windows">Section 2.16.6, “Installing MySQL from Source on Windows”</a>.
    </p><p>
      MySQL distributions for Windows can be downloaded from
      <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>. See
      <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-choosing-package"></a>2.9.1. Choosing An Installation Package</h3></div></div></div><p>
        For MySQL 5.0, there are three installation
        packages to choose from when installing MySQL on Windows:
      </p><div class="itemizedlist"><ul type="disc"><li><p><b>The Essentials package. </b>
              This package has a file name similar to
              <code class="filename">mysql-essential-5.0.86-win32.msi</code>
              and contains the minimum set of files needed to install
              MySQL on Windows, including the Configuration Wizard. This
              package does not include optional components such as the
              embedded server and benchmark suite.
            </p></li><li><p><b>The Complete package. </b>
              This package has a file name similar to
              <code class="filename">mysql-5.0.86-win32.zip</code> and
              contains all files needed for a complete Windows
              installation, including the Configuration Wizard. This
              package includes optional components such as the embedded
              server and benchmark suite.
            </p></li><li><p><b>The no-install archive. </b>
              This package has a file name similar to
              <code class="filename">mysql-noinstall-5.0.86-win32.zip</code>
              and contains all the files found in the Complete install
              package, with the exception of the Configuration Wizard.
              This package does not include an automated installer, and
              must be manually installed and configured.
            </p></li></ul></div><p>
        The Essentials package is recommended for most users. It is
        provided as an <code class="filename">.msi</code> file for use with the
        Windows Installer. The Complete and Noinstall distributions are
        packaged as Zip archives. To use them, you must have a tool that
        can unpack <code class="filename">.zip</code> files.
      </p><p>
        Your choice of install package affects the installation process
        you must follow. If you choose to install either the Essentials
        or Complete install packages, see
        <a href="installing.html#windows-using-installer" title="2.9.2. Installing MySQL with the Automated Installer">Section 2.9.2, “Installing MySQL with the Automated Installer”</a>. If you choose to
        install MySQL from the Noinstall archive, see
        <a href="installing.html#windows-install-archive" title="2.9.5. Installing MySQL from a Noinstall Zip Archive">Section 2.9.5, “Installing MySQL from a Noinstall Zip Archive”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-using-installer"></a>2.9.2. Installing MySQL with the Automated Installer</h3></div></div></div><p>
        New MySQL users can use the MySQL Installation Wizard and MySQL
        Configuration Wizard to install MySQL on Windows. These are
        designed to install and configure MySQL in such a way that new
        users can immediately get started using MySQL.
      </p><p>
        The MySQL Installation Wizard and MySQL Configuration Wizard are
        available in the Essentials and Complete install packages. They
        are recommended for most standard MySQL installations.
        Exceptions include users who need to install multiple instances
        of MySQL on a single server host and advanced users who want
        complete control of server configuration.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-install-wizard"></a>2.9.3. Using the MySQL Installation Wizard</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#mysql-install-wizard-starting">2.9.3.1. Downloading and Starting the MySQL Installation Wizard</a></span></dt><dt><span class="section"><a href="installing.html#mysql-install-wizard-install-type">2.9.3.2. Choosing an Installation Type</a></span></dt><dt><span class="section"><a href="installing.html#mysql-install-wizard-custom-install">2.9.3.3. The Custom Installation Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-install-wizard-confirmation-dialog">2.9.3.4. The Confirmation Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-install-wizard-changes">2.9.3.5. Changes Made by MySQL Installation Wizard</a></span></dt><dt><span class="section"><a href="installing.html#mysql-install-wizard-upgrading">2.9.3.6. Upgrading MySQL with the Installation Wizard</a></span></dt></dl></div><p>
        MySQL Installation Wizard is an installer for the MySQL server
        that uses the latest installer technologies for Microsoft
        Windows. The MySQL Installation Wizard, in combination with the
        MySQL Configuration Wizard, allows a user to install and
        configure a MySQL server that is ready for use immediately after
        installation.
      </p><p>
        The MySQL Installation Wizard is the standard installer for all
        MySQL server distributions, version 4.1.5 and higher. Users of
        previous versions of MySQL need to shut down and remove their
        existing MySQL installations manually before installing MySQL
        with the MySQL Installation Wizard. See
        <a href="installing.html#mysql-install-wizard-upgrading" title="2.9.3.6. Upgrading MySQL with the Installation Wizard">Section 2.9.3.6, “Upgrading MySQL with the Installation Wizard”</a>, for more
        information on upgrading from a previous version.
      </p><p>
        The Microsoft Windows Installer (MSI) is the standard for
        application installations on Windows 2000 and later versions.
        The MySQL Installation Wizard makes use of this technology to
        provide a smoother and more flexible installation process.
      </p><p>
        The Microsoft Windows Installer Engine was updated with the
        release of Windows XP; those using a previous version of Windows
        can reference
        <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;292539" target="_top">this
        Microsoft Knowledge Base article</a> for information on
        upgrading to the latest version of the Windows Installer Engine.
      </p><p>
        In addition, Microsoft has introduced the WiX (Windows Installer
        XML) toolkit, which is the first highly acknowledged Open Source
        project from Microsoft. We have switched to WiX because it is an
        Open Source project and it allows us to handle the complete
        Windows installation process in a flexible manner using scripts.
      </p><p>
        Improving the MySQL Installation Wizard depends on the support
        and feedback of users. If you find that the MySQL Installation
        Wizard is lacking some feature important to you, or if you
        discover a bug, please report it in our bugs database using the
        instructions given in <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-starting"></a>2.9.3.1. Downloading and Starting the MySQL Installation Wizard</h4></div></div></div><p>
          MySQL installation packages can be downloaded from
          <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>. If the package you
          download is contained within a Zip archive, you need to
          extract the archive first.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If you are installing on Windows Vista it is best to open a
            network port for MySQL to use before beginning the
            installation. To do this, first ensure that you are logged
            in as an Administrator, then go to the <code class="literal">Control
            Panel</code> and double-click the <code class="literal">Windows
            Firewall</code> icon. Choose the <code class="literal">Allow a program
            through Windows Firewall</code> option and click the
            <span class="guibutton">Add port</span> button. Enter
            <code class="literal">MySQL</code> into the <span class="guilabel">Name</span>
            text box and <code class="literal">3306</code> (or other port of your
            choice) into the <span class="guilabel">Port number</span> text box.
            Also ensure that the <span class="guilabel">TCP</span> protocol radio
            button is selected. If you wish, you can also limit access
            to the MySQL server by choosing the <span class="guilabel">Change
            scope</span> button. Confirm your choices by clicking
            the <span class="guibutton">OK</span> button. If you do not open a
            port prior to installation, you cannot configure the MySQL
            server immediately after installation. Additionally, when
            running the MySQL Installation Wizard on Windows Vista,
            ensure that you are logged in as a user with administrative
            rights.
          </p></div><p>
          The process for starting the wizard depends on the contents of
          the installation package you download. If there is a
          <code class="filename">setup.exe</code> file present, double-click it
          to start the installation process. If there is an
          <code class="filename">.msi</code> file present, double-click it to
          start the installation process.
        </p><div class="mediaobject"><img src="images/mysql-es-win32-fig1.png" width="507" height="382" alt="MySQL Installer Main Screen
            (Windows)"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-install-type"></a>2.9.3.2. Choosing an Installation Type</h4></div></div></div><p>
          There are three installation types available:
          <span class="bold"><strong>Typical</strong></span>,
          <span class="bold"><strong>Complete</strong></span>, and
          <span class="bold"><strong>Custom</strong></span>.
        </p><div class="mediaobject"><img src="images/mysql-es-win32-fig2.png" width="507" height="383" alt="MySQL Installer Setup type
            (Windows)"></div><p>
          The <span class="bold"><strong>Typical</strong></span> installation type
          installs the MySQL server, the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>
          command-line client, and the command-line utilities. The
          command-line clients and utilities include
          <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>, <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a>,
          and several other tools to help you manage the MySQL server.
        </p><p>
          The <span class="bold"><strong>Complete</strong></span> installation
          type installs all components included in the installation
          package. The full installation package includes components
          such as the embedded server library, the benchmark suite,
          support scripts, and documentation.
        </p><p>
          The <span class="bold"><strong>Custom</strong></span> installation type
          gives you complete control over which packages you wish to
          install and the installation path that is used. See
          <a href="installing.html#mysql-install-wizard-custom-install" title="2.9.3.3. The Custom Installation Dialog">Section 2.9.3.3, “The Custom Installation Dialog”</a>, for
          more information on performing a custom install.
        </p><p>
          If you choose the <span class="bold"><strong>Typical</strong></span> or
          <span class="bold"><strong>Complete</strong></span> installation types
          and click the <span class="guibutton">Next</span> button, you advance
          to the confirmation screen to verify your choices and begin
          the installation. If you choose the
          <span class="bold"><strong>Custom</strong></span> installation type and
          click the <span class="guibutton">Next</span> button, you advance to
          the custom installation dialog, described in
          <a href="installing.html#mysql-install-wizard-custom-install" title="2.9.3.3. The Custom Installation Dialog">Section 2.9.3.3, “The Custom Installation Dialog”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-custom-install"></a>2.9.3.3. The Custom Installation Dialog</h4></div></div></div><p>
          If you wish to change the installation path or the specific
          components that are installed by the MySQL Installation
          Wizard, choose the <span class="bold"><strong>Custom</strong></span>
          installation type.
        </p><div class="mediaobject"><img src="images/mysql-es-win32-fig3.png" width="513" height="388" alt="MySQL Installer Custom Installation
            (Windows)"></div><p>
          A tree view on the left side of the custom install dialog
          lists all available components. Components that are not
          installed have a red <span class="guiicon">X</span> icon; components
          that are installed have a gray icon. To change whether a
          component is installed, click on that component's icon and
          choose a new option from the drop-down list that appears.
        </p><p>
          You can change the default installation path by clicking the
          <span class="guibutton">Change...</span> button to the right of the
          displayed installation path.
        </p><p>
          After choosing your installation components and installation
          path, click the <span class="guibutton">Next</span> button to advance
          to the confirmation dialog.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-confirmation-dialog"></a>2.9.3.4. The Confirmation Dialog</h4></div></div></div><p>
          Once you choose an installation type and optionally choose
          your installation components, you advance to the confirmation
          dialog. Your installation type and installation path are
          displayed for you to review.
        </p><div class="mediaobject"><img src="images/mysql-es-win32-fig4.png" width="508" height="387" alt="MySQL Installer Installation Summary
            (Windows)"></div><p>
          To install MySQL if you are satisfied with your settings,
          click the <span class="guibutton">Install</span> button. To change
          your settings, click the <span class="guibutton">Back</span> button.
          To exit the MySQL Installation Wizard without installing
          MySQL, click the <span class="guibutton">Cancel</span> button.
        </p><p>
          After installation is complete, you have the option of
          registering with the MySQL web site. Registration gives you
          access to post in the MySQL forums at
          <a href="http://forums.mysql.com" target="_top">forums.mysql.com</a>,
          along with the ability to report bugs at
          <a href="http://bugs.mysql.com" target="_top">bugs.mysql.com</a> and
          to subscribe to our newsletter. The final screen of the
          installer provides a summary of the installation and gives you
          the option to launch the MySQL Configuration Wizard, which you
          can use to create a configuration file, install the MySQL
          service, and configure security settings.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-changes"></a>2.9.3.5. Changes Made by MySQL Installation Wizard</h4></div></div></div><p>
          Once you click the <span class="guibutton">Install</span> button, the
          MySQL Installation Wizard begins the installation process and
          makes certain changes to your system which are described in
          the sections that follow.
        </p><p>
          <span class="bold"><strong>Changes to the Registry</strong></span>
        </p><p>
          The MySQL Installation Wizard creates one Windows registry key
          in a typical install situation, located in
          <code class="literal">HKEY_LOCAL_MACHINE\SOFTWARE\MySQL AB</code>.
        </p><p>
          The MySQL Installation Wizard creates a key named after the
          major version of the server that is being installed, such as
          <code class="literal">MySQL Server 5.0</code>. It contains
          two string values, <code class="literal">Location</code> and
          <code class="literal">Version</code>. The <code class="literal">Location</code>
          string contains the path to the installation directory. In a
          default installation it contains <code class="literal">C:\Program
          Files\MySQL\MySQL Server 5.0\</code>. The
          <code class="literal">Version</code> string contains the release number.
          For example, for an installation of MySQL Server
          5.0.86, the key contains a value of
          <code class="literal">5.0.86</code>.
        </p><p>
          These registry keys are used to help external tools identify
          the installed location of the MySQL server, preventing a
          complete scan of the hard-disk to determine the installation
          path of the MySQL server. The registry keys are not required
          to run the server, and if you install MySQL using the
          <code class="literal">noinstall</code> Zip archive, the registry keys
          are not created.
        </p><p>
          <span class="bold"><strong>Changes to the Start Menu</strong></span>
        </p><p>
          The MySQL Installation Wizard creates a new entry in the
          Windows <span class="guimenu">Start</span> menu under a common MySQL
          menu heading named after the major version of MySQL that you
          have installed. For example, if you install MySQL
          5.0, the MySQL Installation Wizard creates a
          <span class="guisubmenu">MySQL Server 5.0</span> section
          in the <span class="guimenu">Start</span> menu.
        </p><p>
          The following entries are created within the new
          <span class="guimenu">Start</span> menu section:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guimenuitem">MySQL Command Line Client</span>: This
              is a shortcut to the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command-line
              client and is configured to connect as the
              <code class="literal">root</code> user. The shortcut prompts for a
              <code class="literal">root</code> user password when you connect.
            </p></li><li><p>
              <span class="guimenuitem">MySQL Server Instance Config
              Wizard</span>: This is a shortcut to the MySQL
              Configuration Wizard. Use this shortcut to configure a
              newly installed server, or to reconfigure an existing
              server.
            </p></li><li><p>
              <span class="guimenuitem">MySQL Documentation</span>: This is a
              link to the MySQL server documentation that is stored
              locally in the MySQL server installation directory. This
              option is not available when the MySQL server is installed
              using the Essentials installation package.
            </p></li></ul></div><p>
          <span class="bold"><strong>Changes to the File System</strong></span>
        </p><p>
          The MySQL Installation Wizard by default installs the MySQL
          5.0 server to <code class="filename">C:\<em class="replaceable"><code>Program
          Files</code></em>\MySQL\MySQL Server
          <em class="replaceable"><code>5.0</code></em></code>, where
          <em class="replaceable"><code>Program Files</code></em> is the default
          location for applications in your system, and
          <em class="replaceable"><code>5.0</code></em> is the major
          version of your MySQL server. This is the recommended location
          for the MySQL server, replacing the former default location
          <code class="filename">C:\mysql</code>.
        </p><p>
          By default, all MySQL applications are stored in a common
          directory at <code class="filename">C:\<em class="replaceable"><code>Program
          Files</code></em>\MySQL</code>, where
          <em class="replaceable"><code>Program Files</code></em> is the default
          location for applications in your Windows installation. A
          typical MySQL installation on a developer machine might look
          like this:
        </p><pre class="programlisting">C:\Program Files\MySQL\MySQL Server 5.0
C:\Program Files\MySQL\MySQL Workbench 5.1 OSS
</pre><p>
          This approach makes it easier to manage and maintain all MySQL
          applications installed on a particular system.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-wizard-upgrading"></a>2.9.3.6. Upgrading MySQL with the Installation Wizard</h4></div></div></div><p>
          The MySQL Installation Wizard can perform server upgrades
          automatically using the upgrade capabilities of MSI. That
          means you do not need to remove a previous installation
          manually before installing a new release. The installer
          automatically shuts down and removes the previous MySQL
          service before installing the new version.
        </p><p>
          Automatic upgrades are available only when upgrading between
          installations that have the same major and minor version
          numbers. For example, you can upgrade automatically from MySQL
          4.1.5 to MySQL 4.1.6, but not from MySQL 4.1 to
          MySQL 5.0.
        </p><p>
          See <a href="installing.html#windows-upgrading" title="2.9.14. Upgrading MySQL on Windows">Section 2.9.14, “Upgrading MySQL on Windows”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-config-wizard"></a>2.9.4. MySQL Server Instance Configuration Wizard</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#mysql-config-wizard-starting">2.9.4.1. Starting the MySQL Server Instance Configuration Wizard</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-maintenance">2.9.4.2. Choosing a Maintenance Option</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-configuration-type">2.9.4.3. Choosing a Configuration Type</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-server-type">2.9.4.4. The Server Type Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-database-usage">2.9.4.5. The Database Usage Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-tablespace">2.9.4.6. The InnoDB Tablespace Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-connections">2.9.4.7. The Concurrent Connections Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-networking">2.9.4.8. The Networking and Strict Mode Options Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-character-set">2.9.4.9. The Character Set Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-service">2.9.4.10. The Service Options Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-security">2.9.4.11. The Security Options Dialog</a></span></dt><dt><span class="section"><a href="installing.html#mysql-config-wizard-confirmation">2.9.4.12. The Confirmation Dialog</a></span></dt></dl></div><p>
        The MySQL Server Instance Configuration Wizard helps automate
        the process of configuring your server. It creates a custom
        MySQL configuration file (<code class="filename">my.ini</code> or
        <code class="filename">my.cnf</code>) by asking you a series of questions
        and then applying your responses to a template to generate the
        configuration file that is tuned to your installation.
      </p><p>
        The MySQL Server Instance Configuration Wizard is included with
        the MySQL 5.0 server. The MySQL Server Instance
        Configuration Wizard is only available for Windows.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-starting"></a>2.9.4.1. Starting the MySQL Server Instance Configuration Wizard</h4></div></div></div><p>
          The MySQL Server Instance Configuration Wizard is normally
          started as part of the installation process. You should only
          need to run the MySQL Server Instance Configuration Wizard
          again when you need to change the configuration parameters of
          your server.
        </p><p>
          If you chose not to open a port prior to installing MySQL on
          Windows Vista, you can choose to use the MySQL Server
          Configuration Wizard after installation. However, you must
          open a port in the Windows Firewall. To do this see the
          instructions given in
          <a href="installing.html#mysql-install-wizard-starting" title="2.9.3.1. Downloading and Starting the MySQL Installation Wizard">Section 2.9.3.1, “Downloading and Starting the MySQL Installation Wizard”</a>. Rather than
          opening a port, you also have the option of adding MySQL as a
          program that bypasses the Windows Firewall. One or the other
          option is sufficient — you need not do both.
          Additionally, when running the MySQL Server Configuration
          Wizard on Windows Vista ensure that you are logged in as a
          user with administrative rights.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig1.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard"></div><p>
          You can launch the MySQL Configuration Wizard by clicking the
          <span class="guimenuitem">MySQL Server Instance Config Wizard</span>
          entry in the <span class="guisubmenu">MySQL</span> section of the
          Windows <span class="guimenu">Start</span> menu.
        </p><p>
          Alternatively, you can navigate to the
          <code class="filename">bin</code> directory of your MySQL installation
          and launch the <code class="filename">MySQLInstanceConfig.exe</code>
          file directly.
        </p><p>
          The MySQL Server Instance Configuration Wizard places the
          <code class="filename">my.ini</code> file in the installation directory
          for the MySQL server. This helps associate configuration files
          with particular server instances.
        </p><p>
          To ensure that the MySQL server knows where to look for the
          <code class="filename">my.ini</code> file, an argument similar to this
          is passed to the MySQL server as part of the service
          installation:
        </p><pre class="programlisting">--defaults-file="<em class="replaceable"><code>C:\Program Files\MySQL\MySQL Server 5.0</code></em>\my.ini"
</pre><p>
          Here, <em class="replaceable"><code>C:\Program Files\MySQL\MySQL Server
          5.0</code></em> is replaced with the
          installation path to the MySQL Server. The
          <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> option
          instructs the MySQL server to read the specified file for
          configuration options when it starts.
        </p><p>
          Apart from making changes to the <code class="filename">my.ini</code>
          file by running the MySQL Server Instance Configuration Wizard
          again, you can modify it by opening it with a text editor and
          making any necessary changes. You can also modify the server
          configuration with the
          <a href="http://www.mysql.com/products/administrator/" target="_top">MySQL
          Administrator</a> utility. For more information about
          server configuration, see <a href="server-administration.html#server-options" title="5.1.2. Server Command Options">Section 5.1.2, “Server Command Options”</a>.
        </p><p>
          MySQL clients and utilities such as the
          <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> and <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>
          command-line clients are not able to locate the
          <code class="filename">my.ini</code> file located in the server
          installation directory. To configure the client and utility
          applications, create a new <code class="filename">my.ini</code> file in
          the Windows installation directory (for example,
          <code class="filename">C:\WINDOWS</code>).
        </p><p>
          

          Under Windows Server 2003, Windows Server 2000 and Windows XP,
          MySQL Server Instance Configuration Wizard will configure
          MySQL to work as a Windows service. To start and stop MySQL
          you use the <code class="filename">Services</code> application that is
          supplied as part of the Windows Administrator Tools.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-maintenance"></a>2.9.4.2. Choosing a Maintenance Option</h4></div></div></div><p>
          If the MySQL Server Instance Configuration Wizard detects an
          existing configuration file, you have the option of either
          reconfiguring your existing server, or removing the server
          instance by deleting the configuration file and stopping and
          removing the MySQL service.
        </p><p>
          To reconfigure an existing server, choose the
          <span class="guimenuitem">Re-configure Instance</span> option and
          click the <span class="guibutton">Next</span> button. Any existing
          configuration file is not overwritten, but renamed (within the
          same directory) using a timestamp (Windows) or sequential
          number (Linux). To remove the existing server instance, choose
          the <span class="guimenuitem">Remove Instance</span> option and
          click the <span class="guibutton">Next</span> button.
        </p><p>
          If you choose the <span class="guimenuitem">Remove Instance</span>
          option, you advance to a confirmation window. Click the
          <span class="guibutton">Execute</span> button. The MySQL Server
          Configuration Wizard stops and removes the MySQL service, and
          then deletes the configuration file. The server installation
          and its <code class="filename">data</code> folder are not removed.
        </p><p>
          If you choose the <span class="guimenuitem">Re-configure
          Instance</span> option, you advance to the
          <span class="guimenu">Configuration Type</span> dialog where you can
          choose the type of installation that you wish to configure.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-configuration-type"></a>2.9.4.3. Choosing a Configuration Type</h4></div></div></div><p>
          When you start the MySQL Server Instance Configuration Wizard
          for a new MySQL installation, or choose the
          <span class="guimenuitem">Re-configure Instance</span> option for an
          existing installation, you advance to the
          <span class="guimenu">Configuration Type</span> dialog.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig2.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Configuration Type"></div><p>
          There are two configuration types available:
          <span class="guimenuitem">Detailed Configuration</span> and
          <span class="guimenuitem">Standard Configuration</span>. The
          <span class="guimenuitem">Standard Configuration</span> option is
          intended for new users who want to get started with MySQL
          quickly without having to make many decisions about server
          configuration. The <span class="guimenuitem">Detailed
          Configuration</span> option is intended for advanced
          users who want more fine-grained control over server
          configuration.
        </p><p>
          If you are new to MySQL and need a server configured as a
          single-user developer machine, the <span class="guimenuitem">Standard
          Configuration</span> should suit your needs. Choosing
          the <span class="guimenuitem">Standard Configuration</span> option
          causes the MySQL Configuration Wizard to set all configuration
          options automatically with the exception of
          <span class="guimenuitem">Service Options</span> and
          <span class="guimenuitem">Security Options</span>.
        </p><p>
          The <span class="guimenuitem">Standard Configuration</span> sets
          options that may be incompatible with systems where there are
          existing MySQL installations. If you have an existing MySQL
          installation on your system in addition to the installation
          you wish to configure, the <span class="guimenuitem">Detailed
          Configuration</span> option is recommended.
        </p><p>
          To complete the <span class="guimenuitem">Standard
          Configuration</span>, please refer to the sections on
          <span class="guimenuitem">Service Options</span> and
          <span class="guimenuitem">Security Options</span> in
          <a href="installing.html#mysql-config-wizard-service" title="2.9.4.10. The Service Options Dialog">Section 2.9.4.10, “The Service Options Dialog”</a>, and
          <a href="installing.html#mysql-config-wizard-security" title="2.9.4.11. The Security Options Dialog">Section 2.9.4.11, “The Security Options Dialog”</a>, respectively.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-server-type"></a>2.9.4.4. The Server Type Dialog</h4></div></div></div><p>
          There are three different server types available to choose
          from. The server type that you choose affects the decisions
          that the MySQL Server Instance Configuration Wizard makes with
          regard to memory, disk, and processor usage.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig3.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Server Type"></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guimenuitem">Developer Machine</span>: Choose this
              option for a typical desktop workstation where MySQL is
              intended only for personal use. It is assumed that many
              other desktop applications are running. The MySQL server
              is configured to use minimal system resources.
            </p></li><li><p>
              <span class="guimenuitem">Server Machine</span>: Choose this
              option for a server machine where the MySQL server is
              running alongside other server applications such as FTP,
              email, and Web servers. The MySQL server is configured to
              use a moderate portion of the system resources.
            </p></li><li><p>
              <span class="guimenuitem">Dedicated MySQL Server Machine</span>:
              Choose this option for a server machine that is intended
              to run only the MySQL server. It is assumed that no other
              applications are running. The MySQL server is configured
              to use all available system resources.
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            By selecting one of the preconfigured configurations, the
            values and settings of various options in your
            <code class="filename">my.cnf</code> or <code class="filename">my.ini</code>
            will be altered accordingly. The default values and options
            as described in the reference manual may therefore be
            different to the options and values that were created during
            the execution of the configuration wizard.
          </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-database-usage"></a>2.9.4.5. The Database Usage Dialog</h4></div></div></div><p>
          The <span class="guimenu">Database Usage</span> dialog allows you to
          indicate the storage engines that you expect to use when
          creating MySQL tables. The option you choose determines
          whether the <code class="literal">InnoDB</code> storage engine is
          available and what percentage of the server resources are
          available to <code class="literal">InnoDB</code>.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig4.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Usage Dialog"></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guimenuitem">Multifunctional Database</span>: This
              option enables both the <code class="literal">InnoDB</code> and
              <code class="literal">MyISAM</code> storage engines and divides
              resources evenly between the two. This option is
              recommended for users who use both storage engines on a
              regular basis.
            </p></li><li><p>
              <span class="guimenuitem">Transactional Database Only</span>:
              This option enables both the <code class="literal">InnoDB</code> and
              <code class="literal">MyISAM</code> storage engines, but dedicates
              most server resources to the <code class="literal">InnoDB</code>
              storage engine. This option is recommended for users who
              use <code class="literal">InnoDB</code> almost exclusively and make
              only minimal use of <code class="literal">MyISAM</code>.
            </p></li><li><p>
              <span class="guimenuitem">Non-Transactional Database
              Only</span>: This option disables the
              <code class="literal">InnoDB</code> storage engine completely and
              dedicates all server resources to the
              <code class="literal">MyISAM</code> storage engine. This option is
              recommended for users who do not use
              <code class="literal">InnoDB</code>.
            </p></li></ul></div><p>
          The Configuration Wizard uses a template to generate the
          server configuration file. The <span class="guimenu">Database
          Usage</span> dialog sets one of the following option
          strings:
        </p><pre class="programlisting">Multifunctional Database:        MIXED
Transactional Database Only:     INNODB
Non-Transactional Database Only: MYISAM
</pre><p>
          When these options are processed through the default template
          (my-template.ini) the result is:
        </p><pre class="programlisting">Multifunctional Database:
default-storage-engine=InnoDB
_myisam_pct=50

Transactional Database Only:
default-storage-engine=InnoDB
_myisam_pct=5

Non-Transactional Database Only:
default-storage-engine=MyISAM
_myisam_pct=100
skip-innodb
</pre><p>
          The <code class="literal">_myisam_pct</code> value is used to calculate
          the percentage of resources dedicated to
          <code class="literal">MyISAM</code>. The remaining resources are
          allocated to <code class="literal">InnoDB</code>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-tablespace"></a>2.9.4.6. The InnoDB Tablespace Dialog</h4></div></div></div><p>
          Some users may want to locate the <code class="literal">InnoDB</code>
          tablespace files in a different location than the MySQL server
          data directory. Placing the tablespace files in a separate
          location can be desirable if your system has a higher capacity
          or higher performance storage device available, such as a RAID
          storage system.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig5.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: InnoDB Data Tablespace"></div><p>
          To change the default location for the
          <code class="literal">InnoDB</code> tablespace files, choose a new drive
          from the drop-down list of drive letters and choose a new path
          from the drop-down list of paths. To create a custom path,
          click the <span class="guibutton">...</span> button.
        </p><p>
          If you are modifying the configuration of an existing server,
          you must click the <span class="guibutton">Modify</span> button before
          you change the path. In this situation you must move the
          existing tablespace files to the new location manually before
          starting the server.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-connections"></a>2.9.4.7. The Concurrent Connections Dialog</h4></div></div></div><p>
          To prevent the server from running out of resources, it is
          important to limit the number of concurrent connections to the
          MySQL server that can be established. The <span class="guimenu">Concurrent
          Connections</span> dialog allows you to choose the expected
          usage of your server, and sets the limit for concurrent
          connections accordingly. It is also possible to set the
          concurrent connection limit manually.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig6.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Connections"></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guimenuitem">Decision Support (DSS)/OLAP</span>:
              Choose this option if your server does not require a large
              number of concurrent connections. The maximum number of
              connections is set at 100, with an average of 20
              concurrent connections assumed.
            </p></li><li><p>
              <span class="guimenuitem">Online Transaction Processing
              (OLTP)</span>: Choose this option if your server
              requires a large number of concurrent connections. The
              maximum number of connections is set at 500.
            </p></li><li><p>
              <span class="guimenuitem">Manual Setting</span>: Choose this
              option to set the maximum number of concurrent connections
              to the server manually. Choose the number of concurrent
              connections from the drop-down box provided, or enter the
              maximum number of connections into the drop-down box if
              the number you desire is not listed.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-networking"></a>2.9.4.8. The Networking and Strict Mode Options Dialog</h4></div></div></div><p>
          Use the <span class="guimenu">Networking Options</span> dialog to enable
          or disable TCP/IP networking and to configure the port number
          that is used to connect to the MySQL server.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig7.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Network Configuration"></div><p>
          TCP/IP networking is enabled by default. To disable TCP/IP
          networking, uncheck the box next to the <span class="guimenuitem">Enable
          TCP/IP Networking</span> option.
        </p><p>
          Port 3306 is used by default. To change the port used to
          access MySQL, choose a new port number from the drop-down box
          or type a new port number directly into the drop-down box. If
          the port number you choose is in use, you are prompted to
          confirm your choice of port number.
        </p><p>
          Set the <span class="guimenu">Server SQL Mode</span> to either enable or
          disable strict mode. Enabling strict mode (default) makes
          MySQL behave more like other database management systems.
          <span class="emphasis"><em>If you run applications that rely on MySQL's old
          “<span class="quote">forgiving</span>” behavior, make sure to either adapt
          those applications or to disable strict mode.</em></span> For
          more information about strict mode, see
          <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-character-set"></a>2.9.4.9. The Character Set Dialog</h4></div></div></div><p>
          The MySQL server supports multiple character sets and it is
          possible to set a default server character set that is applied
          to all tables, columns, and databases unless overridden. Use
          the <span class="guimenu">Character Set</span> dialog to change the
          default character set of the MySQL server.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig8.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Character Set"></div><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="guimenuitem">Standard Character Set</span>: Choose
              this option if you want to use <code class="literal">latin1</code>
              as the default server character set.
              <code class="literal">latin1</code> is used for English and many
              Western European languages.
            </p></li><li><p>
              <span class="guimenuitem">Best Support For
              Multilingualism</span>: Choose this option if you
              want to use <code class="literal">utf8</code> as the default server
              character set. This is a Unicode character set that can
              store characters from many different languages.
            </p></li><li><p>
              <span class="guimenuitem">Manual Selected Default Character Set /
              Collation</span>: Choose this option if you want to
              pick the server's default character set manually. Choose
              the desired character set from the provided drop-down
              list.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-service"></a>2.9.4.10. The Service Options Dialog</h4></div></div></div><p>
          On Windows platforms, the MySQL server can be installed as a
          Windows service. When installed this way, the MySQL server can
          be started automatically during system startup, and even
          restarted automatically by Windows in the event of a service
          failure.
        </p><p>
          The MySQL Server Instance Configuration Wizard installs the
          MySQL server as a service by default, using the service name
          <code class="literal">MySQL</code>. If you do not wish to install the
          service, uncheck the box next to the <span class="guimenuitem">Install As
          Windows Service</span> option. You can change the
          service name by picking a new service name from the drop-down
          box provided or by entering a new service name into the
          drop-down box.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Service names can include any legal character except forward
            (<code class="literal">/</code>) or backward (<code class="literal">\</code>)
            slashes, and must be less than 256 characters long.
          </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            If you are installing multiple versions of MySQL onto the
            same machine, you <span class="emphasis"><em>must</em></span> choose a
            different service name for each version that you install. If
            you do not choose a different service for each installed
            version then the service manager information will be
            inconsistent and this will cause problems when you try to
            uninstall a previous version.
          </p><p>
            If you have already installed multiple versions using the
            same service name, you must manually edit the contents of
            the
            <code class="literal">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services</code>
            parameters within the Windows registry to update the
            association of the service name with the correct server
            version.
          </p><p>
            Typically, when installing multiple versions you create a
            service name based on the version information. For example,
            you might install MySQL 5.x as <code class="literal">mysql5</code>, or
            specific versions such as MySQL 5.0.56 as
            <code class="literal">mysql50056</code>.
          </p></div><p>
          To install the MySQL server as a service but not have it
          started automatically at startup, uncheck the box next to the
          <span class="guimenuitem">Launch the MySQL Server
          Automatically</span> option.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-security"></a>2.9.4.11. The Security Options Dialog</h4></div></div></div><p>
          <span class="emphasis"><em>It is strongly recommended that you set a
          <code class="literal">root</code> password for your MySQL
          server</em></span>, and the MySQL Server Instance Configuration
          Wizard requires by default that you do so. If you do not wish
          to set a <code class="literal">root</code> password, uncheck the box
          next to the <span class="guimenuitem">Modify Security
          Settings</span> option.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig9.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Security"></div><p>
          To set the <code class="literal">root</code> password, enter the desired
          password into both the <span class="guimenuitem">New root
          password</span> and <span class="guimenuitem">Confirm</span>
          boxes. If you are reconfiguring an existing server, you need
          to enter the existing <code class="literal">root</code> password into
          the <span class="guimenuitem">Current root password</span> box.
        </p><p>
          To allow <code class="literal">root</code> logins from across the
          network, check the box next to the <span class="guimenuitem">Enable root
          access from remote machines</span> option. This
          decreases the security of your <code class="literal">root</code>
          account.
        </p><p>
          To create an anonymous user account, check the box next to the
          <span class="guimenuitem">Create An Anonymous Account</span> option.
          Creating an anonymous account can decrease server security and
          cause login and permission difficulties. For this reason, it
          is not recommended.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-config-wizard-confirmation"></a>2.9.4.12. The Confirmation Dialog</h4></div></div></div><p>
          The final dialog in the MySQL Server Instance Configuration
          Wizard is the <span class="guimenu">Confirmation Dialog</span>. To start
          the configuration process, click the
          <span class="guibutton">Execute</span> button. To return to a previous
          dialog, click the <span class="guibutton">Back</span> button. To exit
          the MySQL Server Instance Configuration Wizard without
          configuring the server, click the
          <span class="guibutton">Cancel</span> button.
        </p><div class="mediaobject"><img src="images/mysql-cfg-fig10.png" width="584" height="466" alt="MySQL Server Instance Configuration
            Wizard: Confirmation"></div><p>
          After you click the <span class="guibutton">Execute</span> button, the
          MySQL Server Instance Configuration Wizard performs a series
          of tasks and displays the progress onscreen as the tasks are
          performed.
        </p><p>
          The MySQL Server Instance Configuration Wizard first
          determines configuration file options based on your choices
          using a template prepared by MySQL developers and engineers.
          This template is named <code class="filename">my-template.ini</code>
          and is located in your server installation directory.
        </p><p>
          The MySQL Configuration Wizard then writes these options to
          the corresponding configuration file.
        </p><p>
          If you chose to create a service for the MySQL server, the
          MySQL Server Instance Configuration Wizard creates and starts
          the service. If you are reconfiguring an existing service, the
          MySQL Server Instance Configuration Wizard restarts the
          service to apply your configuration changes.
        </p><p>
          If you chose to set a <code class="literal">root</code> password, the
          MySQL Configuration Wizard connects to the server, sets your
          new <code class="literal">root</code> password, and applies any other
          security settings you may have selected.
        </p><p>
          After the MySQL Server Instance Configuration Wizard has
          completed its tasks, it displays a summary. Click the
          <span class="guibutton">Finish</span> button to exit the MySQL Server
          Configuration Wizard.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-install-archive"></a>2.9.5. Installing MySQL from a Noinstall Zip Archive</h3></div></div></div><p>
        Users who are installing from the Noinstall package can use the
        instructions in this section to manually install MySQL. The
        process for installing MySQL from a Zip archive is as follows:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Extract the archive to the desired install directory
          </p></li><li><p>
            Create an option file
          </p></li><li><p>
            Choose a MySQL server type
          </p></li><li><p>
            Start the MySQL server
          </p></li><li><p>
            Secure the default user accounts
          </p></li></ol></div><p>
        This process is described in the sections that follow.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-extract-archive"></a>2.9.6. Extracting the Install Archive</h3></div></div></div><p>
        To install MySQL manually, do the following:
      </p><div class="orderedlist"><ol type="1"><li><p>
            If you are upgrading from a previous version please refer to
            <a href="installing.html#windows-upgrading" title="2.9.14. Upgrading MySQL on Windows">Section 2.9.14, “Upgrading MySQL on Windows”</a>, before beginning the
            upgrade process.
          </p></li><li><p>
            Make sure that you are logged in as a user with
            administrator privileges.
          </p></li><li><p>
            Choose an installation location. Traditionally, the MySQL
            server is installed in <code class="filename">C:\mysql</code>. The
            MySQL Installation Wizard installs MySQL under
            <code class="filename">C:\Program Files\MySQL</code>. If you do not
            install MySQL at <code class="filename">C:\mysql</code>, you must
            specify the path to the install directory during startup or
            in an option file. See
            <a href="installing.html#windows-create-option-file" title="2.9.7. Creating an Option File">Section 2.9.7, “Creating an Option File”</a>.
          </p></li><li><p>
            Extract the install archive to the chosen installation
            location using your preferred Zip archive tool. Some tools
            may extract the archive to a folder within your chosen
            installation location. If this occurs, you can move the
            contents of the subfolder into the chosen installation
            location.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-create-option-file"></a>2.9.7. Creating an Option File</h3></div></div></div><p>
        If you need to specify startup options when you run the server,
        you can indicate them on the command line or place them in an
        option file. For options that are used every time the server
        starts, you may find it most convenient to use an option file to
        specify your MySQL configuration. This is particularly true
        under the following circumstances:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The installation or data directory locations are different
            from the default locations (<code class="filename">C:\Program
            Files\MySQL\MySQL Server 5.0</code> and
            <code class="filename">C:\Program Files\MySQL\MySQL Server
            5.0\data</code>).
          </p></li><li><p>
            You need to tune the server settings.
          </p></li></ul></div><p>
        When the MySQL server starts on Windows, it looks for options in
        two files: the <code class="filename">my.ini</code> file in the Windows
        directory, and the <code class="filename">C:\my.cnf</code> file. The
        Windows directory typically is named something like
        <code class="filename">C:\WINDOWS</code>. You can determine its exact
        location from the value of the <code class="literal">WINDIR</code>
        environment variable using the following command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>echo %WINDIR%</code></strong>
</pre><p>
        MySQL looks for options first in the <code class="filename">my.ini</code>
        file, and then in the <code class="filename">my.cnf</code> file. However,
        to avoid confusion, it is best if you use only one file. If your
        PC uses a boot loader where <code class="filename">C:</code> is not the
        boot drive, your only option is to use the
        <code class="filename">my.ini</code> file. Whichever option file you use,
        it must be a plain text file.
      </p><p>
        You can also make use of the example option files included with
        your MySQL distribution; see
        <a href="programs.html#option-files-preconfigured" title="4.2.3.3.2. Preconfigured Option Files">Section 4.2.3.3.2, “Preconfigured Option Files”</a>.
      </p><p>
        An option file can be created and modified with any text editor,
        such as Notepad. For example, if MySQL is installed in
        <code class="filename">E:\mysql</code> and the data directory is in
        <code class="filename">E:\mydata\data</code>, you can create an option
        file containing a <code class="literal">[mysqld]</code> section to specify
        values for the <code class="option">basedir</code> and
        <code class="option">datadir</code> options:
      </p><pre class="programlisting">[mysqld]
# set basedir to your installation path
basedir=E:/mysql
# set datadir to the location of your data directory
datadir=E:/mydata/data
</pre><p>
        Note that Windows path names are specified in option files using
        (forward) slashes rather than backslashes. If you do use
        backslashes, you must double them:
      </p><pre class="programlisting">[mysqld]
# set basedir to your installation path
basedir=E:\\mysql
# set datadir to the location of your data directory
datadir=E:\\mydata\\data
</pre><p>
        On Windows, the MySQL installer places the data directory
        directly under the directory where you install MySQL. If you
        would like to use a data directory in a different location, you
        should copy the entire contents of the <code class="filename">data</code>
        directory to the new location. For example, if MySQL is
        installed in <code class="filename">C:\Program Files\MySQL\MySQL Server
        5.0</code>, the data directory is by default in
        <code class="filename">C:\Program Files\MySQL\MySQL Server
        5.0\data</code>. If you want to use
        <code class="filename">E:\mydata</code> as the data directory instead,
        you must do two things:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Move the entire <code class="filename">data</code> directory and all
            of its contents from <code class="filename">C:\Program Files\MySQL\MySQL
            Server 5.0\data</code> to
            <code class="filename">E:\mydata</code>.
          </p></li><li><p>
            Use a <a href="server-administration.html#option_mysqld_datadir"><code class="option">--datadir</code></a> option to
            specify the new data directory location each time you start
            the server.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-select-server"></a>2.9.8. Selecting a MySQL Server Type</h3></div></div></div><p>
        The following table shows the available servers for Windows in
        MySQL 5.0.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Binary</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-nt</strong></span></a></td><td>Optimized binary with named-pipe support</td></tr><tr><td><a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a></td><td>Optimized binary without named-pipe support</td></tr><tr><td><a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-debug</strong></span></a></td><td>Like <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-nt</strong></span></a>, but compiled with full debugging and
                automatic memory allocation checking</td></tr></tbody></table></div><p>
        All of the preceding binaries are optimized for modern Intel
        processors, but should work on any Intel i386-class or higher
        processor.
      </p><p>
        Each of the servers in a distribution support the same set of
        storage engines. The <a href="sql-syntax.html#show-engines" title="12.5.5.13. SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a>
        statement displays which engines a given server supports.
      </p><p>
        All Windows MySQL 5.0 servers have support for
        symbolic linking of database directories.
      </p><a class="indexterm" name="id1671998"></a><a class="indexterm" name="id1672007"></a><p>
        MySQL supports TCP/IP on all Windows platforms. MySQL servers on
        Windows support named pipes as indicated in the following list.
        However, the default is to use TCP/IP regardless of platform.
        (Named pipes are slower than TCP/IP in many Windows
        configurations.)
      </p><p>
        Use of named pipes is subject to these conditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Named pipes are enabled only if you start the server with
            the <a href="server-administration.html#option_mysqld_enable-named-pipe"><code class="option">--enable-named-pipe</code></a>
            option. It is necessary to use this option explicitly
            because some users have experienced problems with shutting
            down the MySQL server when named pipes were used.
          </p></li><li><p>
            Named-pipe connections are allowed only by the
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-nt</strong></span></a> and
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-debug</strong></span></a> servers.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Most of the examples in this manual use
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> as the server name. If you choose to
          use a different server, such as <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld-nt</strong></span></a>,
          make the appropriate substitutions in the commands that are
          shown in the examples.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-server-first-start"></a>2.9.9. Starting the Server for the First Time</h3></div></div></div><p>
        This section gives a general overview of starting the MySQL
        server. The following sections provide more specific information
        for starting the MySQL server from the command line or as a
        Windows service.
      </p><p>
        The information here applies primarily if you installed MySQL
        using the <code class="literal">Noinstall</code> version, or if you wish
        to configure and test MySQL manually rather than with the GUI
        tools.
      </p><p>
        The examples in these sections assume that MySQL is installed
        under the default location of <code class="filename">C:\Program
        Files\MySQL\MySQL Server 5.0</code>. Adjust the
        path names shown in the examples if you have MySQL installed in
        a different location.
      </p><p>
        Clients have two options. They can use TCP/IP, or they can use a
        named pipe if the server supports named-pipe connections.
      </p><p>
        MySQL for Windows also supports shared-memory connections if the
        server is started with the
        <a href="server-administration.html#option_mysqld_shared-memory"><code class="option">--shared-memory</code></a> option. Clients
        can connect through shared memory by using the
        <a href="programs.html#option_general_protocol"><code class="option">--protocol=MEMORY</code></a> option.
      </p><p>
        For information about which server binary to run, see
        <a href="installing.html#windows-select-server" title="2.9.8. Selecting a MySQL Server Type">Section 2.9.8, “Selecting a MySQL Server Type”</a>.
      </p><p>
        Testing is best done from a command prompt in a console window
        (or “<span class="quote">DOS window</span>”). In this way you can have the
        server display status messages in the window where they are easy
        to see. If something is wrong with your configuration, these
        messages make it easier for you to identify and fix any
        problems.
      </p><p>
        To start the server, enter this command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld" --console</code></strong>
</pre><p>
        For a server that includes <code class="literal">InnoDB</code> support,
        you should see the messages similar to those following as it
        starts (the path names and sizes may differ):
      </p><pre class="programlisting">InnoDB: The first specified datafile c:\ibdata\ibdata1 did not exist:
InnoDB: a new database to be created!
InnoDB: Setting file c:\ibdata\ibdata1 size to 209715200
InnoDB: Database physically writes the file full: wait...
InnoDB: Log file c:\iblogs\ib_logfile0 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile0 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile1 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile1 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile2 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile2 size to 31457280
InnoDB: Doublewrite buffer not found: creating new
InnoDB: Doublewrite buffer created
InnoDB: creating foreign key constraint system tables
InnoDB: foreign key constraint system tables created
011024 10:58:25  InnoDB: Started
</pre><p>
        When the server finishes its startup sequence, you should see
        something like this, which indicates that the server is ready to
        service client connections:
      </p><pre class="programlisting">mysqld: ready for connections
Version: '5.0.86'  socket: ''  port: 3306
</pre><p>
        The server continues to write to the console any further
        diagnostic output it produces. You can open a new console window
        in which to run client programs.
      </p><p>
        If you omit the <a href="server-administration.html#option_mysqld_console"><code class="option">--console</code></a> option,
        the server writes diagnostic output to the error log in the data
        directory (<code class="filename">C:\Program Files\MySQL\MySQL Server
        5.0\data</code> by default). The error log is
        the file with the <code class="filename">.err</code> extension.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The accounts that are listed in the MySQL grant tables
          initially have no passwords. After starting the server, you
          should set up passwords for them using the instructions in
          <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-start-command-line"></a>2.9.10. Starting MySQL from the Windows Command Line</h3></div></div></div><p>
        The MySQL server can be started manually from the command line.
        This can be done on any version of Windows.
      </p><p>
        To start the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server from the command
        line, you should start a console window (or “<span class="quote">DOS
        window</span>”) and enter this command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld"</code></strong>
</pre><p>
        The path to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> may vary depending on the
        install location of MySQL on your system.
      </p><p>
        You can stop the MySQL server by executing this command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqladmin" -u root shutdown</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the MySQL <code class="literal">root</code> user account has a
          password, you need to invoke <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>
          with the <code class="option">-p</code> option and supply the password
          when prompted.
        </p></div><p>
        This command invokes the MySQL administrative utility
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> to connect to the server and tell
        it to shut down. The command connects as the MySQL
        <code class="literal">root</code> user, which is the default
        administrative account in the MySQL grant system. Note that
        users in the MySQL grant system are wholly independent from any
        login users under Windows.
      </p><p>
        If <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> doesn't start, check the error log
        to see whether the server wrote any messages there to indicate
        the cause of the problem. The error log is located in the
        <code class="filename">C:\Program Files\MySQL\MySQL Server
        5.0\data</code> directory. It is the file with
        a suffix of <code class="filename">.err</code>. You can also try to start
        the server as <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld --console</strong></span></a>; in this case,
        you may get some useful information on the screen that may help
        solve the problem.
      </p><p>
        The last option is to start <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
        <a href="server-administration.html#option_mysqld_standalone"><code class="option">--standalone</code></a> and
        <a href="server-administration.html#option_mysqld_debug"><code class="option">--debug</code></a> options. In this case,
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> writes a log file
        <code class="filename">C:\mysqld.trace</code> that should contain the
        reason why <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> doesn't start. See
        <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
        Internals: Porting</a>.
      </p><p>
        Use <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld --verbose --help</strong></span></a> to display all
        the options that <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> supports.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-start-service"></a>2.9.11. Starting MySQL as a Windows Service</h3></div></div></div><p>
        On Windows, the recommended way to run MySQL is to install it as
        a Windows service, whereby MySQL starts and stops automatically
        when Windows starts and stops. A MySQL server installed as a
        service can also be controlled from the command line using
        <span><strong class="command">NET</strong></span> commands, or with the graphical
        <span><strong class="command">Services</strong></span> utility. Generally, to install MySQL
        as a Windows service you should be logged in using an account
        that has administrator rights.
      </p><p>
        The <span><strong class="command">Services</strong></span> utility (the Windows
        <span><strong class="command">Service Control Manager</strong></span>) can be found in the
        Windows Control Panel (under <span class="guimenuitem">Administrative
        Tools</span> on Windows 2000, XP, Vista, and Server
        2003). To avoid conflicts, it is advisable to close the
        <span><strong class="command">Services</strong></span> utility while performing server
        installation or removal operations from the command line.
      </p><p>
        Before installing MySQL as a Windows service, you should first
        stop the current server if it is running by using the following
        command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqladmin"</code></strong>
          <strong class="userinput"><code>-u root shutdown</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If the MySQL <code class="literal">root</code> user account has a
          password, you need to invoke <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>
          with the <code class="option">-p</code> option and supply the password
          when prompted.
        </p></div><p>
        This command invokes the MySQL administrative utility
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> to connect to the server and tell
        it to shut down. The command connects as the MySQL
        <code class="literal">root</code> user, which is the default
        administrative account in the MySQL grant system. Note that
        users in the MySQL grant system are wholly independent from any
        login users under Windows.
      </p><p>
        Install the server as a service using this command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld" --install</code></strong>
</pre><p>
        The service-installation command does not start the server.
        Instructions for that are given later in this section.
      </p><p>
        To make it easier to invoke MySQL programs, you can add the path
        name of the MySQL <code class="filename">bin</code> directory to your
        Windows system <code class="literal">PATH</code> environment variable:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            On the Windows desktop, right-click on the <span class="guiicon">My
            Computer</span> icon, and select
            <span class="guimenuitem">Properties</span>.
          </p></li><li><p>
            Next select the <span class="guimenuitem">Advanced</span> tab from
            the <span class="guimenu">System Properties</span> menu that appears,
            and click the <span class="guibutton">Environment Variables</span>
            button.
          </p></li><li><p>
            Under <span class="guilabel">System Variables</span>, select
            <span class="guimenuitem">Path</span>, and then click the
            <span class="guibutton">Edit</span> button. The <span class="guimenu">Edit System
            Variable</span> dialogue should appear.
          </p></li><li><p>
            Place your cursor at the end of the text appearing in the
            space marked <span class="guilabel">Variable Value</span>. (Use the
            <span><strong class="keycap">End</strong></span> key to ensure that your cursor is
            positioned at the very end of the text in this space.) Then
            enter the complete path name of your MySQL
            <code class="filename">bin</code> directory (for example,
            <code class="literal">C:\Program Files\MySQL\MySQL Server
            5.0\bin</code>), Note that there should be a
            semicolon separating this path from any values present in
            this field. Dismiss this dialogue, and each dialogue in
            turn, by clicking <span class="guibutton">OK</span> until all of the
            dialogues that were opened have been dismissed. You should
            now be able to invoke any MySQL executable program by typing
            its name at the DOS prompt from any directory on the system,
            without having to supply the path. This includes the
            servers, the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client, and all MySQL
            command-line utilities such as <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>
            and <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>.
          </p><p>
            You should not add the MySQL <code class="filename">bin</code>
            directory to your Windows <code class="literal">PATH</code> if you are
            running multiple MySQL servers on the same machine.
          </p></li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          You must exercise great care when editing your system
          <code class="literal">PATH</code> by hand; accidental deletion or
          modification of any portion of the existing
          <code class="literal">PATH</code> value can leave you with a
          malfunctioning or even unusable system.
        </p></div><p>
        The following additional arguments can be used in MySQL
        5.0 when installing the service:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            You can specify a service name immediately following the
            <code class="option">--install</code> option. The default service name
            is <code class="literal">MySQL</code>.
          </p></li><li><p>
            If a service name is given, it can be followed by a single
            option. By convention, this should be
            <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file=<em class="replaceable"><code>file_name</code></em></code></a>
            to specify the name of an option file from which the server
            should read options when it starts.
          </p><p>
            The use of a single option other than
            <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> is possible
            but discouraged.
            <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> is more
            flexible because it enables you to specify multiple startup
            options for the server by placing them in the named option
            file. Also, in MySQL 5.0, use of an option
            different from
            <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> is not
            supported until 5.0.3.
          </p></li><li><p>
            As of MySQL 5.0.1, you can also specify a
            <code class="option">--local-service</code> option following the
            service name. This causes the server to run using the
            <code class="literal">LocalService</code> Windows account that has
            limited system privileges. This account is available only
            for Windows XP or newer. If both
            <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> and
            <code class="option">--local-service</code> are given following the
            service name, they can be in any order.
          </p></li></ul></div><p>
        For a MySQL server that is installed as a Windows service, the
        following rules determine the service name and option files that
        the server uses:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If the service-installation command specifies no service
            name or the default service name (<code class="literal">MySQL</code>)
            following the <code class="option">--install</code> option, the server
            uses the a service name of <code class="literal">MySQL</code> and
            reads options from the <code class="literal">[mysqld]</code> group in
            the standard option files.
          </p></li><li><p>
            If the service-installation command specifies a service name
            other than <code class="literal">MySQL</code> following the
            <code class="option">--install</code> option, the server uses that
            service name. It reads options from the
            <code class="literal">[mysqld]</code> group and the group that has the
            same name as the service in the standard option files. This
            allows you to use the <code class="literal">[mysqld]</code> group for
            options that should be used by all MySQL services, and an
            option group with the service name for use by the server
            installed with that service name.
          </p></li><li><p>
            If the service-installation command specifies a
            <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> option after
            the service name, the server reads options only from the
            <code class="literal">[mysqld]</code> group of the named file and
            ignores the standard option files.
          </p></li></ul></div><p>
        As a more complex example, consider the following command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld"</code></strong>
          <strong class="userinput"><code>--install MySQL --defaults-file=C:\my-opts.cnf</code></strong>
</pre><p>
        Here, the default service name (<code class="literal">MySQL</code>) is
        given after the <code class="option">--install</code> option. If no
        <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> option had been
        given, this command would have the effect of causing the server
        to read the <code class="literal">[mysqld]</code> group from the standard
        option files. However, because the
        <a href="programs.html#option_general_defaults-file"><code class="option">--defaults-file</code></a> option is
        present, the server reads options from the
        <code class="literal">[mysqld]</code> option group, and only from the
        named file.
      </p><p>
        You can also specify options as Start parameters in the Windows
        <span><strong class="command">Services</strong></span> utility before you start the MySQL
        service.
      </p><p>
        Once a MySQL server has been installed as a service, Windows
        starts the service automatically whenever Windows starts. The
        service also can be started immediately from the
        <span><strong class="command">Services</strong></span> utility, or by using a <span><strong class="command">NET
        START MySQL</strong></span> command. The <span><strong class="command">NET</strong></span>
        command is not case sensitive.
      </p><p>
        When run as a service, <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> has no access
        to a console window, so no messages can be seen there. If
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> does not start, check the error log to
        see whether the server wrote any messages there to indicate the
        cause of the problem. The error log is located in the MySQL data
        directory (for example, <code class="filename">C:\Program Files\MySQL\MySQL
        Server 5.0\data</code>). It is the file with a
        suffix of <code class="filename">.err</code>.
      </p><p>
        When a MySQL server has been installed as a service, and the
        service is running, Windows stops the service automatically when
        Windows shuts down. The server also can be stopped manually by
        using the <code class="literal">Services</code> utility, the <span><strong class="command">NET
        STOP MySQL</strong></span> command, or the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
        shutdown</strong></span></a> command.
      </p><p>
        You also have the choice of installing the server as a manual
        service if you do not wish for the service to be started
        automatically during the boot process. To do this, use the
        <code class="option">--install-manual</code> option rather than the
        <code class="option">--install</code> option:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld" --install-manual</code></strong>
</pre><p>
        To remove a server that is installed as a service, first stop it
        if it is running by executing <span><strong class="command">NET STOP MySQL</strong></span>.
        Then use the <code class="option">--remove</code> option to remove it:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld" --remove</code></strong>
</pre><p>
        If <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is not running as a service, you
        can start it from the command line. For instructions, see
        <a href="installing.html#windows-start-command-line" title="2.9.10. Starting MySQL from the Windows Command Line">Section 2.9.10, “Starting MySQL from the Windows Command Line”</a>.
      </p><p>
        Please see <a href="installing.html#windows-troubleshooting" title="2.9.13. Troubleshooting a MySQL Installation Under Windows">Section 2.9.13, “Troubleshooting a MySQL Installation Under Windows”</a>, if you
        encounter difficulties during installation.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-testing"></a>2.9.12. Testing The MySQL Installation</h3></div></div></div><a class="indexterm" name="id1673254"></a><a class="indexterm" name="id1673263"></a><p>
        You can test whether the MySQL server is working by executing
        any of the following commands:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqlshow"</code></strong>
shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqlshow" -u root mysql</code></strong>
shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqladmin" version status proc</code></strong>
shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysql" test</code></strong>
</pre><p>
        If <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is slow to respond to TCP/IP
        connections from client programs, there is probably a problem
        with your DNS. In this case, start <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
        with the <a href="server-administration.html#option_mysqld_skip-name-resolve"><code class="option">--skip-name-resolve</code></a>
        option and use only <code class="literal">localhost</code> and IP numbers
        in the <code class="literal">Host</code> column of the MySQL grant tables.
      </p><p>
        You can force a MySQL client to use a named-pipe connection
        rather than TCP/IP by specifying the
        <a href="programs.html#option_general_pipe"><code class="option">--pipe</code></a> or
        <a href="programs.html#option_general_protocol"><code class="option">--protocol=PIPE</code></a> option, or by
        specifying <code class="literal">.</code> (period) as the host name. Use
        the <a href="programs.html#option_general_socket"><code class="option">--socket</code></a> option to specify
        the name of the pipe if you do not want to use the default pipe
        name.
      </p><p>
        Note that if you have set a password for the
        <code class="literal">root</code> account, deleted the anonymous account,
        or created a new user account, then you must use the appropriate
        <code class="option">-u</code> and <code class="option">-p</code> options with the
        commands shown above in order to connect with the MySQL Server.
        See <a href="programs.html#connecting" title="4.2.2. Connecting to the MySQL Server">Section 4.2.2, “Connecting to the MySQL Server”</a>.
      </p><p>
        For more information about <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a>, see
        <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information">Section 4.5.6, “<span><strong class="command">mysqlshow</strong></span> — Display Database, Table, and Column Information”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-troubleshooting"></a>2.9.13. Troubleshooting a MySQL Installation Under Windows</h3></div></div></div><p>
        When installing and running MySQL for the first time, you may
        encounter certain errors that prevent the MySQL server from
        starting. The purpose of this section is to help you diagnose
        and correct some of these errors.
      </p><p>
        Your first resource when troubleshooting server issues is the
        error log. The MySQL server uses the error log to record
        information relevant to the error that prevents the server from
        starting. The error log is located in the data directory
        specified in your <code class="filename">my.ini</code> file. The default
        data directory location is <code class="filename">C:\Program
        Files\MySQL\MySQL Server 5.0\data</code>. See
        <a href="server-administration.html#error-log" title="5.2.1. The Error Log">Section 5.2.1, “The Error Log”</a>.
      </p><p>
        Another source of information regarding possible errors is the
        console messages displayed when the MySQL service is starting.
        Use the <span><strong class="command">NET START MySQL</strong></span> command from the
        command line after installing <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> as a
        service to see any error messages regarding the starting of the
        MySQL server as a service. See
        <a href="installing.html#windows-start-service" title="2.9.11. Starting MySQL as a Windows Service">Section 2.9.11, “Starting MySQL as a Windows Service”</a>.
      </p><p>
        The following examples show other common error messages you may
        encounter when installing MySQL and starting the server for the
        first time:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If the MySQL server cannot find the <code class="literal">mysql</code>
            privileges database or other critical files, you may see
            these messages:
          </p><pre class="programlisting">System error 1067 has occurred.
Fatal error: Can't open privilege tables: Table 'mysql.host' doesn't exist
</pre><p>
            These messages often occur when the MySQL base or data
            directories are installed in different locations than the
            default locations (<code class="filename">C:\Program Files\MySQL\MySQL
            Server 5.0</code> and <code class="filename">C:\Program
            Files\MySQL\MySQL Server 5.0\data</code>,
            respectively).
          </p><p>
            This situation may occur when MySQL is upgraded and
            installed to a new location, but the configuration file is
            not updated to reflect the new location. In addition, there
            may be old and new configuration files that conflict. Be
            sure to delete or rename any old configuration files when
            upgrading MySQL.
          </p><p>
            If you have installed MySQL to a directory other than
            <code class="filename">C:\Program Files\MySQL\MySQL Server
            5.0</code>, you need to ensure that the
            MySQL server is aware of this through the use of a
            configuration (<code class="filename">my.ini</code>) file. The
            <code class="filename">my.ini</code> file needs to be located in your
            Windows directory, typically
            <code class="filename">C:\WINDOWS</code>. You can determine its exact
            location from the value of the <code class="literal">WINDIR</code>
            environment variable by issuing the following command from
            the command prompt:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>echo %WINDIR%</code></strong>
</pre><p>
            An option file can be created and modified with any text
            editor, such as Notepad. For example, if MySQL is installed
            in <code class="filename">E:\mysql</code> and the data directory is
            <code class="filename">D:\MySQLdata</code>, you can create the option
            file and set up a <code class="literal">[mysqld]</code> section to
            specify values for the <code class="option">basedir</code> and
            <code class="option">datadir</code> options:
          </p><pre class="programlisting">[mysqld]
# set basedir to your installation path
basedir=E:/mysql
# set datadir to the location of your data directory
datadir=D:/MySQLdata
</pre><p>
            Note that Windows path names are specified in option files
            using (forward) slashes rather than backslashes. If you do
            use backslashes, you must double them:
          </p><pre class="programlisting">[mysqld]
# set basedir to your installation path
basedir=C:\\Program Files\\MySQL\\MySQL Server 5.0
# set datadir to the location of your data directory
datadir=D:\\MySQLdata
</pre><p class="mnmas"><b>MySQL Enterprise</b>
              For expert advice on the start-up options appropriate to
              your circumstances, subscribe to the MySQL Enterprise
              Monitor. For more information, see
              <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
            </p><p>
            If you change the <code class="option">datadir</code> value in your
            MySQL configuration file, you must move the contents of the
            existing MySQL data directory before restarting the MySQL
            server.
          </p><p>
            See <a href="installing.html#windows-create-option-file" title="2.9.7. Creating an Option File">Section 2.9.7, “Creating an Option File”</a>.
          </p></li><li><p>
            If you reinstall or upgrade MySQL without first stopping and
            removing the existing MySQL service and install MySQL using
            the MySQL Configuration Wizard, you may see this error:
          </p><pre class="programlisting">Error: Cannot create Windows service for MySql. Error: 0
</pre><p>
            This occurs when the Configuration Wizard tries to install
            the service and finds an existing service with the same
            name.
          </p><p>
            One solution to this problem is to choose a service name
            other than <code class="literal">mysql</code> when using the
            configuration wizard. This allows the new service to be
            installed correctly, but leaves the outdated service in
            place. Although this is harmless, it is best to remove old
            services that are no longer in use.
          </p><p>
            To permanently remove the old <code class="literal">mysql</code>
            service, execute the following command as a user with
            administrative privileges, on the command-line:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sc delete mysql</code></strong>
[SC] DeleteService SUCCESS
</pre><p>
            If the <code class="literal">sc</code> utility is not available for
            your version of Windows, download the
            <code class="literal">delsrv</code> utility from
            <a href="http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp" target="_top">http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/delsrv-o.asp</a>
            and use the <code class="literal">delsrv mysql</code> syntax.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-upgrading"></a>2.9.14. Upgrading MySQL on Windows</h3></div></div></div><a class="indexterm" name="id1673760"></a><p>
        This section lists some of the steps you should take when
        upgrading MySQL on Windows.
      </p><div class="orderedlist"><ol type="1"><li><p>
            Review <a href="installing.html#upgrade" title="2.18.1. Upgrading MySQL">Section 2.18.1, “Upgrading MySQL”</a>, for additional information
            on upgrading MySQL that is not specific to Windows.
          </p></li><li><p>
            You should always back up your current MySQL installation
            before performing an upgrade. See <a href="backup-and-recovery.html#backup" title="6.1. Database Backups">Section 6.1, “Database Backups”</a>.
          </p></li><li><p>
            Download the latest Windows distribution of MySQL from
            <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>.
          </p></li><li><p>
            Before upgrading MySQL, you must stop the server. If the
            server is installed as a service, stop the service with the
            following command from the command prompt:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>NET STOP MySQL</code></strong>
</pre><p>
            If you are not running the MySQL server as a service, use
            the following command to stop it:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>"C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqladmin" -u root shutdown</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              If the MySQL <code class="literal">root</code> user account has a
              password, you need to invoke <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>
              with the <code class="option">-p</code> option and supply the
              password when prompted.
            </p></div></li><li><p>
            When upgrading to MySQL 5.0 from a version
            previous to 4.1.5, or when upgrading from a version of MySQL
            installed from a Zip archive to a version of MySQL installed
            with the MySQL Installation Wizard, you must manually remove
            the previous installation and MySQL service (if the server
            is installed as a service).
          </p><p>
            To remove the MySQL service, use the following command:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysqld --remove</code></strong>
</pre><p>
            <span class="bold"><strong>If you do not remove the existing
            service, the MySQL Installation Wizard may fail to properly
            install the new MySQL service.</strong></span>
          </p></li><li><p>
            If you are using the MySQL Installation Wizard, start the
            wizard as described in
            <a href="installing.html#windows-install-wizard" title="2.9.3. Using the MySQL Installation Wizard">Section 2.9.3, “Using the MySQL Installation Wizard”</a>.
          </p></li><li><p>
            If you are installing MySQL from a Zip archive, extract the
            archive. You may either overwrite your existing MySQL
            installation (usually located at
            <code class="filename">C:\mysql</code>), or install it into a
            different directory, such as <code class="literal">C:\mysql5</code>.
            Overwriting the existing installation is recommended.
          </p></li><li><p>
            If you were running MySQL as a Windows service and you had
            to remove the service earlier in this procedure, reinstall
            the service. (See <a href="installing.html#windows-start-service" title="2.9.11. Starting MySQL as a Windows Service">Section 2.9.11, “Starting MySQL as a Windows Service”</a>.)
          </p></li><li><p>
            Restart the server. For example, use <span><strong class="command">NET START
            MySQL</strong></span> if you run MySQL as a service, or invoke
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> directly otherwise.
          </p></li><li><p>
            If you encounter errors, see
            <a href="installing.html#windows-troubleshooting" title="2.9.13. Troubleshooting a MySQL Installation Under Windows">Section 2.9.13, “Troubleshooting a MySQL Installation Under Windows”</a>.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-vs-unix"></a>2.9.15. MySQL on Windows Compared to MySQL on Unix</h3></div></div></div><a class="indexterm" name="id1674006"></a><a class="indexterm" name="id1674018"></a><p>
        MySQL for Windows has proven itself to be very stable. The
        Windows version of MySQL has the same features as the
        corresponding Unix version, with the following exceptions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <span class="bold"><strong>Limited number of ports</strong></span>
          </p><p>
            Windows systems have about 4,000 ports available for client
            connections, and after a connection on a port closes, it
            takes two to four minutes before the port can be reused. In
            situations where clients connect to and disconnect from the
            server at a high rate, it is possible for all available
            ports to be used up before closed ports become available
            again. If this happens, the MySQL server appears to be
            unresponsive even though it is running. Note that ports may
            be used by other applications running on the machine as
            well, in which case the number of ports available to MySQL
            is lower.
          </p><p>
            For more information about this problem, see
            <a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;196271" target="_top">http://support.microsoft.com/default.aspx?scid=kb;en-us;196271</a>.
          </p></li><li><p>
            <span class="bold"><strong>Concurrent reads</strong></span>
          </p><p>
            MySQL depends on the <code class="literal">pread()</code> and
            <code class="literal">pwrite()</code> system calls to be able to mix
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> and
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>. Currently, we use
            mutexes to emulate <code class="literal">pread()</code> and
            <code class="literal">pwrite()</code>. We intend to replace the file
            level interface with a virtual interface in the future so
            that we can use the
            <code class="literal">readfile()</code>/<code class="literal">writefile()</code>
            interface to get more speed. The current implementation
            limits the number of open files that MySQL 5.0
            can use to 2,048, which means that you cannot run as many
            concurrent threads on Windows as on Unix.
          </p></li><li><p>
            <span class="bold"><strong>Blocking read</strong></span>
          </p><p>
            MySQL uses a blocking read for each connection. That has the
            following implications if named-pipe connections are
            enabled:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                A connection is not disconnected automatically after
                eight hours, as happens with the Unix version of MySQL.
              </p></li><li><p>
                If a connection hangs, it is not possible to break it
                without killing MySQL.
              </p></li><li><p>
                <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin kill</strong></span></a> does not work on a
                sleeping connection.
              </p></li><li><p>
                <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin shutdown</strong></span></a> cannot abort as
                long as there are sleeping connections.
              </p></li></ul></div><p>
            We plan to fix this problem in the future.
          </p></li><li><p>
            <span class="bold"><strong><a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a></strong></span>
          </p><p>
            While you are executing an <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
            TABLE</code></a> statement, the table is locked from being
            used by other threads. This has to do with the fact that on
            Windows, you can't delete a file that is in use by another
            thread. In the future, we may find some way to work around
            this problem.
          </p></li><li><p>
            <span class="bold"><strong><a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP
            TABLE</code></a></strong></span>
          </p><p>
            

            <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> on a table that is
            in use by a <code class="literal">MERGE</code> table does not work on
            Windows because the <code class="literal">MERGE</code> handler does
            the table mapping hidden from the upper layer of MySQL.
            Because Windows does not allow dropping files that are open,
            you first must flush all <code class="literal">MERGE</code> tables
            (with <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a>) or drop the <code class="literal">MERGE</code> table
            before dropping the table.

            
          </p></li><li><p>
            <span class="bold"><strong><code class="literal">DATA DIRECTORY</code> and
            <code class="literal">INDEX DIRECTORY</code></strong></span>
          </p><p>
            The <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
            DIRECTORY</code> options for <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a> are ignored on Windows, because Windows
            doesn't support symbolic links. These options also are
            ignored on systems that have a nonfunctional
            <code class="literal">realpath()</code> call.
          </p></li><li><p>
            <span class="bold"><strong><a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP
            DATABASE</code></a></strong></span>
          </p><p>
            You cannot drop a database that is in use by some thread.
          </p></li><li><p>
            <span class="bold"><strong>Case-insensitive names</strong></span>
          </p><p>
            File names are not case sensitive on Windows, so MySQL
            database and table names are also not case sensitive on
            Windows. The only restriction is that database and table
            names must be specified using the same case throughout a
            given statement. See
            <a href="language-structure.html#identifier-case-sensitivity" title="8.2.2. Identifier Case Sensitivity">Section 8.2.2, “Identifier Case Sensitivity”</a>.
          </p></li><li><p>
            <span class="bold"><strong>Directory and file names</strong></span>
          </p><p>
            On Windows, MySQL Server supports only directory and file
            names that are compatible with the current ANSI code pages.
            For example, the following Japanese directory name will not
            work in the Western locale (code page 1252):
          </p><pre class="programlisting">datadir="C:/维基百科关于中文维基百科"
</pre><p>
            The same limitation applies to directory and file names
            referred to in SQL statements, such as the data file path
            name in <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
            INFILE</code></a>.
          </p></li><li><p>
            <span class="bold"><strong>The
            “<span class="quote"><code class="literal">\</code></span>” path name separator
            character</strong></span>
          </p><p>
            Path name components in Windows are separated by the
            “<span class="quote"><code class="literal">\</code></span>” character, which is also
            the escape character in MySQL. If you are using
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
            INFILE</code></a> or
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
            OUTFILE</code></a>, use Unix-style file names with
            “<span class="quote"><code class="literal">/</code></span>” characters:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD DATA INFILE 'C:/tmp/skr.txt' INTO TABLE skr;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * INTO OUTFILE 'C:/tmp/skr.txt' FROM skr;</code></strong>
</pre><p>
            Alternatively, you must double the
            “<span class="quote"><code class="literal">\</code></span>” character:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD DATA INFILE 'C:\\tmp\\skr.txt' INTO TABLE skr;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * INTO OUTFILE 'C:\\tmp\\skr.txt' FROM skr;</code></strong>
</pre></li><li><p>
            <span class="bold"><strong>Problems with pipes</strong></span>
          </p><p>
            Pipes do not work reliably from the Windows command-line
            prompt. If the pipe includes the character
            <code class="literal">^Z</code> / <code class="literal">CHAR(24)</code>, Windows
            thinks that it has encountered end-of-file and aborts the
            program.
          </p><p>
            This is mainly a problem when you try to apply a binary log
            as follows:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqlbinlog <em class="replaceable"><code>binary_log_file</code></em> | mysql --user=root</code></strong>
</pre><p>
            If you have a problem applying the log and suspect that it
            is because of a <code class="literal">^Z</code> /
            <code class="literal">CHAR(24)</code> character, you can use the
            following workaround:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqlbinlog <em class="replaceable"><code>binary_log_file</code></em> --result-file=/tmp/bin.sql</code></strong>
shell&gt; <strong class="userinput"><code>mysql --user=root --execute "source /tmp/bin.sql"</code></strong>
</pre><p>
            The latter command also can be used to reliably read in any
            SQL file that may contain binary data.
          </p></li><li><p>
            <span class="bold"><strong><code class="literal">Access denied for
            user</code> error</strong></span>
          </p><p>
            If MySQL cannot resolve your host name properly, you may get
            the following error when you attempt to run a MySQL client
            program to connect to a server running on the same machine:
          </p><pre class="programlisting">Access denied for user '<em class="replaceable"><code>some_user</code></em>'@'unknown'
to database 'mysql'
</pre><p>
            To fix this problem, you should create a file named
            <code class="filename">\windows\hosts</code> containing the following
            information:
          </p><pre class="programlisting">127.0.0.1       localhost
</pre></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="linux-rpm"></a>2.10. Installing MySQL from RPM Packages on Linux</h2></div></div></div><a class="indexterm" name="id1674688"></a><a class="indexterm" name="id1674697"></a><a class="indexterm" name="id1674706"></a><p>
      The recommended way to install MySQL on RPM-based Linux
      distributions is by using the RPM packages. The RPMs that we
      provide to the community should work on all versions of Linux that
      support RPM packages and use <code class="literal">glibc</code> 2.3. We also
      provide RPMs with binaries that are statically linked to a patched
      version of <code class="literal">glibc</code> 2.2, but only for the x86
      (32-bit) architecture. To obtain RPM packages, see
      <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>.
    </p><p>
      For non-RPM Linux distributions, you can install MySQL using a
      <code class="filename">.tar.gz</code> package. See
      <a href="installing.html#installing-binary" title="2.15. Installing MySQL from tar.gz Packages on Other
      Unix-Like Systems">Section 2.15, “Installing MySQL from <code class="filename">tar.gz</code> Packages on Other
      Unix-Like Systems”</a>.
    </p><p>
      We do provide some platform-specific RPMs; the difference between
      a platform-specific RPM and a generic RPM is that a
      platform-specific RPM is built on the targeted platform and is
      linked dynamically whereas a generic RPM is linked statically with
      LinuxThreads.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        RPM distributions of MySQL often are provided by other vendors.
        Be aware that they may differ in features and capabilities from
        those built by us, and that the instructions in this manual do
        not necessarily apply to installing them. The vendor's
        instructions should be consulted instead.
      </p></div><p>
      If you have problems with an RPM file (for example, if you receive
      the error <code class="literal">Sorry, the host
      '<em class="replaceable"><code>xxxx</code></em>' could not be looked
      up</code>), see <a href="installing.html#binary-notes-linux" title="2.19.1.2. Linux Binary Distribution Notes">Section 2.19.1.2, “Linux Binary Distribution Notes”</a>.
    </p><p>
      In most cases, you need to install only the
      <code class="literal">MySQL-server</code> and
      <code class="literal">MySQL-client</code> packages to get a functional MySQL
      installation. The other packages are not required for a standard
      installation.
    </p><p>
      For upgrades, if your installation was originally produced by
      installing multiple RPM packages, it is best to upgrade all the
      packages, not just some. For example, if you previously installed
      the server and client RPMs, do not upgrade just the server RPM.
    </p><p>
      If you get a dependency failure when trying to install MySQL
      packages (for example, <code class="literal">error: removing these packages
      would break dependencies: libmysqlclient.so.10 is needed by
      ...</code>), you should also install the
      <code class="literal">MySQL-shared-compat</code> package, which includes
      both the shared libraries for backward compatibility
      (<code class="literal">libmysqlclient.so.12</code> for MySQL 4.0 and
      <code class="literal">libmysqlclient.so.10</code> for MySQL 3.23).
    </p><p>
      Some Linux distributions still ship with MySQL 3.23 and they
      usually link applications dynamically to save disk space. If these
      shared libraries are in a separate package (for example,
      <code class="literal">MySQL-shared</code>), it is sufficient to simply leave
      this package installed and just upgrade the MySQL server and
      client packages (which are statically linked and do not depend on
      the shared libraries). For distributions that include the shared
      libraries in the same package as the MySQL server (for example,
      Red Hat Linux), you could either install our 3.23
      <code class="literal">MySQL-shared</code> RPM, or use the
      <code class="literal">MySQL-shared-compat</code> package instead. (Do not
      install both.)
    </p><p>
      The RPM packages shown in the following list are available. The
      names shown here use a suffix of
      <code class="filename">.glibc23.i386.rpm</code>, but particular packages
      can have different suffixes, as described later. Packages that
      have <code class="literal">community</code> in the names are Community
      Server builds, available from MySQL 5.0.27 on.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">MySQL-server-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-server-community-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          The MySQL server. You need this unless you only want to
          connect to a MySQL server running on another machine.
        </p></li><li><p>
          <code class="literal">MySQL-client-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-client-community-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          The standard MySQL client programs. You probably always want
          to install this package.
        </p></li><li><p>
          <code class="literal">MySQL-bench-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          Tests and benchmarks. Requires Perl and the
          <code class="literal">DBI</code> and <code class="literal">DBD::mysql</code>
          modules.
        </p></li><li><p>
          <code class="literal">MySQL-devel-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-devel-community-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          The libraries and include files that are needed if you want to
          compile other MySQL clients, such as the Perl modules.
        </p></li><li><p>
          <code class="literal">MySQL-debuginfo-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-community-debuginfo-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          This package contains debugging information.
          <code class="literal">debuginfo</code> RPMs are never needed to use
          MySQL software; this is true both for the server and for
          client programs. However, they contain additional information
          that might be needed by a debugger to analyze a crash.
        </p></li><li><p>
          <code class="literal">MySQL-shared-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-shared-community-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          This package contains the shared libraries
          (<code class="literal">libmysqlclient.so*</code>) that certain languages
          and applications need to dynamically load and use MySQL. It
          contains single-threaded and thread-safe libraries. If you
          install this package, do not install the
          <code class="literal">MySQL-shared-compat</code> package.
        </p></li><li><p>
          <code class="literal">MySQL-shared-compat-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          This package includes the shared libraries for MySQL 3.23,
          4.0, and so on, up to the current release. It contains
          single-threaded and thread-safe libraries. Install this
          package instead of <code class="literal">MySQL-shared</code> if you have
          applications installed that are dynamically linked against
          older versions of MySQL but you want to upgrade to the current
          version without breaking the library dependencies.
        </p></li><li><p>
          <code class="literal">MySQL-clustermanagement-community<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-clusterstorage-community<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-clustertools-community<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-clusterextra-community<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          Packages that contain additional files for MySQL Cluster
          installations. These are platform-specific RPMs, in contrast
          to the platform-independent
          <code class="literal">ndb-<em class="replaceable"><code>xxx</code></em></code> RPMs.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The <code class="literal">MySQL-clustertools</code> RPM requires a
            working installation of perl and the <code class="literal">DBI</code>
            and <code class="literal">HTML::Template</code> packages. See
            <a href="installing.html#perl-support" title="2.21. Perl Installation Notes">Section 2.21, “Perl Installation Notes”</a>, and
            <a href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="17.6.19. ndb_size.pl — NDBCLUSTER Size Requirement Estimator">Section 17.6.19, “<span><strong class="command">ndb_size.pl</strong></span> — NDBCLUSTER Size Requirement Estimator”</a>, for
            more information.
          </p></div></li><li><p>
          <code class="literal">MySQL-ndb-management-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-ndb-storage-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-ndb-tools-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>,
          <code class="literal">MySQL-ndb-extra-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          Packages that contain additional files for MySQL Cluster
          installations. These are platform-independent RPMs, in
          contrast to the platform-specific
          <code class="literal">cluster<em class="replaceable"><code>xxx</code></em>-community</code>
          RPMs.
        </p></li><li><p>
          <code class="literal">MySQL-test-community-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code>
        </p><p>
          This package includes the MySQL test suite.
        </p></li><li><p>
          <code class="literal">MySQL-<em class="replaceable"><code>VERSION</code></em>.src.rpm</code>
        </p><p>
          This contains the source code for all of the previous
          packages. It can also be used to rebuild the RPMs on other
          architectures (for example, Alpha or SPARC).
        </p></li></ul></div><p>
      The suffix of RPM package names (following the
      <em class="replaceable"><code>VERSION</code></em> value) has the following
      syntax:
    </p><pre class="programlisting">[.<em class="replaceable"><code>PLATFORM</code></em>].<em class="replaceable"><code>CPU</code></em>.rpm
</pre><p>
      The <em class="replaceable"><code>PLATFORM</code></em> and
      <em class="replaceable"><code>CPU</code></em> values indicate the type of system
      for which the package is built.
      <em class="replaceable"><code>PLATFORM</code></em>, if present, indicates the
      platform, and <em class="replaceable"><code>CPU</code></em> indicates the
      processor type or family.
    </p><p>
      If the <em class="replaceable"><code>PLATFORM</code></em> value is missing (for
      example,
      <code class="filename">MySQL-server-<em class="replaceable"><code>VERSION</code></em>.i386.rpm</code>),
      the package is statically linked against a version of
      <code class="literal">glibc</code> 2.2 that has been patched to handle
      larger numbers of threads with larger stack sizes than the stock
      library.
    </p><p>
      If <em class="replaceable"><code>PLATFORM</code></em> is present, the package is
      dynamically linked against <code class="literal">glibc</code> 2.3 and the
      <em class="replaceable"><code>PLATFORM</code></em> value indicates whether the
      package is platform independent or intended for a specific
      platform, as shown in the following table.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">glibc23</code></td><td>Platform independent, should run on any Linux distribution that supports
              <code class="literal">glibc</code> 2.3</td></tr><tr><td><code class="literal">rhel3</code>, <code class="literal">rhel4</code></td><td>Red Hat Enterprise Linux 3 or 4</td></tr><tr><td><code class="literal">sles9</code>, <code class="literal">sles10</code></td><td>SuSE Linux Enterprise Server 9 or 10</td></tr></tbody></table></div><p>
      The <em class="replaceable"><code>CPU</code></em> value indicates the processor
      type or family for which the package is built.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">i386</code></td><td>x86 processor, 386 and up</td></tr><tr><td><code class="literal">i586</code></td><td>x86 processor, Pentium and up</td></tr><tr><td><code class="literal">x86_64</code></td><td>64-bit x86 processor</td></tr><tr><td><code class="literal">ia64</code></td><td>Itanium (IA-64) processor</td></tr></tbody></table></div><p>
      To see all files in an RPM package (for example, a
      <code class="literal">MySQL-server</code> RPM), run a command like this:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -qpl MySQL-server-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code></strong>
</pre><p>
      To perform a standard minimal installation, install the server and
      client RPMs:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -i MySQL-server-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code></strong>
shell&gt; <strong class="userinput"><code>rpm -i MySQL-client-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code></strong>
</pre><p>
      To install only the client programs, install just the client RPM:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -i MySQL-client-<em class="replaceable"><code>VERSION</code></em>.glibc23.i386.rpm</code></strong>
</pre><p>
      RPM provides a feature to verify the integrity and authenticity of
      packages before installing them. If you would like to learn more
      about this feature, see
      <a href="installing.html#verifying-package-integrity" title="2.6. Verifying Package Integrity Using MD5 Checksums or
      GnuPG">Section 2.6, “Verifying Package Integrity Using MD5 Checksums or
      <code class="literal">GnuPG</code>”</a>.
    </p><p>
      The server RPM places data under the
      <code class="filename">/var/lib/mysql</code> directory. The RPM also
      creates a login account for a user named <code class="literal">mysql</code>
      (if one does not exist) to use for running the MySQL server, and
      creates the appropriate entries in
      <code class="filename">/etc/init.d/</code> to start the server
      automatically at boot time. (This means that if you have performed
      a previous installation and have made changes to its startup
      script, you may want to make a copy of the script so that you
      don't lose it when you install a newer RPM.) See
      <a href="installing.html#automatic-start" title="2.17.2.2. Starting and Stopping MySQL Automatically">Section 2.17.2.2, “Starting and Stopping MySQL Automatically”</a>, for more information on how
      MySQL can be started automatically on system startup.
    </p><p>
      If you want to install the MySQL RPM on older Linux distributions
      that do not support initialization scripts in
      <code class="filename">/etc/init.d</code> (directly or via a symlink), you
      should create a symbolic link that points to the location where
      your initialization scripts actually are installed. For example,
      if that location is <code class="filename">/etc/rc.d/init.d</code>, use
      these commands before installing the RPM to create
      <code class="filename">/etc/init.d</code> as a symbolic link that points
      there:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /etc</code></strong>
shell&gt; <strong class="userinput"><code>ln -s rc.d/init.d .</code></strong>
</pre><p>
      However, all current major Linux distributions should support the
      new directory layout that uses <code class="filename">/etc/init.d</code>,
      because it is required for LSB (Linux Standard Base) compliance.
    </p><p>
      If the RPM files that you install include
      <code class="literal">MySQL-server</code>, the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
      server should be up and running after installation. You should be
      able to start using MySQL.
    </p><p>
      If something goes wrong, you can find more information in the
      binary installation section. See
      <a href="installing.html#installing-binary" title="2.15. Installing MySQL from tar.gz Packages on Other
      Unix-Like Systems">Section 2.15, “Installing MySQL from <code class="filename">tar.gz</code> Packages on Other
      Unix-Like Systems”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The accounts that are listed in the MySQL grant tables initially
        have no passwords. After starting the server, you should set up
        passwords for them using the instructions in
        <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
      </p></div><p>
      During RPM installation, a user named <code class="literal">mysql</code> and
      a group named <code class="literal">mysql</code> are created on the system.
      This is done using the <span><strong class="command">useradd</strong></span>,
      <span><strong class="command">groupadd</strong></span>, and <span><strong class="command">usermod</strong></span>
      commands. Those commands require appropriate administrative
      privileges, which is ensured for locally managed users and groups
      (as listed in the <code class="filename">/etc/passwd</code> and
      <code class="filename">/etc/group</code> files) by the RPM installation
      process being run by <code class="literal">root</code>.
    </p><p>
      For nonlocal user management (LDAP, NIS, and so forth), the
      administrative tools may require additional authentication (such
      as a password), and will fail if the installing user does not
      provide this authentication. Even if they fail, the RPM
      installation will not abort but succeed, and this is intentional.
      If they failed, some of the intended transfer of ownership may be
      missing, and it is recommended that the system administrator then
      manually ensures some appropriate user andgroup exists and
      manually transfers ownership following the actions in the RPM spec
      file.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mac-os-x-installation"></a>2.11. Installing MySQL on Mac OS X</h2></div></div></div><a class="indexterm" name="id1675849"></a><a class="indexterm" name="id1675862"></a><p>
      You can install MySQL on Mac OS X 10.3.x (“<span class="quote">Panther</span>”)
      or newer using a Mac OS X binary package in PKG format instead of
      the binary tarball distribution. Please note that older versions
      of Mac OS X (for example, 10.1.x or 10.2.x) are
      <span class="bold"><strong>not</strong></span> supported by this package.
    </p><p>
      The package is located inside a disk image
      (<code class="literal">.dmg</code>) file that you first need to mount by
      double-clicking its icon in the Finder. It should then mount the
      image and display its contents.
    </p><p>
      When installing from the package version, you should also install
      the MySQL Preference Pane, which will allow you to control the
      startup and execution of your MySQL server from System
      Preferences.
    </p><p>
      To obtain MySQL, see <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Before proceeding with the installation, be sure to shut down
        all running MySQL server instances by either using the MySQL
        Manager Application (on Mac OS X Server) or via
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin shutdown</strong></span></a> on the command line.
      </p></div><p>
      To actually install the MySQL PKG file, double-click on the
      package icon. This launches the Mac OS X Package Installer, which
      guides you through the installation of MySQL.
    </p><p>
      Due to a bug in the Mac OS X package installer, you may see this
      error message in the destination disk selection dialog:
    </p><pre class="programlisting">You cannot install this software on this disk. (null)
</pre><p>
      If this error occurs, simply click the <code class="literal">Go Back</code>
      button once to return to the previous screen. Then click
      <code class="literal">Continue</code> to advance to the destination disk
      selection again, and you should be able to choose the destination
      disk correctly. We have reported this bug to Apple and it is
      investigating this problem.
    </p><p>
      The Mac OS X PKG of MySQL installs itself into
      <code class="filename">/usr/local/mysql-<em class="replaceable"><code>VERSION</code></em></code>
      and also installs a symbolic link,
      <code class="filename">/usr/local/mysql</code>, that points to the new
      location. If a directory named
      <code class="filename">/usr/local/mysql</code> exists, it is renamed to
      <code class="filename">/usr/local/mysql.bak</code> first. Additionally, the
      installer creates the grant tables in the <code class="literal">mysql</code>
      database by executing <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>.
    </p><p>
      The installation layout is similar to that of a
      <span><strong class="command">tar</strong></span> file binary distribution; all MySQL
      binaries are located in the directory
      <code class="filename">/usr/local/mysql/bin</code>. The MySQL socket file
      is created as <code class="filename">/tmp/mysql.sock</code> by default. See
      <a href="installing.html#installation-layouts" title="2.7. Installation Layouts">Section 2.7, “Installation Layouts”</a>.
    </p><p>
      MySQL installation requires a Mac OS X user account named
      <code class="literal">mysql</code>. A user account with this name should
      exist by default on Mac OS X 10.2 and up.
    </p><p>
      If you are running Mac OS X Server, a version of MySQL should
      already be installed. The following table shows the versions of
      MySQL that ship with Mac OS X Server versions.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Mac OS X Server Version</strong></span></td><td><span class="bold"><strong>MySQL Version</strong></span></td></tr><tr><td>10.2-10.2.2</td><td>3.23.51</td></tr><tr><td>10.2.3-10.2.6</td><td>3.23.53</td></tr><tr><td>10.3</td><td>4.0.14</td></tr><tr><td>10.3.2</td><td>4.0.16</td></tr><tr><td>10.4.0</td><td>4.1.10a</td></tr></tbody></table></div><p>
      This manual section covers the installation of the official MySQL
      Mac OS X PKG only. Make sure to read Apple's help information
      about installing MySQL: Run the “<span class="quote">Help View</span>”
      application, select “<span class="quote">Mac OS X Server</span>” help, do a
      search for “<span class="quote">MySQL,</span>” and read the item entitled
      “<span class="quote">Installing MySQL.</span>”
    </p><p>
      For preinstalled versions of MySQL on Mac OS X Server, note
      especially that you should start <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with
      <span><strong class="command">safe_mysqld</strong></span> instead of
      <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> if MySQL is older than version 4.0.
    </p><p>
      If you previously used Marc Liyanage's MySQL packages for Mac OS X
      from <a href="http://www.entropy.ch" target="_top">http://www.entropy.ch</a>, you can simply follow
      the update instructions for packages using the binary installation
      layout as given on his pages.
    </p><p>
      If you are upgrading from Marc's 3.23.x versions or from the Mac
      OS X Server version of MySQL to the official MySQL PKG, you also
      need to convert the existing MySQL privilege tables to the current
      format, because some new security privileges have been added. See
      <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
    </p><p>
      If you want MySQL to start automatically during system startup,
      you also need to install the MySQL Startup Item. It is part of the
      Mac OS X installation disk images as a separate installation
      package. Simply double-click the
      <span class="guiicon">MySQLStartupItem.pkg</span> icon and follow the
      instructions to install it. The Startup Item need be installed
      only once. There is no need to install it each time you upgrade
      the MySQL package later.
    </p><p>
      The Startup Item for MySQL is installed into
      <code class="filename">/Library/StartupItems/MySQLCOM</code>. (Before MySQL
      4.1.2, the location was
      <code class="filename">/Library/StartupItems/MySQL</code>, but that
      collided with the MySQL Startup Item installed by Mac OS X
      Server.) Startup Item installation adds a variable
      <code class="literal">MYSQLCOM=-YES-</code> to the system configuration file
      <code class="filename">/etc/hostconfig</code>. If you want to disable the
      automatic startup of MySQL, simply change this variable to
      <code class="literal">MYSQLCOM=-NO-</code>.
    </p><p>
      On Mac OS X Server, the default MySQL installation uses the
      variable <code class="literal">MYSQL</code> in the
      <code class="filename">/etc/hostconfig</code> file. The MySQL Startup Item
      installer disables this variable by setting it to
      <code class="literal">MYSQL=-NO-</code>. This avoids boot time conflicts
      with the <code class="literal">MYSQLCOM</code> variable used by the MySQL
      Startup Item. However, it does not shut down a running MySQL
      server. You should do that yourself.
    </p><p>
      After the installation, you can start up MySQL by running the
      following commands in a terminal window. You must have
      administrator privileges to perform this task.
    </p><p>
      If you have installed the Startup Item, use this command:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>sudo /Library/StartupItems/MySQLCOM/MySQLCOM start</code></strong>
<em class="replaceable"><code>(Enter your password, if necessary)</code></em>
<em class="replaceable"><code>(Press Control-D or enter "exit" to exit the shell)</code></em>
</pre><p>
      If you don't use the Startup Item, enter the following command
      sequence:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local/mysql</code></strong>
shell&gt; <strong class="userinput"><code>sudo ./bin/mysqld_safe</code></strong>
<em class="replaceable"><code>(Enter your password, if necessary)</code></em>
<em class="replaceable"><code>(Press Control-Z)</code></em>
shell&gt; <strong class="userinput"><code>bg</code></strong>
<em class="replaceable"><code>(Press Control-D or enter "exit" to exit the shell)</code></em>
</pre><p>
      You should be able to connect to the MySQL server, for example, by
      running <code class="filename">/usr/local/mysql/bin/mysql</code>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The accounts that are listed in the MySQL grant tables initially
        have no passwords. After starting the server, you should set up
        passwords for them using the instructions in
        <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
      </p></div><p>
      You might want to add aliases to your shell's resource file to
      make it easier to access commonly used programs such as
      <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> and <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> from
      the command line. The syntax for <span><strong class="command">bash</strong></span> is:
    </p><pre class="programlisting">alias mysql=/usr/local/mysql/bin/mysql
alias mysqladmin=/usr/local/mysql/bin/mysqladmin
</pre><p>
      For <span><strong class="command">tcsh</strong></span>, use:
    </p><pre class="programlisting">alias mysql /usr/local/mysql/bin/mysql
alias mysqladmin /usr/local/mysql/bin/mysqladmin
</pre><p>
      Even better, add <code class="literal">/usr/local/mysql/bin</code> to your
      <code class="literal">PATH</code> environment variable. You can do this by
      modifying the appropriate startup file for your shell. For more
      information, see <a href="programs.html#invoking-programs" title="4.2.1. Invoking MySQL Programs">Section 4.2.1, “Invoking MySQL Programs”</a>.
    </p><p>
      If you are upgrading an existing installation, note that
      installing a new MySQL PKG does not remove the directory of an
      older installation. Unfortunately, the Mac OS X Installer does not
      yet offer the functionality required to properly upgrade
      previously installed packages.
    </p><p>
      To use your existing databases with the new installation, you'll
      need to copy the contents of the old data directory to the new
      data directory. Make sure that neither the old server nor the new
      one is running when you do this. After you have copied over the
      MySQL database files from the previous installation and have
      successfully started the new server, you should consider removing
      the old installation files to save disk space. Additionally, you
      should also remove older versions of the Package Receipt
      directories located in
      <code class="filename">/Library/Receipts/mysql-<em class="replaceable"><code>VERSION</code></em>.pkg</code>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="solaris-installation"></a>2.12. Installing MySQL on Solaris</h2></div></div></div><a class="indexterm" name="id1676484"></a><a class="indexterm" name="id1676497"></a><a class="indexterm" name="id1676509"></a><p>
      To obtain a binary MySQL distribution for Solaris in tarball or
      PKG format,
      <a href="http://dev.mysql.com/downloads/mysql/5.0.html" target="_top">http://dev.mysql.com/downloads/mysql/5.0.html</a>.
    </p><p>
      If you install MySQL using a binary tarball distribution on
      Solaris, you may run into trouble even before you get the MySQL
      distribution unpacked, as the Solaris <span><strong class="command">tar</strong></span>
      cannot handle long file names. This means that you may see errors
      when you try to unpack MySQL.
    </p><p>
      If this occurs, you must use GNU <span><strong class="command">tar</strong></span>
      (<span><strong class="command">gtar</strong></span>) to unpack the distribution.
    </p><p>
      You can install MySQL on Solaris using a binary package in PKG
      format instead of the binary tarball distribution. Before
      installing using the binary PKG format, you should create the
      <code class="literal">mysql</code> user and group, for example:
    </p><pre class="programlisting">groupadd mysql
useradd -g mysql mysql
</pre><p>
      Some basic PKG-handling commands follow:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To add a package:
        </p><pre class="programlisting">pkgadd -d <em class="replaceable"><code>package_name</code></em>.pkg
</pre></li><li><p>
          To remove a package:
        </p><pre class="programlisting">pkgrm <em class="replaceable"><code>package_name</code></em>
</pre></li><li><p>
          To get a full list of installed packages:
        </p><pre class="programlisting">pkginfo
</pre></li><li><p>
          To get detailed information for a package:
        </p><pre class="programlisting">pkginfo -l <em class="replaceable"><code>package_name</code></em>
</pre></li><li><p>
          To list the files belonging to a package:
        </p><pre class="programlisting">pkgchk -v <em class="replaceable"><code>package_name</code></em>
</pre></li><li><p>
          To get packaging information for an arbitrary file:
        </p><pre class="programlisting">pkgchk -l -p <em class="replaceable"><code>file_name</code></em>
</pre></li></ul></div><p>
      For additional information about installing MySQL on Solaris, see
      <a href="installing.html#solaris" title="2.19.3. Solaris Notes">Section 2.19.3, “Solaris Notes”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installation-i5os"></a>2.13. Installing MySQL on i5/OS</h2></div></div></div><a class="indexterm" name="id1676693"></a><a class="indexterm" name="id1676702"></a><a class="indexterm" name="id1676711"></a><p>
      The i5/OS POWER MySQL package was created in cooperation with IBM.
      MySQL works within the Portable Application Solution Environment
      (PASE) on the System i series of hardware and will also provide
      database services for the Zend Core for i5/OS.
    </p><p>
      MySQL for i5/OS is provided as a save file
      (<code class="literal">.savf</code>) package that can be downloaded and
      installed directly without any additional installation steps
      required.
    </p><p>
      MySQL is only supported on i5/OS V5R4 or later releases. The i5/OS
      PASE must be installed for MySQL to operate. You must be able to
      login as a user in <code class="literal">*SECOFR</code> class.
    </p><p>
      You should the installation notes and tips for i5/OS before
      starting installation. See
      <a href="installing.html#installation-i5os-notes">i5/OS Installation
      Notes</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The installation package will use an existing configuration if
        you have previously installed MySQL (which is identified by
        looking for the file <code class="filename">/etc/my.cnf</code>). The
        values for the data directory (<code class="literal">DATADIR</code>) and
        owner of the MySQL files (<code class="literal">USRPRF</code>) specified
        during the installation will be ignored, and the values
        determined from the <code class="filename">/etc/my.cnf</code> will be
        used instead.
      </p><p>
        If you want to change these parameters during a new install, you
        should temporarily rename <code class="filename">/etc/my.cnf</code>,
        install MySQL using the new parameters you want to use, and then
        merge your previous <code class="filename">/etc/my.cnf</code>
        configuration settings with the new
        <code class="filename">/etc/my.cnf</code> file that is created during
        installation.
      </p></div><p>
      To install MySQL on i5/OS, follow these steps:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Create a user profile <code class="literal">MYSQL</code>. The
          <code class="literal">MYSQL</code> user profile will own all the MySQL
          files and databases and be the active user used when the MySQL
          server is running. The profile should be disabled so that you
          cannot log in as the MySQL user. To create a user profile, use
          <span><strong class="command">CRTUSRPRF</strong></span>:
        </p><pre class="programlisting">CRTUSRPRF USRPRF(MYSQL) STATUS(*DISABLED) TEXT('MySQL user id')</pre></li><li><p>
          On the System i machine, create a save file that will be used
          to receive the downloaded installation save file. The file
          should be located within the General Purpose Library
          (<code class="filename">QGPL</code>):
        </p><pre class="programlisting">CRTSAVF FILE(QGPL/MYSQLINST)</pre></li><li><p>
          Download the MySQL installation save file in 32-bit
          (<code class="filename">mysql-<em class="replaceable"><code>5.0.42</code></em>-i5os-power-32bit.savf</code>)
          or 64-bit
          (<code class="filename">mysql-<em class="replaceable"><code>5.0.42</code></em>-i5os-power-64bit.savf</code>)
          from <a href="http://dev.mysql.com/downloads" target="_top">MySQL
          Downloads</a>.
        </p></li><li><p>
          You need to FTP the downloaded <code class="literal">.savf</code> file
          directly into the <code class="literal">QGPL/MYSQLINST</code> file on
          the System i server. You can do this through FTP using the
          following steps after logging in to the System i machine:
        </p><pre class="programlisting">ftp&gt; bin
ftp&gt; cd qgpl
ftp&gt; put mysql-<em class="replaceable"><code>5.0.42</code></em>-i5os-power.savf mysqlinst</pre></li><li><p>
          Log into the System i server using a user in the
          <code class="literal">*SECOFR</code> class, such as the
          <code class="literal">QSECOFR</code> user ID.
        </p></li><li><p>
          You need to restore the installation library stored in the
          <code class="filename">.savf</code> save file:
        </p><pre class="programlisting">RSTLIB MYSQLINST DEV(*SAVF) SAVF(QGPL/MYSQLINST)</pre></li><li><p>
          You need to execute the installation command,
          <code class="filename">MYSQLINST/INSMYSQL</code>. You can specify three
          parameter settings during installation:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="literal">DIR(<em class="replaceable"><code>'/opt/mysql'</code></em>)</code>
              sets the installation location for the MySQL files. The
              directory will be created if it does not already exist.
            </p></li><li><p>
              <code class="literal">DATADIR(<em class="replaceable"><code>'/QOpenSys/mysal/data'</code></em>)</code>
              sets the location of the directory that will be used to
              store the database files and binary logs. The default
              setting is <code class="filename">/QOpenSys/mysql/data</code>. Note
              that if the installer detects an existing installation
              (due to the existence of
              <code class="filename">/etc/my.cnf</code>), then this parameter
              will be ignored.
            </p></li><li><p>
              <code class="literal">USRPRF(<em class="replaceable"><code>MYSQL</code></em>)</code>
              sets the user profile that will own the files that are
              installed. The profile will be created if it does not
              already exist.
            </p></li></ul></div><p>
          MySQL can be installed anywhere, for this example we will
          assume MySQL has been installed into
          <code class="filename">/opt/mysql</code>. The <code class="literal">MYSQL</code>
          user profile that was created earlier in this sequence should
          be used for the profile:
        </p><pre class="programlisting">MYSQLINST/INSMYSQL DIR('/opt/mysql') DATADIR('/opt/mysqldata') USRPRF(MYSQL)</pre><p>
          If you are updating an installation over an existing MySQL
          installation, you should use the same parameter values that
          were used when MySQL was originally installed.
        </p><p>
          The installation copies all the necessary files into a
          directory matching the package version (for example
          <code class="filename">mysql-5.0.42-i5os-power-32bit</code>), sets the
          ownership on those files, sets up the MySQL environment and
          creates the MySQL configuration file (in
          <code class="filename">/etc/my.cnf</code>) completing all the steps in
          a typical binary installation process automatically. If this
          is a new installation of MySQL, or if the installer detects
          that this is a new version (because the
          <code class="filename">/etc/my.cnf</code> file does not exist), then
          the initial core MySQL databases will also be created during
          installation.
        </p></li><li><p>
          Once the installation has completed, you can delete the
          installation file:
        </p><pre class="programlisting">DLTLIB LIB(MYSQLINST)</pre></li></ol></div><p>
      To start MySQL:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Log into the System i server using a user within the
          <code class="literal">*SECOFR</code> class, such as the
          <code class="literal">QSECOFR</code> user ID.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            You should start <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> using a user
            that in the PASE environment has the id=0 (the equivalent of
            the standard Unix <code class="literal">root</code> user). If you do
            not use a user with this ID then the system will be unable
            to change the user when executing <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
            as set using <code class="literal">--user</code> option. If this
            happens, <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> may be unable to read the
            files located within the MySQL data directory and the
            execution will fail.
          </p></div></li><li><p>
          Enter the PASE environment using <code class="literal">call
          qp2term</code>.
        </p></li><li><p>
          Start the MySQL server by changing to the installation
          directory and running <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>,
          specifying the user name used to install the server. The
          installer conveniently installs a symbolic link to the
          installation directory
          (<code class="filename">mysql-5.0.42-i5os-power-32bit</code>) as
          <code class="filename">/opt/mysql/mysql</code>:
        </p><pre class="programlisting">&gt; cd /opt/mysql/mysql
&gt; bin/mysqld_safe --user=mysql &amp;</pre><p>
          You should see a message similar to the following:
        </p><pre class="programlisting">Starting mysqld daemon with databases »
     from /opt/mysql/mysql-enterprise-5.0.42-i5os-power-32bit/data</pre></li></ol></div><p>
      If you are having problems starting MySQL server, see
      <a href="installing.html#starting-server" title="2.17.2.3. Starting and Troubleshooting the MySQL Server">Section 2.17.2.3, “Starting and Troubleshooting the MySQL Server”</a>.
    </p><p>
      To stop MySQL:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Log into the System i server using the
          <code class="literal">*SECOFR</code> class, such as the
          <code class="literal">QSECOFR</code> user ID.
        </p></li><li><p>
          Enter the PASE environment using <code class="literal">call
          qp2term</code>.
        </p></li><li><p>
          Stop the MySQL server by changing into the installation
          directory and running <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>,
          specifying the user name used to install the server:
        </p><pre class="programlisting">&gt; cd /opt/mysql/mysql
&gt; bin/mysqladmin -u root shutdown</pre><p>
          If the session that you started and stopped MySQL are the
          same, you may get the log output from
          <code class="literal">mysqld</code>:
        </p><pre class="programlisting">   STOPPING server from pid file »
     /opt/mysql/mysql-enterprise-5.0.42-i5os-power-32bit/data/I5DBX.RCHLAND.IBM.COM.pid
   070718 10:34:20  mysqld ended</pre><p>
          If the sessions used to start and stop MySQL are different,
          you will not receive any confirmation of the shutdown.
        </p></li></ol></div><p><a name="installation-i5os-notes"></a>
      <span class="emphasis"><em>Note and tips</em></span>
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A problem has been identified with the installation process on
          DBCS systems. If you are having problems install MySQL on a
          DBCS system, you need to change your job's coded character set
          identifier (<code class="literal">CSSID</code>) to 37
          (<code class="literal">EBCDIC</code>) before executing the install
          command, <code class="literal">INSMYSQL</code>. To do this, determine
          your existing <code class="literal">CSSID</code> (using
          <code class="literal">DSPJOB</code> and selecting option 2), execute
          <code class="literal">CHGJOB CSSID(37)</code>, run
          <code class="literal">INSMYSQL</code> to install MySQL and then execute
          <code class="literal">CHGJOB</code> again with your original
          <code class="literal">CSSID.</code>
        </p></li><li><p>
          If you want to use the Perl scripts that are included with
          MySQL, you need to download the iSeries Tools for Developers
          (5799-PTL). See
          <a href="http://www-03.ibm.com/servers/enable/site/porting/tools/" target="_top">http://www-03.ibm.com/servers/enable/site/porting/tools/</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="netware-installation"></a>2.14. Installing MySQL on NetWare</h2></div></div></div><a class="indexterm" name="id1677460"></a><a class="indexterm" name="id1677469"></a><p>
      Porting MySQL to NetWare was an effort spearheaded by Novell.
      Novell customers should be pleased to note that NetWare 6.5 ships
      with bundled MySQL binaries, complete with an automatic commercial
      use license for all servers running that version of NetWare.
    </p><p>
      MySQL for NetWare is compiled using a combination of Metrowerks
      CodeWarrior for NetWare and special cross-compilation versions of
      the GNU autotools.
    </p><p>
      The latest binary packages for NetWare can be obtained at
      <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>. See
      <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>.
    </p><p>
      To host MySQL, the NetWare server must meet these requirements:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The latest Support Pack of
          <a href="http://support.novell.com/filefinder/18197/index.html" target="_top">NetWare
          6.5</a> must be installed.
        </p></li><li><p>
          The system must meet Novell's minimum requirements to run the
          respective version of NetWare.
        </p></li><li><p>
          MySQL data and the program binaries must be installed on an
          NSS volume; traditional volumes are not supported.
        </p></li></ul></div><p>
      To install MySQL for NetWare, use the following procedure:
    </p><div class="orderedlist"><ol type="1"><li><p>
          If you are upgrading from a prior installation, stop the MySQL
          server. This is done from the server console, using the
          following command:
        </p><pre class="programlisting">SERVER:  mysqladmin -u root shutdown
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If the MySQL <code class="literal">root</code> user account has a
            password, you need to invoke <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>
            with the <code class="option">-p</code> option and supply the password
            when prompted.
          </p></div></li><li><p>
          Log on to the target server from a client machine with access
          to the location where you are installing MySQL.
        </p></li><li><p>
          Extract the binary package Zip file onto the server. Be sure
          to allow the paths in the Zip file to be used. It is safe to
          simply extract the file to <code class="filename">SYS:\</code>.
        </p><p>
          If you are upgrading from a prior installation, you may need
          to copy the data directory (for example,
          <code class="filename">SYS:MYSQL\DATA</code>), as well as
          <code class="filename">my.cnf</code>, if you have customized it. You
          can then delete the old copy of MySQL.
        </p></li><li><p>
          You might want to rename the directory to something more
          consistent and easy to use. The examples in this manual use
          <code class="filename">SYS:MYSQL</code> to refer to the installation
          directory.
        </p><p>
          Note that MySQL installation on NetWare does not detect if a
          version of MySQL is already installed outside the NetWare
          release. Therefore, if you have installed the latest MySQL
          version from the Web (for example, MySQL 4.1 or later) in
          <code class="filename">SYS:\MYSQL</code>, you must rename the folder
          before upgrading the NetWare server; otherwise, files in
          <code class="filename">SYS:\MySQL</code> are overwritten by the MySQL
          version present in NetWare Support Pack.
        </p></li><li><p>
          At the server console, add a search path for the directory
          containing the MySQL NLMs. For example:
        </p><pre class="programlisting">SERVER:  SEARCH ADD SYS:MYSQL\BIN
</pre></li><li><p>
          Initialize the data directory and the grant tables, if
          necessary, by executing <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> at
          the server console.
        </p></li><li><p>
          Start the MySQL server using <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> at
          the server console.
        </p></li><li><p>
          To finish the installation, you should also add the following
          commands to <code class="filename">autoexec.ncf</code>. For example, if
          your MySQL installation is in <code class="filename">SYS:MYSQL</code>
          and you want MySQL to start automatically, you could add these
          lines:
        </p><pre class="programlisting">#Starts the MySQL 5.0.x database server
SEARCH ADD SYS:MYSQL\BIN
MYSQLD_SAFE
</pre><p>
          If you are running MySQL on NetWare 6.0, we strongly suggest
          that you use the
          <a href="server-administration.html#option_mysqld_skip-external-locking"><code class="option">--skip-external-locking</code></a> option
          on the command line:
        </p><pre class="programlisting">#Starts the MySQL 5.0.x database server
SEARCH ADD SYS:MYSQL\BIN
MYSQLD_SAFE --skip-external-locking
</pre><p>
          It is also necessary to use <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK
          TABLE</code></a> and <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR
          TABLE</code></a> instead of <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a>,
          because <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a> makes use of external
          locking. External locking is known to have problems on NetWare
          6.0; the problem has been eliminated in NetWare 6.5. Note that
          the use of MySQL on Netware 6.0 is not officially supported.
        </p><p>
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> on NetWare provides a screen
          presence. When you unload (shut down) the
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> NLM, the screen does not go
          away by default. Instead, it prompts for user input:
        </p><pre class="programlisting">*&lt;NLM has terminated; Press any key to close the screen&gt;*
</pre><p>
          If you want NetWare to close the screen automatically instead,
          use the <a href="programs.html#option_mysqld_safe_autoclose"><code class="option">--autoclose</code></a> option
          to <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>. For example:
        </p><pre class="programlisting">#Starts the MySQL 5.0.x database server
SEARCH ADD SYS:MYSQL\BIN
MYSQLD_SAFE --autoclose
</pre><p>
          The behavior of <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> on NetWare is
          described further in <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
        </p></li><li><p>
          When installing MySQL, either for the first time or upgrading
          from a previous version, download and install the latest and
          appropriate Perl module and PHP extensions for NetWare:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Perl:
              <a href="http://forge.novell.com/modules/xfcontent/downloads.php/perl/Modules/" target="_top">http://forge.novell.com/modules/xfcontent/downloads.php/perl/Modules/</a>
            </p></li><li><p>
              PHP:
              <a href="http://forge.novell.com/modules/xfcontent/downloads.php/php/Modules/" target="_top">http://forge.novell.com/modules/xfcontent/downloads.php/php/Modules/</a>
            </p></li></ul></div></li></ol></div><p>
      If there was an existing installation of MySQL on the NetWare
      server, be sure to check for existing MySQL startup commands in
      <code class="filename">autoexec.ncf</code>, and edit or delete them as
      necessary.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The accounts that are listed in the MySQL grant tables initially
        have no passwords. After starting the server, you should set up
        passwords for them using the instructions in
        <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-binary"></a>2.15. Installing MySQL from <code class="filename">tar.gz</code> Packages on Other
      Unix-Like Systems</h2></div></div></div><a class="indexterm" name="id1677936"></a><a class="indexterm" name="id1677948"></a><p>
      This section covers the installation of MySQL binary distributions
      that are provided for various platforms in the form of compressed
      <span><strong class="command">tar</strong></span> files (files with a
      <code class="filename">.tar.gz</code> extension). See
      <a href="installing.html#mysql-binaries" title="2.4.3.4. MySQL Binaries Compiled by Sun Microsystems, Inc.">Section 2.4.3.4, “MySQL Binaries Compiled by Sun Microsystems, Inc.”</a>, for a detailed list.
    </p><p>
      To obtain MySQL, see <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>.
    </p><p>
      MySQL <span><strong class="command">tar</strong></span> file binary distributions have names
      of the form
      <code class="filename">mysql-<em class="replaceable"><code>VERSION</code></em>-<em class="replaceable"><code>OS</code></em>.tar.gz</code>,
      where <code class="literal"><em class="replaceable"><code>VERSION</code></em></code> is a
      number (for example, <code class="literal">5.0.86</code>), and
      <em class="replaceable"><code>OS</code></em> indicates the type of operating
      system for which the distribution is intended (for example,
      <code class="literal">pc-linux-i686</code>).
    </p><p>
      In addition to these generic packages, we also offer binaries in
      platform-specific package formats for selected platforms. See
      <a href="installing.html#quick-standard-installation" title="2.8. Standard MySQL Installation Using a Binary Distribution">Section 2.8, “Standard MySQL Installation Using a Binary Distribution”</a>, for more
      information on how to install these.
    </p><p>
      You need the following tools to install a MySQL
      <span><strong class="command">tar</strong></span> file binary distribution:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          GNU <code class="literal">gunzip</code> to uncompress the distribution.
        </p></li><li><p>
          A reasonable <span><strong class="command">tar</strong></span> to unpack the
          distribution. GNU <span><strong class="command">tar</strong></span> is known to work.
          Some operating systems come with a preinstalled version of
          <span><strong class="command">tar</strong></span> that is known to have problems. For
          example, the <span><strong class="command">tar</strong></span> provided with early
          versions of Mac OS X, SunOS 4.x, Solaris 8, Solaris 9, Solaris
          10 and OpenSolaris, and HP-UX are known to have problems with
          long file names. On Mac OS X, you can use the preinstalled
          <span><strong class="command">gnutar</strong></span> program. On Solaris 10 and
          OpenSolaris you can use the preinstalled
          <span><strong class="command">gtar</strong></span>. On other systems with a deficient
          <span><strong class="command">tar</strong></span>, you should install GNU
          <span><strong class="command">tar</strong></span> first.
        </p></li></ul></div><p>
      If you run into problems and need to file a bug report, please use
      the instructions in <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
    </p><a class="indexterm" name="id1678138"></a><p>
      The basic commands that you must execute to install and use a
      MySQL binary distribution are:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong>
shell&gt; <strong class="userinput"><code>useradd -g mysql mysql</code></strong>
shell&gt; <strong class="userinput"><code>cd /usr/local</code></strong>
shell&gt; <strong class="userinput"><code>gunzip &lt; <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz | tar xvf -</code></strong>
shell&gt; <strong class="userinput"><code>ln -s <em class="replaceable"><code>full-path-to-mysql-VERSION-OS</code></em> mysql</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql .</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong>
shell&gt; <strong class="userinput"><code>scripts/mysql_install_db --user=mysql</code></strong>
shell&gt; <strong class="userinput"><code>chown -R root .</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql data</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        This procedure does not set up any passwords for MySQL accounts.
        After following the procedure, proceed to
        <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
      </p></div><p>
      A more detailed version of the preceding description for
      installing a binary distribution follows:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Add a login user and group for <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to
          run as:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong>
shell&gt; <strong class="userinput"><code>useradd -g mysql mysql</code></strong>
</pre><p>
          These commands add the <code class="literal">mysql</code> group and the
          <code class="literal">mysql</code> user. The syntax for
          <span><strong class="command">useradd</strong></span> and <span><strong class="command">groupadd</strong></span> may
          differ slightly on different versions of Unix, or they may
          have different names such as <span><strong class="command">adduser</strong></span> and
          <span><strong class="command">addgroup</strong></span>.
        </p><p>
          You might want to call the user and group something else
          instead of <code class="literal">mysql</code>. If so, substitute the
          appropriate name in the following steps.
        </p></li><li><p>
          Pick the directory under which you want to unpack the
          distribution and change location into it. In the following
          example, we unpack the distribution under
          <code class="filename">/usr/local</code>. (The instructions, therefore,
          assume that you have permission to create files and
          directories in <code class="filename">/usr/local</code>. If that
          directory is protected, you must perform the installation as
          <code class="literal">root</code>.)
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local</code></strong>
</pre></li><li><p>
          Obtain a distribution file using the instructions in
          <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>. For a given release, binary
          distributions for all platforms are built from the same MySQL
          source distribution.
        </p></li><li><p>
          Unpack the distribution, which creates the installation
          directory. Then create a symbolic link to that directory:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gunzip &lt; <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz | tar xvf -</code></strong>
shell&gt; <strong class="userinput"><code>ln -s <em class="replaceable"><code>full-path-to-mysql-VERSION-OS</code></em> mysql</code></strong>
</pre><p>
          The <span><strong class="command">tar</strong></span> command creates a directory named
          <code class="filename">mysql-<em class="replaceable"><code>VERSION</code></em>-<em class="replaceable"><code>OS</code></em></code>.
          The <code class="literal">ln</code> command makes a symbolic link to
          that directory. This lets you refer more easily to the
          installation directory as
          <code class="filename">/usr/local/mysql</code>.
        </p><p>
          With GNU <span><strong class="command">tar</strong></span>, no separate invocation of
          <code class="literal">gunzip</code> is necessary. You can replace the
          first line with the following alternative command to
          uncompress and extract the distribution:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>tar zxvf <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz</code></strong>
</pre></li><li><p>
          Change location into the installation directory:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql</code></strong>
</pre><p>
          You will find several files and subdirectories in the
          <code class="literal">mysql</code> directory. The most important for
          installation purposes are the <code class="filename">bin</code> and
          <code class="filename">scripts</code> subdirectories:
        </p><div class="itemizedlist"><a class="indexterm" name="id1678539"></a><a class="indexterm" name="id1678548"></a><ul type="disc"><li><p>
              The <code class="filename">bin</code> directory contains client
              programs and the server. You should add the full path name
              of this directory to your <code class="literal">PATH</code>
              environment variable so that your shell finds the MySQL
              programs properly. See
              <a href="installing.html#environment-variables" title="2.20. Environment Variables">Section 2.20, “Environment Variables”</a>.
            </p></li><li><p>
              The <code class="filename">scripts</code> directory contains the
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> script used to
              initialize the <code class="literal">mysql</code> database
              containing the grant tables that store the server access
              permissions.
            </p></li></ul></div></li><li><p>
          Ensure that the distribution contents are accessible to
          <code class="literal">mysql</code>. If you unpacked the distribution as
          <code class="literal">mysql</code>, no further action is required. If
          you unpacked the distribution as <code class="literal">root</code>, its
          contents will be owned by <code class="literal">root</code>. Change its
          ownership to <code class="literal">mysql</code> by executing the
          following commands as <code class="literal">root</code> in the
          installation directory:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R mysql .</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong>
</pre><p>
          The first command changes the owner attribute of the files to
          the <code class="literal">mysql</code> user. The second changes the
          group attribute to the <code class="literal">mysql</code> group.
        </p></li><li><p>
          If you have not installed MySQL before, you must create the
          MySQL data directory and initialize the grant tables:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>scripts/mysql_install_db --user=mysql</code></strong>
</pre><p>
          If you run the command as <code class="literal">root</code>, include the
          <code class="option">--user</code> option as shown. If you run the
          command while logged in as that user, you can omit the
          <code class="option">--user</code> option.
        </p><p>
          The command should create the data directory and its contents
          with <code class="literal">mysql</code> as the owner.
        </p><p>
          After creating or updating the grant tables, you need to
          restart the server manually.
        </p></li><li><p>
          Most of the MySQL installation can be owned by
          <code class="literal">root</code> if you like. The exception is that the
          data directory must be owned by <code class="literal">mysql</code>. To
          accomplish this, run the following commands as
          <code class="literal">root</code> in the installation directory:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R root .</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql data</code></strong>
</pre></li><li><p>
          If you want MySQL to start automatically when you boot your
          machine, you can copy
          <code class="literal">support-files/mysql.server</code> to the location
          where your system has its startup files. More information can
          be found in the <code class="literal">support-files/mysql.server</code>
          script itself and in <a href="installing.html#automatic-start" title="2.17.2.2. Starting and Stopping MySQL Automatically">Section 2.17.2.2, “Starting and Stopping MySQL Automatically”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id1678819"></a>

          <a class="indexterm" name="id1678831"></a>

          <a class="indexterm" name="id1678844"></a>

          You can set up new accounts using the
          <span><strong class="command">bin/mysql_setpermission</strong></span> script if you
          install the <code class="literal">DBI</code> and
          <code class="literal">DBD::mysql</code> Perl modules. See
          <a href="programs.html#mysql-setpermission" title="4.6.15. mysql_setpermission — Interactively Set Permissions in Grant
Tables">Section 4.6.15, “<span><strong class="command">mysql_setpermission</strong></span> — Interactively Set Permissions in Grant
Tables”</a>. For Perl module
          installation instructions, see <a href="installing.html#perl-support" title="2.21. Perl Installation Notes">Section 2.21, “Perl Installation Notes”</a>.
        </p></li><li><p>
          If you would like to use <a href="programs.html#mysqlaccess" title="4.6.6. mysqlaccess — Client for Checking Access Privileges"><span><strong class="command">mysqlaccess</strong></span></a> and
          have the MySQL distribution in some nonstandard location, you
          must change the location where <a href="programs.html#mysqlaccess" title="4.6.6. mysqlaccess — Client for Checking Access Privileges"><span><strong class="command">mysqlaccess</strong></span></a>
          expects to find the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client. Edit the
          <code class="filename">bin/mysqlaccess</code> script at approximately
          line 18. Search for a line that looks like this:
        </p><pre class="programlisting">$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable
</pre><p>
          Change the path to reflect the location where
          <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> actually is stored on your system. If
          you do not do this, a <code class="literal">Broken pipe</code> error
          will occur when you run <a href="programs.html#mysqlaccess" title="4.6.6. mysqlaccess — Client for Checking Access Privileges"><span><strong class="command">mysqlaccess</strong></span></a>.
        </p></li></ol></div><p>
      After everything has been unpacked and installed, you should test
      your distribution. To start the MySQL server, use the following
      command:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
      If you run the command as <code class="literal">root</code>, you must use
      the <code class="option">--user</code> option as shown. The value of the
      option is the name of the login account that you created in the
      first step to use for running the server. If you run the command
      while logged in as <code class="literal">mysql</code>, you can omit the
      <code class="option">--user</code> option.
    </p><p>
      If the command fails immediately and prints <code class="literal">mysqld
      ended</code>, you can find some information in the
      <code class="filename"><em class="replaceable"><code>host_name</code></em>.err</code> file
      in the data directory.
    </p><p>
      More information about <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> is given in
      <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        The accounts that are listed in the MySQL grant tables initially
        have no passwords. After starting the server, you should set up
        passwords for them using the instructions in
        <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-source"></a>2.16. MySQL Installation Using a Source Distribution</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#quick-install">2.16.1. Source Installation Overview</a></span></dt><dt><span class="section"><a href="installing.html#configure-options">2.16.2. Typical <span><strong class="command">configure</strong></span> Options</a></span></dt><dt><span class="section"><a href="installing.html#installing-source-tree">2.16.3. Installing from the Development Source Tree</a></span></dt><dt><span class="section"><a href="installing.html#compilation-problems">2.16.4. Dealing with Problems Compiling MySQL</a></span></dt><dt><span class="section"><a href="installing.html#mit-pthreads">2.16.5. MIT-pthreads Notes</a></span></dt><dt><span class="section"><a href="installing.html#windows-source-build">2.16.6. Installing MySQL from Source on Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-client-compiling">2.16.7. Compiling MySQL Clients on Windows</a></span></dt></dl></div><a class="indexterm" name="id1679054"></a><a class="indexterm" name="id1679066"></a><a class="indexterm" name="id1679079"></a><p>
      Before you proceed with an installation from source, first check
      whether our binary is available for your platform and whether it
      works for you. We put a great deal of effort into ensuring that
      our binaries are built with the best possible options.
    </p><p>
      To obtain a source distribution for MySQL,
      <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>. If you want to build MySQL from
      source on Windows, see <a href="installing.html#windows-source-build" title="2.16.6. Installing MySQL from Source on Windows">Section 2.16.6, “Installing MySQL from Source on Windows”</a>.
    </p><p>
      MySQL source distributions are provided as compressed
      <span><strong class="command">tar</strong></span> archives and have names of the form
      <code class="filename">mysql-<em class="replaceable"><code>VERSION</code></em>.tar.gz</code>,
      where <em class="replaceable"><code>VERSION</code></em> is a number like
      <code class="literal">5.0.86</code>.
    </p><p>
      You need the following tools to build and install MySQL from
      source:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          GNU <code class="literal">gunzip</code> to uncompress the distribution.
        </p></li><li><p>
          A reasonable <span><strong class="command">tar</strong></span> to unpack the
          distribution. GNU <span><strong class="command">tar</strong></span> is known to work.
          Some operating systems come with a preinstalled version of
          <span><strong class="command">tar</strong></span> that is known to have problems. For
          example, the <span><strong class="command">tar</strong></span> provided with early
          versions of Mac OS X, SunOS 4.x, Solaris 8, Solaris 9, Solaris
          10 and OpenSolaris, and HP-UX are known to have problems with
          long file names. On Mac OS X, you can use the preinstalled
          <span><strong class="command">gnutar</strong></span> program. On Solaris 10 and
          OpenSolaris you can use the preinstalled
          <span><strong class="command">gtar</strong></span>. On other systems with a deficient
          <span><strong class="command">tar</strong></span>, you should install GNU
          <span><strong class="command">tar</strong></span> first.
        </p></li><li><p>
          A working ANSI C++ compiler. <span><strong class="command">gcc</strong></span> 2.95.2 or
          later, SGI C++, and SunPro C++ are some of the compilers that
          are known to work. <code class="literal">libg++</code> is not needed
          when using <span><strong class="command">gcc</strong></span>. <span><strong class="command">gcc</strong></span>
          2.7.x has a bug that makes it impossible to compile some
          perfectly legal C++ files, such as
          <code class="filename">sql/sql_base.cc</code>. If you have only
          <span><strong class="command">gcc</strong></span> 2.7.x, you must upgrade your
          <span><strong class="command">gcc</strong></span> to be able to compile MySQL.
          <span><strong class="command">gcc</strong></span> 2.8.1 is also known to have problems on
          some platforms, so it should be avoided if a newer compiler
          exists for the platform. <span><strong class="command">gcc</strong></span> 2.95.2 or
          later is recommended.
        </p></li><li><p>
          A good <span><strong class="command">make</strong></span> program. GNU
          <span><strong class="command">make</strong></span> is always recommended and is sometimes
          required. (BSD <span><strong class="command">make</strong></span> fails, and
          vendor-provided <span><strong class="command">make</strong></span> implementations may
          fail as well.) If you have problems, use GNU
          <span><strong class="command">make</strong></span> 3.75 or newer.
        </p></li><li><p>
          <span><strong class="command">libtool</strong></span> 1.5.24 or later is also
          recommended.
        </p></li></ul></div><p>
      If you are using a version of <span><strong class="command">gcc</strong></span> recent enough
      to understand the <code class="option">-fno-exceptions</code> option, it is
      <span class="emphasis"><em>very important</em></span> that you use this option.
      Otherwise, you may compile a binary that crashes randomly. Also
      use <code class="option">-felide-constructors</code> and
      <code class="option">-fno-rtti</code> along with
      <code class="option">-fno-exceptions</code>. When in doubt, do the following:
    </p><pre class="programlisting">CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors \
       -fno-exceptions -fno-rtti" ./configure \
       --prefix=/usr/local/mysql --enable-assembler \
       --with-mysqld-ldflags=-all-static
</pre><p>
      On most systems, this gives you a fast and stable binary.
    </p><p>
      If you run into problems and need to file a bug report, please use
      the instructions in <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="quick-install"></a>2.16.1. Source Installation Overview</h3></div></div></div><p>
        The basic commands that you must execute to install a MySQL
        source distribution are:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong>
shell&gt; <strong class="userinput"><code>useradd -g mysql mysql</code></strong>
shell&gt; <strong class="userinput"><code>gunzip &lt; mysql-<em class="replaceable"><code>VERSION</code></em>.tar.gz | tar -xvf -</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql-<em class="replaceable"><code>VERSION</code></em></code></strong>
shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local/mysql</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
shell&gt; <strong class="userinput"><code>make install</code></strong>
shell&gt; <strong class="userinput"><code>cp support-files/my-medium.cnf /etc/my.cnf</code></strong>
shell&gt; <strong class="userinput"><code>cd /usr/local/mysql</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql .</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql</code></strong>
shell&gt; <strong class="userinput"><code>chown -R root .</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql var</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
        If you start from a source RPM, do the following:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpmbuild --rebuild --clean MySQL-<em class="replaceable"><code>VERSION</code></em>.src.rpm</code></strong>
</pre><p>
        This makes a binary RPM that you can install. For older versions
        of RPM, you may have to replace the command
        <span><strong class="command">rpmbuild</strong></span> with <span><strong class="command">rpm</strong></span> instead.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This procedure does not set up any passwords for MySQL
          accounts. After following the procedure, proceed to
          <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>, for post-installation
          setup and testing.
        </p></div><p>
        A more detailed version of the preceding description for
        installing MySQL from a source distribution follows:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Add a login user and group for <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to
            run as:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong>
shell&gt; <strong class="userinput"><code>useradd -g mysql mysql</code></strong>
</pre><p>
            These commands add the <code class="literal">mysql</code> group and
            the <code class="literal">mysql</code> user. The syntax for
            <span><strong class="command">useradd</strong></span> and <span><strong class="command">groupadd</strong></span>
            may differ slightly on different versions of Unix, or they
            may have different names such as <span><strong class="command">adduser</strong></span>
            and <span><strong class="command">addgroup</strong></span>.
          </p><p>
            You might want to call the user and group something else
            instead of <code class="literal">mysql</code>. If so, substitute the
            appropriate name in the following steps.
          </p></li><li><p>
            Perform the following steps as the <code class="literal">mysql</code>
            user, except as noted.
          </p></li><li><p>
            Pick the directory under which you want to unpack the
            distribution and change location into it.
          </p></li><li><p>
            Obtain a distribution file using the instructions in
            <a href="installing.html#getting-mysql" title="2.5. How to Get MySQL">Section 2.5, “How to Get MySQL”</a>.
          </p></li><li><p>
            Unpack the distribution into the current directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gunzip &lt; <em class="replaceable"><code>/path/to/mysql-VERSION</code></em>.tar.gz | tar xvf -</code></strong>
</pre><p>
            This command creates a directory named
            <code class="filename">mysql-<em class="replaceable"><code>VERSION</code></em></code>.
          </p><p>
            With GNU <span><strong class="command">tar</strong></span>, no separate invocation of
            <code class="literal">gunzip</code> is necessary. You can use the
            following alternative command to uncompress and extract the
            distribution:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>tar zxvf <em class="replaceable"><code>/path/to/mysql-VERSION-OS</code></em>.tar.gz</code></strong>
</pre></li><li><p>
            Change location into the top-level directory of the unpacked
            distribution:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql-<em class="replaceable"><code>VERSION</code></em></code></strong>
</pre><p>
            Note that currently you must configure and build MySQL from
            this top-level directory. You cannot build it in a different
            directory.
          </p></li><li><p>
            Configure the release and compile everything:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local/mysql</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
</pre><p>
            When you run <span><strong class="command">configure</strong></span>, you might want to
            specify other options. Run <span><strong class="command">./configure
            --help</strong></span> for a list of options.
            <a href="installing.html#configure-options" title="2.16.2. Typical configure Options">Section 2.16.2, “Typical <span><strong class="command">configure</strong></span> Options”</a>, discusses some of the
            more useful options.
          </p><p>
            If <span><strong class="command">configure</strong></span> fails and you are going to
            send mail to a MySQL mailing list to ask for assistance,
            please include any lines from
            <code class="filename">config.log</code> that you think can help
            solve the problem. Also include the last couple of lines of
            output from <span><strong class="command">configure</strong></span>. To file a bug
            report, please use the instructions in
            <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
          </p><p>
            If the compile fails, see
            <a href="installing.html#compilation-problems" title="2.16.4. Dealing with Problems Compiling MySQL">Section 2.16.4, “Dealing with Problems Compiling MySQL”</a>, for help.
          </p></li><li><p>
            Install the distribution:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>make install</code></strong>
</pre><p>
            You might need to run this command as
            <code class="literal">root</code>.
          </p><p>
            If you want to set up an option file, use one of those
            present in the <code class="filename">support-files</code> directory
            as a template. For example:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cp support-files/my-medium.cnf /etc/my.cnf</code></strong>
</pre><p>
            You might need to run this command as
            <code class="literal">root</code>.
          </p><p>
            If you want to configure support for
            <code class="literal">InnoDB</code> tables, you should edit the
            <code class="literal">/etc/my.cnf</code> file, remove the
            <code class="literal">#</code> character before the option lines that
            start with <code class="literal">innodb_...</code>, and modify the
            option values to be what you want. See
            <a href="programs.html#option-files" title="4.2.3.3. Using Option Files">Section 4.2.3.3, “Using Option Files”</a>, and
            <a href="storage-engines.html#innodb-configuration" title="13.2.2. InnoDB Configuration">Section 13.2.2, “<code class="literal">InnoDB</code> Configuration”</a>.
          </p></li><li><p>
            Change location into the installation directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local/mysql</code></strong>
</pre></li><li><p>
            If you ran the <span><strong class="command">make install</strong></span> command as
            <code class="literal">root</code>, the installed files will be owned
            by <code class="literal">root</code>. Ensure that the installation is
            accessible to <code class="literal">mysql</code> by executing the
            following commands as <code class="literal">root</code> in the
            installation directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R mysql .</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong>
</pre><p>
            The first command changes the owner attribute of the files
            to the <code class="literal">mysql</code> user. The second changes the
            group attribute to the <code class="literal">mysql</code> group.
          </p></li><li><p>
            If you have not installed MySQL before, you must create the
            MySQL data directory and initialize the grant tables:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql</code></strong>
</pre><p>
            If you run the command as <code class="literal">root</code>, include
            the <code class="option">--user</code> option as shown. If you run the
            command while logged in as <code class="literal">mysql</code>, you can
            omit the <code class="option">--user</code> option.
          </p><p>
            The command should create the data directory and its
            contents with <code class="literal">mysql</code> as the owner.
          </p><p>
            After using <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> to create
            the grant tables for MySQL, you must restart the server
            manually. The <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> command to do
            this is shown in a later step.
          </p></li><li><p>
            Most of the MySQL installation can be owned by
            <code class="literal">root</code> if you like. The exception is that
            the data directory must be owned by
            <code class="literal">mysql</code>. To accomplish this, run the
            following commands as <code class="literal">root</code> in the
            installation directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R root .</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql var</code></strong>
</pre></li><li><p>
            If you want MySQL to start automatically when you boot your
            machine, you can copy
            <code class="filename">support-files/mysql.server</code> to the
            location where your system has its startup files. More
            information can be found in the
            <code class="filename">support-files/mysql.server</code> script
            itself; see also <a href="installing.html#automatic-start" title="2.17.2.2. Starting and Stopping MySQL Automatically">Section 2.17.2.2, “Starting and Stopping MySQL Automatically”</a>.
          </p></li><li><p>
            <a class="indexterm" name="id1680187"></a>

            <a class="indexterm" name="id1680199"></a>

            <a class="indexterm" name="id1680212"></a>

            You can set up new accounts using the
            <span><strong class="command">bin/mysql_setpermission</strong></span> script if you
            install the <code class="literal">DBI</code> and
            <code class="literal">DBD::mysql</code> Perl modules. See
            <a href="programs.html#mysql-setpermission" title="4.6.15. mysql_setpermission — Interactively Set Permissions in Grant
Tables">Section 4.6.15, “<span><strong class="command">mysql_setpermission</strong></span> — Interactively Set Permissions in Grant
Tables”</a>. For Perl module
            installation instructions, see
            <a href="installing.html#perl-support" title="2.21. Perl Installation Notes">Section 2.21, “Perl Installation Notes”</a>.
          </p></li></ol></div><p>
        After everything has been installed, you should test your
        distribution. To start the MySQL server, use the following
        command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>/usr/local/mysql/bin/mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
        If you run the command as <code class="literal">root</code>, you should
        use the <code class="option">--user</code> option as shown. The value of
        the option is the name of the login account that you created in
        the first step to use for running the server. If you run the
        command while logged in as that user, you can omit the
        <code class="option">--user</code> option.
      </p><p>
        If the command fails immediately and prints <code class="literal">mysqld
        ended</code>, you can find some information in the
        <code class="filename"><em class="replaceable"><code>host_name</code></em>.err</code>
        file in the data directory.
      </p><p>
        More information about <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> is given
        in <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The accounts that are listed in the MySQL grant tables
          initially have no passwords. After starting the server, you
          should set up passwords for them using the instructions in
          <a href="installing.html#post-installation" title="2.17. Post-Installation Setup and Testing">Section 2.17, “Post-Installation Setup and Testing”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="configure-options"></a>2.16.2. Typical <span><strong class="command">configure</strong></span> Options</h3></div></div></div><a class="indexterm" name="id1680356"></a><a class="indexterm" name="id1680364"></a><a class="indexterm" name="id1680373"></a><a class="indexterm" name="id1680382"></a><a class="indexterm" name="id1680395"></a><a class="indexterm" name="id1680404"></a><a class="indexterm" name="id1680413"></a><a class="indexterm" name="id1680425"></a><p>
        The <span><strong class="command">configure</strong></span> script gives you a great deal
        of control over how you configure a MySQL source distribution.
        Typically you do this using options on the
        <span><strong class="command">configure</strong></span> command line. You can also affect
        <span><strong class="command">configure</strong></span> using certain environment
        variables. See <a href="installing.html#environment-variables" title="2.20. Environment Variables">Section 2.20, “Environment Variables”</a>. For a
        full list of options supported by <span><strong class="command">configure</strong></span>,
        run this command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --help</code></strong>
</pre><p>
        A list of the available <span><strong class="command">configure</strong></span> options is
        provided in the table below.
      </p><div class="table"><a name="id1680489"></a><p class="title"><b>Table 2.1. Build (<code class="literal">configure</code>) Reference</b></p><table summary="Build (configure) Reference" border="1"><colgroup><col><col><col><col><col></colgroup><thead><tr><th><span class="bold"><strong>Formats</strong></span></th><th><span class="bold"><strong>Description</strong></span></th><th><span class="bold"><strong>Default</strong></span></th><th><span class="bold"><strong>Introduced</strong></span></th><th><span class="bold"><strong>Removed</strong></span></th></tr></thead><tbody><tr><td>--bindir=DIR</td><td>User executables</td><td>EPREFIX/bin</td><td> </td><td> </td></tr><tr><td>--build=BUILD</td><td>Configure for building on BUILD</td><td>guessed</td><td> </td><td> </td></tr><tr><td>--cache-file=FILE</td><td>Cache test results in FILE</td><td>disabled</td><td> </td><td> </td></tr><tr><td>-C</td><td>Alias for `--cache-file=config.cache'</td><td> </td><td> </td><td> </td></tr><tr><td>--config-cache</td><td> </td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--datadir=DIR</td><td>Read-only architecture-independent data</td><td>PREFIX/share</td><td> </td><td> </td></tr><tr><td>--disable-FEATURE</td><td>Do not include FEATURE</td><td> </td><td> </td><td> </td></tr><tr><td>--disable-dependency-tracking</td><td>Disable dependency tracking</td><td> </td><td> </td><td> </td></tr><tr><td>--disable-grant-options</td><td>Disable GRANT options</td><td> </td><td>5.0.34</td><td> </td></tr><tr><td>--disable-largefile</td><td>Omit support for large files</td><td> </td><td> </td><td> </td></tr><tr><td>--disable-libtool-lock</td><td>Disable libtool lock</td><td> </td><td> </td><td> </td></tr><tr><td>--disable-profiling</td><td>Build a version without query profiling code</td><td> </td><td>5.0.37</td><td>5.0.45</td></tr><tr><td>--enable-FEATURE</td><td>Enable FEATURE</td><td> </td><td> </td><td> </td></tr><tr><td>--enable-assembler</td><td>Use assembler versions of some string functions if available</td><td> </td><td> </td><td> </td></tr><tr><td>--enable-dependency-tracking</td><td>Do not reject slow dependency extractors</td><td> </td><td> </td><td> </td></tr><tr><td>--enable-fast-install</td><td>Optimize for fast installation</td><td>yes</td><td> </td><td> </td></tr><tr><td>--enable-local-infile</td><td>Enable LOAD DATA LOCAL INFILE</td><td>disabled</td><td> </td><td> </td></tr><tr><td>--enable-shared</td><td>Build shared libraries</td><td>yes</td><td> </td><td> </td></tr><tr><td>--enable-static</td><td>Build static libraries</td><td>yes</td><td> </td><td> </td></tr><tr><td>--enable-thread-safe-client</td><td>Compile the client with threads</td><td> </td><td> </td><td> </td></tr><tr><td>--exec-prefix=EPREFIX</td><td>Install architecture-dependent files in EPREFIX</td><td> </td><td> </td><td> </td></tr><tr><td>-h</td><td>Display this help and exit</td><td> </td><td> </td><td> </td></tr><tr><td>--help</td><td> </td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--help=short</td><td>Display options specific to this package</td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--help=recursive</td><td>Display the short help of all the included packages</td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--host=HOST</td><td>Cross-compile to build programs to run on HOST</td><td> </td><td> </td><td> </td></tr><tr><td>--includedir=DIR</td><td>C header files</td><td>PREFIX/include</td><td> </td><td> </td></tr><tr><td>--infodir=DIR</td><td>Info documentation</td><td>PREFIX/info</td><td> </td><td> </td></tr><tr><td>--libdir=DIR</td><td>Object code libraries</td><td>EPREFIX/lib</td><td> </td><td> </td></tr><tr><td>--libexecdir=DIR</td><td>Program executables</td><td>EPREFIX/libexec</td><td> </td><td> </td></tr><tr><td>--localstatedir=DIR</td><td>Modifiable single-machine data</td><td>PREFIX/var</td><td> </td><td> </td></tr><tr><td>--mandir=DIR</td><td>man documentation</td><td>PREFIX/man</td><td> </td><td> </td></tr><tr><td>-n</td><td>Do not create output files</td><td> </td><td> </td><td> </td></tr><tr><td>--no-create</td><td> </td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--oldincludedir=DIR</td><td>C header files for non-gcc</td><td>/usr/include</td><td> </td><td> </td></tr><tr><td>--prefix=PREFIX</td><td>Install architecture-independent files in PREFIX</td><td> </td><td> </td><td> </td></tr><tr><td>--program-prefix=PREFIX</td><td>Prepend PREFIX to installed program names</td><td> </td><td> </td><td> </td></tr><tr><td>--program-suffix=SUFFIX</td><td>Append SUFFIX to installed program names</td><td> </td><td> </td><td> </td></tr><tr><td>--program-transform-name=PROGRAM</td><td>run sed PROGRAM on installed program names</td><td> </td><td> </td><td> </td></tr><tr><td>-q</td><td>Do not print `checking...' messages</td><td> </td><td> </td><td> </td></tr><tr><td>--quiet</td><td> </td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--sbindir=DIR</td><td>System admin executables</td><td>EPREFIX/sbin</td><td> </td><td> </td></tr><tr><td>--sharedstatedir=DIR</td><td>Modifiable architecture-independent data</td><td>PREFIX/com</td><td> </td><td> </td></tr><tr><td>--srcdir=DIR</td><td>Find the sources in DIR</td><td>configure directory or ..</td><td> </td><td> </td></tr><tr><td>--sysconfdir=DIR</td><td>Read-only single-machine data</td><td>PREFIX/etc</td><td> </td><td> </td></tr><tr><td>--target=TARGET</td><td>Configure for building compilers for TARGET</td><td> </td><td> </td><td> </td></tr><tr><td>-V</td><td>Display version information and exit</td><td> </td><td> </td><td> </td></tr><tr><td>--version</td><td> </td><td> </td><td> </td><td class="auto-generated"> </td></tr><tr><td>--with-PACKAGE</td><td>Use PACKAGE</td><td> </td><td> </td><td> </td></tr><tr><td>--with-archive-storage-engine</td><td>Enable the Archive Storage Engine</td><td>no</td><td> </td><td> </td></tr><tr><td>--with-berkeley-db</td><td>Use BerkeleyDB located in DIR</td><td>no</td><td> </td><td> </td></tr><tr><td>--with-berkeley-db-includes</td><td>Find Berkeley DB headers in DIR</td><td> </td><td> </td><td> </td></tr><tr><td>--with-berkeley-db-libs</td><td>Find Berkeley DB libraries in DIR</td><td> </td><td> </td><td> </td></tr><tr><td>--with-big-tables</td><td>Support tables with more than 4 G rows even on 32 bit platforms</td><td> </td><td>5.0.4</td><td> </td></tr><tr><td>--with-blackhole-storage-engine</td><td>Enable the Blackhole Storage Engine</td><td>no</td><td>5.0.4</td><td> </td></tr><tr><td>--with-charset</td><td>Default character set</td><td> </td><td> </td><td> </td></tr><tr><td>--with-client-ldflags</td><td>Extra linking arguments for clients</td><td> </td><td> </td><td> </td></tr><tr><td>--with-collation</td><td>Default collation</td><td> </td><td> </td><td> </td></tr><tr><td>--with-comment</td><td>Comment about compilation environment</td><td> </td><td> </td><td> </td></tr><tr><td>--with-csv-storage-engine</td><td>Enable the CSV Storage Engine</td><td>yes</td><td> </td><td> </td></tr><tr><td>--with-darwin-mwcc</td><td>Use Metrowerks CodeWarrior wrappers on OS X/Darwin</td><td> </td><td>5.0.6</td><td> </td></tr><tr><td>--with-embedded-privilege-control</td><td>Build parts to check user's privileges (only affects embedded library)</td><td> </td><td> </td><td> </td></tr><tr><td>--with-embedded-server</td><td>Build the embedded server</td><td> </td><td> </td><td> </td></tr><tr><td>--with-example-storage-engine</td><td>Enable the Example Storage Engine</td><td>no</td><td> </td><td> </td></tr><tr><td>--with-extra-charsets</td><td>Use charsets in addition to default</td><td> </td><td> </td><td> </td></tr><tr><td>--with-gnu-ld</td><td>Assume the C compiler uses GNU ld</td><td>no</td><td> </td><td> </td></tr><tr><td>--with-isam</td><td>Enable the ISAM table type</td><td> </td><td> </td><td> </td></tr><tr><td>--with-lib-ccflags</td><td>Extra CC options for libraries</td><td> </td><td> </td><td> </td></tr><tr><td>--with-libwrap=DIR</td><td>Compile in libwrap (tcp_wrappers) support</td><td> </td><td> </td><td> </td></tr><tr><td>--with-low-memory</td><td>Try to use less memory to compile to avoid memory limitations</td><td> </td><td> </td><td> </td></tr><tr><td>--with-machine-type</td><td>Set the machine type, like "powerpc"</td><td> </td><td>5.0.44</td><td> </td></tr><tr><td>--with-max-indexes=N</td><td>Sets the maximum number of indexes per table</td><td>64</td><td> </td><td> </td></tr><tr><td>--with-mit-threads</td><td>Always use included thread lib</td><td> </td><td> </td><td> </td></tr><tr><td>--with-mysqld-ldflags</td><td>Extra linking arguments for mysqld</td><td> </td><td> </td><td> </td></tr><tr><td>--with-mysqld-libs</td><td>Extra libraries to link with for mysqld</td><td> </td><td>5.0.44</td><td> </td></tr><tr><td>--with-mysqld-user</td><td>What user the mysqld daemon shall be run as</td><td> </td><td> </td><td> </td></tr><tr><td>--with-mysqlfs</td><td>Include the corba-based MySQL file system</td><td> </td><td> </td><td> </td></tr><tr><td>--with-mysqlmanager</td><td>Build the mysqlmanager binary</td><td>Build if server is built</td><td> </td><td> </td></tr><tr><td>--with-named-curses-libs</td><td>Use specified curses libraries</td><td> </td><td> </td><td> </td></tr><tr><td>--with-named-thread-libs</td><td>Use specified thread libraries</td><td> </td><td> </td><td> </td></tr><tr><td>--with-ndb-ccflags</td><td>Extra CC options for ndb compile</td><td> </td><td>5.0.3</td><td> </td></tr><tr><td>--with-ndb-docs</td><td>Include the NDB Cluster ndbapi and mgmapi documentation</td><td> </td><td> </td><td> </td></tr><tr><td>--with-ndb-port</td><td>Port for NDB Cluster management server</td><td> </td><td> </td><td> </td></tr><tr><td>--with-ndb-port-base</td><td>Port for NDB Cluster management server</td><td> </td><td>5.0.3</td><td> </td></tr><tr><td>--with-ndb-sci=DIR</td><td>Provide MySQL with a custom location of sci library</td><td> </td><td> </td><td> </td></tr><tr><td>--with-ndb-shm</td><td>Include the NDB Cluster shared memory transporter</td><td> </td><td> </td><td> </td></tr><tr><td>--with-ndb-test</td><td>Include the NDB Cluster ndbapi test programs</td><td> </td><td> </td><td> </td></tr><tr><td>--with-ndbcluster</td><td>Include the NDB Cluster table handler</td><td>no</td><td> </td><td> </td></tr><tr><td>--with-openssl=DIR</td><td>Include the OpenSSL support</td><td> </td><td> </td><td> </td></tr><tr><td>--with-openssl-includes</td><td>Find OpenSSL headers in DIR</td><td> </td><td> </td><td> </td></tr><tr><td>--with-openssl-libs</td><td>Find OpenSSL libraries in DIR</td><td> </td><td> </td><td> </td></tr><tr><td>--with-other-libc=DIR</td><td>Link against libc and other standard libraries installed in
the specified nonstandard location</td><td> </td><td> </td><td> </td></tr><tr><td>--with-pic</td><td>Try to use only PIC/non-PIC objects</td><td>Use both</td><td> </td><td> </td></tr><tr><td>--with-pstack</td><td>Use the pstack backtrace library</td><td> </td><td> </td><td> </td></tr><tr><td>--with-pthread</td><td>Force use of pthread library</td><td> </td><td> </td><td> </td></tr><tr><td>--with-raid</td><td>Enable RAID Support</td><td> </td><td> </td><td> </td></tr><tr><td>--with-server-suffix</td><td>Append value to the version string</td><td> </td><td> </td><td> </td></tr><tr><td>--with-system-type</td><td>Set the system type, like "sun-solaris10"</td><td> </td><td>5.0.44</td><td> </td></tr><tr><td>--with-tags</td><td>Include additional configurations</td><td>automatic</td><td> </td><td> </td></tr><tr><td>--with-tcp-port</td><td>Which port to use for MySQL services</td><td>3306</td><td> </td><td> </td></tr><tr><td>--with-unix-socket-path</td><td>Where to put the unix-domain socket</td><td> </td><td> </td><td> </td></tr><tr><td>--with-vio</td><td>Include the Virtual IO support</td><td> </td><td> </td><td> </td></tr><tr><td>--with-yassl</td><td>Include the yaSSL support</td><td> </td><td>5.0.6</td><td> </td></tr><tr><td>--with-zlib-dir=no|bundled|DIR</td><td>Provide MySQL with a custom location of compression library</td><td> </td><td> </td><td> </td></tr><tr><td>--without-PACKAGE</td><td>Do not use PACKAGE</td><td> </td><td> </td><td> </td></tr><tr><td>--without-bench</td><td>Skip building of the benchmark suite</td><td> </td><td> </td><td> </td></tr><tr><td>--without-debug</td><td>Build a production version without debugging code</td><td> </td><td> </td><td> </td></tr><tr><td>--without-docs</td><td>Skip building of the documentation</td><td> </td><td> </td><td> </td></tr><tr><td>--without-extra-tools</td><td>Skip building utilities in the tools directory</td><td> </td><td> </td><td> </td></tr><tr><td>--without-geometry</td><td>Do not build geometry-related parts</td><td> </td><td> </td><td> </td></tr><tr><td>--without-innodb</td><td>Do not include the InnoDB table handler</td><td> </td><td> </td><td> </td></tr><tr><td>--without-libedit</td><td>Use system libedit instead of bundled copy</td><td> </td><td> </td><td> </td></tr><tr><td>--without-man</td><td>Skip building of the man pages</td><td> </td><td> </td><td> </td></tr><tr><td>--without-ndb-debug</td><td>Disable special ndb debug features</td><td> </td><td>5.0.3</td><td> </td></tr><tr><td>--without-query-cache</td><td>Do not build query cache</td><td> </td><td> </td><td> </td></tr><tr><td>--without-readline</td><td>Use system readline instead of bundled copy</td><td> </td><td> </td><td> </td></tr><tr><td>--without-server</td><td>Only build the client</td><td> </td><td> </td><td> </td></tr><tr><td>--without-uca</td><td>Skip building of the national Unicode collations</td><td> </td><td>5.0.3</td><td> </td></tr></tbody></table></div><p>
        Some of the <span><strong class="command">configure</strong></span> options available are
        described here. For options that may be of use if you have
        difficulties building MySQL, see
        <a href="installing.html#compilation-problems" title="2.16.4. Dealing with Problems Compiling MySQL">Section 2.16.4, “Dealing with Problems Compiling MySQL”</a>.
      </p><div class="itemizedlist"><ul type="disc"><li><p><a name="option_configure_without-server"></a>
            <a class="indexterm" name="id1681725"></a>

            <a class="indexterm" name="id1681737"></a>

            To compile just the MySQL client libraries and client
            programs and not the server, use the
            <a href="installing.html#option_configure_without-server"><code class="option">--without-server</code></a> option:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --without-server</code></strong>
</pre><p>
            If you have no C++ compiler, some client programs such as
            <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> cannot be compiled because they
            require C++.. In this case, you can remove the code in
            <span><strong class="command">configure</strong></span> that tests for the C++ compiler
            and then run <span><strong class="command">./configure</strong></span> with the
            <a href="installing.html#option_configure_without-server"><code class="option">--without-server</code></a> option.
            The compile step should still try to build all clients, but
            you can ignore any warnings about files such as
            <code class="filename">mysql.cc</code>. (If <span><strong class="command">make</strong></span>
            stops, try <span><strong class="command">make -k</strong></span> to tell it to continue
            with the rest of the build even if errors occur.)
          </p></li><li><p><a name="option_configure_with-embedded-server"></a>
            <a class="indexterm" name="id1681830"></a>

            <a class="indexterm" name="id1681843"></a>

            If you want to build the embedded MySQL library
            (<code class="literal">libmysqld.a</code>), use the
            <a href="installing.html#option_configure_with-embedded-server"><code class="option">--with-embedded-server</code></a>
            option.
          </p></li><li><p><a name="option_configure_prefix"></a>
            <a class="indexterm" name="id1681878"></a>

            <a class="indexterm" name="id1681890"></a>

            <a class="indexterm" name="id1681903"></a>

            <a class="indexterm" name="id1681915"></a>

            If you don't want your log files and database directories
            located under <code class="filename">/usr/local/var</code>, use a
            <span><strong class="command">configure</strong></span> command something like one of
            these:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local/mysql</code></strong>
shell&gt; <strong class="userinput"><code>./configure --prefix=/usr/local \</code></strong>
           <strong class="userinput"><code>--localstatedir=/usr/local/mysql/data</code></strong>
</pre><p>
            The first command changes the installation prefix so that
            everything is installed under
            <code class="filename">/usr/local/mysql</code> rather than the
            default of <code class="filename">/usr/local</code>. The second
            command preserves the default installation prefix, but
            overrides the default location for database directories
            (normally <code class="filename">/usr/local/var</code>) and changes
            it to <code class="literal">/usr/local/mysql/data</code>.
          </p><p>
            You can also specify the installation directory and data
            directory locations at server startup time by using the
            <a href="server-administration.html#option_mysqld_basedir"><code class="option">--basedir</code></a> and
            <a href="server-administration.html#option_mysqld_datadir"><code class="option">--datadir</code></a> options. These can
            be given on the command line or in an MySQL option file,
            although it is more common to use an option file. See
            <a href="programs.html#option-files" title="4.2.3.3. Using Option Files">Section 4.2.3.3, “Using Option Files”</a>.
          </p></li><li><p><a name="option_configure_with-unix-socket-path"></a>
            <a class="indexterm" name="id1653486"></a>

            <a class="indexterm" name="id1653498"></a>

            <a class="indexterm" name="id1653510"></a>

            <a class="indexterm" name="id1653519"></a>

            <a class="indexterm" name="id1653531"></a>

            If you are using Unix and you want the MySQL socket file
            location to be somewhere other than the default location
            (normally in the directory <code class="filename">/tmp</code> or
            <code class="filename">/var/run</code>), use a
            <span><strong class="command">configure</strong></span> command like this:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure \</code></strong>
           <strong class="userinput"><code>--with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock</code></strong>
</pre><p>
            The socket file name must be an absolute path name. You can
            also change the location of <code class="filename">mysql.sock</code>
            at server startup by using a MySQL option file. See
            <a href="error-handling.html#problems-with-mysql-sock" title="B.1.4.5. How to Protect or Change the MySQL Unix Socket File">Section B.1.4.5, “How to Protect or Change the MySQL Unix Socket File”</a>.
          </p></li><li><p><a name="option_configure_with-client-ldflags"></a>
            <a class="indexterm" name="id1653605"></a>

            <a class="indexterm" name="id1653618"></a>

            <a class="indexterm" name="id1681963"></a>

            <a class="indexterm" name="id1681976"></a>

            If you want to compile statically linked programs (for
            example, to make a binary distribution, to get better
            performance, or to work around problems with some Red Hat
            Linux distributions), run <span><strong class="command">configure</strong></span> like
            this:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --with-client-ldflags=-all-static \</code></strong>
           <strong class="userinput"><code>--with-mysqld-ldflags=-all-static</code></strong>
</pre></li><li><p>
            <a class="indexterm" name="id1682020"></a>

            <a class="indexterm" name="id1682029"></a>

            <a class="indexterm" name="id1682041"></a>

            <a class="indexterm" name="id1682050"></a>

            <a class="indexterm" name="id1682062"></a>

            <a class="indexterm" name="id1682071"></a>

            <a class="indexterm" name="id1682083"></a>

            If you are using <span><strong class="command">gcc</strong></span> and don't have
            <code class="literal">libg++</code> or <code class="literal">libstdc++</code>
            installed, you can tell <span><strong class="command">configure</strong></span> to use
            <span><strong class="command">gcc</strong></span> as your C++ compiler:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC=gcc CXX=gcc ./configure</code></strong>
</pre><p>
            When you use <span><strong class="command">gcc</strong></span> as your C++ compiler, it
            does not attempt to link in <code class="literal">libg++</code> or
            <code class="literal">libstdc++</code>. This may be a good thing to do
            even if you have those libraries installed. Some versions of
            them have caused strange problems for MySQL users in the
            past.
          </p><p>
            The following list indicates some compilers and environment
            variable settings that are commonly used with each one.
          </p><a class="indexterm" name="id1682166"></a><a class="indexterm" name="id1682175"></a><a class="indexterm" name="id1682188"></a><a class="indexterm" name="id1682197"></a><a class="indexterm" name="id1682209"></a><a class="indexterm" name="id1682218"></a><a class="indexterm" name="id1682230"></a><a class="indexterm" name="id1682239"></a><div class="itemizedlist"><ul type="circle"><li><p>
                <span><strong class="command">gcc</strong></span> 2.7.2:
              </p><pre class="programlisting">CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors"
</pre></li><li><p>
                <span><strong class="command">gcc</strong></span> 2.95.2:
              </p><pre class="programlisting">CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro \
-felide-constructors -fno-exceptions -fno-rtti"
</pre></li><li><p>
                <code class="literal">pgcc</code> 2.90.29 or newer:
              </p><pre class="programlisting">CFLAGS="-O3 -mpentiumpro -mstack-align-double" CXX=gcc \
CXXFLAGS="-O3 -mpentiumpro -mstack-align-double \
-felide-constructors -fno-exceptions -fno-rtti"
</pre></li></ul></div><p>
            In most cases, you can get a reasonably optimized MySQL
            binary by using the options from the preceding list and
            adding the following options to the
            <span><strong class="command">configure</strong></span> line:
          </p><pre class="programlisting">--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static
</pre><p>
            The full <span><strong class="command">configure</strong></span> line would, in other
            words, be something like the following for all recent
            <span><strong class="command">gcc</strong></span> versions:
          </p><pre class="programlisting">CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro \
-felide-constructors -fno-exceptions -fno-rtti" ./configure \
--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static
</pre><p>
            The binaries we provide on the MySQL Web site at
            <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a> are all compiled with
            full optimization and should be perfect for most users. See
            <a href="installing.html#mysql-binaries" title="2.4.3.4. MySQL Binaries Compiled by Sun Microsystems, Inc.">Section 2.4.3.4, “MySQL Binaries Compiled by Sun Microsystems, Inc.”</a>. There are some
            configuration settings you can tweak to build an even faster
            binary, but these are only for advanced users. See
            <a href="optimization.html#compile-and-link-options" title="7.5.1. How Compiling and Linking Affects the Speed of MySQL">Section 7.5.1, “How Compiling and Linking Affects the Speed of MySQL”</a>.
          </p><p>
            If the build fails and produces errors about your compiler
            or linker not being able to create the shared library
            <code class="filename">libmysqlclient.so.<em class="replaceable"><code>N</code></em></code>
            (where <em class="replaceable"><code>N</code></em> is a version number),
            you can work around this problem by giving the
            <code class="option">--disable-shared</code> option to
            <span><strong class="command">configure</strong></span>. In this case,
            <span><strong class="command">configure</strong></span> does not build a shared
            <code class="filename">libmysqlclient.so.<em class="replaceable"><code>N</code></em></code>
            library.
          </p></li><li><p><a name="option_configure_with-charset"></a>
            <a class="indexterm" name="id1682421"></a>

            <a class="indexterm" name="id1682430"></a>

            <a class="indexterm" name="id1682442"></a>

            <a class="indexterm" name="id1682454"></a>

            By default, MySQL uses the <code class="literal">latin1</code> (cp1252
            West European) character set. To change the default set, use
            the <a href="installing.html#option_configure_with-charset"><code class="option">--with-charset</code></a> option:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --with-charset=<em class="replaceable"><code>CHARSET</code></em></code></strong>
</pre><p>
            <em class="replaceable"><code>CHARSET</code></em> may be one of
            <code class="literal">binary</code>, <code class="literal">armscii8</code>,
            <code class="literal">ascii</code>, <code class="literal">big5</code>,
            <code class="literal">cp1250</code>, <code class="literal">cp1251</code>,
            <code class="literal">cp1256</code>, <code class="literal">cp1257</code>,
            <code class="literal">cp850</code>, <code class="literal">cp852</code>,
            <code class="literal">cp866</code>, <code class="literal">cp932</code>,
            <code class="literal">dec8</code>, <code class="literal">eucjpms</code>,
            <code class="literal">euckr</code>, <code class="literal">gb2312</code>,
            <code class="literal">gbk</code>, <code class="literal">geostd8</code>,
            <code class="literal">greek</code>, <code class="literal">hebrew</code>,
            <code class="literal">hp8</code>, <code class="literal">keybcs2</code>,
            <code class="literal">koi8r</code>, <code class="literal">koi8u</code>,
            <code class="literal">latin1</code>, <code class="literal">latin2</code>,
            <code class="literal">latin5</code>, <code class="literal">latin7</code>,
            <code class="literal">macce</code>, <code class="literal">macroman</code>,
            <code class="literal">sjis</code>, <code class="literal">swe7</code>,
            <code class="literal">tis620</code>, <code class="literal">ucs2</code>,
            <code class="literal">ujis</code>, <code class="literal">utf8</code>. See
            <a href="internationalization-localization.html#charset-configuration" title="9.2. The Character Set Used for Data and Sorting">Section 9.2, “The Character Set Used for Data and Sorting”</a>. (Additional
            character sets might be available. Check the output from
            <span><strong class="command">./configure --help</strong></span> for the current list.)
          </p><p><a name="option_configure_with-collation"></a>
            The default collation may also be specified. MySQL uses the
            <code class="literal">latin1_swedish_ci</code> collation by default.
            To change this, use the
            <a href="installing.html#option_configure_with-collation"><code class="option">--with-collation</code></a> option:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --with-collation=<em class="replaceable"><code>COLLATION</code></em></code></strong>
</pre><p>
            To change both the character set and the collation, use both
            the <a href="installing.html#option_configure_with-charset"><code class="option">--with-charset</code></a> and
            <a href="installing.html#option_configure_with-collation"><code class="option">--with-collation</code></a> options.
            The collation must be a legal collation for the character
            set. (Use the <a href="sql-syntax.html#show-collation" title="12.5.5.4. SHOW COLLATION Syntax"><code class="literal">SHOW COLLATION</code></a>
            statement to determine which collations are available for
            each character set.)
          </p><p><a name="option_configure_with-extra-charsets"></a>
            <a class="indexterm" name="id1682791"></a>

            <a class="indexterm" name="id1682804"></a>

            With the <span><strong class="command">configure</strong></span> option
            <a href="installing.html#option_configure_with-extra-charsets"><code class="option">--with-extra-charsets=<em class="replaceable"><code>LIST</code></em></code></a>,
            you can define which additional character sets should be
            compiled into the server. <em class="replaceable"><code>LIST</code></em> is
            one of the following:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                A list of character set names separated by spaces
              </p></li><li><p>
                <code class="literal">complex</code> to include all character sets
                that can't be dynamically loaded
              </p></li><li><p>
                <code class="literal">all</code> to include all character sets
                into the binaries
              </p></li></ul></div><p>
            Clients that want to convert characters between the server
            and the client should use the <code class="literal">SET NAMES</code>
            statement. See <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>,
            and <a href="internationalization-localization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.
          </p></li><li><p><a name="option_configure_with-debug"></a>
            <a class="indexterm" name="id1682902"></a>

            <a class="indexterm" name="id1682914"></a>

            To configure MySQL with debugging code, use the
            <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug</code></a> option:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --with-debug</code></strong>
</pre><p>
            This causes a safe memory allocator to be included that can
            find some errors and that provides output about what is
            happening. See
            <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
            Internals: Porting</a>.
          </p><p>
            As of MySQL 5.0.25, using
            <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug</code></a> to configure
            MySQL with debugging support enables you to use the
            <a href="server-administration.html#option_mysqld_debug"><code class="option">--debug="d,parser_debug"</code></a>
            option when you start the server. This causes the Bison
            parser that is used to process SQL statements to dump a
            parser trace to the server's standard error output.
            Typically, this output is written to the error log.
          </p></li><li><p><a name="option_configure_enable-thread-safe-client"></a>
            <a class="indexterm" name="id1682987"></a>

            <a class="indexterm" name="id1683000"></a>

            If your client programs are using threads, you must compile
            a thread-safe version of the MySQL client library with the
            <a href="installing.html#option_configure_enable-thread-safe-client"><code class="option">--enable-thread-safe-client</code></a>
            configure option. This creates a
            <code class="literal">libmysqlclient_r</code> library with which you
            should link your threaded applications. See
            <a href="connectors-apis.html#threaded-clients" title="20.9.16.2. How to Make a Threaded Client">Section 20.9.16.2, “How to Make a Threaded Client”</a>.
          </p></li><li><p><a name="option_configure_with-zlib-dir"></a>
            <a class="indexterm" name="id1683042"></a>

            <a class="indexterm" name="id1683054"></a>

            Some features require that the server be built with
            compression library support, such as the
            <a href="functions.html#function_compress"><code class="literal">COMPRESS()</code></a> and
            <a href="functions.html#function_uncompress"><code class="literal">UNCOMPRESS()</code></a> functions, and
            compression of the client/server protocol. The
            <a href="installing.html#option_configure_with-zlib-dir"><code class="option">--with-zlib-dir=no|bundled|<em class="replaceable"><code>DIR</code></em></code></a>
            option provides control for compression library support. The
            value <code class="literal">no</code> explicitly disables compression
            support. <code class="literal">bundled</code> causes the
            <code class="literal">zlib</code> library bundled in the MySQL sources
            to be used. A <em class="replaceable"><code>DIR</code></em> path name
            specifies where to find the compression library sources.
          </p></li><li><p><a name="option_configure_with-big-tables"></a>
            <a class="indexterm" name="id1683124"></a>

            <a class="indexterm" name="id1683136"></a>

            It is possible to build MySQL 5.0 with large
            table support using the
            <a href="installing.html#option_configure_with-big-tables"><code class="option">--with-big-tables</code></a> option,
            beginning with MySQL 5.0.4.
          </p><p>
            This option causes the variables that store table row counts
            to be declared as <code class="literal">unsigned long long</code>
            rather than <code class="literal">unsigned long</code>. This enables
            tables to hold up to approximately 1.844E+19
            ((2<sup>32</sup>)<sup>2</sup>)
            rows rather than 2<sup>32</sup> (~4.295E+09)
            rows. Previously it was necessary to pass
            <code class="option">-DBIG_TABLES</code> to the compiler manually in
            order to enable this feature.
          </p></li><li><p><a name="option_configure_disable-grant-options"></a>
            <a class="indexterm" name="id1683198"></a>

            <a class="indexterm" name="id1683211"></a>

            Run <span><strong class="command">configure</strong></span> with the
            <a href="installing.html#option_configure_disable-grant-options"><code class="option">--disable-grant-options</code></a>
            option to cause the
            <a href="server-administration.html#option_mysqld_bootstrap"><code class="option">--bootstrap</code></a>,
            <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a>, and
            <a href="server-administration.html#option_mysqld_init-file"><code class="option">--init-file</code></a> options for
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to be disabled. For Windows, the
            <span><strong class="command">configure.js</strong></span> script recognizes the
            <code class="literal">DISABLE_GRANT_OPTIONS</code> flag, which has the
            same effect. The capability is available as of MySQL 5.0.34.
          </p></li><li><p><a name="option_configure_enable-profiling"></a>
            <a class="indexterm" name="id1683288"></a>

            <a class="indexterm" name="id1683300"></a>

            In MySQL Community Server, this option enables the statement
            profiling capability exposed by the
            <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> and
            <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW PROFILES</code></a> statements.
            (See <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax">Section 12.5.5.29, “<code class="literal">SHOW PROFILES</code> Syntax”</a>.) The option was added
            in MySQL 5.0.37.
          </p></li><li><p>
            See <a href="installing.html#operating-system-specific-notes" title="2.19. Operating System-Specific Notes">Section 2.19, “Operating System-Specific Notes”</a>, for
            options that pertain to particular operating systems.
          </p></li><li><p>
            See <a href="server-administration.html#secure-using-ssl" title="5.5.7.2. Using SSL Connections">Section 5.5.7.2, “Using SSL Connections”</a>, for options that
            pertain to configuring MySQL to support secure (encrypted)
            connections.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="installing-source-tree"></a>2.16.3. Installing from the Development Source Tree</h3></div></div></div><a class="indexterm" name="id1683372"></a><a class="indexterm" name="id1683381"></a><a class="indexterm" name="id1683390"></a><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          You should read this section only if you are interested in
          helping us test our new code. If you just want to get MySQL up
          and running on your system, you should use a standard release
          distribution (either a binary or source distribution).
        </p></div><p>
        To obtain the most recent development source tree, you first
        need to download and install Bazaar. You can obtain Bazaar from
        the <a href="http://bazaar-vcs.org" target="_top">Bazaar VCS
        Website</a>. Bazaar is supported by any platform that
        supports Python, and is therefore compatible with any Linux,
        Unix, Windows or Mac OS X host. Instructions for downloading and
        installing Bazaar on the different platforms are available on
        the Bazaar website.
      </p><p>
        All MySQL projects are hosted on
        <a href="http://launchpad.net/" target="_top">Launchpad</a>. MySQL
        projects, including MySQL server, MySQL Workbench and others are
        available from the
        <a href="http://launchpad.net/~mysql" target="_top">Sun/MySQL
        Engineering</a> page. For the repositories related only to
        MySQL server, see the
        <a href="http://launchpad.net/mysql-server" target="_top">MySQL
        Server</a> page.
      </p><p>
        To build under Unix/Linux, you must have the following tools
        installed:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            GNU <span><strong class="command">make</strong></span>, available from
            <a href="http://www.gnu.org/software/make/" target="_top">http://www.gnu.org/software/make/</a>. Although
            some platforms come with their own <span><strong class="command">make</strong></span>
            implementations, it is highly recommended that you use GNU
            <span><strong class="command">make</strong></span>. It may already be available on your
            system as <span><strong class="command">gmake</strong></span>.
          </p></li><li><p>
            <span><strong class="command">autoconf</strong></span> 2.58 (or newer), available from
            <a href="http://www.gnu.org/software/autoconf/" target="_top">http://www.gnu.org/software/autoconf/</a>.
          </p></li><li><p>
            <span><strong class="command">automake</strong></span> 1.8.1, available from
            <a href="http://www.gnu.org/software/automake/" target="_top">http://www.gnu.org/software/automake/</a>.
          </p></li><li><p>
            <span><strong class="command">libtool</strong></span> 1.5, available from
            <a href="http://www.gnu.org/software/libtool/" target="_top">http://www.gnu.org/software/libtool/</a>.
          </p></li><li><p>
            <span><strong class="command">m4</strong></span>, available from
            <a href="http://www.gnu.org/software/m4/" target="_top">http://www.gnu.org/software/m4/</a>.
          </p></li><li><p>
            <span><strong class="command">bison</strong></span>, available from
            <a href="http://www.gnu.org/software/bison/" target="_top">http://www.gnu.org/software/bison/</a>. You
            should use the latest version of bison where possible.
            Version 1.75 and version 2.1 are known to work. There have
            been reported problems with <span><strong class="command">bison</strong></span> 1.875.
            If you experience problems, upgrade to a later, rather than
            earlier, version. Versions of <span><strong class="command">bison</strong></span> older
            than 1.75 may report this error:
          </p><pre class="programlisting">sql_yacc.yy:#####: fatal error: maximum table size (32767) exceeded
</pre><p>
            The maximum table size is not actually exceeded; the error
            is caused by bugs in older versions of
            <span><strong class="command">bison</strong></span>.
          </p></li></ul></div><p>
        To build under Windows you will need a copy of Microsoft Visual
        C++ 2005 Express Edition, Visual Studio .Net 2003 (7.1), or
        Visual Studio 2005 (8.0) compiler system.
      </p><p>
        Once you have the necessary tools installed, you first need to
        create a local branch of the MySQL source code on your machine:
      </p><div class="orderedlist"><ol type="1"><li><p>
            To obtain a copy of the MySQL source code, you must create a
            new Bazaar branch. If you do not already have a Bazaar
            repository directory set up, you need to initialize a new
            directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir mysql-server</code></strong>
shell&gt; <strong class="userinput"><code>bzr init-repo --trees mysql-server</code></strong></pre></li><li><p>
            Once you have an initialized directory, you can
            <code class="literal">branch</code> from the public MySQL server
            repositories. To create a branch of a specific version:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql-server</code></strong>
shell&gt; <strong class="userinput"><code>bzr branch lp:mysql-server/5.0 mysql-5.0</code></strong></pre></li><li><p>
            The initial download will take some time to complete,
            depending on the speed of your connection. Please be
            patient. Once you have downloaded the first tree, additional
            trees should take significantly less time to download.
          </p></li><li><p>
            When building from the Bazaar branch, you may want to create
            a copy of your active branch so that you can make
            configuration and other changes without affecting the
            original branch contents. You can achieve this by branching
            from the original branch:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bzr branch mysql-5.0 mysql-5.0-build</code></strong></pre></li></ol></div><p>
        Once you have the local branch, you can start to build MySQL
        server from the source code. On Windows, the build process is
        different from Unix/Linux. To continue building MySQL on
        Windows, see <a href="installing.html#windows-source-build" title="2.16.6. Installing MySQL from Source on Windows">Section 2.16.6, “Installing MySQL from Source on Windows”</a>.
      </p><p>
        On Unix/Linux you need to use the <span><strong class="command">autoconf</strong></span>
        system to create the <span><strong class="command">configure</strong></span> script so that
        you can configure the build environment before building.
      </p><div class="orderedlist"><ol type="1"><li><p>
            The following example shows the typical commands required to
            configure a source tree. The first <code class="literal">cd</code>
            command changes location into the top-level directory of the
            tree; replace <code class="filename">mysql-5.0</code>
            with the appropriate directory name.
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              For MySQL 5.1.12 and earlier, you must separately
              configure the <code class="literal">INNODB</code> storage engine.
              You can do this by running the following command from the
              main source directory:
            </p><pre class="programlisting"></pre></div><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql-5.0</code></strong>
shell&gt; <strong class="userinput"><code>(cd bdb/deist; sh s_all)</code></strong>
shell&gt; <strong class="userinput"><code>(cd innobase; autoreconf --force --install)</code></strong>
shell&gt; <strong class="userinput"><code>autoreconf --force --install</code></strong>
shell&gt; <strong class="userinput"><code>./configure  # Add your favorite options here</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
</pre><p>
            Or you can use <span><strong class="command">BUILD/autorun.sh</strong></span> as a
            shortcut for the following sequence of commands:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>aclocal; autoheader</code></strong>
shell&gt; <strong class="userinput"><code>libtoolize --automake --force</code></strong>
shell&gt; <strong class="userinput"><code>automake --force --add-missing; autoconf</code></strong>
shell&gt; <strong class="userinput"><code>(cd bdb/deist; sh s_all)</code></strong>
shell&gt; <strong class="userinput"><code>(cd innobase; aclocal; autoheader; autoconf; automake)</code></strong>
</pre><p>
            The command line that changes directory into the
            <code class="filename">storage/innobase</code> directory is used to
            configure the <code class="literal">InnoDB</code> storage engine. You
            can omit this lines if you do not require
            <code class="literal">InnoDB</code> support.
          </p><p>
            If you get some strange errors during this stage, verify
            that you have the correct version of the
            <span><strong class="command">libtool</strong></span> installed.
          </p><p>
            A collection of our standard configuration scripts is
            located in the <code class="filename">BUILD/</code> subdirectory. For
            example, you may find it more convenient to use the
            <code class="filename">BUILD/compile-pentium-debug</code> script than
            the preceding set of shell commands. To compile on a
            different architecture, modify the script by removing flags
            that are Pentium-specific, or use another script that may be
            more appropriate. These scripts are provided on an
            “<span class="quote">as-is</span>” basis. They are not officially
            maintained and their contents may change from release to
            release.
          </p></li><li><p>
            When the build is done, run <span><strong class="command">make install</strong></span>.
            Be careful with this on a production machine; the command
            may overwrite your live release installation. If you have
            another installation of MySQL, run
            <span><strong class="command">./configure</strong></span> with different values for the
            <a href="installing.html#option_configure_prefix"><code class="option">--prefix</code></a>,
            <code class="option">--with-tcp-port</code>, and
            <a href="installing.html#option_configure_with-unix-socket-path"><code class="option">--with-unix-socket-path</code></a>
            options than those used for your production server.
          </p></li><li><p>
            Play hard with your new installation and try to make the new
            features crash. Start by running <span><strong class="command">make
            test</strong></span>. See <a href="extending-mysql.html#mysql-test-suite" title="21.1.2. MySQL Test Suite">Section 21.1.2, “MySQL Test Suite”</a>.
          </p></li><li><p>
            If you have gotten to the <span><strong class="command">make</strong></span> stage, but
            the distribution does not compile, please enter the problem
            into our bugs database using the instructions given in
            <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>. If you have installed the
            latest versions of the required GNU tools, and they crash
            trying to process our configuration files, please report
            that also. However, if you execute
            <code class="literal">aclocal</code> and get a <code class="literal">command not
            found</code> error or a similar problem, do not report
            it. Instead, make sure that all the necessary tools are
            installed and that your <code class="literal">PATH</code> variable is
            set correctly so that your shell can find them.
          </p></li><li><p>
            After initially copying the repository with
            <span><strong class="command">bzr</strong></span> to obtain the source tree, you should
            use <span><strong class="command">pull</strong></span> option to periodically update
            your local copy. To do this any time after you have set up
            the repository, use this command:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bzr pull</code></strong>
</pre></li><li><p>
            You can examine the changeset comments for the tree by using
            the <code class="literal">log</code> option to <span><strong class="command">bzr</strong></span>:
          </p><pre class="programlisting">shell&gt; bzr log</pre><p>
            You can also browse changesets, comments, and source code
            online. To browse this information for MySQL
            5.0, go to
            <a href="http://launchpad.net/mysql-server/" target="_top">http://launchpad.net/mysql-server/</a>.
          </p><p>
            If you see diffs or code that you have a question about, do
            not hesitate to send email to the MySQL
            <code class="literal">internals</code> mailing list. See
            <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>. Also, if you think you have
            a better idea on how to do something, send an email message
            to the list with a patch.
          </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="compilation-problems"></a>2.16.4. Dealing with Problems Compiling MySQL</h3></div></div></div><a class="indexterm" name="id1684118"></a><a class="indexterm" name="id1684130"></a><a class="indexterm" name="id1684143"></a><a class="indexterm" name="id1684152"></a><a class="indexterm" name="id1684160"></a><p>
        All MySQL programs compile cleanly for us with no warnings on
        Solaris or Linux using <span><strong class="command">gcc</strong></span>. On other systems,
        warnings may occur due to differences in system include files.
        See <a href="installing.html#mit-pthreads" title="2.16.5. MIT-pthreads Notes">Section 2.16.5, “MIT-pthreads Notes”</a>, for warnings that may occur
        when using MIT-pthreads. For other problems, check the following
        list.
      </p><p>
        The solution to many problems involves reconfiguring. If you do
        need to reconfigure, take note of the following:
      </p><a class="indexterm" name="id1684194"></a><a class="indexterm" name="id1684203"></a><a class="indexterm" name="id1684215"></a><a class="indexterm" name="id1684224"></a><div class="itemizedlist"><ul type="disc"><li><p>
            If <span><strong class="command">configure</strong></span> is run after it has
            previously been run, it may use information that was
            gathered during its previous invocation. This information is
            stored in <code class="filename">config.cache</code>. When
            <span><strong class="command">configure</strong></span> starts up, it looks for that
            file and reads its contents if it exists, on the assumption
            that the information is still correct. That assumption is
            invalid when you reconfigure.
          </p></li><li><p>
            Each time you run <span><strong class="command">configure</strong></span>, you must run
            <span><strong class="command">make</strong></span> again to recompile. However, you may
            want to remove old object files from previous builds first
            because they were compiled using different configuration
            options.
          </p></li></ul></div><p>
        To prevent old configuration information or object files from
        being used, run these commands before re-running
        <span><strong class="command">configure</strong></span>:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rm config.cache</code></strong>
shell&gt; <strong class="userinput"><code>make clean</code></strong>
</pre><p>
        Alternatively, you can run <span><strong class="command">make distclean</strong></span>.
      </p><p>
        The following list describes some of the problems when compiling
        MySQL that have been found to occur most often:
      </p><div class="itemizedlist"><a class="indexterm" name="id1684329"></a><a class="indexterm" name="id1684338"></a><a class="indexterm" name="id1684347"></a><a class="indexterm" name="id1684356"></a><a class="indexterm" name="id1684365"></a><a class="indexterm" name="id1684377"></a><ul type="disc"><li><p><a name="option_configure_with-low-memory"></a>
            If you get errors such as the ones shown here when compiling
            <code class="filename">sql_yacc.cc</code>, you probably have run out
            of memory or swap space:
          </p><pre class="programlisting">Internal compiler error: program cc1plus got fatal signal 11
Out of virtual memory
Virtual memory exhausted
</pre><p>
            The problem is that <span><strong class="command">gcc</strong></span> requires a huge
            amount of memory to compile <code class="filename">sql_yacc.cc</code>
            with inline functions. Try running
            <span><strong class="command">configure</strong></span> with the
            <a href="installing.html#option_configure_with-low-memory"><code class="option">--with-low-memory</code></a> option:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --with-low-memory</code></strong>
</pre><p>
            This option causes <code class="option">-fno-inline</code> to be added
            to the compile line if you are using <span><strong class="command">gcc</strong></span>
            and <code class="option">-O0</code> if you are using something else.
            You should try the
            <a href="installing.html#option_configure_with-low-memory"><code class="option">--with-low-memory</code></a> option
            even if you have so much memory and swap space that you
            think you can't possibly have run out. This problem has been
            observed to occur even on systems with generous hardware
            configurations, and the
            <a href="installing.html#option_configure_with-low-memory"><code class="option">--with-low-memory</code></a> option
            usually fixes it.
          </p></li><li><p>
            By default, <span><strong class="command">configure</strong></span> picks
            <span><strong class="command">c++</strong></span> as the compiler name and GNU
            <span><strong class="command">c++</strong></span> links with <code class="option">-lg++</code>. If
            you are using <span><strong class="command">gcc</strong></span>, that behavior can
            cause problems during configuration such as this:
          </p><a class="indexterm" name="id1684521"></a><pre class="programlisting">configure: error: installation or configuration problem:
C++ compiler cannot create executables.
</pre><a class="indexterm" name="id1684537"></a><a class="indexterm" name="id1684546"></a><p>
            You might also observe problems during compilation related
            to <span><strong class="command">g++</strong></span>, <code class="literal">libg++</code>, or
            <code class="literal">libstdc++</code>.
          </p><p>
            One cause of these problems is that you may not have
            <span><strong class="command">g++</strong></span>, or you may have
            <span><strong class="command">g++</strong></span> but not <code class="literal">libg++</code>, or
            <code class="literal">libstdc++</code>. Take a look at the
            <code class="filename">config.log</code> file. It should contain the
            exact reason why your C++ compiler didn't work. To work
            around these problems, you can use <span><strong class="command">gcc</strong></span> as
            your C++ compiler. Try setting the environment variable
            <code class="literal">CXX</code> to <code class="literal">"gcc -O3"</code>. For
            example:
          </p><a class="indexterm" name="id1684632"></a><a class="indexterm" name="id1684641"></a><pre class="programlisting">shell&gt; <strong class="userinput"><code>CXX="gcc -O3" ./configure</code></strong>
</pre><p>
            This works because <span><strong class="command">gcc</strong></span> compiles C++
            source files as well as <span><strong class="command">g++</strong></span> does, but
            does not link in <code class="literal">libg++</code> or
            <code class="literal">libstdc++</code> by default.
          </p><p>
            Another way to fix these problems is to install
            <span><strong class="command">g++</strong></span>, <code class="literal">libg++</code>, and
            <code class="literal">libstdc++</code>. However, do not use
            <code class="literal">libg++</code> or <code class="literal">libstdc++</code>
            with MySQL because this only increases the binary size of
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> without providing any benefits.
            Some versions of these libraries have also caused strange
            problems for MySQL users in the past.
          </p></li><li><p>
            If your compile fails with errors such as any of the
            following, you must upgrade your version of
            <span><strong class="command">make</strong></span> to GNU <span><strong class="command">make</strong></span>:
          </p><pre class="programlisting">making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
</pre><p>
            Or:
          </p><pre class="programlisting">make: file `Makefile' line 18: Must be a separator (:
</pre><p>
            Or:
          </p><pre class="programlisting">pthread.h: No such file or directory
</pre><a class="indexterm" name="id1684780"></a><a class="indexterm" name="id1684789"></a><a class="indexterm" name="id1684798"></a><a class="indexterm" name="id1684811"></a><p>
            Solaris and FreeBSD are known to have troublesome
            <span><strong class="command">make</strong></span> programs.
          </p><p>
            GNU <span><strong class="command">make</strong></span> 3.75 is known to work.
          </p></li><li><p><a name="option_configure_with-libevent"></a>
            <a class="indexterm" name="id1684850"></a>

            <a class="indexterm" name="id1684859"></a>

            <a class="indexterm" name="id1684871"></a>

            <a class="indexterm" name="id1684880"></a>

            <a class="indexterm" name="id1684893"></a>

            <a class="indexterm" name="id1684902"></a>

            <a class="indexterm" name="id1684914"></a>

            <a class="indexterm" name="id1684923"></a>

            If you want to define flags to be used by your C or C++
            compilers, do so by adding the flags to the
            <code class="literal">CFLAGS</code> and <code class="literal">CXXFLAGS</code>
            environment variables. You can also specify the compiler
            names this way using <code class="literal">CC</code> and
            <code class="literal">CXX</code>. For example:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CC=gcc</code></strong>
shell&gt; <strong class="userinput"><code>CFLAGS=-O3</code></strong>
shell&gt; <strong class="userinput"><code>CXX=gcc</code></strong>
shell&gt; <strong class="userinput"><code>CXXFLAGS=-O3</code></strong>
shell&gt; <strong class="userinput"><code>export CC CFLAGS CXX CXXFLAGS</code></strong>
</pre><p>
            See <a href="installing.html#mysql-binaries" title="2.4.3.4. MySQL Binaries Compiled by Sun Microsystems, Inc.">Section 2.4.3.4, “MySQL Binaries Compiled by Sun Microsystems, Inc.”</a>, for a list of flag
            definitions that have been found to be useful on various
            systems.
          </p></li><li><p>
            If you get errors such as those shown here when compiling
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, <span><strong class="command">configure</strong></span> did
            not correctly detect the type of the last argument to
            <code class="literal">accept()</code>,
            <code class="literal">getsockname()</code>, or
            <code class="literal">getpeername()</code>:
          </p><pre class="programlisting">cxx: Error: mysqld.cc, line 645: In this statement, the referenced
     type of the pointer value ''length'' is ''unsigned long'',
     which is not compatible with ''int''.
new_sock = accept(sock, (struct sockaddr *)&amp;cAddr, &amp;length);
</pre><p>
            To fix this, edit the <code class="filename">config.h</code> file
            (which is generated by <span><strong class="command">configure</strong></span>). Look
            for these lines:
          </p><pre class="programlisting">/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE XXX
</pre><p>
            Change <code class="literal">XXX</code> to <code class="literal">size_t</code>
            or <code class="literal">int</code>, depending on your operating
            system. (You must do this each time you run
            <span><strong class="command">configure</strong></span> because
            <span><strong class="command">configure</strong></span> regenerates
            <code class="filename">config.h</code>.)
          </p></li><li><p>
            The <code class="filename">sql_yacc.cc</code> file is generated from
            <code class="filename">sql_yacc.yy</code>. Normally, the build
            process does not need to create
            <code class="filename">sql_yacc.cc</code> because MySQL comes with a
            pre-generated copy. However, if you do need to re-create it,
            you might encounter this error:
          </p><pre class="programlisting">"sql_yacc.yy", line <em class="replaceable"><code>xxx</code></em> fatal: default action causes potential...
</pre><p>
            This is a sign that your version of <span><strong class="command">yacc</strong></span>
            is deficient. You probably need to install
            <span><strong class="command">bison</strong></span> (the GNU version of
            <span><strong class="command">yacc</strong></span>) and use that instead.
          </p></li><li><p>
            On Debian Linux 3.0, you need to install
            <code class="literal">gawk</code> instead of the default
            <code class="literal">mawk</code> if you want to compile MySQL with
            Berkeley DB support.
          </p></li><li><p>
            If you need to debug <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> or a MySQL
            client, run <span><strong class="command">configure</strong></span> with the
            <a href="installing.html#option_configure_with-debug"><code class="option">--with-debug</code></a> option, and
            then recompile and link your clients with the new client
            library. See
            <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
            Internals: Porting</a>.
          </p></li><li><p>
            If you get a compilation error on Linux (for example, SuSE
            Linux 8.1 or Red Hat Linux 7.3) similar to the following
            one, you probably do not have <span><strong class="command">g++</strong></span>
            installed:
          </p><pre class="programlisting">libmysql.c:1329: warning: passing arg 5 of `gethostbyname_r' from
incompatible pointer type
libmysql.c:1329: too few arguments to function `gethostbyname_r'
libmysql.c:1329: warning: assignment makes pointer from integer
without a cast
make[2]: *** [libmysql.lo] Error 1
</pre><p>
            By default, the <span><strong class="command">configure</strong></span> script attempts
            to determine the correct number of arguments by using
            <span><strong class="command">g++</strong></span> (the GNU C++ compiler). This test
            yields incorrect results if <span><strong class="command">g++</strong></span> is not
            installed. There are two ways to work around this problem:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                Make sure that the GNU C++ <span><strong class="command">g++</strong></span> is
                installed. On some Linux distributions, the required
                package is called <code class="literal">gpp</code>; on others, it
                is named <span><strong class="command">gcc-c++</strong></span>.
              </p></li><li><p>
                Use <span><strong class="command">gcc</strong></span> as your C++ compiler by
                setting the <code class="literal">CXX</code> environment variable
                to <span><strong class="command">gcc</strong></span>:
              </p><pre class="programlisting">export CXX="gcc"
</pre></li></ul></div><p>
            You must run <span><strong class="command">configure</strong></span> again after making
            either of those changes.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mit-pthreads"></a>2.16.5. MIT-pthreads Notes</h3></div></div></div><a class="indexterm" name="id1685356"></a><a class="indexterm" name="id1685365"></a><p>
        This section describes some of the issues involved in using
        MIT-pthreads.
      </p><p>
        On Linux, you should <span class="emphasis"><em>not</em></span> use MIT-pthreads.
        Use the installed LinuxThreads implementation instead. See
        <a href="installing.html#linux" title="2.19.1. Linux Notes">Section 2.19.1, “Linux Notes”</a>.
      </p><p>
        If your system does not provide native thread support, you
        should build MySQL using the MIT-pthreads package. This includes
        older FreeBSD systems, SunOS 4.x, Solaris 2.4 and earlier, and
        some others. See <a href="installing.html#which-os" title="2.4.2. Operating Systems Supported by MySQL Community Server">Section 2.4.2, “Operating Systems Supported by MySQL Community Server”</a>.
      </p><p>
        MIT-pthreads is not part of the MySQL 5.0 source
        distribution. If you require this package, you need to download
        it separately from
        <a href="http://dev.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz" target="_top">http://dev.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz</a>
      </p><p>
        After downloading, extract this source archive into the top
        level of the MySQL source directory. It creates a new
        subdirectory named <code class="literal">mit-pthreads</code>.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            On most systems, you can force MIT-pthreads to be used by
            running <span><strong class="command">configure</strong></span> with the
            <code class="option">--with-mit-threads</code> option:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./configure --with-mit-threads</code></strong>
</pre><p>
            Building in a nonsource directory is not supported when
            using MIT-pthreads because we want to minimize our changes
            to this code.
          </p></li><li><p>
            The checks that determine whether to use MIT-pthreads occur
            only during the part of the configuration process that deals
            with the server code. If you have configured the
            distribution using
            <a href="installing.html#option_configure_without-server"><code class="option">--without-server</code></a> to build
            only the client code, clients do not know whether
            MIT-pthreads is being used and use Unix socket file
            connections by default. Because Unix socket files do not
            work under MIT-pthreads on some platforms, this means you
            need to use <code class="option">-h</code> or <code class="option">--host</code>
            with a value other than <code class="literal">localhost</code> when
            you run client programs.
          </p></li><li><p>
            When MySQL is compiled using MIT-pthreads, system locking is
            disabled by default for performance reasons. You can tell
            the server to use system locking with the
            <a href="server-administration.html#option_mysqld_external-locking"><code class="option">--external-locking</code></a> option.
            This is needed only if you want to be able to run two MySQL
            servers against the same data files, but that is not
            recommended, anyway.
          </p></li><li><p>
            Sometimes the pthread <code class="literal">bind()</code> command
            fails to bind to a socket without any error message (at
            least on Solaris). The result is that all connections to the
            server fail. For example:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin version</code></strong>
mysqladmin: connect to server at '' failed;
error: 'Can't connect to mysql server on localhost (146)'
</pre><p>
            The solution to this problem is to kill the
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server and restart it. This has
            happened to us only when we have forcibly stopped the server
            and restarted it immediately.
          </p></li><li><p>
            With MIT-pthreads, the <code class="literal">sleep()</code> system
            call isn't interruptible with <code class="literal">SIGINT</code>
            (break). This is noticeable only when you run
            <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin --sleep</strong></span></a>. You must wait for the
            <code class="literal">sleep()</code> call to terminate before the
            interrupt is served and the process stops.
          </p></li><li><p>
            When linking, you might receive warning messages like these
            (at least on Solaris); they can be ignored:
          </p><pre class="programlisting">ld: warning: symbol `_iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</pre></li><li><p>
            Some other warnings also can be ignored:
          </p><pre class="programlisting">implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</pre></li><li><p>
            We have not been able to make <code class="literal">readline</code>
            work with MIT-pthreads. (This is not necessary, but may be
            of interest to some.)
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-source-build"></a>2.16.6. Installing MySQL from Source on Windows</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#windows-source-build-cmake">2.16.6.1. Building MySQL from the Standard Source Distribution</a></span></dt><dt><span class="section"><a href="installing.html#windows-vc-plus-plus-build">2.16.6.2. Building MySQL from a Windows Source Distribution</a></span></dt><dt><span class="section"><a href="installing.html#windows-source-install">2.16.6.3. Installing MySQL from a Source Build on Windows</a></span></dt><dt><span class="section"><a href="installing.html#windows-source-testbuild">2.16.6.4. Testing a Windows Source Build</a></span></dt><dt><span class="section"><a href="installing.html#windows-sourcetree-build">2.16.6.5. Creating a Windows Source Package from the Bazaar Repository</a></span></dt></dl></div><p>
        These instructions describe how to build binaries from source
        for MySQL 5.0 on Windows. Instructions are provided
        for building binaries from a standard source distribution or
        from the Bazaar tree that contains the latest development
        source.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The instructions here are strictly for users who want to test
          MySQL on Microsoft Windows from the latest source distribution
          or from the Bazaar tree. For production use, we do not advise
          using a MySQL server built by yourself from source. Normally,
          it is best to use precompiled binary distributions of MySQL
          that are built specifically for optimal performance on Windows
          by Sun Microsystems, Inc. Instructions for installing binary
          distributions are available in
          <a href="installing.html#windows-installation" title="2.9. Installing MySQL on Windows">Section 2.9, “Installing MySQL on Windows”</a>.
        </p></div><p>
        To build MySQL on Windows from source, you must satisfy the
        following system, compiler, and resource requirements:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Windows 2000, Windows XP, or newer version.
          </p><p>
            Windows Vista is supported when using Visual Studio 2005
            provided you have installed the following updates:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <a href="http://support.microsoft.com/?kbid=926601" target="_top">Microsoft
                Visual Studio 2005 Professional Edition - ENU Service
                Pack 1 (KB926601)</a>
              </p></li><li><p>
                <a href="http://support.microsoft.com/?kbid=937061" target="_top">Security
                Update for Microsoft Visual Studio 2005 Professional
                Edition - ENU (KB937061)</a>
              </p></li><li><p>
                <a href="http://support.microsoft.com/?kbid=932232" target="_top">Update
                for Microsoft Visual Studio 2005 Professional Edition -
                ENU (KB932232)</a>
              </p></li></ul></div></li><li><p>
            To build from the standard source distribution, you will
            need CMake, which can be downloaded from
            <a href="http://www.cmake.org" target="_top">http://www.cmake.org</a>. After installing,
            modify your path to include the <code class="literal">cmake</code>
            binary.
          </p></li><li><p>
            Microsoft Visual C++ 2005 Express Edition, Visual Studio
            .Net 2003 (7.1), or Visual Studio 2005 (8.0) compiler
            system.
          </p></li><li><p>
            If you are using Visual C++ 2005 Express Edition, you must
            also install an appropriate Platform SDK. More information
            and links to downloads for various Windows platforms is
            available from
            <a href="http://www.microsoft.com/downloads/details.aspx?familyid=0baf2b35-c656-4969-ace8-e4c0c0716adb" target="_top">http://www.microsoft.com/downloads/details.aspx?familyid=0baf2b35-c656-4969-ace8-e4c0c0716adb</a>.
          </p></li><li><p>
            If you are compiling from a Bazaar tree or making changes to
            the parser, you need <code class="literal">bison</code> for Windows,
            which can be downloaded from
            <a href="http://gnuwin32.sourceforge.net/packages/bison.htm" target="_top">http://gnuwin32.sourceforge.net/packages/bison.htm</a>.
            Download the package labeled “<span class="quote">Complete package,
            excluding sources</span>”. After installing the package,
            modify your path to include the <span><strong class="command">bison</strong></span>
            binary and ensure that this binary is accessible from Visual
            Studio.
          </p></li><li><p>
            Cygwin might be necessary if you want to run the test script
            or package the compiled binaries and support files into a
            Zip archive. (Cygwin is needed only to test or package the
            distribution, not to build it.) Cygwin is available from
            <a href="http://cygwin.com" target="_top">http://cygwin.com</a>.
          </p></li><li><p>
            3GB to 5GB of disk space.
          </p></li></ul></div><p>
        The exact system requirements can be found here:
        <a href="http://msdn.microsoft.com/vstudio/Previous/2003/sysreqs/default.aspx" target="_top">http://msdn.microsoft.com/vstudio/Previous/2003/sysreqs/default.aspx</a>
        and
        <a href="http://msdn.microsoft.com/vstudio/products/sysreqs/default.aspx" target="_top">http://msdn.microsoft.com/vstudio/products/sysreqs/default.aspx</a>
      </p><p>
        There are three solutions available for building from the source
        code on Windows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Build from the standard MySQL source distribution. For this
            you will need CMake and Visual C++ Express Edition or Visual
            Studio. Using this method you can select the storage engines
            that are included in your build. To use this method, see
            <a href="installing.html#windows-source-build-cmake" title="2.16.6.1. Building MySQL from the Standard Source Distribution">Section 2.16.6.1, “Building MySQL from the Standard Source Distribution”</a>.
          </p></li><li><p>
            Build from the MySQL Windows source distribution. The
            Windows source distribution includes ready-made Visual
            Studio solution files that enable support for all storage
            engines (except <code class="literal">NDB</code>). To build
            using using method you only need Visual C++ Express Edition
            or Visual Studio. To use this method, see
            <a href="installing.html#windows-vc-plus-plus-build" title="2.16.6.2. Building MySQL from a Windows Source Distribution">Section 2.16.6.2, “Building MySQL from a Windows Source Distribution”</a>.
          </p></li><li><p>
            Build directly from the Bazaar source repository. For this
            you will need CMake, Visual C++ Express Edition or Visual
            Studio, and <code class="literal">bison</code>. For this method you
            need to create the distribution on a Unix system and then
            copy the generated files to your Windows build environment.
            To use this method, see
            <a href="installing.html#windows-sourcetree-build" title="2.16.6.5. Creating a Windows Source Package from the Bazaar Repository">Section 2.16.6.5, “Creating a Windows Source Package from the Bazaar Repository”</a>.
          </p></li></ul></div><p>
        If you find something not working as expected, or you have
        suggestions about ways to improve the current build process on
        Windows, please send a message to the <code class="literal">win32</code>
        mailing list. See <a href="introduction.html#mailing-lists" title="1.5.1. MySQL Mailing Lists">Section 1.5.1, “MySQL Mailing Lists”</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="windows-source-build-cmake"></a>2.16.6.1. Building MySQL from the Standard Source Distribution</h4></div></div></div><a class="indexterm" name="id1685916"></a><a class="indexterm" name="id1685925"></a><p>
          You can build MySQL on Windows by using a combination of
          <span><strong class="command">cmake</strong></span> and Microsoft Visual Studio .NET 2003
          (7.1), Microsoft Visual Studio 2005 (8.0) or Microsoft Visual
          C++ 2005 Express Edition. You must have the appropriate
          Microsoft Platform SDK installed.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            To compile from the source code using CMake you must use the
            standard source distribution (for example,
            <code class="filename">mysql-5.0.86.tar.gz</code>). You
            build from the same distribution as used to build MySQL on
            Unix, Linux and other platforms. Do <span class="emphasis"><em>not</em></span>
            use the Windows Source distributions as they do not contain
            the necessary configuration script and other files.
          </p></div><p>
          Follow this procedure to build MySQL:
        </p><div class="orderedlist"><ol type="1"><li><p>
              If you are installing from a packaged source distribution,
              create a work directory (for example,
              <code class="filename">C:\workdir</code>), and unpack the source
              distribution there using <span><strong class="command">WinZip</strong></span> or
              another Windows tool that can read
              <code class="filename">.zip</code> files. This directory is the
              work directory in the following instructions.
            </p></li><li><p>
              If you are installing from a Bazaar tree, the root
              directory of that tree is the work directory in the
              following instructions.
            </p></li><li><p>
              Using a command shell, navigate to the work directory and
              run the following command:
            </p><pre class="programlisting">C:\workdir&gt;<strong class="userinput"><code>win\configure.js <em class="replaceable"><code>options</code></em></code></strong>
</pre><p>
              If you have associated the <code class="filename">.js</code> file
              extension with an application such as a text editor, then
              you may need to use the following command to force
              <code class="filename">configure.js</code> to be executed as a
              script:
            </p><pre class="programlisting">C:\workdir&gt;<strong class="userinput"><code>cscript win\configure.js <em class="replaceable"><code>options</code></em></code></strong>
</pre><p>
              These options are available for
              <code class="filename">configure.js</code>:
            </p><div class="itemizedlist"><ul type="disc"><li><p>
                  <code class="literal">WITH_INNOBASE_STORAGE_ENGINE</code>:
                  Enable the <code class="literal">InnoDB</code> storage engine.
                </p></li><li><p>
                  <code class="literal">WITH_PARTITION_STORAGE_ENGINE</code>:
                  Enable user-defined partitioning.
                </p></li><li><p>
                  <code class="literal">WITH_ARCHIVE_STORAGE_ENGINE</code>: Enable
                  the <code class="literal">ARCHIVE</code> storage engine.
                </p></li><li><p>
                  <code class="literal">WITH_BLACKHOLE_STORAGE_ENGINE</code>:
                  Enable the <code class="literal">BLACKHOLE</code> storage
                  engine.
                </p></li><li><p>
                  <code class="literal">WITH_EXAMPLE_STORAGE_ENGINE</code>: Enable
                  the <code class="literal">EXAMPLE</code> storage engine.
                </p></li><li><p>
                  <code class="literal">WITH_FEDERATED_STORAGE_ENGINE</code>:
                  Enable the <code class="literal">FEDERATED</code> storage
                  engine.
                </p></li><li><p>
                  <code class="literal">MYSQL_SERVER_SUFFIX=<em class="replaceable"><code>suffix</code></em></code>:
                  Server suffix, default none.
                </p></li><li><p>
                  <code class="literal">COMPILATION_COMMENT=<em class="replaceable"><code>comment</code></em></code>:
                  Server comment, default "Source distribution".
                </p></li><li><p>
                  <code class="literal">MYSQL_TCP_PORT=<em class="replaceable"><code>port</code></em></code>:
                  Server port, default 3306.
                </p></li><li><p>
                  <code class="literal">DISABLE_GRANT_OPTIONS</code>: Disables the
                  the <a href="server-administration.html#option_mysqld_bootstrap"><code class="option">--bootstrap</code></a>,
                  <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a>,
                  and <a href="server-administration.html#option_mysqld_init-file"><code class="option">--init-file</code></a> options
                  for <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. This option is
                  available as of MySQL 5.0.36.
                </p></li></ul></div><p>
              For example (type the command on one line):
            </p><pre class="programlisting">C:\workdir&gt;<strong class="userinput"><code>win\configure.js WITH_INNOBASE_STORAGE_ENGINE</code></strong> »
             <strong class="userinput"><code>WITH_PARTITION_STORAGE_ENGINE MYSQL_SERVER_SUFFIX=-pro</code></strong>
</pre></li><li><p>
              From the work directory, execute the
              <code class="filename">win\build-vs8.bat</code> or
              <code class="filename">win\build-vs71.bat</code> file, depending on
              the version of Visual Studio you have installed. The
              script invokes CMake, which generates the
              <code class="filename">mysql.sln</code> solution file you will need
              to build MySQL using Visual Studio..
            </p><p>
              You can also use
              <code class="filename">win\build-vs8_x64.bat</code> to build the
              64-bit version of MySQL. However, you cannot build the
              64-bit version with Visual Studio Express Edition. You
              must use Visual Studio 2005 (8.0) or higher.
            </p></li><li><p>
              From the work directory, open the generated
              <code class="filename">mysql.sln</code> file with Visual Studio and
              select the proper configuration using the
              <span class="guimenu">Configuration</span> menu. The menu provides
              <span class="guimenuitem">Debug</span>,
              <span class="guimenuitem">Release</span>,
              <span class="guimenuitem">RelwithDebInfo</span>,
              <span class="guimenuitem">MinRelInfo</span> options. Then select
              <span class="guimenu">Solution</span> &gt;
              <span class="guimenuitem">Build</span> to build the solution.
            </p><p>
              The build process will take some time. Please be patient.
            </p><p>
              Remember the configuration that you use in this step. It
              is important later when you run the test script because
              that script needs to know which configuration you used.
            </p></li><li><p>
              You should test you build before installation. See
              <a href="installing.html#windows-source-testbuild" title="2.16.6.4. Testing a Windows Source Build">Section 2.16.6.4, “Testing a Windows Source Build”</a>.
            </p></li><li><p>
              To install, use the instructions in
              <a href="installing.html#windows-source-install" title="2.16.6.3. Installing MySQL from a Source Build on Windows">Section 2.16.6.3, “Installing MySQL from a Source Build on Windows”</a>.
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="windows-vc-plus-plus-build"></a>2.16.6.2. Building MySQL from a Windows Source Distribution</h4></div></div></div><p>
          The Windows source distribution includes the necessary
          solution file and the <code class="literal">vcproj</code> files required
          to build each component. Using this method you are not able to
          select the storage engines that are included in your build.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            VC++ workspace files for MySQL 4.1 and above are compatible
            with Microsoft Visual Studio 7.1 and tested by us before
            each release.
          </p></div><p>
          Follow this procedure to build MySQL:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Create a work directory (for example,
              <code class="filename">C:\workdir</code>).
            </p></li><li><p>
              Unpack the source distribution in the aforementioned
              directory using <span><strong class="command">WinZip</strong></span> or another
              Windows tool that can read <code class="filename">.zip</code>
              files.
            </p></li><li><p>
              Start Visual Studio .Net 2003 (7.1).
            </p></li><li><p>
              From the <span class="guimenu">File</span> menu, select
              <span class="guimenuitem">Open Solution...</span>.
            </p></li><li><p>
              Open the <code class="filename">mysql.sln</code> solution you find
              in the work directory.
            </p></li><li><p>
              From the <span class="guimenu">Build</span> menu, select
              <span class="guisubmenu">Configuration Manager...</span>.
            </p></li><li><p>
              In the <span class="guimenu">Active Solution Configuration</span>
              pop-up menu, select the configuration to use. You likely
              want to use one of <span class="guisubmenu">nt</span> (normal
              server), <span class="guisubmenu">Max nt</span> (more engines and
              features), or <span class="guisubmenu">Debug</span>
              configuration.
            </p></li><li><p>
              From the <span class="guimenu">Build</span> menu, select
              <span class="guisubmenu">Build Solution</span>.
            </p></li><li><p>
              Debug versions of the programs and libraries are placed in
              the <code class="filename">client_debug</code> and
              <code class="filename">lib_debug</code> directories. Release
              versions of the programs and libraries are placed in the
              <code class="filename">client_release</code> and
              <code class="filename">lib_release</code> directories.
            </p></li><li><p>
              You should test you build before installation. See
              <a href="installing.html#windows-source-testbuild" title="2.16.6.4. Testing a Windows Source Build">Section 2.16.6.4, “Testing a Windows Source Build”</a>.
            </p></li><li><p>
              To install, use the instructions in
              <a href="installing.html#windows-source-install" title="2.16.6.3. Installing MySQL from a Source Build on Windows">Section 2.16.6.3, “Installing MySQL from a Source Build on Windows”</a>.
            </p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="windows-source-install"></a>2.16.6.3. Installing MySQL from a Source Build on Windows</h4></div></div></div><p>
          When you are satisfied that the program you have built is
          working correctly, stop the server. Now you can install the
          distribution. There are two ways to do this, either by using
          the supplied installation script or by copying the files
          individually by hand.
        </p><p>
          To use the script method you must have Cygwin installed as the
          script is a Shell script. To execute the installation process,
          run the <a href="programs.html#make-win-bin-dist" title="4.4.2. make_win_bin_dist — Package MySQL Distribution as ZIP Archive"><span><strong class="command">make_win_bin_dist</strong></span></a> script in the
          <code class="filename">scripts</code> directory of the MySQL source
          distribution (see <a href="programs.html#make-win-bin-dist" title="4.4.2. make_win_bin_dist — Package MySQL Distribution as ZIP Archive">Section 4.4.2, “<span><strong class="command">make_win_bin_dist</strong></span> — Package MySQL Distribution as ZIP Archive”</a>). This
          is a shell script, so you must have Cygwin installed if you
          want to use it. It creates a Zip archive of the built
          executables and support files that you can unpack to your
          desired installation location.
        </p><p>
          It is also possible to install MySQL by copying directories
          and files manually:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Create the directories where you want to install MySQL.
              For example, to install into
              <code class="filename">C:\mysql</code>, use these commands:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir C:\mysql</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\bin</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\data</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\share</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\scripts</code></strong>
</pre><p>
              If you want to compile other clients and link them to
              MySQL, you should also create several additional
              directories:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir C:\mysql\include</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\lib</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\lib\debug</code></strong>
shell&gt; <strong class="userinput"><code>mkdir C:\mysql\lib\opt</code></strong>
</pre><p>
              If you want to benchmark MySQL, create this directory:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir C:\mysql\sql-bench</code></strong>
</pre><p>
              Benchmarking requires Perl support. See
              <a href="installing.html#perl-support" title="2.21. Perl Installation Notes">Section 2.21, “Perl Installation Notes”</a>.
            </p></li><li><p>
              From the work directory, copy into the
              <code class="filename">C:\mysql</code> directory the following
              directories:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd \workdir</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy client_release\*.exe C:\mysql\bin</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy client_debug\mysqld.exe C:\mysql\bin\mysqld-debug.exe</code></strong>
C:\workdir&gt; <strong class="userinput"><code>xcopy scripts\*.* C:\mysql\scripts /E</code></strong>
C:\workdir&gt; <strong class="userinput"><code>xcopy share\*.* C:\mysql\share /E</code></strong>
</pre><p>
              If you want to compile other clients and link them to
              MySQL, you should also copy several libraries and header
              files:
            </p><pre class="programlisting">C:\workdir&gt; <strong class="userinput"><code>copy lib_debug\mysqlclient.lib C:\mysql\lib\debug</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy lib_debug\libmysql.* C:\mysql\lib\debug</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy lib_debug\zlib.* C:\mysql\lib\debug</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy lib_release\mysqlclient.lib C:\mysql\lib\opt</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy lib_release\libmysql.* C:\mysql\lib\opt</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy lib_release\zlib.* C:\mysql\lib\opt</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy include\*.h C:\mysql\include</code></strong>
C:\workdir&gt; <strong class="userinput"><code>copy libmysql\libmysql.def C:\mysql\include</code></strong>
</pre><p>
              If you want to benchmark MySQL, you should also do this:
            </p><pre class="programlisting">C:\workdir&gt; <strong class="userinput"><code>xcopy sql-bench\*.* C:\mysql\bench /E</code></strong>
</pre></li></ol></div><p>
          After installation, set up and start the server in the same
          way as for binary Windows distributions. See
          <a href="installing.html#windows-installation" title="2.9. Installing MySQL on Windows">Section 2.9, “Installing MySQL on Windows”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="windows-source-testbuild"></a>2.16.6.4. Testing a Windows Source Build</h4></div></div></div><p>
          You should test the server that you have built from source
          before using the distribution.
        </p><p>
          To test the server you need to run the built
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. By default, using the source build
          examples, the MySQL base directory and data directory are
          <code class="filename">C:\mysql</code> and
          <code class="filename">C:\mysql\data</code>. If you want to test your
          server using the source tree root directory and its data
          directory as the base directory and data directory, you need
          to tell the server their path names. You can either do this on
          the command line with the
          <a href="server-administration.html#option_mysqld_basedir"><code class="option">--basedir</code></a> and
          <a href="server-administration.html#option_mysqld_datadir"><code class="option">--datadir</code></a> options, or by
          placing appropriate options in an option file. (See
          <a href="programs.html#option-files" title="4.2.3.3. Using Option Files">Section 4.2.3.3, “Using Option Files”</a>.) If you have an existing data
          directory elsewhere that you want to use, you can specify its
          path name instead.
        </p><p>
          When the server is running in standalone fashion or as a
          service based on your configuration, try to connect to it from
          the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> interactive command-line utility.
        </p><p>
          You can also run the standard test script,
          <span><strong class="command">mysql-test-run.pl</strong></span>. This script is written
          in Perl, so you'll need either Cygwin or ActiveState Perl to
          run it. You may also need to install the modules required by
          the script. To run the test script, change location into the
          <code class="filename">mysql-test</code> directory under the work
          directory, set the <code class="literal">MTR_VS_CONFIG</code>
          environment variable to the configuration you selected earlier
          (or use the <code class="literal">--vs-config</code> option), and invoke
          <span><strong class="command">mysql-test-run.pl</strong></span>. For example (using
          Cygwin and the <span><strong class="command">bash</strong></span> shell):
        </p><pre class="programlisting">shell&gt; <code class="literal">cd mysql-test</code>
shell&gt; <code class="literal">export MTR_VS_CONFIG=debug</code>
shell&gt; <code class="literal">./mysql-test-run.pl --force --timer</code>
shell&gt; <code class="literal">./mysql-test-run.pl --force --timer --ps-protocol</code>
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="windows-sourcetree-build"></a>2.16.6.5. Creating a Windows Source Package from the Bazaar Repository</h4></div></div></div><a class="indexterm" name="id1687114"></a><p>
          To create a Windows source package from the current Bazaar
          source tree, use the instructions here. This procedure must be
          performed on a system running a Unix or Unix-like operating
          system because some of the configuration and build steps
          require tools that work only on Unix. For example, the
          following procedure is known to work well on Linux.
        </p><div class="orderedlist"><ol type="1"><li><p>
              Copy the Bazaar source tree for MySQL 5.0.
              For instructions on how to do this, see
              <a href="installing.html#installing-source-tree" title="2.16.3. Installing from the Development Source Tree">Section 2.16.3, “Installing from the Development Source Tree”</a>.
            </p></li><li><p>
              Configure and build the distribution so that you have a
              server binary to work with. One way to do this is to run
              the following command in the top-level directory of your
              source tree:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./BUILD/compile-pentium-max</code></strong>
</pre></li><li><p>
              After making sure that the build process completed
              successfully, run the following utility script from
              top-level directory of your source tree:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./scripts/make_win_src_distribution</code></strong>
</pre><p>
              This script creates a Windows source package to be used on
              your Windows system. You can supply different options to
              the script based on your needs. See
              <a href="programs.html#make-win-src-distribution" title="4.4.3. make_win_src_distribution — Create Source Distribution for Windows">Section 4.4.3, “<span><strong class="command">make_win_src_distribution</strong></span> — Create Source Distribution for Windows”</a>, for a list of
              allowable options.
            </p><p>
              By default, <a href="programs.html#make-win-src-distribution" title="4.4.3. make_win_src_distribution — Create Source Distribution for Windows"><span><strong class="command">make_win_src_distribution</strong></span></a>
              creates a Zip-format archive with the name
              <code class="filename">mysql-<em class="replaceable"><code>VERSION</code></em>-win-src.zip</code>,
              where <em class="replaceable"><code>VERSION</code></em> represents the
              version of your MySQL source tree.
            </p></li><li><p>
              Copy or upload the Windows source package that you have
              just created to your Windows machine. To compile it, use
              the instructions in
              <a href="installing.html#windows-vc-plus-plus-build" title="2.16.6.2. Building MySQL from a Windows Source Distribution">Section 2.16.6.2, “Building MySQL from a Windows Source Distribution”</a>.
            </p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-client-compiling"></a>2.16.7. Compiling MySQL Clients on Windows</h3></div></div></div><a class="indexterm" name="id1687251"></a><a class="indexterm" name="id1687264"></a><p>
        In your source files, you should include
        <code class="filename">my_global.h</code> before
        <code class="filename">mysql.h</code>:
      </p><pre class="programlisting">#include &lt;my_global.h&gt;
#include &lt;mysql.h&gt;
</pre><p>
        <code class="filename">my_global.h</code> includes any other files needed
        for Windows compatibility (such as
        <code class="filename">windows.h</code>) if you compile your program on
        Windows.
      </p><p>
        You can either link your code with the dynamic
        <code class="filename">libmysql.lib</code> library, which is just a
        wrapper to load in <code class="filename">libmysql.dll</code> on demand,
        or link with the static <code class="filename">mysqlclient.lib</code>
        library.
      </p><p>
        The MySQL client libraries are compiled as threaded libraries,
        so you should also compile your code to be multi-threaded.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="post-installation"></a>2.17. Post-Installation Setup and Testing</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#windows-post-installation">2.17.1. Windows Post-Installation Procedures</a></span></dt><dt><span class="section"><a href="installing.html#unix-post-installation">2.17.2. Unix Post-Installation Procedures</a></span></dt><dt><span class="section"><a href="installing.html#default-privileges">2.17.3. Securing the Initial MySQL Accounts</a></span></dt></dl></div><a class="indexterm" name="id1687353"></a><a class="indexterm" name="id1687366"></a><a class="indexterm" name="id1687378"></a><p>
      After installing MySQL, there are some issues that you should
      address. For example, on Unix, you should initialize the data
      directory and create the MySQL grant tables. On all platforms, an
      important security concern is that the initial accounts in the
      grant tables have no passwords. You should assign passwords to
      prevent unauthorized access to the MySQL server. Optionally, you
      can create time zone tables to enable recognition of named time
      zones.
    </p><p>
      The following sections include post-installation procedures that
      are specific to Windows systems and to Unix systems. Another
      section, <a href="installing.html#starting-server" title="2.17.2.3. Starting and Troubleshooting the MySQL Server">Section 2.17.2.3, “Starting and Troubleshooting the MySQL Server”</a>, applies to all
      platforms; it describes what to do if you have trouble getting the
      server to start. <a href="installing.html#default-privileges" title="2.17.3. Securing the Initial MySQL Accounts">Section 2.17.3, “Securing the Initial MySQL Accounts”</a>, also
      applies to all platforms. You should follow its instructions to
      make sure that you have properly protected your MySQL accounts by
      assigning passwords to them.
    </p><p>
      When you are ready to create additional user accounts, you can
      find information on the MySQL access control system and account
      management in <a href="server-administration.html#privilege-system" title="5.4. The MySQL Access Privilege System">Section 5.4, “The MySQL Access Privilege System”</a>, and
      <a href="server-administration.html#user-account-management" title="5.5. MySQL User Account Management">Section 5.5, “MySQL User Account Management”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="windows-post-installation"></a>2.17.1. Windows Post-Installation Procedures</h3></div></div></div><p>
        On Windows, the data directory and the grant tables do not have
        to be created. MySQL Windows distributions include the grant
        tables with a set of preinitialized accounts in the
        <code class="literal">mysql</code> database under the data directory. It
        is unnecessary to run the <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>
        script that is used on Unix. Regarding passwords, if you
        installed MySQL using the Windows Installation Wizard, you may
        have already assigned passwords to the accounts. (See
        <a href="installing.html#windows-install-wizard" title="2.9.3. Using the MySQL Installation Wizard">Section 2.9.3, “Using the MySQL Installation Wizard”</a>.) Otherwise, use the
        password-assignment procedure given in
        <a href="installing.html#default-privileges" title="2.17.3. Securing the Initial MySQL Accounts">Section 2.17.3, “Securing the Initial MySQL Accounts”</a>.
      </p><p>
        Before setting up passwords, you might want to try running some
        client programs to make sure that you can connect to the server
        and that it is operating properly. Make sure that the server is
        running (see <a href="installing.html#windows-server-first-start" title="2.9.9. Starting the Server for the First Time">Section 2.9.9, “Starting the Server for the First Time”</a>), and
        then issue the following commands to verify that you can
        retrieve information from the server. The output should be
        similar to what is shown here:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysqlshow</code></strong>
+--------------------+
|     Databases      |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+

shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysqlshow mysql</code></strong>
Database: mysql
+---------------------------+
|          Tables           |
+---------------------------+
| columns_priv              |
| db                        |
| func                      |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| proc                      |
| procs_priv                |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+

shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysql -e "SELECT Host,Db,User FROM db" mysql</code></strong>
+------+-------+------+
| host | db    | user |
+------+-------+------+
| %    | test% |      |
+------+-------+------+
</pre><p>
        You may need to specify a different directory from the one
        shown; if you used the Windows Installation Wizard, then the
        default directory is <code class="filename">C:\Program Files\MySQL\MySQL
        Server 5.0</code>, and the
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> and <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a> client
        programs are in <code class="filename">C:\Program Files\MySQL\MySQL Server
        5.0\bin</code>. See
        <a href="installing.html#windows-install-wizard" title="2.9.3. Using the MySQL Installation Wizard">Section 2.9.3, “Using the MySQL Installation Wizard”</a>, for more information.
      </p><p>
        If you have already secured the initial MySQL accounts, you may
        need to use the <code class="option">-u</code> and <code class="option">-p</code>
        options to supply a user name and password to the
        <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a> and <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client
        programs; otherwise the programs may fail with an error, or you
        may not be able to view all databases. For example, if you have
        assigned the password “<span class="quote">secretpass</span>” to the MySQL
        <code class="literal">root</code> account, then you can invoke
        <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a> and <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> as
        shown here:

</p><pre class="programlisting">shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysqlshow -uroot -psecretpass</code></strong>
+--------------------+
|     Databases      |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+

shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysqlshow -uroot -psecretpass mysql</code></strong>
Database: mysql
+---------------------------+
|          Tables           |
+---------------------------+
| columns_priv              |
| db                        |
| func                      |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| proc                      |
| procs_priv                |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+

shell&gt; <strong class="userinput"><code>C:\mysql\bin\mysql -uroot -psecretpass -e "SELECT Host,Db,User FROM db" mysql</code></strong>
+------+-------+------+
| host | db    | user |
+------+-------+------+
| %    | test% |      |
+------+-------+------+
</pre><p>

        For more information about these programs, see
        <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information">Section 4.5.6, “<span><strong class="command">mysqlshow</strong></span> — Display Database, Table, and Column Information”</a>, and <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool">Section 4.5.1, “<span><strong class="command">mysql</strong></span> — The MySQL Command-Line Tool”</a>.
      </p><p>
        If you are running a version of Windows that supports services
        and you want the MySQL server to run automatically when Windows
        starts, see <a href="installing.html#windows-start-service" title="2.9.11. Starting MySQL as a Windows Service">Section 2.9.11, “Starting MySQL as a Windows Service”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="unix-post-installation"></a>2.17.2. Unix Post-Installation Procedures</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#mysql-install-db-problems">2.17.2.1. Problems Running <span><strong class="command">mysql_install_db</strong></span></a></span></dt><dt><span class="section"><a href="installing.html#automatic-start">2.17.2.2. Starting and Stopping MySQL Automatically</a></span></dt><dt><span class="section"><a href="installing.html#starting-server">2.17.2.3. Starting and Troubleshooting the MySQL Server</a></span></dt></dl></div><p>
        After installing MySQL on Unix, you need to initialize the grant
        tables, start the server, and make sure that the server works
        satisfactorily. You may also wish to arrange for the server to
        be started and stopped automatically when your system starts and
        stops. You should also assign passwords to the accounts in the
        grant tables.
      </p><p>
        On Unix, the grant tables are set up by the
        <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> program. For some
        installation methods, this program is run for you automatically:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If you install MySQL on Linux using RPM distributions, the
            server RPM runs <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>.
          </p></li><li><p>
            If you install MySQL on Mac OS X using a PKG distribution,
            the installer runs <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>.
          </p></li></ul></div><p>
        Otherwise, you will need to run
        <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> yourself.
      </p><p>
        The following procedure describes how to initialize the grant
        tables (if that has not previously been done) and then start the
        server. It also suggests some commands that you can use to test
        whether the server is accessible and working properly. For
        information about starting and stopping the server
        automatically, see <a href="installing.html#automatic-start" title="2.17.2.2. Starting and Stopping MySQL Automatically">Section 2.17.2.2, “Starting and Stopping MySQL Automatically”</a>.
      </p><p>
        After you complete the procedure and have the server running,
        you should assign passwords to the accounts created by
        <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>. Instructions for doing so
        are given in <a href="installing.html#default-privileges" title="2.17.3. Securing the Initial MySQL Accounts">Section 2.17.3, “Securing the Initial MySQL Accounts”</a>.
      </p><p>
        In the examples shown here, the server runs under the user ID of
        the <code class="literal">mysql</code> login account. This assumes that
        such an account exists. Either create the account if it does not
        exist, or substitute the name of a different existing login
        account that you plan to use for running the server.
      </p><a class="indexterm" name="id1687784"></a><a class="indexterm" name="id1687796"></a><a class="indexterm" name="id1687809"></a><div class="orderedlist"><ol type="1"><li><p>
            Change location into the top-level directory of your MySQL
            installation, represented here by
            <em class="replaceable"><code>BASEDIR</code></em>:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd <em class="replaceable"><code>BASEDIR</code></em></code></strong>
</pre><p>
            <em class="replaceable"><code>BASEDIR</code></em> is likely to be something
            like <code class="filename">/usr/local/mysql</code> or
            <code class="filename">/usr/local</code>. The following steps assume
            that you are located in this directory.
          </p></li><li><p>
            If necessary, run the <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>
            program to set up the initial MySQL grant tables containing
            the privileges that determine how users are allowed to
            connect to the server. You'll need to do this if you used a
            distribution type for which the installation procedure
            doesn't run the program for you.
          </p><p>
            Typically, <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> needs to be
            run only the first time you install MySQL, so you can skip
            this step if you are upgrading an existing installation,
            However, <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> does not
            overwrite any existing privilege tables, so it should be
            safe to run in any circumstances.
          </p><p>
            To initialize the grant tables, use one of the following
            commands, depending on whether
            <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> is located in the
            <code class="literal">bin</code> or <code class="literal">scripts</code>
            directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql</code></strong>
shell&gt; <strong class="userinput"><code>scripts/mysql_install_db --user=mysql</code></strong>
</pre><p>
            It might be necessary to specify other options such as
            <a href="programs.html#option_mysql_install_db_basedir"><code class="option">--basedir</code></a> or
            <a href="programs.html#option_mysql_install_db_datadir"><code class="option">--datadir</code></a> if
            <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> does not use the correct
            locations for the installation directory or data directory.
            For example:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql \</code></strong>
         <strong class="userinput"><code>--basedir=/opt/mysql/mysql \</code></strong>
         <strong class="userinput"><code>--datadir=/opt/mysql/mysql/data</code></strong>
</pre><p>
            The <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> script creates the
            server's data directory. Under the data directory, it
            creates directories for the <code class="literal">mysql</code>
            database that holds all database privileges and the
            <code class="literal">test</code> database that you can use to test
            MySQL. The script also creates privilege table entries for
            <code class="literal">root</code> and anonymous-user accounts. The
            accounts have no passwords initially. A description of their
            initial privileges is given in
            <a href="installing.html#default-privileges" title="2.17.3. Securing the Initial MySQL Accounts">Section 2.17.3, “Securing the Initial MySQL Accounts”</a>. Briefly, these
            privileges allow the MySQL <code class="literal">root</code> user to
            do anything, and allow anybody to create or use databases
            with a name of <code class="literal">test</code> or starting with
            <code class="literal">test_</code>.
          </p><p>
            It is important to make sure that the database directories
            and files are owned by the <code class="literal">mysql</code> login
            account so that the server has read and write access to them
            when you run it later. To ensure this, the
            <code class="option">--user</code> option should be used as shown if
            you run <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> as
            <code class="literal">root</code>. Otherwise, you should execute the
            script while logged in as <code class="literal">mysql</code>, in which
            case you can omit the <code class="option">--user</code> option from
            the command.
          </p><p>
            <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> creates several tables
            in the <code class="literal">mysql</code> database, including
            <code class="literal">user</code>, <code class="literal">db</code>,
            <code class="literal">host</code>, <code class="literal">tables_priv</code>,
            <code class="literal">columns_priv</code>, <code class="literal">func</code>,
            and others. See <a href="server-administration.html#privilege-system" title="5.4. The MySQL Access Privilege System">Section 5.4, “The MySQL Access Privilege System”</a>, for a
            complete listing and description of these tables.
          </p><p>
            If you don't want to have the <code class="literal">test</code>
            database, you can remove it with <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin -u root
            drop test</strong></span></a> after starting the server.
          </p><p>
            If you have trouble with <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>
            at this point, see
            <a href="installing.html#mysql-install-db-problems" title="2.17.2.1. Problems Running mysql_install_db">Section 2.17.2.1, “Problems Running <span><strong class="command">mysql_install_db</strong></span>”</a>.
          </p></li><li><p>
            Start the MySQL server:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
            It is important that the MySQL server be run using an
            unprivileged (non-<code class="literal">root</code>) login account. To
            ensure this, the <a href="programs.html#option_mysqld_safe_user"><code class="option">--user</code></a>
            option should be used as shown if you run
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> as system
            <code class="literal">root</code>. Otherwise, you should execute the
            script while logged in to the system as
            <code class="literal">mysql</code>, in which case you can omit the
            <a href="programs.html#option_mysqld_safe_user"><code class="option">--user</code></a> option from the
            command.
          </p><p>
            Further instructions for running MySQL as an unprivileged
            user are given in <a href="server-administration.html#changing-mysql-user" title="5.3.5. How to Run MySQL as a Normal User">Section 5.3.5, “How to Run MySQL as a Normal User”</a>.
          </p><p>
            If you neglected to create the grant tables before
            proceeding to this step, the following message appears in
            the error log file when you start the server:
          </p><a class="indexterm" name="id1688262"></a><pre class="programlisting">mysqld: Can't find file: 'host.frm'
</pre><p>
            If you have other problems starting the server, see
            <a href="installing.html#starting-server" title="2.17.2.3. Starting and Troubleshooting the MySQL Server">Section 2.17.2.3, “Starting and Troubleshooting the MySQL Server”</a>.
          </p></li><li><p>
            Use <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> to verify that the server
            is running. The following commands provide simple tests to
            check whether the server is up and responding to
            connections:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqladmin version</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysqladmin variables</code></strong>
</pre><p>
            The output from <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin version</strong></span></a> varies
            slightly depending on your platform and version of MySQL,
            but should be similar to that shown here:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqladmin version</code></strong>
mysqladmin  Ver 14.12 Distrib 5.0.86, for pc-linux-gnu on i686
...

Server version          5.0.86
Protocol version        10
Connection              Localhost via UNIX socket
UNIX socket             /var/lib/mysql/mysql.sock
Uptime:                 14 days 5 hours 5 min 21 sec

Threads: 1  Questions: 366  Slow queries: 0
Opens: 0  Flush tables: 1  Open tables: 19
Queries per second avg: 0.000
</pre><p>
            To see what else you can do with
            <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>, invoke it with the
            <a href="programs.html#option_mysqladmin_help"><code class="option">--help</code></a> option.
          </p></li><li><p>
            <a class="indexterm" name="id1688372"></a>

            <a class="indexterm" name="id1688384"></a>

            Verify that you can shut down the server:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqladmin -u root shutdown</code></strong>
</pre></li><li><p>
            Verify that you can start the server again. Do this by using
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> or by invoking
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> directly. For example:
          </p><a class="indexterm" name="id1688432"></a><a class="indexterm" name="id1688444"></a><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql --log &amp;</code></strong>
</pre><p>
            If <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> fails, see
            <a href="installing.html#starting-server" title="2.17.2.3. Starting and Troubleshooting the MySQL Server">Section 2.17.2.3, “Starting and Troubleshooting the MySQL Server”</a>.
          </p></li><li><p>
            Run some simple tests to verify that you can retrieve
            information from the server. The output should be similar to
            what is shown here:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqlshow</code></strong>
+-----------+
| Databases |
+-----------+
| mysql     |
| test      |
+-----------+

shell&gt; <strong class="userinput"><code>bin/mysqlshow mysql</code></strong>
Database: mysql
+---------------------------+
|          Tables           |
+---------------------------+
| columns_priv              |
| db                        |
| func                      |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| proc                      |
| procs_priv                |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+

shell&gt; <strong class="userinput"><code>bin/mysql -e "SELECT Host,Db,User FROM db" mysql</code></strong>
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</pre></li><li><p>
            There is a benchmark suite in the
            <code class="filename">sql-bench</code> directory (under the MySQL
            installation directory) that you can use to compare how
            MySQL performs on different platforms. The benchmark suite
            is written in Perl. It requires the Perl DBI module that
            provides a database-independent interface to the various
            databases, and some other additional Perl modules:
          </p><pre class="programlisting">DBI
DBD::mysql
Data::Dumper
Data::ShowTable
</pre><p>
            These modules can be obtained from CPAN
            (<a href="http://www.cpan.org/" target="_top">http://www.cpan.org/</a>). See also
            <a href="installing.html#perl-installation" title="2.21.1. Installing Perl on Unix">Section 2.21.1, “Installing Perl on Unix”</a>.
          </p><p>
            The <code class="filename">sql-bench/Results</code> directory
            contains the results from many runs against different
            databases and platforms. To run all tests, execute these
            commands:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd sql-bench</code></strong>
shell&gt; <strong class="userinput"><code>perl run-all-tests</code></strong>
</pre><p>
            If you don't have the <code class="filename">sql-bench</code>
            directory, you probably installed MySQL using RPM files
            other than the source RPM. (The source RPM includes the
            <code class="filename">sql-bench</code> benchmark directory.) In this
            case, you must first install the benchmark suite before you
            can use it. There are separate benchmark RPM files named
            <code class="filename">mysql-bench-<em class="replaceable"><code>VERSION</code></em>.i386.rpm</code>
            that contain benchmark code and data.
          </p><p>
            If you have a source distribution, there are also tests in
            its <code class="filename">tests</code> subdirectory that you can
            run. For example, to run
            <code class="filename">auto_increment.tst</code>, execute this
            command from the top-level directory of your source
            distribution:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -vvf test &lt; ./tests/auto_increment.tst</code></strong>
</pre><p>
            The expected result of the test can be found in the
            <code class="filename">./tests/auto_increment.res</code> file.
          </p></li><li><p>
            At this point, you should have the server running. However,
            none of the initial MySQL accounts have a password, so you
            should assign passwords using the instructions found in
            <a href="installing.html#default-privileges" title="2.17.3. Securing the Initial MySQL Accounts">Section 2.17.3, “Securing the Initial MySQL Accounts”</a>.
          </p></li></ol></div><p>
        The MySQL 5.0 installation procedure creates time
        zone tables in the <code class="literal">mysql</code> database. However,
        you must populate the tables manually using the instructions in
        <a href="internationalization-localization.html#time-zone-support" title="9.7. MySQL Server Time Zone Support">Section 9.7, “MySQL Server Time Zone Support”</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-install-db-problems"></a>2.17.2.1. Problems Running <span><strong class="command">mysql_install_db</strong></span></h4></div></div></div><a class="indexterm" name="id1688706"></a><a class="indexterm" name="id1688715"></a><p>
          The purpose of the <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> script
          is to generate new MySQL privilege tables. It does not
          overwrite existing MySQL privilege tables, and it does not
          affect any other data.
        </p><p>
          If you want to re-create your privilege tables, first stop the
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server if it is running. Then rename
          the <code class="filename">mysql</code> directory under the data
          directory to save it, and then run
          <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>. Suppose that your current
          directory is the MySQL installation directory and that
          <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> is located in the
          <code class="filename">bin</code> directory and the data directory is
          named <code class="filename">data</code>. To rename the
          <code class="literal">mysql</code> database and re-run
          <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>, use these commands.
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mv data/mysql data/mysql.old</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql</code></strong>
</pre><p>
          When you run <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>, you might
          encounter the following problems:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong><a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>
              fails to install the grant tables</strong></span>
            </p><p>
              You may find that <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>
              fails to install the grant tables and terminates after
              displaying the following messages:
            </p><pre class="programlisting">Starting mysqld daemon with databases from XXXXXX
mysqld ended
</pre><p>
              In this case, you should examine the error log file very
              carefully. The log should be located in the directory
              <code class="filename">XXXXXX</code> named by the error message and
              should indicate why <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> didn't
              start. If you do not understand what happened, include the
              log when you post a bug report. See
              <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
            </p></li><li><p>
              <span class="bold"><strong>There is a <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
              process running</strong></span>
            </p><p>
              This indicates that the server is running, in which case
              the grant tables have probably been created already. If
              so, there is no need to run
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> at all because it
              needs to be run only once (when you install MySQL the
              first time).
            </p></li><li><p>
              <span class="bold"><strong>Installing a second
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server does not work when one
              server is running</strong></span>
            </p><p>
              This can happen when you have an existing MySQL
              installation, but want to put a new installation in a
              different location. For example, you might have a
              production installation, but you want to create a second
              installation for testing purposes. Generally the problem
              that occurs when you try to run a second server is that it
              tries to use a network interface that is in use by the
              first server. In this case, you should see one of the
              following error messages:
            </p><pre class="programlisting">Can't start server: Bind on TCP/IP port:
Address already in use
Can't start server: Bind on unix socket...
</pre><p>
              For instructions on setting up multiple servers, see
              <a href="server-administration.html#multiple-servers" title="5.6. Running Multiple MySQL Servers on the Same Machine">Section 5.6, “Running Multiple MySQL Servers on the Same Machine”</a>.
            </p></li><li><p>
              <a class="indexterm" name="id1688968"></a>

              <a class="indexterm" name="id1688980"></a>

              <a class="indexterm" name="id1688993"></a>

              <span class="bold"><strong>You do not have write access to the
              <code class="filename">/tmp</code> directory</strong></span>
            </p><p>
              If you do not have write access to create temporary files
              or a Unix socket file in the default location (the
              <code class="filename">/tmp</code> directory), an error occurs when
              you run <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> or the
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server.
            </p><p>
              You can specify different locations for the temporary
              directory and Unix socket file by executing these commands
              prior to starting <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> or
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, where
              <em class="replaceable"><code>some_tmp_dir</code></em> is the full path
              name to some directory for which you have write
              permission:
            </p><a class="indexterm" name="id1689067"></a><a class="indexterm" name="id1689076"></a><a class="indexterm" name="id1689085"></a><a class="indexterm" name="id1689097"></a><pre class="programlisting">shell&gt; <strong class="userinput"><code>TMPDIR=/<em class="replaceable"><code>some_tmp_dir</code></em>/</code></strong>
shell&gt; <strong class="userinput"><code>MYSQL_UNIX_PORT=/<em class="replaceable"><code>some_tmp_dir</code></em>/mysql.sock</code></strong>
shell&gt; <strong class="userinput"><code>export TMPDIR MYSQL_UNIX_PORT</code></strong>
</pre><p>
              Then you should be able to run
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> and start the server
              with these commands:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
              If <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> is located in the
              <code class="filename">scripts</code> directory, modify the first
              command to <code class="literal">scripts/mysql_install_db</code>.
            </p><p>
              See <a href="error-handling.html#problems-with-mysql-sock" title="B.1.4.5. How to Protect or Change the MySQL Unix Socket File">Section B.1.4.5, “How to Protect or Change the MySQL Unix Socket File”</a>, and
              <a href="installing.html#environment-variables" title="2.20. Environment Variables">Section 2.20, “Environment Variables”</a>.
            </p></li></ul></div><p>
          There are some alternatives to running the
          <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> script provided in the
          MySQL distribution:
        </p><a class="indexterm" name="id1689219"></a><a class="indexterm" name="id1689232"></a><div class="itemizedlist"><ul type="disc"><li><p>
              If you want the initial privileges to be different from
              the standard defaults, you can modify
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> before you run it.
              However, it is preferable to use
              <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
              <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> to change the
              privileges <span class="emphasis"><em>after</em></span> the grant tables
              have been set up. In other words, you can run
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>, and then use
              <code class="literal">mysql -u root mysql</code> to connect to the
              server as the MySQL <code class="literal">root</code> user so that
              you can issue the necessary
              <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
              <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statements.
            </p><p>
              If you want to install MySQL on several machines with the
              same privileges, you can put the
              <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
              <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statements in a file
              and execute the file as a script using
              <code class="literal">mysql</code> after running
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>. For example:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysql_install_db --user=mysql</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysql -u root &lt; your_script_file</code></strong>
</pre><p>
              By doing this, you can avoid having to issue the
              statements manually on each machine.
            </p></li><li><p>
              It is possible to re-create the grant tables completely
              after they have previously been created. You might want to
              do this if you're just learning how to use
              <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
              <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> and have made so
              many modifications after running
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> that you want to wipe
              out the tables and start over.
            </p><p>
              To re-create the grant tables, remove all the
              <code class="filename">.frm</code>, <code class="filename">.MYI</code>, and
              <code class="filename">.MYD</code> files in the
              <code class="literal">mysql</code> database directory. Then run the
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> script again.
            </p></li><li><p>
              You can start <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> manually using the
              <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option
              and add the privilege information yourself using
              <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>bin/mysqld_safe --user=mysql --skip-grant-tables &amp;</code></strong>
shell&gt; <strong class="userinput"><code>bin/mysql mysql</code></strong>
</pre><p>
              From <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>, manually execute the SQL
              commands contained in <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>.
              Make sure that you run <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
              flush-privileges</strong></span></a> or <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
              reload</strong></span></a> afterward to tell the server to reload
              the grant tables.
            </p><p>
              Note that by not using
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>, you not only have to
              populate the grant tables manually, you also have to
              create them first.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="automatic-start"></a>2.17.2.2. Starting and Stopping MySQL Automatically</h4></div></div></div><a class="indexterm" name="id1689539"></a><a class="indexterm" name="id1689552"></a><a class="indexterm" name="id1689564"></a><p>
          Generally, you start the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server in
          one of these ways:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Invoke <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> directly. This works on
              any platform.
            </p></li><li><p>
              Run the MySQL server as a Windows service. The service can
              be set to start the server automatically when Windows
              starts, or as a manual service that you start on request.
              For instructions, see
              <a href="installing.html#windows-start-service" title="2.9.11. Starting MySQL as a Windows Service">Section 2.9.11, “Starting MySQL as a Windows Service”</a>.
            </p></li><li><p>
              Invoke <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>, which tries to
              determine the proper options for <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
              and then runs it with those options. This script is used
              on Unix and Unix-like systems. See
              <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
            </p></li><li><p>
              Invoke <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a>. This script is
              used primarily at system startup and shutdown on systems
              that use System V-style run directories, where it usually
              is installed under the name <code class="literal">mysql</code>. The
              <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> script starts the server
              by invoking <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>. See
              <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script">Section 4.3.3, “<span><strong class="command">mysql.server</strong></span> — MySQL Server Startup Script”</a>.
            </p></li><li><p>
              On Mac OS X, install a separate MySQL Startup Item package
              to enable the automatic startup of MySQL on system
              startup. The Startup Item starts the server by invoking
              <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a>. See
              <a href="installing.html#mac-os-x-installation" title="2.11. Installing MySQL on Mac OS X">Section 2.11, “Installing MySQL on Mac OS X”</a>, for details.
            </p></li></ul></div><p>
          The <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> and
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> scripts and the Mac OS X
          Startup Item can be used to start the server manually, or
          automatically at system startup time.
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> and the Startup Item also can
          be used to stop the server.
        </p><p>
          To start or stop the server manually using the
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> script, invoke it with
          <code class="literal">start</code> or <code class="literal">stop</code> arguments:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql.server start</code></strong>
shell&gt; <strong class="userinput"><code>mysql.server stop</code></strong>
</pre><p>
          Before <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> starts the server, it
          changes location to the MySQL installation directory, and then
          invokes <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>. If you want the server
          to run as some specific user, add an appropriate
          <code class="literal">user</code> option to the
          <code class="literal">[mysqld]</code> group of the
          <code class="filename">/etc/my.cnf</code> option file, as shown later
          in this section. (It is possible that you will need to edit
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> if you've installed a binary
          distribution of MySQL in a nonstandard location. Modify it to
          change location into the proper directory before it runs
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>. If you do this, your modified
          version of <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> may be overwritten
          if you upgrade MySQL in the future, so you should make a copy
          of your edited version that you can reinstall.)
        </p><p>
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server stop</strong></span></a> stops the server by
          sending a signal to it. You can also stop the server manually
          by executing <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin shutdown</strong></span></a>.
        </p><p>
          To start and stop MySQL automatically on your server, you need
          to add start and stop commands to the appropriate places in
          your <code class="filename">/etc/rc*</code> files.
        </p><p>
          If you use the Linux server RPM package
          (<code class="literal">MySQL-server-<em class="replaceable"><code>VERSION</code></em>.rpm</code>),
          the <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> script is installed in the
          <code class="filename">/etc/init.d</code> directory with the name
          <code class="filename">mysql</code>. You need not install it manually.
          See <a href="installing.html#linux-rpm" title="2.10. Installing MySQL from RPM Packages on Linux">Section 2.10, “Installing MySQL from RPM Packages on Linux”</a>, for more information on the
          Linux RPM packages.
        </p><p>
          Some vendors provide RPM packages that install a startup
          script under a different name such as
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
        </p><p>
          If you install MySQL from a source distribution or using a
          binary distribution format that does not install
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> automatically, you can install
          it manually. The script can be found in the
          <code class="filename">support-files</code> directory under the MySQL
          installation directory or in a MySQL source tree.
        </p><p>
          To install <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> manually, copy it
          to the <code class="filename">/etc/init.d</code> directory with the
          name <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>, and then make it executable. Do
          this by changing location into the appropriate directory where
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> is located and executing these
          commands:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cp mysql.server /etc/init.d/mysql</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x /etc/init.d/mysql</code></strong>
</pre><p>
          Older Red Hat systems use the
          <code class="filename">/etc/rc.d/init.d</code> directory rather than
          <code class="filename">/etc/init.d</code>. Adjust the preceding
          commands accordingly. Alternatively, first create
          <code class="filename">/etc/init.d</code> as a symbolic link that
          points to <code class="filename">/etc/rc.d/init.d</code>:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /etc</code></strong>
shell&gt; <strong class="userinput"><code>ln -s rc.d/init.d .</code></strong>
</pre><p>
          After installing the script, the commands needed to activate
          it to run at system startup depend on your operating system.
          On Linux, you can use <code class="literal">chkconfig</code>:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chkconfig --add mysql</code></strong>
</pre><p>
          On some Linux systems, the following command also seems to be
          necessary to fully enable the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> script:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chkconfig --level 345 mysql on</code></strong>
</pre><p>
          On FreeBSD, startup scripts generally should go in
          <code class="filename">/usr/local/etc/rc.d/</code>. The
          <code class="literal">rc(8)</code> manual page states that scripts in
          this directory are executed only if their basename matches the
          <code class="literal">*.sh</code> shell file name pattern. Any other
          files or directories present within the directory are silently
          ignored. In other words, on FreeBSD, you should install the
          <code class="filename">mysql.server</code> script as
          <code class="filename">/usr/local/etc/rc.d/mysql.server.sh</code> to
          enable automatic startup.
        </p><p>
          As an alternative to the preceding setup, some operating
          systems also use <code class="filename">/etc/rc.local</code> or
          <code class="filename">/etc/init.d/boot.local</code> to start
          additional services on startup. To start up MySQL using this
          method, you could append a command like the one following to
          the appropriate startup file:
        </p><pre class="programlisting">/bin/sh -c 'cd /usr/local/mysql; ./bin/mysqld_safe --user=mysql &amp;'
</pre><p>
          For other systems, consult your operating system documentation
          to see how to install startup scripts.
        </p><a class="indexterm" name="id1690139"></a><p>
          You can add options for <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> in a
          global <code class="filename">/etc/my.cnf</code> file. A typical
          <code class="filename">/etc/my.cnf</code> file might look like this:
        </p><pre class="programlisting">[mysqld]
datadir=/usr/local/mysql/var
socket=/var/tmp/mysql.sock
port=3306
user=mysql

[mysql.server]
basedir=/usr/local/mysql
</pre><p>
          The <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> script supports the
          following options: <code class="option">basedir</code>,
          <code class="option">datadir</code>, and <code class="option">pid-file</code>. If
          specified, they <span class="emphasis"><em>must</em></span> be placed in an
          option file, not on the command line.
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> supports only
          <code class="literal">start</code> and <code class="literal">stop</code> as
          command-line arguments.
        </p><p>
          The following table shows which option groups the server and
          each startup script read from option files.
        </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Script</strong></span></td><td><span class="bold"><strong>Option Groups</strong></span></td></tr><tr><td><a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a></td><td><code class="literal">[mysqld]</code>, <code class="literal">[server]</code>,
                  <code class="literal">[mysqld-<em class="replaceable"><code>major_version</code></em>]</code></td></tr><tr><td><a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a></td><td><code class="literal">[mysqld]</code>, <code class="literal">[server]</code>,
                  <code class="literal">[mysqld_safe]</code></td></tr><tr><td><a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a></td><td><code class="literal">[mysqld]</code>, <code class="literal">[mysql.server]</code>,
                  <code class="literal">[server]</code></td></tr></tbody></table></div><p>
          <code class="literal">[mysqld-<em class="replaceable"><code>major_version</code></em>]</code>
          means that groups with names like
          <code class="literal">[mysqld-4.1]</code> and
          <code class="literal">[mysqld-5.0]</code> are read by
          servers having versions 4.1.x,
          5.0.x, and so forth. This feature can be used to
          specify options that can be read only by servers within a
          given release series.
        </p><p>
          For backward compatibility, <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a>
          also reads the <code class="literal">[mysql_server]</code> group and
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> also reads the
          <code class="literal">[safe_mysqld]</code> group. However, you should
          update your option files to use the
          <code class="literal">[mysql.server]</code> and
          <code class="literal">[mysqld_safe]</code> groups instead when using
          MySQL 5.0.
        </p><p>
          See <a href="programs.html#option-files" title="4.2.3.3. Using Option Files">Section 4.2.3.3, “Using Option Files”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="starting-server"></a>2.17.2.3. Starting and Troubleshooting the MySQL Server</h4></div></div></div><a class="indexterm" name="id1690446"></a><a class="indexterm" name="id1690459"></a><p>
          This section provides troubleshooting suggestions for problems
          starting the server on Unix. If you are using Windows, see
          <a href="installing.html#windows-troubleshooting" title="2.9.13. Troubleshooting a MySQL Installation Under Windows">Section 2.9.13, “Troubleshooting a MySQL Installation Under Windows”</a>.
        </p><p>
          If you have problems starting the server, here are some things
          to try:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Check the error log to see why the server does not start.
            </p></li><li><p>
              Specify any special options needed by the storage engines
              you are using.
            </p></li><li><p>
              Make sure that the server knows where to find the data
              directory.
            </p></li><li><p>
              Make sure that the server can access the data directory.
              The ownership and permissions of the data directory and
              its contents must be set such that the server can read and
              modify them.
            </p></li><li><p>
              Verify that the network interfaces the server wants to use
              are available.
            </p></li></ul></div><p>
          Some storage engines have options that control their behavior.
          You can create a <code class="filename">my.cnf</code> file and specify
          startup options for the engines that you plan to use. If you
          are going to use storage engines that support transactional
          tables (<code class="literal">InnoDB</code>, <code class="literal">BDB</code>,
          <code class="literal">NDB</code>), be sure that you have them
          configured the way you want before starting the server:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              If you are using <code class="literal">InnoDB</code> tables, see
              <a href="storage-engines.html#innodb-configuration" title="13.2.2. InnoDB Configuration">Section 13.2.2, “<code class="literal">InnoDB</code> Configuration”</a>.
            </p></li><li><p>
              If you are using <code class="literal">BDB</code> (Berkeley DB)
              tables, see <a href="storage-engines.html#bdb-start" title="13.5.3. BDB Startup Options">Section 13.5.3, “<code class="literal">BDB</code> Startup Options”</a>.
            </p></li><li><p>
              If you are using MySQL Cluster, see
              <a href="mysql-cluster.html#mysql-cluster-configuration" title="17.3. MySQL Cluster Configuration">Section 17.3, “MySQL Cluster Configuration”</a>.
            </p></li></ul></div><p class="mnmas"><b>MySQL Enterprise</b>
            For expert advice on start-up options appropriate to your
            circumstances, subscribe to The MySQL Enterprise Monitor.
            For more information, see
            <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
          </p><p>
          Storage engines will use default option values if you specify
          none, but it is recommended that you review the available
          options and specify explicit values for those for which the
          defaults are not appropriate for your installation.
        </p><p>
          When the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server starts, it changes
          location to the data directory. This is where it expects to
          find databases and where it expects to write log files. The
          server also writes the pid (process ID) file in the data
          directory.
        </p><p>
          The data directory location is hardwired in when the server is
          compiled. This is where the server looks for the data
          directory by default. If the data directory is located
          somewhere else on your system, the server will not work
          properly. You can determine what the default path settings are
          by invoking <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
          <a href="server-administration.html#option_mysqld_verbose"><code class="option">--verbose</code></a> and
          <a href="server-administration.html#option_mysqld_help"><code class="option">--help</code></a> options.
        </p><p>
          If the default locations don't match the MySQL installation
          layout on your system, you can override them by specifying
          options to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> or
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> on the command line or in an
          option file.
        </p><p>
          To specify the location of the data directory explicitly, use
          the <a href="server-administration.html#option_mysqld_datadir"><code class="option">--datadir</code></a> option. However,
          normally you can tell <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> the location
          of the base directory under which MySQL is installed and it
          looks for the data directory there. You can do this with the
          <a href="server-administration.html#option_mysqld_basedir"><code class="option">--basedir</code></a> option.
        </p><p>
          To check the effect of specifying path options, invoke
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with those options followed by the
          <a href="server-administration.html#option_mysqld_verbose"><code class="option">--verbose</code></a> and
          <a href="server-administration.html#option_mysqld_help"><code class="option">--help</code></a> options. For example, if
          you change location into the directory where
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is installed and then run the
          following command, it shows the effect of starting the server
          with a base directory of <code class="filename">/usr/local</code>:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./mysqld --basedir=/usr/local --verbose --help</code></strong>
</pre><p>
          You can specify other options such as
          <a href="server-administration.html#option_mysqld_datadir"><code class="option">--datadir</code></a> as well, but
          <a href="server-administration.html#option_mysqld_verbose"><code class="option">--verbose</code></a> and
          <a href="server-administration.html#option_mysqld_help"><code class="option">--help</code></a> must be the last
          options.
        </p><p>
          Once you determine the path settings you want, start the
          server without <a href="server-administration.html#option_mysqld_verbose"><code class="option">--verbose</code></a> and
          <a href="server-administration.html#option_mysqld_help"><code class="option">--help</code></a>.
        </p><p>
          If <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is currently running, you can
          find out what path settings it is using by executing this
          command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin variables</code></strong>
</pre><p>
          Or:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -h <em class="replaceable"><code>host_name</code></em> variables</code></strong>
</pre><p>
          <em class="replaceable"><code>host_name</code></em> is the name of the MySQL
          server host.
        </p><p>
          If you get <code class="literal">Errcode 13</code> (which means
          <code class="literal">Permission denied</code>) when starting
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, this means that the privileges of
          the data directory or its contents do not allow the server
          access. In this case, you change the permissions for the
          involved files and directories so that the server has the
          right to use them. You can also start the server as
          <code class="literal">root</code>, but this raises security issues and
          should be avoided.
        </p><p>
          On Unix, change location into the data directory and check the
          ownership of the data directory and its contents to make sure
          the server has access. For example, if the data directory is
          <code class="filename">/usr/local/mysql/var</code>, use this command:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ls -la /usr/local/mysql/var</code></strong>
</pre><p>
          If the data directory or its files or subdirectories are not
          owned by the login account that you use for running the
          server, change their ownership to that account. If the account
          is named <code class="literal">mysql</code>, use these commands:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R mysql /usr/local/mysql/var</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql /usr/local/mysql/var</code></strong>
</pre><p>
          If the server fails to start up correctly, check the error
          log. Log files are located in the data directory (typically
          <code class="filename">C:\Program Files\MySQL\MySQL Server
          5.0\data</code> on Windows,
          <code class="filename">/usr/local/mysql/data</code> for a Unix binary
          distribution, and <code class="filename">/usr/local/var</code> for a
          Unix source distribution). Look in the data directory for
          files with names of the form
          <code class="filename"><em class="replaceable"><code>host_name</code></em>.err</code>
          and
          <code class="filename"><em class="replaceable"><code>host_name</code></em>.log</code>,
          where <em class="replaceable"><code>host_name</code></em> is the name of your
          server host. Then examine the last few lines of these files.
          On Unix, you can use <code class="literal">tail</code> to display them:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>tail <em class="replaceable"><code>host_name</code></em>.err</code></strong>
shell&gt; <strong class="userinput"><code>tail <em class="replaceable"><code>host_name</code></em>.log</code></strong>
</pre><p>
          The error log should contain information that indicates why
          the server couldn't start. For example, you might see
          something like this in the log:
        </p><pre class="programlisting">000729 14:50:10  bdb:  Recovery function for LSN 1 27595 failed
000729 14:50:10  bdb:  warning: ./test/t1.db: No such file or directory
000729 14:50:10  Can't init databases
</pre><p>
          This means that you did not start <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
          with the <a href="storage-engines.html#option_mysqld_bdb-no-recover"><code class="option">--bdb-no-recover</code></a>
          option and Berkeley DB found something wrong with its own log
          files when it tried to recover your databases. To be able to
          continue, you should move the old Berkeley DB log files from
          the database directory to some other place, where you can
          later examine them. The <code class="literal">BDB</code> log files are
          named in sequence beginning with
          <code class="filename">log.0000000001</code>, where the number
          increases over time.
        </p><p>
          If you are running <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with
          <code class="literal">BDB</code> table support and
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> dumps core at startup, this could be
          due to problems with the <code class="literal">BDB</code> recovery log.
          In this case, you can try starting <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
          with <a href="storage-engines.html#option_mysqld_bdb-no-recover"><code class="option">--bdb-no-recover</code></a>. If that
          helps, you should remove all <code class="literal">BDB</code> log files
          from the data directory and try starting
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> again without the
          <a href="storage-engines.html#option_mysqld_bdb-no-recover"><code class="option">--bdb-no-recover</code></a> option.
        </p><p>
          If either of the following errors occur, it means that some
          other program (perhaps another <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
          server) is using the TCP/IP port or Unix socket file that
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is trying to use:
        </p><pre class="programlisting">Can't start server: Bind on TCP/IP port: Address already in use
Can't start server: Bind on unix socket...
</pre><p>
          Use <span><strong class="command">ps</strong></span> to determine whether you have
          another <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server running. If so, shut
          down the server before starting <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
          again. (If another server is running, and you really want to
          run multiple servers, you can find information about how to do
          so in <a href="server-administration.html#multiple-servers" title="5.6. Running Multiple MySQL Servers on the Same Machine">Section 5.6, “Running Multiple MySQL Servers on the Same Machine”</a>.)
        </p><p>
          If no other server is running, try to execute the command
          <code class="literal">telnet <em class="replaceable"><code>your_host_name</code></em>
          <em class="replaceable"><code>tcp_ip_port_number</code></em></code>. (The
          default MySQL port number is 3306.) Then press Enter a couple
          of times. If you don't get an error message like
          <code class="literal">telnet: Unable to connect to remote host: Connection
          refused</code>, some other program is using the TCP/IP port
          that <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is trying to use. You'll need
          to track down what program this is and disable it, or else
          tell <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to listen to a different port
          with the <a href="server-administration.html#option_mysqld_port"><code class="option">--port</code></a> option. In this
          case, you'll also need to specify the port number for client
          programs when connecting to the server via TCP/IP.
        </p><p>
          Another reason the port might be inaccessible is that you have
          a firewall running that blocks connections to it. If so,
          modify the firewall settings to allow access to the port.
        </p><p>
          If the server starts but you can't connect to it, you should
          make sure that you have an entry in
          <code class="filename">/etc/hosts</code> that looks like this:
        </p><pre class="programlisting">127.0.0.1       localhost
</pre><p>
          This problem occurs only on systems that do not have a working
          thread library and for which MySQL must be configured to use
          MIT-pthreads.
        </p><p>
          If you cannot get <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to start, you can
          try to make a trace file to find the problem by using the
          <a href="server-administration.html#option_mysqld_debug"><code class="option">--debug</code></a> option. See
          <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
          Internals: Porting</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="default-privileges"></a>2.17.3. Securing the Initial MySQL Accounts</h3></div></div></div><a class="indexterm" name="id1691307"></a><a class="indexterm" name="id1691320"></a><a class="indexterm" name="id1691332"></a><a class="indexterm" name="id1691341"></a><a class="indexterm" name="id1691350"></a><a class="indexterm" name="id1691362"></a><a class="indexterm" name="id1691375"></a><a class="indexterm" name="id1691387"></a><a class="indexterm" name="id1691396"></a><p>
        Part of the MySQL installation process is to set up the
        <code class="literal">mysql</code> database that contains the grant
        tables:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Windows distributions contain preinitialized grant tables
            that are installed automatically.
          </p></li><li><p>
            On Unix, the grant tables are populated by the
            <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> program. Some
            installation methods run this program for you. Others
            require that you execute it manually. For details, see
            <a href="installing.html#unix-post-installation" title="2.17.2. Unix Post-Installation Procedures">Section 2.17.2, “Unix Post-Installation Procedures”</a>.
          </p></li></ul></div><p>
        The grant tables define the initial MySQL user accounts and
        their access privileges. These accounts are set up as follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Accounts with the user name <code class="literal">root</code> are
            created. These are superuser accounts that can do anything.
            The initial <code class="literal">root</code> account passwords are
            empty, so anyone can connect to the MySQL server as
            <code class="literal">root</code> — <span class="emphasis"><em>without a
            password</em></span> — and be granted all privileges.
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                On Windows, one <code class="literal">root</code> account is
                created; this account allows connecting from the local
                host only. The Windows installer will optionally create
                an account allowing for connections from any host only
                if the user selects the <span class="guilabel">Enable root access
                from remote machines</span> option during
                installation.
              </p></li><li><p>
                On Unix, both <code class="literal">root</code> accounts are for
                connections from the local host. Connections must be
                made from the local host by specifying a host name of
                <code class="literal">localhost</code> for one of the accounts, or
                the actual host name or IP number for the other.
              </p></li></ul></div></li><li><p>
            <a class="indexterm" name="id1691537"></a>

            Two anonymous-user accounts are created, each with an empty
            user name. The anonymous accounts have no password, so
            anyone can use them to connect to the MySQL server.
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                On Windows, one anonymous account is for connections
                from the local host. It has no global privileges.
                (Before MySQL 5.1.16, it has all global privileges, just
                like the <code class="literal">root</code> accounts.) The other is
                for connections from any host and has all privileges for
                the <code class="literal">test</code> database and for other
                databases with names that start with
                <code class="literal">test</code>.
              </p></li><li><p>
                On Unix, both anonymous accounts are for connections
                from the local host. Connections must be made from the
                local host by specifying a host name of
                <code class="literal">localhost</code> for one of the accounts, or
                the actual host name or IP number for the other. These
                accounts have all privileges for the
                <code class="literal">test</code> database and for other databases
                with names that start with <code class="literal">test_</code>.
              </p></li></ul></div></li></ul></div><p>
        As noted, none of the initial accounts have passwords. This
        means that your MySQL installation is unprotected until you do
        something about it:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If you want to prevent clients from connecting as anonymous
            users without a password, you should either assign a
            password to each anonymous account or else remove the
            accounts.
          </p></li><li><p>
            You should assign a password to each MySQL
            <code class="literal">root</code> account.
          </p></li></ul></div><p>
        The following instructions describe how to set up passwords for
        the initial MySQL accounts, first for the anonymous accounts and
        then for the <code class="literal">root</code> accounts. Replace
        “<span class="quote"><em class="replaceable"><code>newpwd</code></em></span>” in the examples
        with the actual password that you want to use. The instructions
        also cover how to remove the anonymous accounts, should you
        prefer not to allow anonymous access at all.
      </p><p>
        You might want to defer setting the passwords until later, so
        that you don't need to specify them while you perform additional
        setup or testing. However, be sure to set them before using your
        installation for production purposes.
      </p><p>
        <span class="bold"><strong>Anonymous Account Password
        Assignment</strong></span>
      </p><p>
        To assign passwords to the anonymous accounts, connect to the
        server as <code class="literal">root</code> and then use either
        <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> or
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>. In either case, be sure
        to encrypt the password using the
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function.
      </p><p>
        To use <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> on Windows,
        do this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR ''@'localhost' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR ''@'%' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
</pre><p>
        To use <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> on Unix, do
        this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR ''@'localhost' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR ''@'<em class="replaceable"><code>host_name</code></em>' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
</pre><p>
        In the second <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
        statement, replace <em class="replaceable"><code>host_name</code></em> with the
        name of the server host. This is the name that is specified in
        the <code class="literal">Host</code> column of the
        non-<code class="literal">localhost</code> record for
        <code class="literal">root</code> in the <code class="literal">user</code> table. If
        you don't know what host name this is, issue the following
        statement before using <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET
        PASSWORD</code></a>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT Host, User FROM mysql.user;</code></strong>
</pre><p>
        Look for the record that has <code class="literal">root</code> in the
        <code class="literal">User</code> column and something other than
        <code class="literal">localhost</code> in the <code class="literal">Host</code>
        column. Then use that <code class="literal">Host</code> value in the
        second <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> statement.
      </p><p>
        <span class="bold"><strong>Anonymous Account Removal</strong></span>
      </p><p>
        If you prefer to remove the anonymous accounts instead, do so as
        follows:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>DROP USER '';</code></strong>
</pre><p>
        The <code class="literal">DROP</code> statement applies both to Windows
        and to Unix. On Windows, if you want to remove only the
        anonymous account that has the same privileges as
        <code class="literal">root</code>, do this instead:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>DROP USER ''@'localhost';</code></strong>
</pre><p>
        That account allows anonymous access but has full privileges, so
        removing it improves security.
      </p><p>
        <span class="bold"><strong><code class="literal">root</code> Account Password
        Assignment</strong></span>
      </p><p>
        You can assign passwords to the <code class="literal">root</code> accounts
        in several ways. The following discussion demonstrates three
        methods:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Use the <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
            statement
          </p></li><li><p>
            Use the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> command-line client
            program
          </p></li><li><p>
            Use the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement
          </p></li></ul></div><p>
        To assign passwords using <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET
        PASSWORD</code></a>, connect to the server as
        <code class="literal">root</code> and issue <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET
        PASSWORD</code></a> statements. Be sure to encrypt the password
        using the <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function.
      </p><p>
        For Windows, do this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR 'root'@'%' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
</pre><p>
        For Unix, do this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR 'root'@'<em class="replaceable"><code>host_name</code></em>' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
</pre><p>
        In the second <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
        statement, replace <em class="replaceable"><code>host_name</code></em> with the
        name of the server host. This is the same host name that you
        used when you assigned the anonymous account passwords.
      </p><p>
        If the <code class="literal">user</code> table contains an account with
        <code class="literal">User</code> and <code class="literal">Host</code> values of
        <code class="literal">'root'</code> and <code class="literal">'127.0.0.1'</code>,
        use an additional <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
        statement to set that account's password:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET PASSWORD FOR 'root'@'127.0.0.1' = PASSWORD('<em class="replaceable"><code>newpwd</code></em>');</code></strong>
</pre><p>
        To assign passwords to the <code class="literal">root</code> accounts
        using <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>, execute the following
        commands:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -u root password "<em class="replaceable"><code>newpwd</code></em>"</code></strong>
shell&gt; <strong class="userinput"><code>mysqladmin -u root -h <em class="replaceable"><code>host_name</code></em> password "<em class="replaceable"><code>newpwd</code></em>"</code></strong>
</pre><p>
        These commands apply both to Windows and to Unix. In the second
        command, replace <em class="replaceable"><code>host_name</code></em> with the
        name of the server host. The double quotes around the password
        are not always necessary, but you should use them if the
        password contains spaces or other characters that are special to
        your command interpreter.
      </p><p>
        The <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> method of setting the
        <code class="literal">root</code> account passwords does not set the
        password for the <code class="literal">'root'@'127.0.0.1'</code> account.
        To do so, use <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> as
        shown earlier.
      </p><p>
        You can also use <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> to modify
        the <code class="literal">user</code> table directly. The following
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement assigns a
        password to all <code class="literal">root</code> accounts:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>
mysql&gt; <strong class="userinput"><code>UPDATE mysql.user SET Password = PASSWORD('<em class="replaceable"><code>newpwd</code></em>')</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE User = 'root';</code></strong>
mysql&gt; <strong class="userinput"><code>FLUSH PRIVILEGES;</code></strong>
</pre><p>
        The <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement applies both
        to Windows and to Unix.
      </p><p>
        After the passwords have been set, you must supply the
        appropriate password whenever you connect to the server. For
        example, if you want to use <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> to
        shut down the server, you can do so using this command:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -u root -p shutdown</code></strong>
Enter password: <em class="replaceable"><code>(enter root password here)</code></em>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you forget your <code class="literal">root</code> password after
          setting it up, <a href="error-handling.html#resetting-permissions" title="B.1.4.1. How to Reset the Root Password">Section B.1.4.1, “How to Reset the Root Password”</a>, covers
          the procedure for resetting it.
        </p></div><p>
        To set up additional accounts, you can use the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement. For
        instructions, see <a href="server-administration.html#adding-users" title="5.5.2. Adding User Accounts">Section 5.5.2, “Adding User Accounts”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrade-downgrade"></a>2.18. Upgrading or Downgrading MySQL</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#upgrade">2.18.1. Upgrading MySQL</a></span></dt><dt><span class="section"><a href="installing.html#downgrading">2.18.2. Downgrading MySQL</a></span></dt><dt><span class="section"><a href="installing.html#checking-index-changes">2.18.3. Checking Whether Table Indexes Must Be Rebuilt</a></span></dt><dt><span class="section"><a href="installing.html#rebuilding-tables">2.18.4. Rebuilding or Repairing Tables or Indexes</a></span></dt><dt><span class="section"><a href="installing.html#copying-databases">2.18.5. Copying MySQL Databases to Another Machine</a></span></dt></dl></div><a class="indexterm" name="id1692437"></a><a class="indexterm" name="id1692446"></a><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade"></a>2.18.1. Upgrading MySQL</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#upgrading-from-early-5-0">2.18.1.1. Upgrading from MySQL 5.0 to 5.0.10 or Higher</a></span></dt><dt><span class="section"><a href="installing.html#upgrading-from-previous-series">2.18.1.2. Upgrading from MySQL 4.1 to 5.0</a></span></dt></dl></div><a class="indexterm" name="id1692465"></a><p>
        As a general rule, to upgrade from one release series to
        another, you should go to the next series rather than skipping a
        series. To upgrade from a release series previous to MySQL
        4.1, upgrade to each successive release series in
        turn until you have reached MySQL 4.1, and then
        proceed with the upgrade to MySQL 5.0. For example,
        if you currently are running MySQL 3.23 and wish to upgrade to a
        newer series, upgrade to MySQL 4.0 first before upgrading to
        4.1, and so forth. For information on upgrading to MySQL
        4.1 or earlier releases, see the <em class="citetitle">MySQL
        3.23, 4.0, 4.1 Reference Manual</em>.
      </p><p>
        To upgrade from MySQL 4.1 to 5.0, use
        the items in the following checklist as a guide:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Before any upgrade, back up your databases, including the
            <code class="literal">mysql</code> database that contains the grant
            tables. See <a href="backup-and-recovery.html#backup" title="6.1. Database Backups">Section 6.1, “Database Backups”</a>.
          </p></li><li><p>
            Read <span class="emphasis"><em>all</em></span> the notes in
            <a href="installing.html#upgrading-from-previous-series" title="2.18.1.2. Upgrading from MySQL 4.1 to 5.0">Section 2.18.1.2, “Upgrading from MySQL 4.1 to 5.0”</a>. These
            notes enable you to identify upgrade issues that apply to
            your current MySQL installation. Some incompatibilities
            discussed in that section require your attention
            <span class="emphasis"><em>before</em></span> upgrading. Others should be
            dealt with <span class="emphasis"><em>after</em></span> upgrading.
          </p></li><li><p>
            Read <a href="news.html" title="Appendix C. MySQL Change History">Appendix C, <i>MySQL Change History</i></a> as well, which provides
            information about features that are new in MySQL
            5.0 or differ from those found in MySQL
            4.1.
          </p></li><li><p>
            After you upgrade to a new version of MySQL, run
            <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> (see
            <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>). This program checks your
            tables, and attempts to repair them if necessary. It also
            updates your grant tables to make sure that they have the
            current structure so that you can take advantage of any new
            capabilities. (Some releases of MySQL introduce changes to
            the structure of the grant tables to add new privileges or
            features.)
          </p></li><li><p>
            If you are running MySQL Server on Windows, see
            <a href="installing.html#windows-upgrading" title="2.9.14. Upgrading MySQL on Windows">Section 2.9.14, “Upgrading MySQL on Windows”</a>.
          </p></li><li><p>
            If you are using replication, see
            <a href="replication.html#replication-upgrade" title="16.3.3. Upgrading a Replication Setup">Section 16.3.3, “Upgrading a Replication Setup”</a>, for information on
            upgrading your replication setup.
          </p></li><li><p>
            If you are upgrading an installation originally produced by
            installing multiple RPM packages, it is best to upgrade all
            the packages, not just some. For example, if you previously
            installed the server and client RPMs, do not upgrade just
            the server RPM.
          </p></li><li><p>
            MySQL 5.0.27 is the last version in MySQL 5.0
            for which MySQL-Max binary distributions are provided,
            except for RPM distributions. For RPMs, MySQL 5.0.37 is the
            last release. After these versions, the features previously
            included in the <span><strong class="command">mysqld-max</strong></span> server are
            included in <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
          </p><p>
            If you previously installed a MySQL-Max distribution that
            includes a server named <span><strong class="command">mysqld-max</strong></span>, and
            then upgrade later to a non-Max version of MySQL,
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> still attempts to run the old
            <span><strong class="command">mysqld-max</strong></span> server. If you perform such an
            upgrade, you should remove the old
            <span><strong class="command">mysqld-max</strong></span> server manually to ensure that
            <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> runs the new
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server.
          </p></li></ul></div><p>
        You can always move the MySQL format files and data files
        between different versions on systems with the same architecture
        as long as you stay within versions for the same release series
        of MySQL.
      </p><p>
        If you are cautious about using new versions, you can always
        rename your old <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> before installing a
        newer one. For example, if you are using MySQL
        4.1.13 and want to upgrade to 5.0.10,
        rename your current server from <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to
        <span><strong class="command">mysqld-4.1.13</strong></span>. If your new
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> then does something unexpected, you
        can simply shut it down and restart with your old
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
      </p><p>
        If, after an upgrade, you experience problems with recompiled
        client programs, such as <code class="literal">Commands out of sync</code>
        or unexpected core dumps, you probably have used old header or
        library files when compiling your programs. In this case, you
        should check the date for your <code class="filename">mysql.h</code> file
        and <code class="filename">libmysqlclient.a</code> library to verify that
        they are from the new MySQL distribution. If not, recompile your
        programs with the new headers and libraries.
      </p><p>
        If problems occur, such as that the new
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server does not start or that you
        cannot connect without a password, verify that you do not have
        an old <code class="filename">my.cnf</code> file from your previous
        installation. You can check this with the
        <a href="programs.html#option_general_print-defaults"><code class="option">--print-defaults</code></a> option (for
        example, <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld --print-defaults</strong></span></a>). If this
        command displays anything other than the program name, you have
        an active <code class="filename">my.cnf</code> file that affects server
        or client operation.
      </p><p>
        If your MySQL installation contains a large amount of data that
        might take a long time to convert after an in-place upgrade, you
        might find it useful to create a “<span class="quote">dummy</span>” database
        instance for assessing what conversions might be needed and the
        work involved to perform them. Make a copy of your MySQL
        instance that contains a full copy of the
        <code class="literal">mysql</code> database, plus all other databases
        without data. Run your upgrade procedure on this dummy instance
        to see what actions might be needed so that you can better
        evaluate the work involved when performing actual data
        conversion on your original database instance.
      </p><p>
        It is a good idea to rebuild and reinstall the Perl
        <code class="literal">DBD::mysql</code> module whenever you install a new
        release of MySQL. The same applies to other MySQL interfaces as
        well, such as PHP <code class="literal">mysql</code> extensions and the
        Python <code class="literal">MySQLdb</code> module.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="upgrading-from-early-5-0"></a>2.18.1.1. Upgrading from MySQL 5.0 to 5.0.10 or Higher</h4></div></div></div><p>
          <span class="bold"><strong>After upgrading a 5.0 installation to
          5.0.10 or higher</strong></span>, it is
          <span class="emphasis"><em>necessary</em></span> to upgrade your grant tables.
          Otherwise, creating stored procedures and functions might not
          work. The procedure for doing this is described in
          <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="upgrading-from-previous-series"></a>2.18.1.2. Upgrading from MySQL 4.1 to 5.0</h4></div></div></div><a class="indexterm" name="id1692865"></a><a class="indexterm" name="id1692878"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            It is good practice to back up your data before installing
            any new version of software. Although MySQL works very hard
            to ensure a high level of quality, you should protect your
            data by making a backup.
          </p><p>
            To upgrade to 5.0 from any previous version,
            MySQL recommends that you dump your tables with
            <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> before upgrading and reload the
            dump file after upgrading.
          </p></div><p>
          In general, you should do the following when upgrading from
          MySQL 4.1 to 5.0:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Read <span class="emphasis"><em>all</em></span> the items in the following
              sections to see whether any of them might affect your
              applications:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  <a href="installing.html#upgrade" title="2.18.1. Upgrading MySQL">Section 2.18.1, “Upgrading MySQL”</a>, has general update
                  information.
                </p></li><li><p>
                  The items in the change lists found later in this
                  section enable you to identify upgrade issues that
                  apply to your current MySQL installation.
                </p></li><li><p>
                  The MySQL 5.0 change history describes
                  significant new features you can use in
                  5.0 or that differ from those found in
                  MySQL 4.1. Some of these changes may
                  result in incompatibilities. See
                  <a href="news.html#news-5-0-x" title="C.1. Changes in Release 5.0.x (Production)">Section C.1, “Changes in Release 5.0.x (Production)”</a>.
                </p></li></ul></div></li><li><p>
              Note particularly any changes that are marked
              <span class="bold"><strong>Known issue</strong></span> or
              <span class="bold"><strong>Incompatible change</strong></span>.
              These incompatibilities with earlier versions of MySQL may
              require your attention <span class="emphasis"><em>before you
              upgrade</em></span>.
            </p><p>
              Our aim is to avoid these changes, but occasionally they
              are necessary to correct problems that would be worse than
              an incompatibility between releases. If any upgrade issue
              applicable to your installation involves an
              incompatibility that requires special handling, follow the
              instructions given in the incompatibility description.
              Often this will involve a dump and reload, or use of a
              statement such as <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK
              TABLE</code></a> or <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR
              TABLE</code></a>.
            </p><p>
              For dump and reload instructions, see
              <a href="installing.html#rebuilding-tables" title="2.18.4. Rebuilding or Repairing Tables or Indexes">Section 2.18.4, “Rebuilding or Repairing Tables or Indexes”</a>. Any procedure that
              involves <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> with
              the <code class="literal">USE_FRM</code> option
              <span class="emphasis"><em>must</em></span> be done before upgrading. Use of
              this statement with a version of MySQL different from the
              one used to create the table (that is, using it after
              upgrading) may damage the table. See
              <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax">Section 12.5.2.6, “<code class="literal">REPAIR TABLE</code> Syntax”</a>.
            </p></li><li><p>
              After you upgrade to a new version of MySQL, run
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> (see
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>). This program checks your
              tables, and attempts to repair them if necessary. It also
              updates your grant tables to make sure that they have the
              current structure so that you can take advantage of any
              new capabilities. (Some releases of MySQL introduce
              changes to the structure of the grant tables to add new
              privileges or features.)
            </p></li><li><p>
              Check <a href="installing.html#checking-index-changes" title="2.18.3. Checking Whether Table Indexes Must Be Rebuilt">Section 2.18.3, “Checking Whether Table Indexes Must Be Rebuilt”</a>, to see
              whether changes to character sets or collations were made
              that affect your table indexes. If so, you will need to
              rebuild the affected indexes using the instructions in
              <a href="installing.html#rebuilding-tables" title="2.18.4. Rebuilding or Repairing Tables or Indexes">Section 2.18.4, “Rebuilding or Repairing Tables or Indexes”</a>.
            </p></li><li><p>
              If you are running MySQL Server on Windows, see
              <a href="installing.html#windows-upgrading" title="2.9.14. Upgrading MySQL on Windows">Section 2.9.14, “Upgrading MySQL on Windows”</a>.
            </p></li><li><p>
              MySQL 5.0 adds support for stored procedures.
              This support requires the <code class="literal">mysql.proc</code>
              table. To create this table, you should run the
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> program as described in
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
            </p></li><li><p>
              MySQL 5.0 adds support for views. This
              support requires extra privilege columns in the
              <code class="literal">mysql.user</code> and
              <code class="literal">mysql.db</code> tables. To create these
              columns, you should run the
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> program as described in
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
            </p></li><li><p>
              If you are using replication, see
              <a href="replication.html#replication-upgrade" title="16.3.3. Upgrading a Replication Setup">Section 16.3.3, “Upgrading a Replication Setup”</a>, for information on
              upgrading your replication setup.
            </p></li></ul></div><p>
          If your MySQL installation contains a large amount of data
          that might take a long time to convert after an in-place
          upgrade, you might find it useful to create a
          “<span class="quote">dummy</span>” database instance for assessing what
          conversions might be needed and the work involved to perform
          them. Make a copy of your MySQL instance that contains a full
          copy of the <code class="literal">mysql</code> database, plus all other
          databases without data. Run your upgrade procedure on this
          dummy instance to see what actions might be needed so that you
          can better evaluate the work involved when performing actual
          data conversion on your original database instance.
        </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
            MySQL Enterprise subscribers will find more information
            about upgrading in the Knowledge Base articles found at
            <a href="https://kb.mysql.com/search.php?cat=search&amp;category=41" target="_top">
            Upgrading</a>. Access to the MySQL Knowledge Base
            collection of articles is one of the advantages of
            subscribing to MySQL Enterprise. For more information, see
            <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
          </p><p>
          Several visible behaviors have changed between MySQL
          4.1 and MySQL 5.0 to make MySQL
          more compatible with standard SQL. These changes may affect
          your applications.
        </p><p>
          The following lists describe changes that may affect
          applications and that you should watch out for when upgrading
          to MySQL 5.0.
        </p><p>
          <span class="bold"><strong>Server Changes:</strong></span>
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>:
              Character set changes were made in MySQL 5.0.48 that may
              require table indexes to be rebuilt. For details, see
              <a href="installing.html#checking-index-changes" title="2.18.3. Checking Whether Table Indexes Must Be Rebuilt">Section 2.18.3, “Checking Whether Table Indexes Must Be Rebuilt”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: The
              indexing order for end-space in
              <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns for
              <code class="literal">InnoDB</code> and <code class="literal">MyISAM</code>
              tables has changed. Starting from 5.0.3,
              <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> indexes are compared
              as space-padded at the end (just as MySQL sorts
              <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
              <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> and
              <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> fields). If you have
              an index on a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column,
              you should run <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>
              on it. If the check reports errors, rebuild the indexes:
              Dump and reload the table if it is an
              <code class="literal">InnoDB</code> table, or run
              <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> or
              <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> if it is a
              <code class="literal">MyISAM</code> table.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>. For
              <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> columns, the pad
              value and how it is handled has changed as of MySQL
              5.0.15. The pad value for inserts now is
              <code class="literal">0x00</code> rather than space, and there is no
              stripping of the pad value for retrievals. For details,
              see <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types">Section 10.4.2, “The <code class="literal">BINARY</code> and
        <code class="literal">VARBINARY</code> Types”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>. As
              of MySQL 5.0.3, trailing spaces no longer are removed from
              values stored in <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
              and <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns. The
              maximum lengths for <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
              and <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns in
              MySQL 5.0.3 and later are 65,535 characters and 65,535
              bytes, respectively.
            </p><p>
              When a binary upgrade (filesystem-level copy of data
              files) to MySQL 5.0 is performed for a table with a
              <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> column, the
              column is space-padded to the full allowable width of the
              column. This causes values in
              <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns that do
              not occupy the full width of the column to include extra
              trailing spaces after the upgrade, which means that the
              data in the column is different.
            </p><p>
              In addition, new rows inserted into a table upgraded in
              this way will be space padded to the full width of the
              column.
            </p><p>
              This issue can be resolved as follows:
            </p><div class="orderedlist"><ol type="1"><li><p>
                  For each table containing
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns,
                  execute the following statement, where
                  <em class="replaceable"><code>tbl_name</code></em> is the name of the
                  table and <em class="replaceable"><code>engine_name</code></em> is
                  the name of the storage engine currently used by
                  <em class="replaceable"><code>tbl_name</code></em>:
                </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> ENGINE=<em class="replaceable"><code>engine_name</code></em>;
</pre><p>
                  In other words, if the table named
                  <code class="literal">mytable</code> uses the
                  <code class="literal">MyISAM</code> storage engine, then you
                  would use this statement:
                </p><pre class="programlisting">ALTER TABLE mytable ENGINE=MYISAM;
</pre><p>
                  This rebuilds the table so that it uses the 5.0
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> format.
                </p></li><li><p>
                  Then you must remove all trailing spaces from any
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> column
                  values. For each
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> column
                  <em class="replaceable"><code>varbinary_column</code></em>, execute
                  the following statement, where
                  <em class="replaceable"><code>tbl_name</code></em> is the name of the
                  table containing the
                  <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> column:
                </p><pre class="programlisting">UPDATE <em class="replaceable"><code>tbl_name</code></em> SET <em class="replaceable"><code>varbinary_column</code></em> = RTRIM(<em class="replaceable"><code>varbinary_column</code></em>);
</pre><p>
                  This is necessary and safe because trailing spaces are
                  stripped before 5.0.3, meaning that any trailing
                  spaces are erroneous.
                </p></li></ol></div><p>
              This problem does not occur (and thus these two steps are
              not required) for tables upgraded using the recommended
              procedure of dumping tables prior to the upgrade and
              reloading them afterwards.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                If you create a table with new
                <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> or
                <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns in
                MySQL 5.0.3 or later, the table will not be usable if
                you downgrade to a version older than 5.0.3. Dump the
                table with <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> before
                downgrading and reload it after downgrading.
              </p></div></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: The
              implementation of <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a>
              was changed in MySQL 5.0.3. You should make your
              applications aware of this change. For information about
              this change, and about possible incompatibilities with old
              applications, see <a href="functions.html#precision-math" title="11.13. Precision Math">Section 11.13, “Precision Math”</a>, in
              particular,
              <a href="functions.html#precision-math-decimal-changes" title="11.13.2. DECIMAL Data Type Changes">Section 11.13.2, “<code class="literal">DECIMAL</code> Data Type Changes”</a>.
            </p><p>
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> columns are stored
              in a more efficient format. To convert a table to use the
              new <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> type, you
              should do an <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on
              it. (The <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> also
              will change the table's
              <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> columns to use the
              new <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> data type
              properties, described in a separate item.)
            </p><p>
              A consequence of the change in handling of the
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> and
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">NUMERIC</code></a> fixed-point data
              types is that the server is more strict to follow standard
              SQL. For example, a data type of
              <code class="literal">DECIMAL(3,1)</code> stores a maximum value of
              99.9. Before MySQL 5.0.3, the server allowed larger
              numbers to be stored. That is, it stored a value such as
              100.0 as 100.0. As of MySQL 5.0.3, the server clips 100.0
              to the maximum allowable value of 99.9. If you have tables
              that were created before MySQL 5.0.3 and that contain
              floating-point data not strictly legal for the data type,
              you should alter the data types of those columns. For
              example:
            </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> MODIFY <em class="replaceable"><code>col_name</code></em> DECIMAL(4,1);
</pre><p>
              The behavior used by the server for
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> columns in a table
              depends on the version of MySQL used to create the table.
              If your server is from MySQL 5.0.3 or higher, but you have
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> columns in tables
              that were created before 5.0.3, the old behavior still
              applies to those columns. To convert the tables to the
              newer <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> format, dump
              them with <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> and reload them.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              MySQL 5.0.3 and up uses precision math when calculating
              with <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> and integer
              columns (64 decimal digits) and for rounding exact-value
              numbers. Rounding behavior is well-defined, not dependent
              on the implementation of the underlying C library.
              However, this might result in incompatibilities for
              applications that rely on the old behavior. (For example,
              inserting .5 into an <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a>
              column results in 1 as of MySQL 5.0.3, but might be 0 in
              older versions.) For more information about rounding
              behavior, see <a href="functions.html#precision-math-rounding" title="11.13.4. Rounding Behavior">Section 11.13.4, “Rounding Behavior”</a>,
              and <a href="functions.html#precision-math-examples" title="11.13.5. Precision Math Examples">Section 11.13.5, “Precision Math Examples”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>:
              <code class="literal">MyISAM</code> and <code class="literal">InnoDB</code>
              tables created with <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a>
              columns in MySQL 5.0.3 to 5.0.5 will appear corrupt after
              an upgrade to MySQL 5.0.6. (The same incompatibility will
              occur for these tables created in MySQL 5.0.6 after a
              downgrade to MySQL 5.0.3 to 5.0.5.) If you have such
              tables, check and repair them with
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> after upgrading. See
              <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> For
              user-defined functions, exact-value decimal arguments such
              as <code class="literal">1.3</code> or
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> column values were
              passed as <code class="literal">REAL_RESULT</code> values prior to
              MySQL 5.0.3. As of 5.0.3, they are passed as strings with
              a type of <code class="literal">DECIMAL_RESULT</code>. If you
              upgrade to 5.0.3 and find that your UDF now receives
              string values, use the initialization function to coerce
              the arguments to numbers as described in
              <a href="extending-mysql.html#udf-arguments" title="21.2.2.3. UDF Argument Processing">Section 21.2.2.3, “UDF Argument Processing”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: As
              of MySQL 5.0.3, the server by default no longer loads
              user-defined functions (UDFs) unless they have at least
              one auxiliary symbol (for example, an
              <code class="literal">xxx_init</code> or
              <code class="literal">xxx_deinit</code> symbol) defined in addition
              to the main function symbol. This behavior can be
              overridden with the
              <a href="server-administration.html#option_mysqld_allow-suspicious-udfs"><code class="option">--allow-suspicious-udfs</code></a>
              option. See <a href="extending-mysql.html#udf-security" title="21.2.2.6. User-Defined Function Security Precautions">Section 21.2.2.6, “User-Defined Function Security Precautions”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: As
              of MySQL 5.0.13, <code class="literal">InnoDB</code> rolls back only
              the last statement on a transaction timeout. As of MySQL
              5.0.32, a new option,
              <a href="storage-engines.html#sysvar_innodb_rollback_on_timeout"><code class="option">--innodb_rollback_on_timeout</code></a>,
              causes <code class="literal">InnoDB</code> to abort and roll back
              the entire transaction if a transaction timeout occurs
              (the same behavior as in MySQL 4.1).
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: For
              <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns that had
              enumeration values containing commas, the commas were
              mapped to <code class="literal">0xff</code> internally. However,
              this rendered the commas indistinguishable from true
              <code class="literal">0xff</code> characters in the values. This no
              longer occurs. However, the fix requires that you dump and
              reload any tables that have
              <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> columns containing
              true <code class="literal">0xff</code> in their values: Dump the
              tables using <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> with the current
              server before upgrading from a version of MySQL 5.0 older
              than 5.0.36 to version 5.0.36 or newer.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: The
              update log has been removed in MySQL 5.0. If you had
              enabled it previously, enable the binary log instead.
            </p></li><li><p>
              <a class="indexterm" name="id1694071"></a>

              <span class="bold"><strong>Incompatible change:</strong></span>
              Support for the <code class="literal">ISAM</code> storage engine has
              been removed in MySQL 5.0. If you have any
              <code class="literal">ISAM</code> tables, you should convert them
              <span class="emphasis"><em>before</em></span> upgrading. For example, to
              convert an <code class="literal">ISAM</code> table to use the
              <code class="literal">MyISAM</code> storage engine, use this
              statement:
            </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> ENGINE = MyISAM;
</pre><p>
              Use a similar statement for every <code class="literal">ISAM</code>
              table in each of your databases.
            </p></li><li><p>
              <a class="indexterm" name="id1694150"></a>

              <span class="bold"><strong>Incompatible change</strong></span>:
              Support for <code class="literal">RAID</code> options in
              <code class="literal">MyISAM</code> tables has been removed in MySQL
              5.0. If you have tables that use these options, you should
              convert them before upgrading. One way to do this is to
              dump them with <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>, edit the dump
              file to remove the <code class="literal">RAID</code> options in the
              <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statements,
              and reload the dump file. Another possibility is to use
              <code class="literal">CREATE TABLE <em class="replaceable"><code>new_tbl</code></em>
              ... SELECT <em class="replaceable"><code>raid_tbl</code></em></code>
              to create a new table from the <code class="literal">RAID</code>
              table. However, the <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
              TABLE</code></a> part of the statement must contain
              sufficient information to re-create column attributes as
              well as indexes, or column attributes may be lost and
              indexes will not appear in the new table. See
              <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
            </p><p>
              The <code class="filename">.MYD</code> files for
              <code class="literal">RAID</code> tables in a given database are
              stored under the database directory in subdirectories that
              have names consisting of two hex digits in the range from
              <code class="literal">00</code> to <code class="literal">ff</code>. After
              converting all tables that use <code class="literal">RAID</code>
              options, these <code class="literal">RAID</code>-related
              subdirectories still will exist but can be removed. Verify
              that they are empty, and then remove them manually. (If
              they are not empty, this indicates that there is some
              <code class="literal">RAID</code> table that has not been
              converted.)
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>:
              Beginning with MySQL 5.0.42, when a
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> value is compared with
              a <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> value, the
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATE</code></a> value is coerced to
              the <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> type by adding
              the time portion as <code class="literal">00:00:00</code>.
              Previously, the time portion of the
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> value was ignored,
              or the comparison could be performed as a string
              comparison. To mimic the old behavior, use the
              <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> function to cause
              the comparison operands to be treated as previously. For
              example:
            </p><pre class="programlisting"><em class="replaceable"><code>date_col</code></em> = CAST(NOW() AS DATE)
</pre></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              <a href="sql-syntax.html#show-create-view" title="12.5.5.10. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a> displays
              view definitions using an <code class="literal">AS
              <em class="replaceable"><code>alias_name</code></em></code> clause for
              each column. If a column is created from an expression,
              the default alias is the expression text, which can be
              quite long. As of MySQL 5.0.52, aliases for column names
              in <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> statements
              are checked against the maximum column length of 64
              characters (not the maximum alias length of 256
              characters). As a result, views created from the output of
              <a href="sql-syntax.html#show-create-view" title="12.5.5.10. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a> fail if
              any column alias exceeds 64 characters. This can cause
              problems for replication or loading dump files. For
              additional information and workarounds, see
              <a href="restrictions.html#view-restrictions" title="D.4. Restrictions on Views">Section D.4, “Restrictions on Views”</a>.
            </p></li><li><p>
              As of MySQL 5.0.25, the
              <a href="server-administration.html#sysvar_lc_time_names"><code class="literal">lc_time_names</code></a> system
              variable specifies the locale that controls the language
              used to display day and month names and abbreviations.
              This variable affects the output from the
              <a href="functions.html#function_date-format"><code class="literal">DATE_FORMAT()</code></a>,
              <a href="functions.html#function_dayname"><code class="literal">DAYNAME()</code></a> and
              <a href="functions.html#function_monthname"><code class="literal">MONTHNAME()</code></a> functions. See
              <a href="internationalization-localization.html#locale-support" title="9.8. MySQL Server Locale Support">Section 9.8, “MySQL Server Locale Support”</a>.
            </p></li><li><p>
              In MySQL 5.0.6, binary logging of stored routines and
              triggers was changed. This change has implications for
              security, replication, and data recovery, as discussed in
              <a href="stored-programs-views.html#stored-programs-logging" title="18.5. Binary Logging of Stored Programs">Section 18.5, “Binary Logging of Stored Programs”</a>.
            </p></li><li><p>
              As of MySQL 5.0.28, <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> no
              longer implicitly invokes <span><strong class="command">mysqld-max</strong></span> if
              it exists. Instead, it invokes <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
              unless a <a href="programs.html#option_mysqld_safe_mysqld"><code class="option">--mysqld</code></a> or
              <a href="programs.html#option_mysqld_safe_mysqld-version"><code class="option">--mysqld-version</code></a>
              option is given to specify another server explicitly. If
              you previously relied on the implicit invocation of
              <span><strong class="command">mysqld-max</strong></span>, you should use an
              appropriate option now.
            </p></li></ul></div><p>
          <span class="bold"><strong>SQL Changes:</strong></span>
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong>Known issue</strong></span>: Prior to
              MySQL 5.0.46, the parser accepted invalid code in SQL
              condition handlers, leading to server crashes or
              unexpected execution behavior in stored programs.
              Specifically, the parser allowed a condition handler to
              refer to labels for blocks that enclose the handler
              declaration. This was incorrect because block label scope
              does not include the code for handlers declared within the
              labeled block.
            </p><p>
              As of 5.0.46, the parser rejects this invalid construct,
              but if you upgrade in place (without dumping and reloading
              your databases), existing handlers that contain the
              construct still are invalid <span class="emphasis"><em>even if they appear
              to function as you expect</em></span> and should be
              rewritten.
            </p><p>
              To find affected handlers, use mysqldump to dump all
              stored procedures and functions, triggers, and events.
              Then attempt to reload them into an upgraded server.
              Handlers that contain illegal label references will be
              rejected.
            </p><p>
              For more information about condition handlers and writing
              them to avoid invalid jumps, see
              <a href="sql-syntax.html#declare-handler" title="12.8.4.2. DECLARE for Handlers">Section 12.8.4.2, “<code class="literal">DECLARE</code> for Handlers”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> The
              parser accepted statements that contained <code class="literal">/* ...
              */</code> that were not properly closed with
              <code class="literal">*/</code>, such as <code class="literal">SELECT 1 /* +
              2</code>. As of MySQL 5.0.50, statements that contain
              unclosed <code class="literal">/*</code>-comments now are rejected
              with a syntax error.
            </p><p>
              This fix has the potential to cause incompatibilities.
              Because of <a href="http://bugs.mysql.com/26302" target="_top">Bug#26302</a>, which caused the trailing
              <code class="literal">*/</code> to be truncated from comments in
              views, stored routines, triggers, and events, it is
              possible that objects of those types may have been stored
              with definitions that now will be rejected as
              syntactically invalid. Such objects should be dropped and
              re-created so that their definitions do not contain
              truncated comments. If a stored object definition contains
              only a single statement (does not use a <code class="literal">BEGIN ...
              END</code> block) and contains a comment within the
              statement, the comment should be moved to follow the
              statement or the object should be rewritten to use a
              <code class="literal">BEGIN ... END</code> block. For example, this
              statement:
            </p><pre class="programlisting">CREATE PROCEDURE p() SELECT 1 /* my comment */ ;
</pre><p>
              Can be rewritten in either of these ways:
            </p><pre class="programlisting">CREATE PROCEDURE p() SELECT 1; /* my comment */
CREATE PROCEDURE p() BEGIN SELECT 1 /* my comment */ ; END;
</pre></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: If
              you have created a user-defined function (UDF) with a
              given name and upgrade MySQL to a version that implements
              a new built-in function with the same name, the UDF
              becomes inaccessible. To correct this, use
              <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> to drop the
              UDF, and then use <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE
              FUNCTION</code></a> to re-create the UDF with a different
              nonconflicting name. If a new version of MySQL implements
              a built-in function with the same name as an existing
              stored function, you have two choices: Rename the stored
              function to use a nonconflicting name, or change calls to
              the function so that they use a database qualifier (that
              is, use
              <code class="literal"><em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>func_name</code></em>()</code>
              syntax). See <a href="language-structure.html#function-resolution" title="8.2.3. Function Name Parsing and Resolution">Section 8.2.3, “Function Name Parsing and Resolution”</a>, for
              the rules describing how the server interprets references
              to different kinds of functions.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              Beginning with MySQL 5.0.12, natural joins and joins with
              <code class="literal">USING</code>, including outer join variants,
              are processed according to the SQL:2003 standard. The
              changes include elimination of redundant output columns
              for <code class="literal">NATURAL</code> joins and joins specified
              with a <code class="literal">USING</code> clause and proper ordering
              of output columns. The precedence of the comma operator
              also now is lower compared to <code class="literal">JOIN</code>,
              <code class="literal">LEFT JOIN</code>, and so forth.
            </p><p>
              These changes make MySQL more compliant with standard SQL.
              However, they can result in different output columns for
              some joins. Also, some queries that appeared to work
              correctly prior to 5.0.12 must be rewritten to comply with
              the standard. For details about the scope of the changes
              and examples that show what query rewrites are necessary,
              see <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> The
              namespace for triggers changed in MySQL 5.0.10.
              Previously, trigger names had to be unique per table. Now
              they must be unique within the schema (database). An
              implication of this change is that
              <a href="sql-syntax.html#drop-trigger" title="12.1.18. DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a> syntax now
              uses a schema name instead of a table name (schema name is
              optional and, if omitted, the current schema will be
              used).
            </p><p>
              When upgrading from a version of MySQL 5 older than 5.0.10
              to MySQL 5.0.10 or newer, you must drop all triggers and
              re-create them or <a href="sql-syntax.html#drop-trigger" title="12.1.18. DROP TRIGGER Syntax"><code class="literal">DROP
              TRIGGER</code></a> will not work after the upgrade. Here is
              a suggested procedure for doing this:
            </p><div class="orderedlist"><ol type="1"><li><p>
                  Upgrade to MySQL 5.0.10 or later to be able to access
                  trigger information in the
                  <a href="information-schema.html#triggers-table" title="19.16. The INFORMATION_SCHEMA TRIGGERS Table"><code class="literal">INFORMATION_SCHEMA.TRIGGERS</code></a>
                  table. (This should work even for pre-5.0.10
                  triggers.)
                </p></li><li><p>
                  Dump all trigger definitions using the following
                  <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement:
                </p><pre class="programlisting">SELECT CONCAT('CREATE TRIGGER ', t.TRIGGER_SCHEMA, '.', t.TRIGGER_NAME,
              ' ', t.ACTION_TIMING, ' ', t.EVENT_MANIPULATION, ' ON ',
              t.EVENT_OBJECT_SCHEMA, '.', t.EVENT_OBJECT_TABLE,
              ' FOR EACH ROW ', t.ACTION_STATEMENT, '//' )
INTO OUTFILE '/tmp/triggers.sql'
FROM INFORMATION_SCHEMA.TRIGGERS AS t;
</pre><p>
                  The statement uses <code class="literal">INTO OUTFILE</code>, so
                  you must have the <a href="server-administration.html#priv_file"><code class="literal">FILE</code></a>
                  privilege. The file will be created on the server
                  host. Use a different file name if you like. To be
                  100% safe, inspect the trigger definitions in the
                  <code class="filename">triggers.sql</code> file, and perhaps
                  make a backup of the file.
                </p></li><li><p>
                  Stop the server and drop all triggers by removing all
                  <code class="filename">.TRG</code> files in your database
                  directories. Change location to your data directory
                  and issue this command:
                </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rm */*.TRG</code></strong>
</pre></li><li><p>
                  Start the server and re-create all triggers using the
                  <code class="filename">triggers.sql</code> file:
                </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>delimiter // ;</code></strong>
mysql&gt; <strong class="userinput"><code>source /tmp/triggers.sql //</code></strong>
</pre></li><li><p>
                  Use the <code class="filename">SHOW TRIGGERS</code> statement
                  to check that all triggers were created successfully.
                </p></li></ol></div></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> As
              of MySQL 5.0.15, the <a href="functions.html#function_char"><code class="literal">CHAR()</code></a>
              function returns a binary string rather than a string in
              the connection character set. An optional <code class="literal">USING
              <em class="replaceable"><code>charset_name</code></em></code> clause
              may be used to produce a result in a specific character
              set instead. Also, arguments larger than 256 produce
              multiple characters. They are no longer interpreted modulo
              256 to produce a single character each. These changes may
              cause some incompatibilities:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  <code class="literal">CHAR(ORD('A')) = 'a'</code> is no longer
                  true:
                </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CHAR(ORD('A')) = 'a';</code></strong>
+----------------------+
| CHAR(ORD('A')) = 'a' |
+----------------------+
|                    0 |
+----------------------+
</pre><p>
                  To perform a case-insensitive comparison, you can
                  produce a result string in a nonbinary character set
                  by adding a <code class="literal">USING</code> clause or
                  converting the result:
                </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT CHAR(ORD('A') USING latin1) = 'a';</code></strong>
+-----------------------------------+
| CHAR(ORD('A') USING latin1) = 'a' |
+-----------------------------------+
|                                 1 |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT CONVERT(CHAR(ORD('A')) USING latin1) = 'a';</code></strong>
+--------------------------------------------+
| CONVERT(CHAR(ORD('A')) USING latin1) = 'a' |
+--------------------------------------------+
|                                          1 |
+--------------------------------------------+
</pre></li><li><p>
                  <code class="literal">CREATE TABLE ... SELECT CHAR(...)</code>
                  produces a <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>
                  column, not a <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
                  column. To produce a
                  <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> column, use
                  <code class="literal">USING</code> or
                  <a href="functions.html#function_convert"><code class="literal">CONVERT()</code></a> as just
                  described to convert the
                  <a href="functions.html#function_char"><code class="literal">CHAR()</code></a> result into a
                  nonbinary character set.
                </p></li><li><p>
                  Previously, the following statements inserted the
                  value <code class="literal">0x00410041</code>
                  (<code class="literal">'AA'</code> as a <code class="literal">ucs2</code>
                  string) into the table:
                </p><pre class="programlisting">CREATE TABLE t (ucs2_column CHAR(2) CHARACTER SET ucs2);
INSERT INTO t VALUES (CHAR(0x41,0x41));
</pre><p>
                  As of MySQL 5.0.15, the statements insert a single
                  <code class="literal">ucs2</code> character with value
                  <code class="literal">0x4141</code>.
                </p></li></ul></div></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> By
              default, integer subtraction involving an unsigned value
              should produce an unsigned result. Tracking of the
              “<span class="quote">unsignedness</span>” of an expression was improved
              in MySQL 5.0.13. This means that, in some cases where an
              unsigned subtraction would have resulted in a signed
              integer, it now results in an unsigned integer. One
              context in which this difference manifests itself is when
              a subtraction involving an unsigned operand would be
              negative.
            </p><p>
              Suppose that <code class="literal">i</code> is a <code class="literal">TINYINT
              UNSIGNED</code> column and has a value of 0. The server
              evaluates the following expression using 64-bit unsigned
              integer arithmetic with the following result:
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT i - 1 FROM t;</code></strong>
+----------------------+
| i - 1                |
+----------------------+
| 18446744073709551615 |
+----------------------+
</pre><p>
              If the expression is used in an <code class="literal">UPDATE t SET i =
              i - 1</code> statement, the expression is evaluated and
              the result assigned to <code class="literal">i</code> according to
              the usual rules for handling values outside the column
              range or 0 to 255. That is, the value is clipped to the
              nearest endpoint of the range. However, the result is
              version-specific:
            </p><div class="itemizedlist"><ul type="circle"><li><p>
                  Before MySQL 5.0.13, the expression is evaluated but
                  is treated as the equivalent 64-bit signed value
                  (–1) for the assignment. The value of –1
                  is clipped to the nearest endpoint of the column
                  range, resulting in a value of 0:
                </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE t SET i = i - 1; SELECT i FROM t;</code></strong>
+------+
| i    |
+------+
|    0 |
+------+
</pre></li><li><p>
                  As of MySQL 5.0.13, the expression is evaluated and
                  retains its unsigned attribute for the assignment. The
                  value of 18446744073709551615 is clipped to the
                  nearest endpoint of the column range, resulting in a
                  value of 255:
                </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE t SET i = i - 1; SELECT i FROM t;</code></strong>
+------+
| i    |
+------+
|  255 |
+------+
</pre></li></ul></div><p>
              To get the older behavior, use
              <a href="functions.html#function_cast"><code class="literal">CAST()</code></a> to convert the
              expression result to a signed value:
            </p><pre class="programlisting">UPDATE t SET i = CAST(i - 1 AS SIGNED);
</pre><p>
              Alternatively, set the
              <a href="server-administration.html#sqlmode_no_unsigned_subtraction"><code class="literal">NO_UNSIGNED_SUBTRACTION</code></a>
              SQL mode. However, this will affect all integer
              subtractions involving unsigned values.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              Before MySQL 5.0.12, <a href="functions.html#function_now"><code class="literal">NOW()</code></a>
              and <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> return the
              same value (the time at which the statement in which the
              function occurs begins executing). As of MySQL 5.0.12,
              <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> returns the time
              at which it executes, which can differ from the value
              returned by <a href="functions.html#function_now"><code class="literal">NOW()</code></a>. For
              information about the implications for binary logging,
              replication, and use of indexes, see the description for
              <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> in
              <a href="functions.html#date-and-time-functions" title="11.6. Date and Time Functions">Section 11.6, “Date and Time Functions”</a> and for
              <code class="literal">SET TIMESTAMP</code> in
              <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax">Section 12.5.4, “<code class="literal">SET</code> Syntax”</a>. To restore the former
              behavior for <a href="functions.html#function_sysdate"><code class="literal">SYSDATE()</code></a> and
              cause it to be an alias for
              <a href="functions.html#function_now"><code class="literal">NOW()</code></a>, start the server
              with the <a href="server-administration.html#option_mysqld_sysdate-is-now"><code class="option">--sysdate-is-now</code></a>
              option (available as of MySQL 5.0.20).
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              Before MySQL 5.0.13,
              <a href="functions.html#function_greatest"><code class="literal">GREATEST(<em class="replaceable"><code>x</code></em>,NULL)</code></a>
              and
              <a href="functions.html#function_least"><code class="literal">LEAST(<em class="replaceable"><code>x</code></em>,NULL)</code></a>
              return <em class="replaceable"><code>x</code></em> when
              <em class="replaceable"><code>x</code></em> is a
              non-<code class="literal">NULL</code> value. As of 5.0.13, both
              functions return <code class="literal">NULL</code> if any argument
              is <code class="literal">NULL</code>, the same as Oracle. This
              change can cause problems for applications that rely on
              the old behavior.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              Before MySQL 5.0.8, conversion of
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> values to numeric
              form by adding zero produced a result in
              <code class="literal">YYYYMMDDHHMMSS</code> format. The result of
              <code class="literal">DATETIME+0</code> is now in
              <code class="literal">YYYYMMDDHHMMSS.000000</code> format.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> In
              MySQL 5.0.6, the behavior of
              <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
              INFILE</code></a> and
              <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
              OUTFILE</code></a> has changed when the <code class="literal">FIELDS
              TERMINATED BY</code> and <code class="literal">FIELDS ENCLOSED
              BY</code> values both are empty. Formerly, a column was
              read or written using the display width of the column. For
              example, <code class="literal">INT(4)</code> was read or written
              using a field with a width of 4. Now columns are read and
              written using a field width wide enough to hold all values
              in the field. However, data files written before this
              change was made might not be reloaded correctly with
              <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
              INFILE</code></a> for MySQL 5.0.6 and up. This change also
              affects data files read by <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a>
              and written by <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump --tab</strong></span></a>, which
              use <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
              INFILE</code></a> and
              <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
              OUTFILE</code></a>. For more information, see
              <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax">Section 12.2.6, “<code class="literal">LOAD DATA INFILE</code>
      Syntax”</a>.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span>
              Before MySQL 5.0.2, <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW
              STATUS</code></a> returned global status values. The
              default as of 5.0.2 is to return session values, which is
              incompatible with previous versions. To issue a
              <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> statement that
              will retrieve global status values for all versions of
              MySQL, write it like this:
            </p><pre class="programlisting">SHOW /*!50002 GLOBAL */ STATUS;
</pre></li><li><p>
              <span class="bold"><strong>Incompatible change:</strong></span> User
              variables are not case sensitive in MySQL
              5.0. In MySQL 4.1, <code class="literal">SET @x = 0; SET
              @X = 1; SELECT @x;</code> created two variables and
              returned <code class="literal">0</code>. In MySQL 5.0,
              it creates one variable and returns <code class="literal">1</code>.
              Replication setups that rely on the old behavior may be
              affected by this change.
            </p></li><li><p>
              Some keywords are reserved in MySQL 5.0 that
              were not reserved in MySQL 4.1. See
              <a href="language-structure.html#reserved-words" title="8.3. Reserved Words">Section 8.3, “Reserved Words”</a>.
            </p></li><li><p>
              The <code class="literal">LOAD DATA FROM MASTER</code> and
              <code class="literal">LOAD TABLE FROM MASTER</code> statements are
              deprecated. See <a href="sql-syntax.html#load-data-from-master" title="12.6.2.2. LOAD DATA FROM MASTER Syntax">Section 12.6.2.2, “<code class="literal">LOAD DATA FROM MASTER</code> Syntax”</a>,
              for recommended alternatives.
            </p></li><li><p>
              As of MySQL 5.0.25,
              <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns that are
              <code class="literal">NOT NULL</code> now are reported that way by
              <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a> and
              <code class="literal">INFORMATION_SCHEMA</code>, rather than as
              <code class="literal">NULL</code>.
            </p></li><li><p>
              Comparisons made between
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a> or
              <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DOUBLE</code></a> values that happened
              to work in MySQL 4.1 may not do so in 5.0. Values of these
              types are imprecise in all MySQL versions, and you are
              <span class="emphasis"><em>strongly advised</em></span> to avoid such
              comparisons as <code class="literal">WHERE
              <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>some_double</code></em></code>,
              <span class="emphasis"><em>regardless of the MySQL version you are
              using</em></span>. See
              <a href="error-handling.html#problems-with-float" title="B.1.5.8. Problems with Floating-Point Comparisons">Section B.1.5.8, “Problems with Floating-Point Comparisons”</a>.
            </p></li><li><p>
              As of MySQL 5.0.3, <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> is a
              separate data type, not a synonym for
              <code class="literal">TINYINT(1)</code>. See
              <a href="data-types.html#numeric-type-overview" title="10.1.1. Overview of Numeric Types">Section 10.1.1, “Overview of Numeric Types”</a>.
            </p></li><li><p>
              MySQL 5.0.2 adds several SQL modes that allow stricter
              control over rejecting records that have invalid or
              missing values. See <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>, and
              <a href="introduction.html#constraint-invalid-data" title="1.7.6.2. Constraints on Invalid Data">Section 1.7.6.2, “Constraints on Invalid Data”</a>. If you want to
              enable this control but continue to use MySQL's capability
              for storing incorrect dates such as
              <code class="literal">'2004-02-31'</code>, you should start the
              server with
              <a href="server-administration.html#sysvar_sql_mode"><code class="option">--sql_mode="TRADITIONAL,ALLOW_INVALID_DATES"</code></a>.
            </p></li><li><p>
              As of MySQL 5.0.2, the <code class="literal">SCHEMA</code> and
              <code class="literal">SCHEMAS</code> keywords are accepted as
              synonyms for <code class="literal">DATABASE</code> and
              <code class="literal">DATABASES</code>, respectively. (While
              “<span class="quote">schemata</span>” is grammatically correct and even
              appears in some MySQL 5.0 system database and table names,
              it cannot be used as a keyword.)
            </p></li></ul></div><p>
          <span class="bold"><strong>C API Changes:</strong></span>
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>:
              Because the MySQL 5.0 server has a new implementation of
              the <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> data type, a
              problem may occur if the server is used by older clients
              that still are linked against MySQL 4.1 client libraries.
              If a client uses the binary client/server protocol to
              execute prepared statements that generate result sets
              containing numeric values, an error will be raised:
              <code class="literal">'Using unsupported buffer type: 246'</code>
            </p><p>
              This error occurs because the 4.1 client libraries do not
              support the new <code class="literal">MYSQL_TYPE_NEWDECIMAL</code>
              type value added in 5.0. There is no way to disable the
              new <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> data type on
              the server side. You can avoid the problem by relinking
              the application with the client libraries from MySQL 5.0.
            </p></li><li><p>
              <span class="bold"><strong>Incompatible change</strong></span>: The
              <code class="literal">ER_WARN_DATA_TRUNCATED</code> warning symbol
              was renamed to
              <a href="error-handling.html#error_warn_data_truncated"><code class="literal">WARN_DATA_TRUNCATED</code></a> in
              MySQL 5.0.3.
            </p></li><li><p>
              The <code class="literal">reconnect</code> flag in the
              <code class="literal">MYSQL</code> structure is set to 0 by
              <a href="connectors-apis.html#mysql-real-connect" title="20.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>. Only
              those client programs which did not explicitly set this
              flag to 0 or 1 after
              <a href="connectors-apis.html#mysql-real-connect" title="20.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>
              experience a change. Having automatic reconnection enabled
              by default was considered too dangerous (due to the fact
              that table locks, temporary tables, user variables, and
              session variables are lost after reconnection).
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="downgrading"></a>2.18.2. Downgrading MySQL</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#downgrading-to-4-1">2.18.2.1. Downgrading to MySQL 4.1</a></span></dt></dl></div><a class="indexterm" name="id1695997"></a><p>
        This section describes what you should do to downgrade to an
        older MySQL version in the unlikely case that the previous
        version worked better than the new one.
      </p><p>
        If you are downgrading within the same release series (for
        example, from 4.1.13 to 4.1.12) the
        general rule is that you just have to install the new binaries
        on top of the old ones. There is no need to do anything with the
        databases. As always, however, it is always a good idea to make
        a backup.
      </p><p>
        The following items form a checklist of things you should do
        whenever you perform a downgrade:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Read the upgrading section for the release series from which
            you are downgrading to be sure that it does not have any
            features you really need. See <a href="installing.html#upgrade" title="2.18.1. Upgrading MySQL">Section 2.18.1, “Upgrading MySQL”</a>.
          </p></li><li><p>
            If there is a downgrading section for that version, you
            should read that as well.
          </p></li><li><p>
            To see which new features were added between the version to
            which you are downgrading and your current version, see the
            change logs (<a href="news.html" title="Appendix C. MySQL Change History">Appendix C, <i>MySQL Change History</i></a>).
          </p></li><li><p>
            Check <a href="installing.html#checking-index-changes" title="2.18.3. Checking Whether Table Indexes Must Be Rebuilt">Section 2.18.3, “Checking Whether Table Indexes Must Be Rebuilt”</a>, to see
            whether changes to character sets or collations were made
            between your current version of MySQL and the version to
            which you are downgrading. If so and these changes affect
            your table indexes, you will need to rebuild the affected
            indexes using the instructions in
            <a href="installing.html#rebuilding-tables" title="2.18.4. Rebuilding or Repairing Tables or Indexes">Section 2.18.4, “Rebuilding or Repairing Tables or Indexes”</a>.
          </p></li></ul></div><p>
        In most cases, you can move the MySQL format files and data
        files between different versions on the same architecture as
        long as you stay within versions for the same release series of
        MySQL.
      </p><p>
        If you downgrade from one release series to another, there may
        be incompatibilities in table storage formats. In this case, use
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> to dump your tables before
        downgrading. After downgrading, reload the dump file using
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> or <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a> to
        re-create your tables. For examples, see
        <a href="installing.html#copying-databases" title="2.18.5. Copying MySQL Databases to Another Machine">Section 2.18.5, “Copying MySQL Databases to Another Machine”</a>.
      </p><p>
        A typical symptom of a downward-incompatible table format change
        when you downgrade is that you cannot open tables. In that case,
        use the following procedure:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Stop the older MySQL server that you are downgrading to.
          </p></li><li><p>
            Restart the newer MySQL server you are downgrading from.
          </p></li><li><p>
            Dump any tables that were inaccessible to the older server
            by using <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> to create a dump file.
          </p></li><li><p>
            Stop the newer MySQL server and restart the older one.
          </p></li><li><p>
            Reload the dump file into the older server. Your tables
            should be accessible.
          </p></li></ol></div><p>
        It might also be the case that the structure of the system
        tables in the <code class="literal">mysql</code> database has changed and
        that downgrading introduces some loss of functionality or
        requires some adjustments. Here are some examples:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Trigger creation requires the <code class="literal">TRIGGER</code>
            privilege as of MySQL 5.1. In MySQL 5.0, there is no
            <code class="literal">TRIGGER</code> privilege and
            <code class="literal">SUPER</code> is required instead. If you
            downgrade from MySQL 5.1 to 5.0, you will need to give the
            <code class="literal">SUPER</code> privilege to those accounts that
            had the <code class="literal">TRIGGER</code> privilege in 5.1.
          </p></li><li><p>
            Triggers were added in MySQL 5.0, so if you downgrade from
            5.0 to 4.1, you cannot use triggers at all.
          </p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="downgrading-to-4-1"></a>2.18.2.1. Downgrading to MySQL 4.1</h4></div></div></div><p>
          MySQL 4.1 does not support stored routines or triggers. If
          your databases contain stored routines or triggers, prevent
          them from being dumped when you use
          <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> by using the
          <a href="programs.html#option_mysqldump_routines"><code class="option">--skip-routines</code></a>
          and
          <a href="programs.html#option_mysqldump_triggers"><code class="option">--skip-triggers</code></a>
          options. (See <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program">Section 4.5.4, “<span><strong class="command">mysqldump</strong></span> — A Database Backup Program”</a>.)
        </p><p>
          MySQL 4.1 does not support views. If your databases contain
          views, remove them with <a href="sql-syntax.html#drop-view" title="12.1.19. DROP VIEW Syntax"><code class="literal">DROP
          VIEW</code></a> before using <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>. (See
          <a href="sql-syntax.html#drop-view" title="12.1.19. DROP VIEW Syntax">Section 12.1.19, “<code class="literal">DROP VIEW</code> Syntax”</a>.)
        </p><p>
          After downgrading from MySQL 5.0, you may see the following
          information in the <code class="filename">mysql.err</code> file:
        </p><pre class="programlisting">Incorrect information in file: './mysql/user.frm'
</pre><p>
          In this case, you can do the following:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Start MySQL 5.0.4 (or newer).
            </p></li><li><p>
              Run <a href="programs.html#mysql-fix-privilege-tables" title="4.4.5. mysql_fix_privilege_tables — Upgrade MySQL System Tables"><span><strong class="command">mysql_fix_privilege_tables</strong></span></a>, which
              will change the <code class="literal">mysql.user</code> table to a
              format that both MySQL 4.1 and 5.0 can use.
            </p></li><li><p>
              Stop the MySQL server.
            </p></li><li><p>
              Start MySQL 4.1.
            </p></li></ol></div><p>
          If the preceding procedure fails, you should be able to do the
          following instead:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Start MySQL 5.0.4 (or newer).
            </p></li><li><p>
              Run <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump --opt --add-drop-table mysql &gt;
              /tmp/mysql.dump</strong></span></a>.
            </p></li><li><p>
              Stop the MySQL server.
            </p></li><li><p>
              Start MySQL 4.1 with the
              <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option.
            </p></li><li><p>
              Run <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql mysql &lt; /tmp/mysql.dump</strong></span></a>.
            </p></li><li><p>
              Run <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin flush-privileges</strong></span></a>.
            </p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="checking-index-changes"></a>2.18.3. Checking Whether Table Indexes Must Be Rebuilt</h3></div></div></div><p>
        A binary upgrade or downgrade is one that installs one version
        of MySQL “<span class="quote">in place</span>” over an existing version,
        without dumping and reloading tables:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Stop the server for the existing version if it is running.
          </p></li><li><p>
            Install a different version of MySQL. This is an upgrade if
            the new version is higher than the original version, a
            downgrade if the version is lower.
          </p></li><li><p>
            Start the server for the new version.
          </p></li></ol></div><p>
        In many cases, the tables from the previous version of MySQL can
        be used without change by the new version. However, sometimes
        modifications are made to the handling of character sets or
        collations that change the character sort order, which causes
        the ordering of entries in any index that uses an affected
        character set or collation to be incorrect. Such changes result
        in several possible problems:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Comparison results that differ from previous results
          </p></li><li><p>
            Inability to find some index values due to misordered index
            entries
          </p></li><li><p>
            Misordered <code class="literal">ORDER BY</code> results
          </p></li><li><p>
            Tables that <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>
            reports as being in need of repair
          </p></li></ul></div><p>
        The solution to these problems is to rebuild any indexes that
        use an affected character set or collation, either by dropping
        and re-creating the indexes, or by dumping and reloading the
        entire table. For information about rebuilding indexes, see
        <a href="installing.html#rebuilding-tables" title="2.18.4. Rebuilding or Repairing Tables or Indexes">Section 2.18.4, “Rebuilding or Repairing Tables or Indexes”</a>.
      </p><p>
        To check whether a table has indexes that must be rebuilt,
        consult the following list. It indicates which versions of MySQL
        introduced character set or collation changes that require
        indexes to be rebuilt. Each entry indicates the version in which
        the change occurred and the character sets or collations that
        the change affects. If the change is associated with a
        particular bug report, the bug number is given.
      </p><p>
        The list applies both for binary upgrades and downgrades. For
        example, <a href="http://bugs.mysql.com/29461" target="_top">Bug#29461</a> was fixed in MySQL 5.0.48, so it applies to
        upgrades from versions older than 5.0.48 to 5.0.48 or newer, and
        also to downgrades from 5.0.48 or newer to versions older than
        5.0.48.
      </p><p>
        If you have tables with indexes that are affected, rebuild the
        indexes using the instructions given in
        <a href="installing.html#rebuilding-tables" title="2.18.4. Rebuilding or Repairing Tables or Indexes">Section 2.18.4, “Rebuilding or Repairing Tables or Indexes”</a>.
      </p><p>
        In many cases, you can use
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ... FOR
        UPGRADE</code></a> to identify tables for which index rebuilding
        is required. (It will report: <code class="literal">Table upgrade required.
        Please do "REPAIR TABLE `tbl_name`" to fix it!</code>) In
        these cases, you can also use <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck
        --check-upgrade</strong></span></a> or <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>,
        which execute <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>.
        However, the use of <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>
        applies only after upgrades, not downgrades. Also,
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> is not applicable to
        all storage engines. For details about which storage engines
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> supports, see
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax">Section 12.5.2.3, “<code class="literal">CHECK TABLE</code> Syntax”</a>.
      </p><p>
        Changes that cause index rebuilding to be necessary:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MySQL 5.0.48 (<a href="http://bugs.mysql.com/29461" target="_top">Bug#29461</a>)
          </p><p>
            Affects indexes for columns that use any of these character
            sets: <code class="literal">eucjpms</code>, <code class="literal">euc_kr</code>,
            <code class="literal">gb2312</code>, <code class="literal">latin7</code>,
            <code class="literal">macce</code>, <code class="literal">ujis</code>
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.1.29, 6.0.8 (see
            <a href="http://bugs.mysql.com/39585" target="_top">Bug#39585</a>).
          </p></li><li><p>
            MySQL 5.0.48 (<a href="http://bugs.mysql.com/27562" target="_top">Bug#27562</a>)
          </p><p>
            Affects indexes that use the
            <code class="literal">ascii_general_ci</code> collation for columns
            that contain any of these characters: <code class="literal">'`'</code>
            GRAVE ACCENT, <code class="literal">'['</code> LEFT SQUARE BRACKET,
            <code class="literal">'\'</code> REVERSE SOLIDUS,
            <code class="literal">']'</code> RIGHT SQUARE BRACKET,
            <code class="literal">'~'</code> TILDE
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.1.29, 6.0.8 (see
            <a href="http://bugs.mysql.com/39585" target="_top">Bug#39585</a>).
          </p></li><li><p>
            MySQL 5.1.21 (<a href="http://bugs.mysql.com/29461" target="_top">Bug#29461</a>)
          </p><p>
            Affects indexes for columns that use any of these character
            sets: <code class="literal">eucjpms</code>, <code class="literal">euc_kr</code>,
            <code class="literal">gb2312</code>, <code class="literal">latin7</code>,
            <code class="literal">macce</code>, <code class="literal">ujis</code>
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.1.29, 6.0.8 (see
            <a href="http://bugs.mysql.com/39585" target="_top">Bug#39585</a>).
          </p></li><li><p>
            MySQL 5.1.23 (<a href="http://bugs.mysql.com/27562" target="_top">Bug#27562</a>)
          </p><p>
            Affects indexes that use the
            <code class="literal">ascii_general_ci</code> collation for columns
            that contain any of these characters: <code class="literal">'`'</code>
            GRAVE ACCENT, <code class="literal">'['</code> LEFT SQUARE BRACKET,
            <code class="literal">'\'</code> REVERSE SOLIDUS,
            <code class="literal">']'</code> RIGHT SQUARE BRACKET,
            <code class="literal">'~'</code> TILDE
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.1.29, 6.0.8 (see
            <a href="http://bugs.mysql.com/39585" target="_top">Bug#39585</a>).
          </p></li><li><p>
            MySQL 5.1.24 (<a href="http://bugs.mysql.com/27877" target="_top">Bug#27877</a>)
          </p><p>
            Affects indexes that use the
            <code class="literal">utf8_general_ci</code> or
            <code class="literal">ucs2_general_ci</code> collation for columns
            that contain <code class="literal">'ß'</code> LATIN SMALL LETTER
            SHARP S (German).
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.1.30, 6.0.8 (see
            <a href="http://bugs.mysql.com/40053" target="_top">Bug#40053</a>).
          </p></li><li><p>
            * MySQL 6.0.1 (WL#3664)
          </p><p>
            Affects indexes that use the <code class="literal">latin2_czech_cs
            collation</code>.
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.4.4, 6.0.9 (see
            <a href="http://bugs.mysql.com/40054" target="_top">Bug#40054</a>).
          </p><p>
            MySQL 6.0.5 (<a href="http://bugs.mysql.com/33452" target="_top">Bug#33452</a>)
          </p><p>
            Affects indexes that use the <code class="literal">latin2_czech_cs
            collation</code>.
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.4.4, 6.0.9 (see
            <a href="http://bugs.mysql.com/40054" target="_top">Bug#40054</a>).
          </p></li><li><p>
            MySQL 6.0.5 (<a href="http://bugs.mysql.com/27877" target="_top">Bug#27877</a>)
          </p><p>
            Affects indexes that use the
            <code class="literal">utf8_general_ci</code> or
            <code class="literal">ucs2_general_ci</code> collation for columns
            that contain <code class="literal">'ß'</code> LATIN SMALL LETTER
            SHARP S (German).
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 6.0.8 (see <a href="http://bugs.mysql.com/40053" target="_top">Bug#40053</a>).
          </p></li><li><p>
            MySQL 6.0.6 (<a href="http://bugs.mysql.com/25420" target="_top">Bug#25420</a>)
          </p><p>
            Affects indexes for columns that use the following
            collations, if the columns contain the indicated characters:
            <code class="literal">big5_chinese_ci</code>: <code class="literal">'~'</code>
            TILDE or <code class="literal">'`'</code> GRAVE ACCENT;
            <code class="literal">cp866_general_ci</code>: <code class="literal">j</code>
            LATIN SMALL LETTER J; <code class="literal">gb2312_chinese_ci</code>:
            <code class="literal">'~'</code> TILDE;
            <code class="literal">gbk_chinese_ci</code>: <code class="literal">'~'</code>
            TILDE
          </p><p>
            Affected tables can be detected by
            <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ...
            FOR UPGRADE</code></a> as of MySQL 5.4.4, 6.0.9 (see
            <a href="http://bugs.mysql.com/40054" target="_top">Bug#40054</a>).
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="rebuilding-tables"></a>2.18.4. Rebuilding or Repairing Tables or Indexes</h3></div></div></div><a class="indexterm" name="id1697217"></a><a class="indexterm" name="id1697229"></a><a class="indexterm" name="id1697242"></a><p>
        This section describes how to rebuild a table. This can be
        necessitated by changes to MySQL such as how data types are
        handled or changes to character set handling. For example, an
        error in a collation might have been corrected, necessitating a
        table rebuild to rebuild the indexes for character columns that
        use the collation. It might also be that a table repair or
        upgrade should be done as indicated by a table check operation
        such as that performed by <code class="literal">CHECK TABLE</code>,
        <a href="programs.html#mysqlcheck" title="4.5.3. mysqlcheck — A Table Maintenance Program"><span><strong class="command">mysqlcheck</strong></span></a>, or
        <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a>.
      </p><p>
        Methods for rebuilding a table include dumping and reloading it,
        or using <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> or
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are rebuilding tables because a different version of
          MySQL will not handle them after a binary upgrade or
          downgrade, you must use the dump-and-reload method. Dump the
          tables <span class="emphasis"><em>before</em></span> upgrading or downgrading
          (using your original version of MySQL), and reload the tables
          <span class="emphasis"><em>after</em></span> upgrading or downgrading (after
          installing the new version).
        </p><p>
          If you use the dump-and-reload method of rebuilding tables
          only for the purpose of rebuilding indexes, you can perform
          the dump either before or after upgrading or downgrading.
          Reloading still must be done afterward.
        </p></div><p>
        To re-create a table by dumping and reloading it, use
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> to create a dump file and
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> to reload the file:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump <em class="replaceable"><code>db_name</code></em> t1 &gt; dump.sql</code></strong>
shell&gt; <strong class="userinput"><code>mysql <em class="replaceable"><code>db_name</code></em> &lt; dump.sql</code></strong>
</pre><p>
        To recreate all the tables in a single database, specify the
        database name without any following table name:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump <em class="replaceable"><code>db_name</code></em> &gt; dump.sql</code></strong>
shell&gt; <strong class="userinput"><code>mysql <em class="replaceable"><code>db_name</code></em> &lt; dump.sql</code></strong>
</pre><p>
        To recreate all tables in all databases, use the
        <a href="programs.html#option_mysqldump_all-databases"><code class="option">--all-databases</code></a> option:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump --all-databases &gt; dump.sql</code></strong>
shell&gt; <strong class="userinput"><code>mysql &lt; dump.sql</code></strong>
</pre><p>
        To rebuild a table with <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a>, use a statement that “<span class="quote">changes</span>” the
        table to use the storage engine that it already has. For
        example, if <code class="literal">t1</code> is a <code class="literal">MyISAM</code>
        table, use this statement:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE t1 ENGINE = MyISAM;</code></strong>
</pre><p>
        If you are not sure which storage engine to specify in the
        <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement, use
        <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> to display the
        table definition.
      </p><p>
        If you must rebuild a table because a table checking operation
        indicates that the table is corrupt or needs an upgrade, you can
        use <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> if that
        statement supports the table's storage engine. For example, to
        repair a <code class="literal">MyISAM</code> table, use this statement:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>REPAIR TABLE t1;</code></strong>
</pre><p>
        For storage engines such as <code class="literal">InnoDB</code> that
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> does not support,
        use <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> to create a dump file and
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> to reload the file, as described
        earlier.
      </p><p>
        For specifics about which storage engines
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> supports, see
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax">Section 12.5.2.6, “<code class="literal">REPAIR TABLE</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="copying-databases"></a>2.18.5. Copying MySQL Databases to Another Machine</h3></div></div></div><a class="indexterm" name="id1697571"></a><a class="indexterm" name="id1697583"></a><a class="indexterm" name="id1697592"></a><p>
        You can copy the <code class="filename">.frm</code>,
        <code class="filename">.MYI</code>, and <code class="filename">.MYD</code> files
        for <code class="literal">MyISAM</code> tables between different
        architectures that support the same floating-point format.
        (MySQL takes care of any byte-swapping issues.) See
        <a href="storage-engines.html#myisam-storage-engine" title="13.1. The MyISAM Storage Engine">Section 13.1, “The <code class="literal">MyISAM</code> Storage Engine”</a>.
      </p><p>
        In cases where you need to transfer databases between different
        architectures, you can use <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> to
        create a file containing SQL statements. You can then transfer
        the file to the other machine and feed it as input to the
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client.
      </p><p>
        Use <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump --help</strong></span></a> to see what options are
        available.
      </p><p>
        The easiest (although not the fastest) way to move a database
        between two machines is to run the following commands on the
        machine on which the database is located:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -h '<em class="replaceable"><code>other_hostname</code></em>' create <em class="replaceable"><code>db_name</code></em></code></strong>
shell&gt; <strong class="userinput"><code>mysqldump <em class="replaceable"><code>db_name</code></em> | mysql -h '<em class="replaceable"><code>other_hostname</code></em>' <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><p>
        If you want to copy a database from a remote machine over a slow
        network, you can use these commands:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin create <em class="replaceable"><code>db_name</code></em></code></strong>
shell&gt; <strong class="userinput"><code>mysqldump -h '<em class="replaceable"><code>other_hostname</code></em>' --compress <em class="replaceable"><code>db_name</code></em> | mysql <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><p>
        You can also store the dump in a file, transfer the file to the
        target machine, and then load the file into the database there.
        For example, you can dump a database to a compressed file on the
        source machine like this:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump --quick <em class="replaceable"><code>db_name</code></em> | gzip &gt; <em class="replaceable"><code>db_name</code></em>.gz</code></strong>
</pre><p>
        Transfer the file containing the database contents to the target
        machine and run these commands there:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin create <em class="replaceable"><code>db_name</code></em></code></strong>
shell&gt; <strong class="userinput"><code>gunzip &lt; <em class="replaceable"><code>db_name</code></em>.gz | mysql <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><a class="indexterm" name="id1697806"></a><a class="indexterm" name="id1697815"></a><p>
        You can also use <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> and
        <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a> to transfer the database. For
        large tables, this is much faster than simply using
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>. In the following commands,
        <em class="replaceable"><code>DUMPDIR</code></em> represents the full path name
        of the directory you use to store the output from
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>.
      </p><p>
        First, create the directory for the output files and dump the
        database:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir <em class="replaceable"><code>DUMPDIR</code></em></code></strong>
shell&gt; <strong class="userinput"><code>mysqldump --tab=<em class="replaceable"><code>DUMPDIR</code></em> <em class="replaceable"><code>db_name</code></em></code></strong>
</pre><p>
        Then transfer the files in the
        <em class="replaceable"><code>DUMPDIR</code></em> directory to some
        corresponding directory on the target machine and load the files
        into MySQL there:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin create <em class="replaceable"><code>db_name</code></em>           # create database</code></strong>
shell&gt; <strong class="userinput"><code>cat <em class="replaceable"><code>DUMPDIR</code></em>/*.sql | mysql <em class="replaceable"><code>db_name</code></em>   # create tables in database</code></strong>
shell&gt; <strong class="userinput"><code>mysqlimport <em class="replaceable"><code>db_name</code></em> <em class="replaceable"><code>DUMPDIR</code></em>/*.txt   # load data into tables</code></strong>
</pre><p>
        Do not forget to copy the <code class="literal">mysql</code> database
        because that is where the grant tables are stored. You might
        have to run commands as the MySQL <code class="literal">root</code> user
        on the new machine until you have the <code class="literal">mysql</code>
        database in place.
      </p><p>
        After you import the <code class="literal">mysql</code> database on the
        new machine, execute <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
        flush-privileges</strong></span></a> so that the server reloads the grant
        table information.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="operating-system-specific-notes"></a>2.19. Operating System-Specific Notes</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#linux">2.19.1. Linux Notes</a></span></dt><dt><span class="section"><a href="installing.html#mac-os-x">2.19.2. Mac OS X Notes</a></span></dt><dt><span class="section"><a href="installing.html#solaris">2.19.3. Solaris Notes</a></span></dt><dt><span class="section"><a href="installing.html#bsd-notes">2.19.4. BSD Notes</a></span></dt><dt><span class="section"><a href="installing.html#other-unix-notes">2.19.5. Other Unix Notes</a></span></dt><dt><span class="section"><a href="installing.html#os-2">2.19.6. OS/2 Notes</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="linux"></a>2.19.1. Linux Notes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#linux-os">2.19.1.1. Linux Operating System Notes</a></span></dt><dt><span class="section"><a href="installing.html#binary-notes-linux">2.19.1.2. Linux Binary Distribution Notes</a></span></dt><dt><span class="section"><a href="installing.html#source-notes-linux">2.19.1.3. Linux Source Distribution Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-post-install">2.19.1.4. Linux Post-Installation Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-x86">2.19.1.5. Linux x86 Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-sparc">2.19.1.6. Linux SPARC Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-alpha">2.19.1.7. Linux Alpha Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-powerpc">2.19.1.8. Linux PowerPC Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-mips">2.19.1.9. Linux MIPS Notes</a></span></dt><dt><span class="section"><a href="installing.html#linux-ia-64">2.19.1.10. Linux IA-64 Notes</a></span></dt><dt><span class="section"><a href="installing.html#selinux">2.19.1.11. SELinux Notes</a></span></dt></dl></div><p>
        This section discusses issues that have been found to occur on
        Linux. The first few subsections describe general operating
        system-related issues, problems that can occur when using binary
        or source distributions, and post-installation issues. The
        remaining subsections discuss problems that occur with Linux on
        specific platforms.
      </p><p>
        Note that most of these problems occur on older versions of
        Linux. If you are running a recent version, you may see none of
        them.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-os"></a>2.19.1.1. Linux Operating System Notes</h4></div></div></div><p>
          MySQL needs at least Linux version 2.0.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            We have seen some strange problems with Linux 2.2.14 and
            MySQL on SMP systems. We also have reports from some MySQL
            users that they have encountered serious stability problems
            using MySQL with kernel 2.2.14. If you are using this
            kernel, you should upgrade to 2.2.19 (or newer) or to a 2.4
            kernel. If you have a multiple-CPU box, you should seriously
            consider using 2.4 because it gives you a significant speed
            boost. Your system should be more stable.
          </p></div><p>
          When using LinuxThreads, you should see a minimum of three
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> processes running. These are in fact
          threads. There is one thread for the LinuxThreads manager, one
          thread to handle connections, and one thread to handle alarms
          and signals.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="binary-notes-linux"></a>2.19.1.2. Linux Binary Distribution Notes</h4></div></div></div><a class="indexterm" name="id1698072"></a><a class="indexterm" name="id1698084"></a><p>
          The Linux-Intel binary and RPM releases of MySQL are
          configured for the highest possible speed. We are always
          trying to use the fastest stable compiler available.
        </p><p>
          The binary release is linked with <code class="option">-static</code>,
          which means you do not normally need to worry about which
          version of the system libraries you have. You need not install
          LinuxThreads, either. A program linked with
          <code class="option">-static</code> is slightly larger than a dynamically
          linked program, but also slightly faster (3–5%).
          However, one problem with a statically linked program is that
          you can't use user-defined functions (UDFs). If you are going
          to write or use UDFs (this is something for C or C++
          programmers only), you must compile MySQL yourself using
          dynamic linking.
        </p><p>
          A known issue with binary distributions is that on older Linux
          systems that use <code class="literal">libc</code> (such as Red Hat 4.x
          or Slackware), you get some (nonfatal) issues with host name
          resolution. If your system uses <code class="literal">libc</code> rather
          than <code class="literal">glibc2</code>, you probably will encounter
          some difficulties with host name resolution and
          <code class="literal">getpwnam()</code>. This happens because
          <code class="literal">glibc</code> (unfortunately) depends on some
          external libraries to implement host name resolution and
          <code class="literal">getpwent()</code>, even when compiled with
          <code class="option">-static</code>. These problems manifest themselves
          in two ways:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              You may see the following error message when you run
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>:
            </p><pre class="programlisting">Sorry, the host '<em class="replaceable"><code>xxxx</code></em>' could not be looked up
</pre><p>
              You can deal with this by executing
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db --force</strong></span></a>, which does
              not execute the <a href="programs.html#resolveip" title="4.8.3. resolveip — Resolve Host name to IP Address or Vice
Versa"><span><strong class="command">resolveip</strong></span></a> test in
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a>. The downside is that
              you cannot use host names in the grant tables: except for
              <code class="literal">localhost</code>, you must use IP numbers
              instead. If you are using an old version of MySQL that
              does not support <code class="option">--force</code>, you must
              manually remove the <code class="literal">resolveip</code> test in
              <a href="programs.html#mysql-install-db" title="4.4.6. mysql_install_db — Initialize MySQL Data Directory"><span><strong class="command">mysql_install_db</strong></span></a> using a text editor.
            </p></li><li><p>
              You also may see the following error when you try to run
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
              <a href="server-administration.html#option_mysqld_user"><code class="option">--user</code></a> option:
            </p><pre class="programlisting">getpwnam: No such file or directory
</pre><p>
              To work around this problem, start
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> by using the
              <code class="literal">su</code> command rather than by specifying
              the <a href="server-administration.html#option_mysqld_user"><code class="option">--user</code></a> option. This
              causes the system itself to change the user ID of the
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> process so that
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> need not do so.
            </p></li></ul></div><p>
          Another solution, which solves both problems, is not to use a
          binary distribution. Obtain a MySQL source distribution (in
          RPM or <code class="literal">tar.gz</code> format) and install that
          instead.
        </p><p>
          On some Linux 2.2 versions, you may get the error
          <code class="literal">Resource temporarily unavailable</code> when
          clients make a great many new connections to a
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server over TCP/IP. The problem is
          that Linux has a delay between the time that you close a
          TCP/IP socket and the time that the system actually frees it.
          There is room for only a finite number of TCP/IP slots, so you
          encounter the resource-unavailable error if clients attempt
          too many new TCP/IP connections over a short period of time.
          For example, you may see the error when you run the MySQL
          <code class="filename">test-connect</code> benchmark over TCP/IP.
        </p><p>
          We have inquired about this problem a few times on different
          Linux mailing lists but have never been able to find a
          suitable resolution. The only known “<span class="quote">fix</span>” is for
          clients to use persistent connections, or, if you are running
          the database server and clients on the same machine, to use
          Unix socket file connections rather than TCP/IP connections.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="source-notes-linux"></a>2.19.1.3. Linux Source Distribution Notes</h4></div></div></div><a class="indexterm" name="id1698371"></a><a class="indexterm" name="id1698384"></a><p>
          The following notes regarding <code class="literal">glibc</code> apply
          only to the situation when you build MySQL yourself. If you
          are running Linux on an x86 machine, in most cases it is much
          better for you to use our binary. We link our binaries against
          the best patched version of <code class="literal">glibc</code> we can
          find and with the best compiler options, in an attempt to make
          it suitable for a high-load server. For a typical user, even
          for setups with a lot of concurrent connections or tables
          exceeding the 2GB limit, our binary is the best choice in most
          cases. After reading the following text, if you are in doubt
          about what to do, try our binary first to determine whether it
          meets your needs. If you discover that it is not good enough,
          you may want to try your own build. In that case, we would
          appreciate a note about it so that we can build a better
          binary next time.
        </p><p>
          MySQL uses LinuxThreads on Linux. If you are using an old
          Linux version that doesn't have <code class="literal">glibc2</code>, you
          must install LinuxThreads before trying to compile MySQL. You
          can obtain LinuxThreads from
          <a href="http://dev.mysql.com/downloads/os-linux.html" target="_top">http://dev.mysql.com/downloads/os-linux.html</a>.
        </p><p>
          Note that <code class="literal">glibc</code> versions before and
          including version 2.1.1 have a fatal bug in
          <code class="literal">pthread_mutex_timedwait()</code> handling, which
          is used when <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
          statements are issued. Do not use <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
          DELAYED</code></a> before upgrading <code class="literal">glibc</code>.
        </p><p>
          Note that Linux kernel and the LinuxThread library can by
          default handle a maximum of 1,024 threads. If you plan to have
          more than 1,000 concurrent connections, you need to make some
          changes to LinuxThreads, as follows:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Increase <code class="literal">PTHREAD_THREADS_MAX</code> in
              <code class="filename">sysdeps/unix/sysv/linux/bits/local_lim.h</code>
              to 4096 and decrease <code class="literal">STACK_SIZE</code> in
              <code class="filename">linuxthreads/internals.h</code> to 256KB.
              The paths are relative to the root of
              <code class="literal">glibc</code>. (Note that MySQL is not stable
              with 600–1000 connections if
              <code class="literal">STACK_SIZE</code> is the default of 2MB.)
            </p></li><li><p>
              Recompile LinuxThreads to produce a new
              <code class="filename">libpthread.a</code> library, and relink
              MySQL against it.
            </p></li></ul></div><p>
          There is another issue that greatly hurts MySQL performance,
          especially on SMP systems. The mutex implementation in
          LinuxThreads in <code class="literal">glibc</code> 2.1 is very poor for
          programs with many threads that hold the mutex only for a
          short time. This produces a paradoxical result: If you link
          MySQL against an unmodified LinuxThreads, removing processors
          from an SMP actually improves MySQL performance in many cases.
          We have made a patch available for <code class="literal">glibc</code>
          2.1.3 to correct this behavior
          (<a href="http://dev.mysql.com/Downloads/Linux/linuxthreads-2.1-patch" target="_top">http://dev.mysql.com/Downloads/Linux/linuxthreads-2.1-patch</a>).
        </p><p>
          With <code class="literal">glibc</code> 2.2.2, MySQL uses the adaptive
          mutex, which is much better than even the patched one in
          <code class="literal">glibc</code> 2.1.3. Be warned, however, that under
          some conditions, the current mutex code in
          <code class="literal">glibc</code> 2.2.2 overspins, which hurts MySQL
          performance. The likelihood that this condition occurs can be
          reduced by re-nicing the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> process to
          the highest priority. We have also been able to correct the
          overspin behavior with a patch, available at
          <a href="http://dev.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch" target="_top">http://dev.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch</a>.
          It combines the correction of overspin, maximum number of
          threads, and stack spacing all in one. You need to apply it in
          the <code class="literal">linuxthreads</code> directory with
          <code class="literal">patch -p0
          &lt;/tmp/linuxthreads-2.2.2.patch</code>. We hope it is
          included in some form in future releases of
          <code class="literal">glibc</code> 2.2. In any case, if you link against
          <code class="literal">glibc</code> 2.2.2, you still need to correct
          <code class="literal">STACK_SIZE</code> and
          <code class="literal">PTHREAD_THREADS_MAX</code>. We hope that the
          defaults is corrected to some more acceptable values for
          high-load MySQL setup in the future, so that the commands
          needed to produce your own build can be reduced to
          <span><strong class="command">./configure; make; make install</strong></span>.
        </p><p>
          If you use these patches to build a special static version of
          <code class="literal">libpthread.a</code>, use it only for statically
          linking against MySQL. We know that these patches are safe for
          MySQL and significantly improve its performance, but we cannot
          say anything about their effects on other applications. If you
          link other applications that require LinuxThreads against the
          patched static version of the library, or build a patched
          shared version and install it on your system, you do so at
          your own risk.
        </p><p>
          If you experience any strange problems during the installation
          of MySQL, or with some common utilities hanging, it is very
          likely that they are either library or compiler related. If
          this is the case, using our binary resolves them.
        </p><p>
          If you link your own MySQL client programs, you may see the
          following error at runtime:
        </p><pre class="programlisting">ld.so.1: fatal: libmysqlclient.so.#:
open failed: No such file or directory
</pre><p>
          This problem can be avoided by one of the following methods:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Link clients with the
              <code class="option">-Wl,r/full/path/to/libmysqlclient.so</code> flag
              rather than with <code class="option">-Lpath</code>).
            </p></li><li><p>
              Copy <code class="literal">libmysqclient.so</code> to
              <code class="filename">/usr/lib</code>.
            </p></li><li><p>
              <a class="indexterm" name="id1698724"></a>

              <a class="indexterm" name="id1698733"></a>

              Add the path name of the directory where
              <code class="filename">libmysqlclient.so</code> is located to the
              <code class="literal">LD_RUN_PATH</code> environment variable before
              running your client.
            </p></li></ul></div><p>
          If you are using the Fujitsu compiler
          (<code class="literal">fcc/FCC</code>), you may have some problems
          compiling MySQL because the Linux header files are very
          <span><strong class="command">gcc</strong></span> oriented. The following
          <span><strong class="command">configure</strong></span> line should work with
          <span><strong class="command">fcc/FCC</strong></span>:
        </p><pre class="programlisting">CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE \
    -DCONST=const -DNO_STRTOLL_PROTO" \
CXX=FCC CXXFLAGS="-O -K fast -K lib \
    -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE \
    -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO \
    '-D_EXTERN_INLINE=static __inline'" \
./configure \
    --prefix=/usr/local/mysql --enable-assembler \
    --with-mysqld-ldflags=-all-static --disable-shared \
    --with-low-memory
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-post-install"></a>2.19.1.4. Linux Post-Installation Notes</h4></div></div></div><p>
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql.server</strong></span></a> can be found in the
          <code class="filename">support-files</code> directory under the MySQL
          installation directory or in a MySQL source tree. You can
          install it as <code class="filename">/etc/init.d/mysql</code> for
          automatic MySQL startup and shutdown. See
          <a href="installing.html#automatic-start" title="2.17.2.2. Starting and Stopping MySQL Automatically">Section 2.17.2.2, “Starting and Stopping MySQL Automatically”</a>.
        </p><p>
          If MySQL cannot open enough files or connections, it may be
          that you have not configured Linux to handle enough files.
        </p><p>
          In Linux 2.2 and onward, you can check the number of allocated
          file handles as follows:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cat /proc/sys/fs/file-max</code></strong>
shell&gt; <strong class="userinput"><code>cat /proc/sys/fs/dquot-max</code></strong>
shell&gt; <strong class="userinput"><code>cat /proc/sys/fs/super-max</code></strong>
</pre><p>
          If you have more than 16MB of memory, you should add something
          like the following to your init scripts (for example,
          <code class="filename">/etc/init.d/boot.local</code> on SuSE Linux):
        </p><pre class="programlisting">echo 65536 &gt; /proc/sys/fs/file-max
echo 8192 &gt; /proc/sys/fs/dquot-max
echo 1024 &gt; /proc/sys/fs/super-max
</pre><p>
          You can also run the <code class="literal">echo</code> commands from the
          command line as <code class="literal">root</code>, but these settings
          are lost the next time your computer restarts.
        </p><p>
          Alternatively, you can set these parameters on startup by
          using the <code class="literal">sysctl</code> tool, which is used by
          many Linux distributions (including SuSE Linux 8.0 and later).
          Put the following values into a file named
          <code class="filename">/etc/sysctl.conf</code>:
        </p><pre class="programlisting"># Increase some values for MySQL
fs.file-max = 65536
fs.dquot-max = 8192
fs.super-max = 1024
</pre><p>
          You should also add the following to
          <code class="filename">/etc/my.cnf</code>:
        </p><pre class="programlisting">[mysqld_safe]
open-files-limit=8192
</pre><p>
          This should allow the server a limit of 8,192 for the combined
          number of connections and open files.
        </p><p>
          The <code class="literal">STACK_SIZE</code> constant in LinuxThreads
          controls the spacing of thread stacks in the address space. It
          needs to be large enough so that there is plenty of room for
          each individual thread stack, but small enough to keep the
          stack of some threads from running into the global
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> data. Unfortunately, as we have
          experimentally discovered, the Linux implementation of
          <code class="literal">mmap()</code> successfully unmaps a mapped region
          if you ask it to map out an address currently in use, zeroing
          out the data on the entire page instead of returning an error.
          So, the safety of <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> or any other
          threaded application depends on the “<span class="quote">gentlemanly</span>”
          behavior of the code that creates threads. The user must take
          measures to make sure that the number of running threads at
          any given time is sufficiently low for thread stacks to stay
          away from the global heap. With <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, you
          should enforce this behavior by setting a reasonable value for
          the <a href="server-administration.html#sysvar_max_connections"><code class="literal">max_connections</code></a> variable.
        </p><p>
          If you build MySQL yourself, you can patch LinuxThreads for
          better stack use. See <a href="installing.html#source-notes-linux" title="2.19.1.3. Linux Source Distribution Notes">Section 2.19.1.3, “Linux Source Distribution Notes”</a>. If
          you do not want to patch LinuxThreads, you should set
          <a href="server-administration.html#sysvar_max_connections"><code class="literal">max_connections</code></a> to a value no
          higher than 500. It should be even less if you have a large
          key buffer, large heap tables, or some other things that make
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> allocate a lot of memory, or if you
          are running a 2.2 kernel with a 2GB patch. If you are using
          our binary or RPM version, you can safely set
          <a href="server-administration.html#sysvar_max_connections"><code class="literal">max_connections</code></a> at 1500,
          assuming no large key buffer or heap tables with lots of data.
          The more you reduce <code class="literal">STACK_SIZE</code> in
          LinuxThreads the more threads you can safely create. Values
          between 128KB and 256KB are recommended.
        </p><p>
          If you use a lot of concurrent connections, you may suffer
          from a “<span class="quote">feature</span>” in the 2.2 kernel that attempts
          to prevent fork bomb attacks by penalizing a process for
          forking or cloning a child. This causes MySQL not to scale
          well as you increase the number of concurrent clients. On
          single-CPU systems, we have seen this manifest as very slow
          thread creation; it may take a long time to connect to MySQL
          (as long as one minute), and it may take just as long to shut
          it down. On multiple-CPU systems, we have observed a gradual
          drop in query speed as the number of clients increases. In the
          process of trying to find a solution, we have received a
          kernel patch from one of our users who claimed it helped for
          his site. This patch is available at
          <a href="http://dev.mysql.com/Downloads/Patches/linux-fork.patch" target="_top">http://dev.mysql.com/Downloads/Patches/linux-fork.patch</a>.
          We have done rather extensive testing of this patch on both
          development and production systems. It has significantly
          improved MySQL performance without causing any problems and is
          recommended for users who still run high-load servers on 2.2
          kernels.
        </p><p>
          This issue has been fixed in the 2.4 kernel, so if you are not
          satisfied with the current performance of your system, rather
          than patching your 2.2 kernel, it might be easier to upgrade
          to 2.4. On SMP systems, upgrading also gives you a nice SMP
          boost in addition to fixing the fairness bug.
        </p><p>
          We have tested MySQL on the 2.4 kernel on a two-CPU machine
          and found MySQL scales <span class="emphasis"><em>much</em></span> better. There
          was virtually no slowdown on query throughput all the way up
          to 1,000 clients, and the MySQL scaling factor (computed as
          the ratio of maximum throughput to the throughput for one
          client) was 180%. We have observed similar results on a
          four-CPU system: Virtually no slowdown as the number of
          clients was increased up to 1,000, and a 300% scaling factor.
          Based on these results, for a high-load SMP server using a 2.2
          kernel, it is definitely recommended to upgrade to the 2.4
          kernel at this point.
        </p><p>
          We have discovered that it is essential to run the
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> process with the highest possible
          priority on the 2.4 kernel to achieve maximum performance.
          This can be done by adding a <code class="literal">renice -20 $$</code>
          command to <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>. In our testing on a
          four-CPU machine, increasing the priority resulted in a 60%
          throughput increase with 400 clients.
        </p><p>
          We are currently also trying to collect more information on
          how well MySQL performs with a 2.4 kernel on four-way and
          eight-way systems. If you have access such a system and have
          done some benchmarks, please send an email message to
          <code class="email">&lt;<a href="mailto:benchmarks@mysql.com">benchmarks@mysql.com</a>&gt;</code> with the results. We will
          review them for inclusion in the manual.
        </p><p>
          If you see a dead <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server process
          with <span><strong class="command">ps</strong></span>, this usually means that you have
          found a bug in MySQL or you have a corrupted table. See
          <a href="error-handling.html#crashing" title="B.1.4.2. What to Do If MySQL Keeps Crashing">Section B.1.4.2, “What to Do If MySQL Keeps Crashing”</a>.
        </p><p>
          To get a core dump on Linux if <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> dies
          with a <code class="literal">SIGSEGV</code> signal, you can start
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
          <a href="server-administration.html#option_mysqld_core-file"><code class="option">--core-file</code></a> option. Note that
          you also probably need to raise the core file size by adding
          <span><strong class="command">ulimit -c 1000000</strong></span> to
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> or starting
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> with
          <a href="programs.html#option_mysqld_safe_core-file-size"><code class="option">--core-file-size=1000000</code></a>.
          See <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-x86"></a>2.19.1.5. Linux x86 Notes</h4></div></div></div><p>
          MySQL requires <code class="literal">libc</code> 5.4.12 or newer. It is
          known to work with <code class="literal">libc</code> 5.4.46.
          <code class="literal">glibc</code> 2.0.6 and later should also work.
          There have been some problems with the
          <code class="literal">glibc</code> RPMs from Red Hat, so if you have
          problems, check whether there are any updates. The
          <code class="literal">glibc</code> 2.0.7-19 and 2.0.7-29 RPMs are known
          to work.
        </p><p>
          If you are using Red Hat 8.0 or a new <code class="literal">glibc</code>
          2.2.x library, you may see <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> die in
          <code class="literal">gethostbyaddr()</code>. This happens because the
          new <code class="literal">glibc</code> library requires a stack size
          greater than 128KB for this call. To fix the problem, start
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
          <a href="server-administration.html#sysvar_thread_stack"><code class="option">--thread-stack=192K</code></a> option.
          (Use <code class="option">-O thread_stack=192K</code> before MySQL 4.)
          This stack size is the default on MySQL 4.0.10 and above, so
          you should not see the problem.
        </p><p>
          If you are using <span><strong class="command">gcc</strong></span> 3.0 and above to
          compile MySQL, you must install the
          <code class="literal">libstdc++v3</code> library before compiling MySQL;
          if you don't do this, you get an error about a missing
          <code class="literal">__cxa_pure_virtual</code> symbol during linking.
        </p><p>
          On some older Linux distributions,
          <span><strong class="command">configure</strong></span> may produce an error like this:
        </p><pre class="programlisting">Syntax error in sched.h. Change _P to __P in the
/usr/include/sched.h file.
See the Installation chapter in the Reference Manual.
</pre><p>
          Just do what the error message says. Add an extra underscore
          to the <code class="literal">_P</code> macro name that has only one
          underscore, and then try again.
        </p><p>
          You may get some warnings when compiling. Those shown here can
          be ignored:
        </p><pre class="programlisting">mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to
`long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to
`long unsigned int'
</pre><p>
          If <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> always dumps core when it starts,
          the problem may be that you have an old
          <code class="filename">/lib/libc.a</code>. Try renaming it, and then
          remove <code class="filename">sql/mysqld</code> and do a new
          <span><strong class="command">make install</strong></span> and try again. This problem
          has been reported on some Slackware installations.
        </p><p>
          If you get the following error when linking
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, it means that your
          <code class="filename">libg++.a</code> is not installed correctly:
        </p><pre class="programlisting">/usr/lib/libc.a(putc.o): In function `_IO_putc':
putc.o(.text+0x0): multiple definition of `_IO_putc'
</pre><p>
          You can avoid using <code class="filename">libg++.a</code> by running
          <span><strong class="command">configure</strong></span> like this:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>CXX=gcc ./configure</code></strong>
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-sparc"></a>2.19.1.6. Linux SPARC Notes</h4></div></div></div><p>
          In some implementations, <code class="literal">readdir_r()</code> is
          broken. The symptom is that the <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW
          DATABASES</code></a> statement always returns an empty set.
          This can be fixed by removing
          <code class="literal">HAVE_READDIR_R</code> from
          <code class="filename">config.h</code> after configuring and before
          compiling.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-alpha"></a>2.19.1.7. Linux Alpha Notes</h4></div></div></div><p>
          We have tested MySQL 5.0 on Alpha with our
          benchmarks and test suite, and it appears to work well.
        </p><p>
          We currently build the MySQL binary packages on SuSE Linux 7.0
          for AXP, kernel 2.4.4-SMP, Compaq C compiler (V6.2-505) and
          Compaq C++ compiler (V6.3-006) on a Compaq DS20 machine with
          an Alpha EV6 processor.
        </p><p>
          You can find the preceding compilers at
          <a href="http://www.support.compaq.com/alpha-tools/" target="_top">http://www.support.compaq.com/alpha-tools/</a>. By
          using these compilers rather than <span><strong class="command">gcc</strong></span>, we
          get about 9–14% better MySQL performance.
        </p><p>
          For MySQL on Alpha, we use the <code class="option">-arch generic</code>
          flag to our compile options, which ensures that the binary
          runs on all Alpha processors. We also compile statically to
          avoid library problems. The <span><strong class="command">configure</strong></span>
          command looks like this:
        </p><pre class="programlisting">CC=ccc CFLAGS="-fast -arch generic" CXX=cxx \
CXXFLAGS="-fast -arch generic -noexceptions -nortti" \
./configure --prefix=/usr/local/mysql --disable-shared \
    --with-extra-charsets=complex --enable-thread-safe-client \
    --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared
</pre><p>
          Some known problems when running MySQL on Linux-Alpha:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Debugging threaded applications like MySQL does not work
              with <code class="literal">gdb 4.18</code>. You should use
              <span><strong class="command">gdb</strong></span> 5.1 instead.
            </p></li><li><p>
              If you try linking <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> statically
              when using <span><strong class="command">gcc</strong></span>, the resulting image
              dumps core at startup time. In other words, <span class="emphasis"><em>do
              not</em></span> use
              <code class="option">--with-mysqld-ldflags=-all-static</code> with
              <span><strong class="command">gcc</strong></span>.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-powerpc"></a>2.19.1.8. Linux PowerPC Notes</h4></div></div></div><p>
          MySQL should work on MkLinux with the newest
          <code class="literal">glibc</code> package (tested with
          <code class="literal">glibc</code> 2.0.7).
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-mips"></a>2.19.1.9. Linux MIPS Notes</h4></div></div></div><p>
          To get MySQL to work on Qube2 (Linux Mips), you need the
          newest <code class="literal">glibc</code> libraries.
          <code class="literal">glibc-2.0.7-29C2</code> is known to work. You must
          also use <span><strong class="command">gcc</strong></span> 2.95.2 or newer).
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="linux-ia-64"></a>2.19.1.10. Linux IA-64 Notes</h4></div></div></div><p>
          To get MySQL to compile on Linux IA-64, we use the following
          <span><strong class="command">configure</strong></span> command for building with
          <span><strong class="command">gcc</strong></span> 2.96:
        </p><pre class="programlisting">CC=gcc \
CFLAGS="-O3 -fno-omit-frame-pointer" \
CXX=gcc \
CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti" \
    ./configure --prefix=/usr/local/mysql \
    "--with-comment=Official MySQL binary" \
    --with-extra-charsets=complex
</pre><p>
          On IA-64, the MySQL client binaries use shared libraries. This
          means that if you install our binary distribution at a
          location other than <code class="filename">/usr/local/mysql</code>, you
          need to add the path of the directory where you have
          <code class="filename">libmysqlclient.so</code> installed either to the
          <code class="filename">/etc/ld.so.conf</code> file or to the value of
          your <code class="literal">LD_LIBRARY_PATH</code> environment variable.
        </p><p>
          See <a href="error-handling.html#link-errors" title="B.1.3.1. Problems Linking to the MySQL Client Library">Section B.1.3.1, “Problems Linking to the MySQL Client Library”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="selinux"></a>2.19.1.11. SELinux Notes</h4></div></div></div><p>
          RHEL4 comes with SELinux, which supports tighter access
          control for processes. If SELinux is enabled
          (<code class="literal">SELINUX</code> in
          <code class="filename">/etc/selinux/config</code> is set to
          <code class="literal">enforcing</code>, <code class="literal">SELINUXTYPE</code>
          is set to either <code class="literal">targeted</code> or
          <code class="literal">strict</code>), you might encounter problems
          installing Sun Microsystems, Inc. RPM packages.
        </p><p>
          Red Hat has an update that solves this. It involves an update
          of the “<span class="quote">security policy</span>” specification to handle
          the install structure of the RPMs provided by Sun
          Microsystems, Inc. For further information, see
          <a href="https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=167551" target="_top">https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=167551</a>
          and
          <a href="http://rhn.redhat.com/errata/RHBA-2006-0049.html" target="_top">http://rhn.redhat.com/errata/RHBA-2006-0049.html</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="mac-os-x"></a>2.19.2. Mac OS X Notes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#mac-os-x-10-x">2.19.2.1. Mac OS X 10.x (Darwin)</a></span></dt><dt><span class="section"><a href="installing.html#mac-os-x-server">2.19.2.2. Mac OS X Server 1.2 (Rhapsody)</a></span></dt></dl></div><p>
        On Mac OS X, <span><strong class="command">tar</strong></span> cannot handle long file
        names. If you need to unpack a <code class="filename">.tar.gz</code>
        distribution, use <span><strong class="command">gnutar</strong></span> instead.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mac-os-x-10-x"></a>2.19.2.1. Mac OS X 10.x (Darwin)</h4></div></div></div><p>
          MySQL should work without major problems on Mac OS X 10.x
          (Darwin).
        </p><p>
          Known issues:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              If you have problems with performance under heavy load,
              try using the
              <a href="server-administration.html#option_mysqld_skip-thread-priority"><code class="option">--skip-thread-priority</code></a>
              option to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. This runs all threads
              with the same priority. On Mac OS X, this gives better
              performance, at least until Apple fixes its thread
              scheduler.
            </p></li><li><p>
              The connection times
              (<a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a>,
              <a href="server-administration.html#sysvar_interactive_timeout"><code class="literal">interactive_timeout</code></a> and
              <a href="server-administration.html#sysvar_net_read_timeout"><code class="literal">net_read_timeout</code></a>) values
              are not honored.
            </p><p>
              This is probably a signal handling problem in the thread
              library where the signal doesn't break a pending read and
              we hope that a future update to the thread libraries will
              fix this.
            </p></li></ul></div><p>
          Our binary for Mac OS X is compiled on Darwin 6.3 with the
          following <span><strong class="command">configure</strong></span> line:
        </p><pre class="programlisting">CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc \
CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti" \
    ./configure --prefix=/usr/local/mysql \
    --with-extra-charsets=complex --enable-thread-safe-client \
    --enable-local-infile --disable-shared
</pre><p>
          See <a href="installing.html#mac-os-x-installation" title="2.11. Installing MySQL on Mac OS X">Section 2.11, “Installing MySQL on Mac OS X”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="mac-os-x-server"></a>2.19.2.2. Mac OS X Server 1.2 (Rhapsody)</h4></div></div></div><p>
          For current versions of Mac OS X Server, no operating system
          changes are necessary before compiling MySQL. Compiling for
          the Server platform is the same as for the client version of
          Mac OS X.
        </p><p>
          For older versions (Mac OS X Server 1.2, a.k.a. Rhapsody), you
          must first install a pthread package before trying to
          configure MySQL.
        </p><p>
          See <a href="installing.html#mac-os-x-installation" title="2.11. Installing MySQL on Mac OS X">Section 2.11, “Installing MySQL on Mac OS X”</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="solaris"></a>2.19.3. Solaris Notes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#solaris-2-7">2.19.3.1. Solaris 2.7/2.8 Notes</a></span></dt><dt><span class="section"><a href="installing.html#solaris-x86">2.19.3.2. Solaris x86 Notes</a></span></dt></dl></div><a class="indexterm" name="id1700008"></a><a class="indexterm" name="id1700017"></a><a class="indexterm" name="id1700030"></a><a class="indexterm" name="id1700042"></a><a class="indexterm" name="id1700054"></a><a class="indexterm" name="id1700063"></a><p>
        For information about installing MySQL on Solaris using PKG
        distributions, see <a href="installing.html#solaris-installation" title="2.12. Installing MySQL on Solaris">Section 2.12, “Installing MySQL on Solaris”</a>.
      </p><p>
        On Solaris, you may run into trouble even before you get the
        MySQL distribution unpacked, as the Solaris
        <span><strong class="command">tar</strong></span> cannot handle long file names. This means
        that you may see errors when you try to unpack MySQL.
      </p><p>
        If this occurs, you must use GNU <span><strong class="command">tar</strong></span>
        (<span><strong class="command">gtar</strong></span>) to unpack the distribution.
      </p><p>
        Sun native threads work only on Solaris 2.5 and higher. For
        Solaris 2.4 and earlier, MySQL automatically uses MIT-pthreads.
        See <a href="installing.html#mit-pthreads" title="2.16.5. MIT-pthreads Notes">Section 2.16.5, “MIT-pthreads Notes”</a>.
      </p><p>
        If you get the following error from
        <span><strong class="command">configure</strong></span>, it means that you have something
        wrong with your compiler installation:
      </p><pre class="programlisting">checking for restartable system calls... configure: error can not
run test programs while cross compiling
</pre><p>
        In this case, you should upgrade your compiler to a newer
        version. You may also be able to solve this problem by inserting
        the following row into the <code class="filename">config.cache</code>
        file:
      </p><pre class="programlisting">ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls='no'}
</pre><p>
        If you are using Solaris on a SPARC, the recommended compiler is
        <span><strong class="command">gcc</strong></span> 2.95.2 or 3.2. You can find this at
        <a href="http://gcc.gnu.org/" target="_top">http://gcc.gnu.org/</a>. Note that
        <span><strong class="command">gcc</strong></span> 2.8.1 does not work reliably on SPARC.
      </p><p>
        The recommended <span><strong class="command">configure</strong></span> line when using
        <span><strong class="command">gcc</strong></span> 2.95.2 is:
      </p><pre class="programlisting">CC=gcc CFLAGS="-O3" \
CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory \
    --enable-assembler
</pre><p>
        If you have an UltraSPARC system, you can get 4% better
        performance by adding <code class="option">-mcpu=v8
        -Wa,-xarch=v8plusa</code> to the <code class="literal">CFLAGS</code> and
        <code class="literal">CXXFLAGS</code> environment variables.
      </p><p>
        If you have Sun's Forte 5.0 (or newer) compiler, you can run
        <span><strong class="command">configure</strong></span> like this:
      </p><pre class="programlisting">CC=cc CFLAGS="-Xa -fast -native -xstrconst -mt" \
CXX=CC CXXFLAGS="-noex -mt" \
./configure --prefix=/usr/local/mysql --enable-assembler
</pre><p>
        To create a 64-bit binary with Sun's Forte compiler, use the
        following configuration options:
      </p><pre class="programlisting">CC=cc CFLAGS="-Xa -fast -native -xstrconst -mt -xarch=v9" \
CXX=CC CXXFLAGS="-noex -mt -xarch=v9" ASFLAGS="-xarch=v9" \
./configure --prefix=/usr/local/mysql --enable-assembler
</pre><p>
        To create a 64-bit Solaris binary using <span><strong class="command">gcc</strong></span>,
        add <code class="option">-m64</code> to <code class="literal">CFLAGS</code> and
        <code class="literal">CXXFLAGS</code> and remove
        <code class="option">--enable-assembler</code> from the
        <span><strong class="command">configure</strong></span> line.
      </p><p>
        In the MySQL benchmarks, we obtained a 4% speed increase on
        UltraSPARC when using Forte 5.0 in 32-bit mode, as compared to
        using <span><strong class="command">gcc</strong></span> 3.2 with the <code class="option">-mcpu</code>
        flag.
      </p><p>
        If you create a 64-bit <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> binary, it is
        4% slower than the 32-bit binary, but can handle more threads
        and memory.
      </p><p>
        When using Solaris 10 for x86_64, you should mount any file
        systems on which you intend to store <code class="literal">InnoDB</code>
        files with the <code class="literal">forcedirectio</code> option. (By
        default mounting is done without this option.) Failing to do so
        will cause a significant drop in performance when using the
        <code class="literal">InnoDB</code> storage engine on this platform.
      </p><p>
        If you get a problem with <code class="literal">fdatasync</code> or
        <code class="literal">sched_yield</code>, you can fix this by adding
        <code class="literal">LIBS=-lrt</code> to the <span><strong class="command">configure</strong></span>
        line
      </p><p>
        For compilers older than WorkShop 5.3, you might have to edit
        the <span><strong class="command">configure</strong></span> script. Change this line:
      </p><pre class="programlisting">#if !defined(__STDC__) || __STDC__ != 1
</pre><p>
        To this:
      </p><pre class="programlisting">#if !defined(__STDC__)
</pre><p>
        If you turn on <code class="literal">__STDC__</code> with the
        <code class="option">-Xc</code> option, the Sun compiler can't compile with
        the Solaris <code class="filename">pthread.h</code> header file. This is
        a Sun bug (broken compiler or broken include file).
      </p><p>
        If <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> issues the following error message
        when you run it, you have tried to compile MySQL with the Sun
        compiler without enabling the <code class="option">-mt</code> multi-thread
        option:
      </p><pre class="programlisting">libc internal error: _rmutex_unlock: rmutex not held
</pre><p>
        Add <code class="option">-mt</code> to <code class="literal">CFLAGS</code> and
        <code class="literal">CXXFLAGS</code> and recompile.
      </p><p>
        If you are using the SFW version of <span><strong class="command">gcc</strong></span>
        (which comes with Solaris 8), you must add
        <code class="filename">/opt/sfw/lib</code> to the environment variable
        <code class="literal">LD_LIBRARY_PATH</code> before running
        <span><strong class="command">configure</strong></span>.
      </p><p>
        If you are using the <span><strong class="command">gcc</strong></span> available from
        <code class="literal">sunfreeware.com</code>, you may have many problems.
        To avoid this, you should recompile <span><strong class="command">gcc</strong></span> and
        GNU <code class="literal">binutils</code> on the machine where you are
        running them.
      </p><p>
        If you get the following error when compiling MySQL with
        <span><strong class="command">gcc</strong></span>, it means that your
        <span><strong class="command">gcc</strong></span> is not configured for your version of
        Solaris:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...</code></strong>
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</pre><p>
        The proper thing to do in this case is to get the newest version
        of <span><strong class="command">gcc</strong></span> and compile it with your current
        <span><strong class="command">gcc</strong></span> compiler. At least for Solaris 2.5,
        almost all binary versions of <span><strong class="command">gcc</strong></span> have old,
        unusable include files that break all programs that use threads,
        and possibly other programs as well.
      </p><p>
        Solaris does not provide static versions of all system libraries
        (<code class="literal">libpthreads</code> and <code class="literal">libdl</code>),
        so you cannot compile MySQL with <code class="option">--static</code>. If
        you try to do so, you get one of the following errors:
      </p><pre class="programlisting">ld: fatal: library -ldl: not found
undefined reference to `dlopen'
cannot find -lrt
</pre><p>
        If you link your own MySQL client programs, you may see the
        following error at runtime:
      </p><pre class="programlisting">ld.so.1: fatal: libmysqlclient.so.#:
open failed: No such file or directory
</pre><p>
        This problem can be avoided by one of the following methods:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Link clients with the
            <code class="option">-Wl,r/full/path/to/libmysqlclient.so</code> flag
            rather than with <code class="option">-Lpath</code>).
          </p></li><li><p>
            Copy <code class="literal">libmysqclient.so</code> to
            <code class="filename">/usr/lib</code>.
          </p></li><li><p>
            <a class="indexterm" name="id1700633"></a>

            <a class="indexterm" name="id1700642"></a>

            Add the path name of the directory where
            <code class="filename">libmysqlclient.so</code> is located to the
            <code class="literal">LD_RUN_PATH</code> environment variable before
            running your client.
          </p></li></ul></div><p>
        If you have problems with <span><strong class="command">configure</strong></span> trying to
        link with <code class="option">-lz</code> when you don't have
        <code class="literal">zlib</code> installed, you have two options:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If you want to be able to use the compressed communication
            protocol, you need to get and install
            <code class="literal">zlib</code> from <code class="literal">ftp.gnu.org</code>.
          </p></li><li><p>
            Run <span><strong class="command">configure</strong></span> with the
            <code class="option">--with-named-z-libs=no</code> option when building
            MySQL.
          </p></li></ul></div><p>
        If you are using <span><strong class="command">gcc</strong></span> and have problems with
        loading user-defined functions (UDFs) into MySQL, try adding
        <code class="option">-lgcc</code> to the link line for the UDF.
      </p><p>
        If you would like MySQL to start automatically, you can copy
        <code class="filename">support-files/mysql.server</code> to
        <code class="filename">/etc/init.d</code> and create a symbolic link to
        it named <code class="filename">/etc/rc3.d/S99mysql.server</code>.
      </p><p>
        If too many processes try to connect very rapidly to
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, you should see this error in the
        MySQL log:
      </p><pre class="programlisting">Error in accept: Protocol error
</pre><p>
        You might try starting the server with the
        <a href="server-administration.html#sysvar_back_log"><code class="option">--back_log=50</code></a> option as a
        workaround for this. (Use <code class="option">-O back_log=50</code> before
        MySQL 4.)
      </p><p>
        Solaris doesn't support core files for
        <code class="literal">setuid()</code> applications, so you can't get a
        core file from <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> if you are using the
        <a href="server-administration.html#option_mysqld_user"><code class="option">--user</code></a> option.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="solaris-2-7"></a>2.19.3.1. Solaris 2.7/2.8 Notes</h4></div></div></div><p>
          Normally, you can use a Solaris 2.6 binary on Solaris 2.7 and
          2.8. Most of the Solaris 2.6 issues also apply for Solaris 2.7
          and 2.8.
        </p><p>
          MySQL should be able to detect new versions of Solaris
          automatically and enable workarounds for the following
          problems.
        </p><p>
          Solaris 2.7 / 2.8 has some bugs in the include files. You may
          see the following error when you use <span><strong class="command">gcc</strong></span>:
        </p><pre class="programlisting">/usr/include/widec.h:42: warning: `getwc' redefined
/usr/include/wchar.h:326: warning: this is the location of the previous
definition
</pre><p>
          If this occurs, you can fix the problem by copying
          <code class="literal">/usr/include/widec.h</code> to
          <code class="literal">.../lib/gcc-lib/os/gcc-version/include</code> and
          changing line 41 from this:
        </p><pre class="programlisting">#if     !defined(lint) &amp;&amp; !defined(__lint)
</pre><p>
          To this:
        </p><pre class="programlisting">#if     !defined(lint) &amp;&amp; !defined(__lint) &amp;&amp; !defined(getwc)
</pre><p>
          Alternatively, you can edit
          <code class="filename">/usr/include/widec.h</code> directly. Either
          way, after you make the fix, you should remove
          <code class="filename">config.cache</code> and run
          <span><strong class="command">configure</strong></span> again.
        </p><p>
          If you get the following errors when you run
          <span><strong class="command">make</strong></span>, it is because
          <span><strong class="command">configure</strong></span> didn't detect the
          <code class="filename">curses.h</code> file (probably because of the
          error in <code class="filename">/usr/include/widec.h</code>):
        </p><pre class="programlisting">In file included from mysql.cc:50:
/usr/include/term.h:1060: syntax error before `,'
/usr/include/term.h:1081: syntax error before `;'
</pre><p>
          The solution to this problem is to do one of the following:
        </p><div class="orderedlist"><ol type="1"><li><p>
              Configure with <code class="literal">CFLAGS=-DHAVE_CURSES_H
              CXXFLAGS=-DHAVE_CURSES_H ./configure</code>.
            </p></li><li><p>
              Edit <code class="filename">/usr/include/widec.h</code> as
              indicated in the preceding discussion and re-run
              <span><strong class="command">configure</strong></span>.
            </p></li><li><p>
              Remove the <code class="literal">#define HAVE_TERM</code> line from
              the <code class="filename">config.h</code> file and run
              <span><strong class="command">make</strong></span> again.
            </p></li></ol></div><p>
          If your linker cannot find <code class="option">-lz</code> when linking
          client programs, the problem is probably that your
          <code class="filename">libz.so</code> file is installed in
          <code class="filename">/usr/local/lib</code>. You can fix this problem
          by one of the following methods:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Add <code class="filename">/usr/local/lib</code> to
              <code class="literal">LD_LIBRARY_PATH</code>.
            </p></li><li><p>
              Add a link to <code class="filename">libz.so</code> from
              <code class="filename">/lib</code>.
            </p></li><li><p>
              If you are using Solaris 8, you can install the optional
              <code class="literal">zlib</code> from your Solaris 8 CD
              distribution.
            </p></li><li><p>
              Run <span><strong class="command">configure</strong></span> with the
              <code class="option">--with-named-z-libs=no</code> option when
              building MySQL.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="solaris-x86"></a>2.19.3.2. Solaris x86 Notes</h4></div></div></div><p>
          On Solaris 8 on x86, <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> dumps core if
          you remove the debug symbols using <code class="literal">strip</code>.
        </p><p>
          If you are using <span><strong class="command">gcc</strong></span> on Solaris x86 and you
          experience problems with core dumps under load, you should use
          the following <span><strong class="command">configure</strong></span> command:
        </p><pre class="programlisting">CC=gcc CFLAGS="-O3 -fomit-frame-pointer -DHAVE_CURSES_H" \
CXX=gcc \
CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti -DHAVE_CURSES_H" \
./configure --prefix=/usr/local/mysql
</pre><p>
          This avoids problems with the <code class="literal">libstdc++</code>
          library and with C++ exceptions.
        </p><p>
          If this doesn't help, you should compile a debug version and
          run it with a trace file or under <span><strong class="command">gdb</strong></span>. See
          <a href="http://forge.mysql.com/wiki/MySQL_Internals_Porting" target="_top">MySQL
          Internals: Porting</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="bsd-notes"></a>2.19.4. BSD Notes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#freebsd">2.19.4.1. FreeBSD Notes</a></span></dt><dt><span class="section"><a href="installing.html#netbsd">2.19.4.2. NetBSD Notes</a></span></dt><dt><span class="section"><a href="installing.html#openbsd">2.19.4.3. OpenBSD 2.5 Notes</a></span></dt><dt><span class="section"><a href="installing.html#bsdi">2.19.4.4. BSD/OS Version 2.x Notes</a></span></dt><dt><span class="section"><a href="installing.html#bsdi3">2.19.4.5. BSD/OS Version 3.x Notes</a></span></dt><dt><span class="section"><a href="installing.html#bsdi4">2.19.4.6. BSD/OS Version 4.x Notes</a></span></dt></dl></div><p>
        This section provides information about using MySQL on variants
        of BSD Unix.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="freebsd"></a>2.19.4.1. FreeBSD Notes</h4></div></div></div><p>
          FreeBSD 4.x or newer is recommended for running MySQL, because
          the thread package is much more integrated. To get a secure
          and stable system, you should use only FreeBSD kernels that
          are marked <code class="literal">-RELEASE</code>.
        </p><p>
          The easiest (and preferred) way to install MySQL is to use the
          <a href="programs.html#mysql-server" title="4.3.3. mysql.server — MySQL Server Startup Script"><span><strong class="command">mysql-server</strong></span></a> and
          <code class="literal">mysql-client</code> ports available at
          <a href="http://www.freebsd.org/" target="_top">http://www.freebsd.org/</a>. Using these ports
          gives you the following benefits:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              A working MySQL with all optimizations enabled that are
              known to work on your version of FreeBSD.
            </p></li><li><p>
              Automatic configuration and build.
            </p></li><li><p>
              Startup scripts installed in
              <code class="filename">/usr/local/etc/rc.d</code>.
            </p></li><li><p>
              The ability to use <code class="literal">pkg_info -L</code> to see
              which files are installed.
            </p></li><li><p>
              The ability to use <code class="literal">pkg_delete</code> to remove
              MySQL if you no longer want it on your machine.
            </p></li></ul></div><p>
          It is recommended you use MIT-pthreads on FreeBSD 2.x, and
          native threads on FreeBSD 3 and up. It is possible to run with
          native threads on some late 2.2.x versions, but you may
          encounter problems shutting down <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.
        </p><p>
          Unfortunately, certain function calls on FreeBSD are not yet
          fully thread-safe. Most notably, this includes the
          <code class="literal">gethostbyname()</code> function, which is used by
          MySQL to convert host names into IP addresses. Under certain
          circumstances, the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> process suddenly
          causes 100% CPU load and is unresponsive. If you encounter
          this problem, try to start MySQL using the
          <a href="server-administration.html#option_mysqld_skip-name-resolve"><code class="option">--skip-name-resolve</code></a> option.
        </p><p>
          Alternatively, you can link MySQL on FreeBSD 4.x against the
          LinuxThreads library, which avoids a few of the problems that
          the native FreeBSD thread implementation has. For a very good
          comparison of LinuxThreads versus native threads, see Jeremy
          Zawodny's article <em class="citetitle">FreeBSD or Linux for your MySQL
          Server?</em> at
          <a href="http://jeremy.zawodny.com/blog/archives/000697.html" target="_top">http://jeremy.zawodny.com/blog/archives/000697.html</a>.
        </p><p>
          Known problem when using LinuxThreads on FreeBSD is:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              The connection times
              (<a href="server-administration.html#sysvar_wait_timeout"><code class="literal">wait_timeout</code></a>,
              <a href="server-administration.html#sysvar_interactive_timeout"><code class="literal">interactive_timeout</code></a> and
              <a href="server-administration.html#sysvar_net_read_timeout"><code class="literal">net_read_timeout</code></a>) values
              are not honored. The symptom is that persistent
              connections can hang for a very long time without getting
              closed down and that a 'kill' for a thread will not take
              affect until the thread does it a new command
            </p><p>
              This is probably a signal handling problem in the thread
              library where the signal doesn't break a pending read.
              This is supposed to be fixed in FreeBSD 5.0
            </p></li></ul></div><p>
          The MySQL build process requires GNU make
          (<span><strong class="command">gmake</strong></span>) to work. If GNU
          <span><strong class="command">make</strong></span> is not available, you must install it
          first before compiling MySQL.
        </p><p>
          The recommended way to compile and install MySQL on FreeBSD
          with <span><strong class="command">gcc</strong></span> (2.95.2 and up) is:
        </p><pre class="programlisting">CC=gcc CFLAGS="-O2 -fno-strength-reduce" \
    CXX=gcc CXXFLAGS="-O2 -fno-rtti -fno-exceptions \
    -felide-constructors -fno-strength-reduce" \
    ./configure --prefix=/usr/local/mysql --enable-assembler
gmake
gmake install
cd /usr/local/mysql
bin/mysql_install_db --user=mysql
bin/mysqld_safe &amp;
</pre><p>
          If you notice that <span><strong class="command">configure</strong></span> uses
          MIT-pthreads, you should read the MIT-pthreads notes. See
          <a href="installing.html#mit-pthreads" title="2.16.5. MIT-pthreads Notes">Section 2.16.5, “MIT-pthreads Notes”</a>.
        </p><p>
          If you get an error from <span><strong class="command">make install</strong></span> that
          it can't find <code class="filename">/usr/include/pthreads</code>,
          <span><strong class="command">configure</strong></span> didn't detect that you need
          MIT-pthreads. To fix this problem, remove
          <code class="filename">config.cache</code>, and then re-run
          <span><strong class="command">configure</strong></span> with the
          <code class="option">--with-mit-threads</code> option.
        </p><p>
          Be sure that your name resolver setup is correct. Otherwise,
          you may experience resolver delays or failures when connecting
          to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. Also make sure that the
          <code class="literal">localhost</code> entry in the
          <code class="filename">/etc/hosts</code> file is correct. The file
          should start with a line similar to this:
        </p><pre class="programlisting">127.0.0.1       localhost localhost.your.domain
</pre><p>
          FreeBSD is known to have a very low default file handle limit.
          See <a href="error-handling.html#not-enough-file-handles" title="B.1.2.18. 'File' Not Found and
          Similar Errors">Section B.1.2.18, “<span class="errortext">'<em class="replaceable"><code>File</code></em>' Not Found</span> and
          Similar Errors”</a>. Start the
          server by using the
          <a href="programs.html#option_mysqld_safe_open-files-limit"><code class="option">--open-files-limit</code></a> option
          for <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>, or raise the limits for
          the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> user in
          <code class="filename">/etc/login.conf</code> and rebuild it with
          <code class="literal">cap_mkdb /etc/login.conf</code>. Also be sure that
          you set the appropriate class for this user in the password
          file if you are not using the default (use <code class="literal">chpass
          mysqld-user-name</code>). See
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
        </p><p>
          FreeBSD limits the size of a process to 512MB, even if you
          have much more RAM available on the system. So you may get an
          error such as this:
        </p><pre class="programlisting">Out of memory (Needed 16391 bytes)
</pre><p>
          In current versions of FreeBSD (at least 4.x and greater), you
          may increase this limit by adding the following entries to the
          <code class="filename">/boot/loader.conf</code> file and rebooting the
          machine (these are not settings that can be changed at run
          time with the <span><strong class="command">sysctl</strong></span> command):
        </p><pre class="programlisting">kern.maxdsiz="1073741824" # 1GB
kern.dfldsiz="1073741824" # 1GB
kern.maxssiz="134217728" # 128MB
</pre><p>
          For older versions of FreeBSD, you must recompile your kernel
          to change the maximum data segment size for a process. In this
          case, you should look at the <code class="literal">MAXDSIZ</code> option
          in the <code class="literal">LINT</code> config file for more
          information.
        </p><p>
          If you get problems with the current date in MySQL, setting
          the <code class="literal">TZ</code> variable should help. See
          <a href="installing.html#environment-variables" title="2.20. Environment Variables">Section 2.20, “Environment Variables”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="netbsd"></a>2.19.4.2. NetBSD Notes</h4></div></div></div><p>
          To compile on NetBSD, you need GNU <span><strong class="command">make</strong></span>.
          Otherwise, the build process fails when
          <span><strong class="command">make</strong></span> tries to run <code class="literal">lint</code>
          on C++ files.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="openbsd"></a>2.19.4.3. OpenBSD 2.5 Notes</h4></div></div></div><p>
          On OpenBSD 2.5, you can compile MySQL with native threads with
          the following options:
        </p><pre class="programlisting">CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="bsdi"></a>2.19.4.4. BSD/OS Version 2.x Notes</h4></div></div></div><p>
          If you get the following error when compiling MySQL, your
          <span><strong class="command">ulimit</strong></span> value for virtual memory is too low:
        </p><pre class="programlisting">item_func.h: In method
`Item_func_ge::Item_func_ge(const Item_func_ge &amp;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</pre><p>
          Try using <span><strong class="command">ulimit -v 80000</strong></span> and run
          <span><strong class="command">make</strong></span> again. If this doesn't work and you
          are using <span><strong class="command">bash</strong></span>, try switching to
          <span><strong class="command">csh</strong></span> or <span><strong class="command">sh</strong></span>; some BSDI
          users have reported problems with <span><strong class="command">bash</strong></span> and
          <span><strong class="command">ulimit</strong></span>.
        </p><p>
          If you are using <span><strong class="command">gcc</strong></span>, you may also use have
          to use the <a href="installing.html#option_configure_with-low-memory"><code class="option">--with-low-memory</code></a>
          flag for <span><strong class="command">configure</strong></span> to be able to compile
          <code class="filename">sql_yacc.cc</code>.
        </p><p>
          If you get problems with the current date in MySQL, setting
          the <code class="literal">TZ</code> variable should help. See
          <a href="installing.html#environment-variables" title="2.20. Environment Variables">Section 2.20, “Environment Variables”</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="bsdi3"></a>2.19.4.5. BSD/OS Version 3.x Notes</h4></div></div></div><p>
          Upgrade to BSD/OS 3.1. If that is not possible, install
          BSDIpatch M300-038.
        </p><p>
          Use the following command when configuring MySQL:
        </p><pre class="programlisting">env CXX=shlicc++ CC=shlicc2 \
./configure \
    --prefix=/usr/local/mysql \
    --localstatedir=/var/mysql \
    --without-perl \
    --with-unix-socket-path=/var/mysql/mysql.sock
</pre><p>
          The following is also known to work:
        </p><pre class="programlisting">env CC=gcc CXX=gcc CXXFLAGS=-O3 \
./configure \
    --prefix=/usr/local/mysql \
    --with-unix-socket-path=/var/mysql/mysql.sock
</pre><p>
          You can change the directory locations if you wish, or just
          use the defaults by not specifying any locations.
        </p><p>
          If you have problems with performance under heavy load, try
          using the
          <a href="server-administration.html#option_mysqld_skip-thread-priority"><code class="option">--skip-thread-priority</code></a> option
          to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. This runs all threads with the
          same priority. On BSDI 3.1, this gives better performance, at
          least until BSDI fixes its thread scheduler.
        </p><p>
          If you get the error <code class="literal">virtual memory
          exhausted</code> while compiling, you should try using
          <span><strong class="command">ulimit -v 80000</strong></span> and running
          <span><strong class="command">make</strong></span> again. If this doesn't work and you
          are using <span><strong class="command">bash</strong></span>, try switching to
          <span><strong class="command">csh</strong></span> or <span><strong class="command">sh</strong></span>; some BSDI
          users have reported problems with <span><strong class="command">bash</strong></span> and
          <span><strong class="command">ulimit</strong></span>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="bsdi4"></a>2.19.4.6. BSD/OS Version 4.x Notes</h4></div></div></div><p>
          BSDI 4.x has some thread-related bugs. If you want to use
          MySQL on this, you should install all thread-related patches.
          At least M400-023 should be installed.
        </p><p>
          On some BSDI 4.x systems, you may get problems with shared
          libraries. The symptom is that you can't execute any client
          programs, for example, <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>. In this
          case, you need to reconfigure not to use shared libraries with
          the <code class="option">--disable-shared</code> option to configure.
        </p><p>
          Some customers have had problems on BSDI 4.0.1 that the
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> binary after a while can't open
          tables. This occurs because some library/system-related bug
          causes <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> to change current directory
          without having asked for that to happen.
        </p><p>
          The fix is to either upgrade MySQL to at least version 3.23.34
          or, after running <span><strong class="command">configure</strong></span>, remove the
          line <code class="literal">#define HAVE_REALPATH</code> from
          <code class="literal">config.h</code> before running
          <span><strong class="command">make</strong></span>.
        </p><p>
          Note that this means that you can't symbolically link a
          database directories to another database directory or symbolic
          link a table to another database on BSDI. (Making a symbolic
          link to another disk is okay).
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="other-unix-notes"></a>2.19.5. Other Unix Notes</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#hp-ux-10-20">2.19.5.1. HP-UX Version 10.20 Notes</a></span></dt><dt><span class="section"><a href="installing.html#hp-ux-11-x">2.19.5.2. HP-UX Version 11.x Notes</a></span></dt><dt><span class="section"><a href="installing.html#ibm-aix">2.19.5.3. IBM-AIX notes</a></span></dt><dt><span class="section"><a href="installing.html#sunos">2.19.5.4. SunOS 4 Notes</a></span></dt><dt><span class="section"><a href="installing.html#alpha-dec-unix">2.19.5.5. Alpha-DEC-UNIX Notes (Tru64)</a></span></dt><dt><span class="section"><a href="installing.html#alpha-dec-osf1">2.19.5.6. Alpha-DEC-OSF/1 Notes</a></span></dt><dt><span class="section"><a href="installing.html#sgi-irix">2.19.5.7. SGI Irix Notes</a></span></dt><dt><span class="section"><a href="installing.html#sco">2.19.5.8. SCO UNIX and OpenServer 5.0.x Notes</a></span></dt><dt><span class="section"><a href="installing.html#sco-openserver">2.19.5.9. SCO OpenServer 6.0.x Notes</a></span></dt><dt><span class="section"><a href="installing.html#sco-unixware">2.19.5.10. SCO UnixWare 7.1.x and OpenUNIX 8.0.0 Notes</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="hp-ux-10-20"></a>2.19.5.1. HP-UX Version 10.20 Notes</h4></div></div></div><p>
          If you install MySQL using a binary tarball distribution on
          HP-UX, you may run into trouble even before you get the MySQL
          distribution unpacked, as the HP-UX <span><strong class="command">tar</strong></span>
          cannot handle long file names. This means that you may see
          errors when you try to unpack MySQL.
        </p><p>
          If this occurs, you must use GNU <span><strong class="command">tar</strong></span>
          (<span><strong class="command">gtar</strong></span>) to unpack the distribution.
        </p><p>
          There are a couple of small problems when compiling MySQL on
          HP-UX. Use <span><strong class="command">gcc</strong></span> instead of the HP-UX native
          compiler, because <span><strong class="command">gcc</strong></span> produces better code.
        </p><p>
          Use <span><strong class="command">gcc</strong></span> 2.95 on HP-UX. Don't use high
          optimization flags (such as <code class="option">-O6</code>) because they
          may not be safe on HP-UX.
        </p><p>
          The following <span><strong class="command">configure</strong></span> line should work
          with <span><strong class="command">gcc</strong></span> 2.95:
        </p><pre class="programlisting">CFLAGS="-I/opt/dce/include -fpic" \
CXXFLAGS="-I/opt/dce/include -felide-constructors -fno-exceptions \
-fno-rtti" \
CXX=gcc \
./configure --with-pthread \
    --with-named-thread-libs='-ldce' \
    --prefix=/usr/local/mysql --disable-shared
</pre><p>
          The following <span><strong class="command">configure</strong></span> line should work
          with <span><strong class="command">gcc</strong></span> 3.1:
        </p><pre class="programlisting">CFLAGS="-DHPUX -I/opt/dce/include -O3 -fPIC" CXX=gcc \
CXXFLAGS="-DHPUX -I/opt/dce/include -felide-constructors \
    -fno-exceptions -fno-rtti -O3 -fPIC" \
./configure --prefix=/usr/local/mysql \
    --with-extra-charsets=complex --enable-thread-safe-client \
    --enable-local-infile  --with-pthread \
    --with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC
    --disable-shared
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="hp-ux-11-x"></a>2.19.5.2. HP-UX Version 11.x Notes</h4></div></div></div><p>
          If you install MySQL using a binary tarball distribution on
          HP-UX, you may run into trouble even before you get the MySQL
          distribution unpacked, as the HP-UX <span><strong class="command">tar</strong></span>
          cannot handle long file names. This means that you may see
          errors when you try to unpack MySQL.
        </p><p>
          If this occurs, you must use GNU <span><strong class="command">tar</strong></span>
          (<span><strong class="command">gtar</strong></span>) to unpack the distribution.
        </p><p>
          Because of some critical bugs in the standard HP-UX libraries,
          you should install the following patches before trying to run
          MySQL on HP-UX 11.0:
        </p><pre class="programlisting">PHKL_22840 Streams cumulative
PHNE_22397 ARPA cumulative
</pre><p>
          This solves the problem of getting
          <code class="literal">EWOULDBLOCK</code> from <code class="literal">recv()</code>
          and <code class="literal">EBADF</code> from <code class="literal">accept()</code>
          in threaded applications.
        </p><p>
          If you are using <span><strong class="command">gcc</strong></span> 2.95.1 on an unpatched
          HP-UX 11.x system, you may get the following error:
        </p><pre class="programlisting">In file included from /usr/include/unistd.h:11,
                 from ../include/global.h:125,
                 from mysql_priv.h:15,
                 from item.cc:19:
/usr/include/sys/unistd.h:184: declaration of C function ...
/usr/include/sys/pthread.h:440: previous declaration ...
In file included from item.h:306,
                 from mysql_priv.h:158,
                 from item.cc:19:
</pre><p>
          The problem is that HP-UX does not define
          <code class="literal">pthreads_atfork()</code> consistently. It has
          conflicting prototypes in
          <code class="filename">/usr/include/sys/unistd.h</code>:184 and
          <code class="filename">/usr/include/sys/pthread.h</code>:440.
        </p><p>
          One solution is to copy
          <code class="filename">/usr/include/sys/unistd.h</code> into
          <code class="filename">mysql/include</code> and edit
          <code class="filename">unistd.h</code> and change it to match the
          definition in <code class="filename">pthread.h</code>. Look for this
          line:
        </p><pre class="programlisting">extern int pthread_atfork(void (*prepare)(), void (*parent)(),
                                          void (*child)());
</pre><p>
          Change it to look like this:
        </p><pre class="programlisting">extern int pthread_atfork(void (*prepare)(void), void (*parent)(void),
                                          void (*child)(void));
</pre><p>
          After making the change, the following
          <span><strong class="command">configure</strong></span> line should work:
        </p><pre class="programlisting">CFLAGS="-fomit-frame-pointer -O3 -fpic" CXX=gcc \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -O3" \
./configure --prefix=/usr/local/mysql --disable-shared
</pre><p>
          If you are using HP-UX compiler, you can use the following
          command (which has been tested with <span><strong class="command">cc</strong></span>
          B.11.11.04):
        </p><pre class="programlisting">CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure \
    --with-extra-character-set=complex
</pre><p>
          You can ignore any errors of the following type:
        </p><pre class="programlisting">aCC: warning 901: unknown option: `-3': use +help for online
documentation
</pre><p>
          If you get the following error from
          <span><strong class="command">configure</strong></span>, verify that you don't have the
          path to the K&amp;R compiler before the path to the HP-UX C
          and C++ compiler:
        </p><pre class="programlisting">checking for cc option to accept ANSI C... no
configure: error: MySQL requires an ANSI C compiler (and a C++ compiler).
Try gcc. See the Installation chapter in the Reference Manual.
</pre><p>
          Another reason for not being able to compile is that you
          didn't define the <code class="literal">+DD64</code> flags as just
          described.
        </p><p>
          Another possibility for HP-UX 11 is to use the MySQL binaries
          provided at <a href="http://dev.mysql.com/downloads/" target="_top">http://dev.mysql.com/downloads/</a>, which we have
          built and tested ourselves. We have also received reports that
          the HP-UX 10.20 binaries supplied by MySQL can be run
          successfully on HP-UX 11. If you encounter problems, you
          should be sure to check your HP-UX patch level.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ibm-aix"></a>2.19.5.3. IBM-AIX notes</h4></div></div></div><a class="indexterm" name="id1702441"></a><p>
          Automatic detection of <code class="literal">xlC</code> is missing from
          Autoconf, so a number of variables need to be set before
          running <span><strong class="command">configure</strong></span>. The following example
          uses the IBM compiler:
        </p><pre class="programlisting">export CC="xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 "
export CXX="xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192"
export CFLAGS="-I /usr/local/include"
export LDFLAGS="-L /usr/local/lib"
export CPPFLAGS=$CFLAGS
export CXXFLAGS=$CFLAGS

./configure --prefix=/usr/local \
                --localstatedir=/var/mysql \
                --sbindir='/usr/local/bin' \
                --libexecdir='/usr/local/bin' \
                --enable-thread-safe-client \
                --enable-large-files
</pre><p>
          The preceding options are used to compile the MySQL
          distribution that can be found at
          <a href="http://www-frec.bull.com/" target="_top">http://www-frec.bull.com/</a>.
        </p><p>
          If you change the <code class="option">-O3</code> to <code class="option">-O2</code>
          in the preceding <span><strong class="command">configure</strong></span> line, you must
          also remove the <code class="option">-qstrict</code> option. This is a
          limitation in the IBM C compiler.
        </p><p>
          If you are using <span><strong class="command">gcc</strong></span> to compile MySQL, you
          <span class="emphasis"><em>must</em></span> use the
          <code class="option">-fno-exceptions</code> flag, because the exception
          handling in <span><strong class="command">gcc</strong></span> is not thread-safe! There
          are also some known problems with IBM's assembler that may
          cause it to generate bad code when used with
          <span><strong class="command">gcc</strong></span>.
        </p><p>
          Use the following <span><strong class="command">configure</strong></span> line with
          <span><strong class="command">gcc</strong></span> 2.95 on AIX:
        </p><pre class="programlisting">CC="gcc -pipe -mcpu=power -Wa,-many" \
CXX="gcc -pipe -mcpu=power -Wa,-many" \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory
</pre><p>
          The <code class="option">-Wa,-many</code> option is necessary for the
          compile to be successful. IBM is aware of this problem but is
          in no hurry to fix it because of the workaround that is
          available. We don't know if the
          <code class="option">-fno-exceptions</code> is required with
          <span><strong class="command">gcc</strong></span> 2.95, but because MySQL doesn't use
          exceptions and the option generates faster code, you should
          always use it with <span><strong class="command">gcc</strong></span>.
        </p><p>
          If you get a problem with assembler code, try changing the
          <code class="option">-mcpu=<em class="replaceable"><code>xxx</code></em></code> option
          to match your CPU. Typically <code class="literal">power2</code>,
          <code class="literal">power</code>, or <code class="literal">powerpc</code> may
          need to be used. Alternatively, you might need to use
          <code class="literal">604</code> or <code class="literal">604e</code>. We are not
          positive but suspect that <code class="literal">power</code> would
          likely be safe most of the time, even on a power2 machine.
        </p><p>
          If you don't know what your CPU is, execute a <code class="literal">uname
          -m</code> command. It produces a string that looks like
          <code class="literal">000514676700</code>, with a format of
          <code class="literal">xxyyyyyymmss</code> where <code class="literal">xx</code>
          and <code class="literal">ss</code> are always <code class="literal">00</code>,
          <code class="literal">yyyyyy</code> is a unique system ID and
          <code class="literal">mm</code> is the ID of the CPU Planar. A chart of
          these values can be found at
          <a href="http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm" target="_top">http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm</a>.
        </p><p>
          This gives you a machine type and a machine model you can use
          to determine what type of CPU you have.
        </p><p>
          If you have problems with threads on AIX 5.3, you should
          upgrade AIX 5.3 to technology level 7 (5300-07).
        </p><p>
          If you have problems with signals (MySQL dies unexpectedly
          under high load), you may have found an OS bug with threads
          and signals. In this case, you can tell MySQL not to use
          signals by configuring as follows:
        </p><pre class="programlisting">CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti \
-DDONT_USE_THR_ALARM" \
./configure --prefix=/usr/local/mysql --with-debug \
    --with-low-memory
</pre><p>
          This doesn't affect the performance of MySQL, but has the side
          effect that you can't kill clients that are
          “<span class="quote">sleeping</span>” on a connection with
          <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin kill</strong></span></a> or <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
          shutdown</strong></span></a>. Instead, the client dies when it issues
          its next command.
        </p><p>
          On some versions of AIX, linking with
          <code class="literal">libbind.a</code> makes
          <code class="literal">getservbyname()</code> dump core. This is an AIX
          bug and should be reported to IBM.
        </p><p>
          For AIX 4.2.1 and <span><strong class="command">gcc</strong></span>, you have to make the
          following changes.
        </p><p>
          After configuring, edit <code class="filename">config.h</code> and
          <code class="filename">include/my_config.h</code> and change the line
          that says this:
        </p><pre class="programlisting">#define HAVE_SNPRINTF 1
</pre><p>
          to this:
        </p><pre class="programlisting">#undef HAVE_SNPRINTF
</pre><p>
          And finally, in <code class="filename">mysqld.cc</code>, you need to
          add a prototype for <code class="literal">initgroups()</code>.
        </p><pre class="programlisting">#ifdef _AIX41
extern "C" int initgroups(const char *,int);
#endif
</pre><p>
          For 32-bit binaries, if you need to allocate a lot of memory
          to the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> process, it is not enough to
          just use <span><strong class="command">ulimit -d unlimited</strong></span>. You may also
          have to modify <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> to add a line
          something like this:
        </p><pre class="programlisting">export LDR_CNTRL='MAXDATA=0x80000000'
</pre><p>
          You can find more information about using a lot of memory at
          <a href="http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm" target="_top">http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm</a>.
        </p><p>
          Users of AIX 4.3 should use <span><strong class="command">gmake</strong></span> instead
          of the <span><strong class="command">make</strong></span> utility included with AIX.
        </p><p>
          As of AIX 4.1, the C compiler has been unbundled from AIX as a
          separate product. <span><strong class="command">gcc</strong></span> 3.3.2 can be obtained
          here:
          <a href="ftp://ftp.software.ibm.com/aix/freeSoftware/aixtoolbox/RPMS/ppc/gcc/" target="_top">ftp://ftp.software.ibm.com/aix/freeSoftware/aixtoolbox/RPMS/ppc/gcc/</a>
        </p><p>
          The steps for compiling MySQL on AIX with
          <span><strong class="command">gcc</strong></span> 3.3.2 are similar to those for using
          <span><strong class="command">gcc</strong></span> 2.95 (in particular, the need to edit
          <code class="filename">config.h</code> and
          <code class="filename">my_config.h</code> after running
          <span><strong class="command">configure</strong></span>). However, before running
          <span><strong class="command">configure</strong></span>, you should also patch the
          <code class="filename">curses.h</code> file as follows:
        </p><pre class="programlisting">/opt/freeware/lib/gcc-lib/powerpc-ibm-aix5.2.0.0/3.3.2/include/curses.h.ORIG
       Mon Dec 26 02:17:28 2005
--- /opt/freeware/lib/gcc-lib/powerpc-ibm-aix5.2.0.0/3.3.2/include/curses.h
Mon Dec 26 02:40:13 2005
***************
*** 2023,2029 ****


  #endif /* _AIX32_CURSES */
! #if defined(__USE_FIXED_PROTOTYPES__) || defined(__cplusplus) || defined
(__STRICT_ANSI__)
  extern int delwin (WINDOW *);
  extern int endwin (void);
  extern int getcurx (WINDOW *);
--- 2023,2029 ----


  #endif /* _AIX32_CURSES */
! #if 0 &amp;&amp; (defined(__USE_FIXED_PROTOTYPES__) || defined(__cplusplus)
|| defined
(__STRICT_ANSI__))
  extern int delwin (WINDOW *);
  extern int endwin (void);
  extern int getcurx (WINDOW *);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sunos"></a>2.19.5.4. SunOS 4 Notes</h4></div></div></div><p>
          On SunOS 4, MIT-pthreads is needed to compile MySQL. This in
          turn means you need GNU <span><strong class="command">make</strong></span>.
        </p><p>
          Some SunOS 4 systems have problems with dynamic libraries and
          <span><strong class="command">libtool</strong></span>. You can use the following
          <span><strong class="command">configure</strong></span> line to avoid this problem:
        </p><pre class="programlisting">./configure --disable-shared --with-mysqld-ldflags=-all-static
</pre><p>
          When compiling <code class="literal">readline</code>, you may get
          warnings about duplicate defines. These can be ignored.
        </p><p>
          When compiling <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, there are some
          <code class="literal">implicit declaration of function</code> warnings.
          These can be ignored.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="alpha-dec-unix"></a>2.19.5.5. Alpha-DEC-UNIX Notes (Tru64)</h4></div></div></div><p>
          If you are using <span><strong class="command">egcs</strong></span> 1.1.2 on Digital
          Unix, you should upgrade to <span><strong class="command">gcc</strong></span> 2.95.2,
          because <span><strong class="command">egcs</strong></span> on DEC has some serious bugs!
        </p><p>
          When compiling threaded programs under Digital Unix, the
          documentation recommends using the <code class="option">-pthread</code>
          option for <span><strong class="command">cc</strong></span> and <span><strong class="command">cxx</strong></span>
          and the <code class="option">-lmach -lexc</code> libraries (in addition
          to <code class="option">-lpthread</code>). You should run
          <span><strong class="command">configure</strong></span> something like this:
        </p><pre class="programlisting">CC="cc -pthread" CXX="cxx -pthread -O" \
./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"
</pre><p>
          When compiling <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>, you may see a couple
          of warnings like this:
        </p><pre class="programlisting">mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of
accept(int,sockadddr *, int *)'
</pre><p>
          You can safely ignore these warnings. They occur because
          <span><strong class="command">configure</strong></span> can detect only errors, not
          warnings.
        </p><p>
          If you start the server directly from the command line, you
          may have problems with it dying when you log out. (When you
          log out, your outstanding processes receive a
          <code class="literal">SIGHUP</code> signal.) If so, try starting the
          server like this:
        </p><pre class="programlisting">nohup mysqld [<em class="replaceable"><code>options</code></em>] &amp;
</pre><p>
          <code class="literal">nohup</code> causes the command following it to
          ignore any <code class="literal">SIGHUP</code> signal sent from the
          terminal. Alternatively, start the server by running
          <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a>, which invokes
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> using <span><strong class="command">nohup</strong></span> for
          you. See <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script">Section 4.3.2, “<span><strong class="command">mysqld_safe</strong></span> — MySQL Server Startup Script”</a>.
        </p><p>
          If you get a problem when compiling
          <code class="filename">mysys/get_opt.c</code>, just remove the
          <code class="literal">#define _NO_PROTO</code> line from the start of
          that file.
        </p><p>
          If you are using Compaq's CC compiler, the following
          <span><strong class="command">configure</strong></span> line should work:
        </p><pre class="programlisting">CC="cc -pthread"
CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed \
        -speculate all -arch host"
CXX="cxx -pthread"
CXXFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed \
          -speculate all -arch host -noexceptions -nortti"
export CC CFLAGS CXX CXXFLAGS
./configure \
    --prefix=/usr/local/mysql \
    --with-low-memory \
    --enable-large-files \
    --enable-shared=yes \
    --with-named-thread-libs="-lpthread -lmach -lexc -lc"
gnumake
</pre><p>
          If you get a problem with <span><strong class="command">libtool</strong></span> when
          compiling with shared libraries as just shown, when linking
          <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>, you should be able to get around
          this by issuing these commands:
        </p><pre class="programlisting">cd mysql
/bin/sh ../libtool --mode=link cxx -pthread  -O3 -DDBUG_OFF \
    -O4 -ansi_alias -ansi_args -fast -inline speed \
    -speculate all \ -arch host  -DUNDEF_HAVE_GETHOSTBYNAME_R \
    -o mysql  mysql.o readline.o sql_string.o completion_hash.o \
    ../readline/libreadline.a -lcurses \
    ../libmysql/.libs/libmysqlclient.so  -lm
cd ..
gnumake
gnumake install
scripts/mysql_install_db
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="alpha-dec-osf1"></a>2.19.5.6. Alpha-DEC-OSF/1 Notes</h4></div></div></div><p>
          If you have problems compiling and have DEC
          <span><strong class="command">CC</strong></span> and <span><strong class="command">gcc</strong></span> installed,
          try running <span><strong class="command">configure</strong></span> like this:
        </p><pre class="programlisting">CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</pre><p>
          If you get problems with the <code class="filename">c_asm.h</code>
          file, you can create and use a 'dummy'
          <code class="filename">c_asm.h</code> file with:
        </p><pre class="programlisting">touch include/c_asm.h
CC=gcc CFLAGS=-I./include \
CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</pre><p>
          Note that the following problems with the
          <span><strong class="command">ld</strong></span> program can be fixed by downloading the
          latest DEC (Compaq) patch kit from:
          <a href="http://ftp.support.compaq.com/public/unix/" target="_top">http://ftp.support.compaq.com/public/unix/</a>.
        </p><p>
          On OSF/1 V4.0D and compiler "DEC C V5.6-071 on Digital Unix
          V4.0 (Rev. 878)," the compiler had some strange behavior
          (undefined <code class="literal">asm</code> symbols).
          <code class="literal">/bin/ld</code> also appears to be broken (problems
          with <code class="literal">_exit undefined</code> errors occurring while
          linking <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>). On this system, we have
          managed to compile MySQL with the following
          <span><strong class="command">configure</strong></span> line, after replacing
          <code class="literal">/bin/ld</code> with the version from OSF 4.0C:
        </p><pre class="programlisting">CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
</pre><p>
          With the Digital compiler "C++ V6.1-029," the following should
          work:
        </p><pre class="programlisting">CC=cc -pthread
CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \
       -speculate all -arch host
CXX=cxx -pthread
CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \
         -speculate all -arch host -noexceptions -nortti
export CC CFLAGS CXX CXXFLAGS
./configure --prefix=/usr/mysql/mysql \
            --with-mysqld-ldflags=-all-static --disable-shared \
            --with-named-thread-libs="-lmach -lexc -lc"
</pre><p>
          In some versions of OSF/1, the <code class="literal">alloca()</code>
          function is broken. Fix this by removing the line in
          <code class="filename">config.h</code> that defines
          <code class="literal">'HAVE_ALLOCA'</code>.
        </p><p>
          The <code class="literal">alloca()</code> function also may have an
          incorrect prototype in
          <code class="literal">/usr/include/alloca.h</code>. This warning
          resulting from this can be ignored.
        </p><p>
          <span><strong class="command">configure</strong></span> uses the following thread
          libraries automatically:
          <code class="option">--with-named-thread-libs="-lpthread -lmach -lexc
          -lc"</code>.
        </p><p>
          When using <span><strong class="command">gcc</strong></span>, you can also try running
          <span><strong class="command">configure</strong></span> like this:
        </p><pre class="programlisting">CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ...
</pre><p>
          If you have problems with signals (MySQL dies unexpectedly
          under high load), you may have found an OS bug with threads
          and signals. In this case, you can tell MySQL not to use
          signals by configuring with:
        </p><pre class="programlisting">CFLAGS=-DDONT_USE_THR_ALARM \
CXXFLAGS=-DDONT_USE_THR_ALARM \
./configure ...
</pre><p>
          This does not affect the performance of MySQL, but has the
          side effect that you can't kill clients that are
          “<span class="quote">sleeping</span>” on a connection with
          <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin kill</strong></span></a> or <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
          shutdown</strong></span></a>. Instead, the client dies when it issues
          its next command.
        </p><p>
          With <span><strong class="command">gcc</strong></span> 2.95.2, you may encounter the
          following compile error:
        </p><pre class="programlisting">sql_acl.cc:1456: Internal compiler error in `scan_region',
at except.c:2566
Please submit a full bug report.
</pre><p>
          To fix this, you should change to the <code class="literal">sql</code>
          directory and do a cut-and-paste of the last
          <span><strong class="command">gcc</strong></span> line, but change <code class="option">-O3</code>
          to <code class="option">-O0</code> (or add <code class="option">-O0</code>
          immediately after <span><strong class="command">gcc</strong></span> if you don't have any
          <code class="option">-O</code> option on your compile line). After this
          is done, you can just change back to the top-level directory
          and run <span><strong class="command">make</strong></span> again.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sgi-irix"></a>2.19.5.7. SGI Irix Notes</h4></div></div></div><p class="deprecated">
          As of MySQL 5.0, we don't provide binaries for Irix any more.
        </p><p>
          If you are using Irix 6.5.3 or newer,
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is able to create threads only if
          you run it as a user that has <code class="literal">CAP_SCHED_MGT</code>
          privileges (such as <code class="literal">root</code>) or give the
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server this privilege with the
          following shell command:
        </p><pre class="programlisting">chcap "CAP_SCHED_MGT+epi" /opt/mysql/libexec/mysqld
</pre><p>
          You may have to undefine some symbols in
          <code class="filename">config.h</code> after running
          <span><strong class="command">configure</strong></span> and before compiling.
        </p><p>
          In some Irix implementations, the <code class="literal">alloca()</code>
          function is broken. If the <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server
          dies on some <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements,
          remove the lines from <code class="filename">config.h</code> that
          define <code class="literal">HAVE_ALLOC</code> and
          <code class="literal">HAVE_ALLOCA_H</code>. If <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
          create</strong></span></a> doesn't work, remove the line from
          <code class="filename">config.h</code> that defines
          <code class="literal">HAVE_READDIR_R</code>. You may have to remove the
          <code class="literal">HAVE_TERM_H</code> line as well.
        </p><p>
          SGI recommends that you install all the patches on this page
          as a set:
          <a href="http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html" target="_top">http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html</a>
        </p><p>
          At the very minimum, you should install the latest kernel
          rollup, the latest <code class="literal">rld</code> rollup, and the
          latest <code class="literal">libc</code> rollup.
        </p><p>
          You definitely need all the POSIX patches on this page, for
          pthreads support:
        </p><p>
          <a href="http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html" target="_top">http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html</a>
        </p><p>
          If you get the something like the following error when
          compiling <code class="filename">mysql.cc</code>:
        </p><pre class="programlisting">"/usr/include/curses.h", line 82: error(1084):
invalid combination of type
</pre><p>
          Type the following in the top-level directory of your MySQL
          source tree:
        </p><pre class="programlisting">extra/replace bool curses_bool &lt; /usr/include/curses.h &gt; include/curses.h
make
</pre><p>
          There have also been reports of scheduling problems. If only
          one thread is running, performance is slow. Avoid this by
          starting another client. This may lead to a two-to-tenfold
          increase in execution speed thereafter for the other thread.
          This is a poorly understood problem with Irix threads; you may
          have to improvise to find solutions until this can be fixed.
        </p><p>
          If you are compiling with <span><strong class="command">gcc</strong></span>, you can use
          the following <span><strong class="command">configure</strong></span> command:
        </p><pre class="programlisting">CC=gcc CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql --enable-thread-safe-client \
    --with-named-thread-libs=-lpthread
</pre><p>
          On Irix 6.5.11 with native Irix C and C++ compilers ver.
          7.3.1.2, the following is reported to work
        </p><pre class="programlisting">CC=cc CXX=CC CFLAGS='-O3 -n32 -TARG:platform=IP22 -I/usr/local/include \
-L/usr/local/lib' CXXFLAGS='-O3 -n32 -TARG:platform=IP22 \
-I/usr/local/include -L/usr/local/lib' \
./configure --prefix=/usr/local/mysql --with-innodb --with-berkeley-db \
    --with-libwrap=/usr/local \
    --with-named-curses-libs=/usr/local/lib/libncurses.a
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sco"></a>2.19.5.8. SCO UNIX and OpenServer 5.0.x Notes</h4></div></div></div><p>
          The current port is tested only on
          <code class="literal">sco3.2v5.0.5</code>,
          <code class="literal">sco3.2v5.0.6</code>, and
          <code class="literal">sco3.2v5.0.7</code> systems. There has also been
          progress on a port to <code class="literal">sco3.2v4.2</code>. Open
          Server 5.0.8 (Legend) has native threads and allows files
          greater than 2GB. The current maximum file size is 2GB.
        </p><p>
          We have been able to compile MySQL with the following
          <span><strong class="command">configure</strong></span> command on OpenServer with
          <span><strong class="command">gcc</strong></span> 2.95.3.
        </p><pre class="programlisting">CC=gcc CFLAGS="-D_FILE_OFFSET_BITS=64 -O3" \
CXX=gcc CXXFLAGS="-D_FILE_OFFSET_BITS=64 -O3" \
./configure --prefix=/usr/local/mysql \
    --enable-thread-safe-client --with-innodb \
    --with-openssl --with-vio --with-extra-charsets=complex
</pre><p>
          <span><strong class="command">gcc</strong></span> is available at
          <a href="ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj" target="_top">ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj</a>.
        </p><p>
          This development system requires the OpenServer Execution
          Environment Supplement oss646B on OpenServer 5.0.6 and oss656B
          and The OpenSource libraries found in gwxlibs. All OpenSource
          tools are in the <code class="filename">opensrc</code> directory. They
          are available at
          <a href="ftp://ftp.sco.com/pub/openserver5/opensrc/" target="_top">ftp://ftp.sco.com/pub/openserver5/opensrc/</a>.
        </p><p>
          Use the latest production release of MySQL.
        </p><p>
          SCO provides operating system patches at
          <a href="ftp://ftp.sco.com/pub/openserver5" target="_top">ftp://ftp.sco.com/pub/openserver5</a> for
          OpenServer 5.0.[0-6] and
          <a href="ftp://ftp.sco.com/pub/openserverv5/507" target="_top">ftp://ftp.sco.com/pub/openserverv5/507</a> for
          OpenServer 5.0.7.
        </p><p>
          SCO provides information about security fixes at
          <a href="ftp://ftp.sco.com/pub/security/OpenServer" target="_top">ftp://ftp.sco.com/pub/security/OpenServer</a> for
          OpenServer 5.0.x.
        </p><p>
          The maximum file size on an OpenServer 5.0.x system is 2GB.
        </p><p>
          The total memory which can be allocated for streams buffers,
          clists, and lock records cannot exceed 60MB on OpenServer
          5.0.x.
        </p><p>
          Streams buffers are allocated in units of 4096 byte pages,
          clists are 70 bytes each, and lock records are 64 bytes each,
          so:
        </p><pre class="programlisting">(NSTRPAGES × 4096) + (NCLIST × 70) + (MAX_FLCKREC × 64) &lt;= 62914560
</pre><p>
          Follow this procedure to configure the Database Services
          option. If you are unsure whether an application requires
          this, see the documentation provided with the application.
        </p><div class="orderedlist"><ol type="1"><li><p>
              Log in as <code class="literal">root</code>.
            </p></li><li><p>
              Enable the SUDS driver by editing the
              <code class="filename">/etc/conf/sdevice.d/suds</code> file. Change
              the <code class="literal">N</code> in the second field to a
              <code class="literal">Y</code>.
            </p></li><li><p>
              Use <span><strong class="command">mkdev aio</strong></span> or the Hardware/Kernel
              Manager to enable support for asynchronous I/O and relink
              the kernel. To allow users to lock down memory for use
              with this type of I/O, update the aiomemlock(F) file. This
              file should be updated to include the names of users that
              can use AIO and the maximum amounts of memory they can
              lock down.
            </p></li><li><p>
              Many applications use setuid binaries so that you need to
              specify only a single user. See the documentation provided
              with the application to determine whether this is the case
              for your application.
            </p></li></ol></div><p>
          After you complete this process, reboot the system to create a
          new kernel incorporating these changes.
        </p><p>
          By default, the entries in
          <code class="filename">/etc/conf/cf.d/mtune</code> are set as follows:
        </p><pre class="programlisting">Value           Default         Min             Max
-----           -------         ---             ---
NBUF            0               24              450000
NHBUF           0               32              524288
NMPBUF          0               12              512
MAX_INODE       0               100             64000
MAX_FILE        0               100             64000
CTBUFSIZE       128             0               256
MAX_PROC        0               50              16000
MAX_REGION      0               500             160000
NCLIST          170             120             16640
MAXUP           100             15              16000
NOFILES         110             60              11000
NHINODE         128             64              8192
NAUTOUP         10              0               60
NGROUPS         8               0               128
BDFLUSHR        30              1               300
MAX_FLCKREC     0               50              16000
PUTBUFSZ        8000            2000            20000
MAXSLICE        100             25              100
ULIMIT          4194303         2048            4194303
* Streams Parameters
NSTREAM         64              1               32768
NSTRPUSH        9               9               9
NMUXLINK        192             1               4096
STRMSGSZ        16384           4096            524288
STRCTLSZ        1024            1024            1024
STRMAXBLK       524288          4096            524288
NSTRPAGES       500             0               8000
STRSPLITFRAC    80              50              100
NLOG            3               3               3
NUMSP           64              1               256
NUMTIM          16              1               8192
NUMTRW          16              1               8192
* Semaphore Parameters
SEMMAP          10              10              8192
SEMMNI          10              10              8192
SEMMNS          60              60              8192
SEMMNU          30              10              8192
SEMMSL          25              25              150
SEMOPM          10              10              1024
SEMUME          10              10              25
SEMVMX          32767           32767           32767
SEMAEM          16384           16384           16384
* Shared Memory Parameters
SHMMAX          524288          131072          2147483647
SHMMIN          1               1               1
SHMMNI          100             100             2000
FILE            0               100             64000
NMOUNT          0               4               256
NPROC           0               50              16000
NREGION         0               500             160000
</pre><p>
          Set these values as follows:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="literal">NOFILES</code> should be 4096 or 2048.
            </p></li><li><p>
              <code class="literal">MAXUP</code> should be 2048.
            </p></li></ul></div><p>
          To make changes to the kernel, use the <span><strong class="command">idtune
          <em class="replaceable"><code>name parameter</code></em></strong></span> command.
          <span><strong class="command">idtune</strong></span> modifies the
          <code class="filename">/etc/conf/cf.d/stune</code> file for you. For
          example, to change <code class="literal">SEMMS</code> to
          <code class="literal">200</code>, execute this command as
          <code class="literal">root</code>:
        </p><pre class="programlisting"># <strong class="userinput"><code>/etc/conf/bin/idtune SEMMNS 200</code></strong>
</pre><p>
          Then rebuild and reboot the kernel by issuing this command:
        </p><pre class="programlisting"># <strong class="userinput"><code>/etc/conf/bin/idbuild -B &amp;&amp; init 6</code></strong>
</pre><p>
          To tune the system, the proper parameter values to use depend
          on the number of users accessing the application or database
          and size the of the database (that is, the used buffer pool).
          The following kernel parameters can be set with
          <span><strong class="command">idtune</strong></span>:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="literal">SHMMAX</code> (recommended setting: 128MB) and
              <code class="literal">SHMSEG</code> (recommended setting: 15). These
              parameters have an influence on the MySQL database engine
              to create user buffer pools.
            </p></li><li><p>
              <code class="literal">NOFILES</code> and <code class="literal">MAXUP</code>
              should be set to at least 2048.
            </p></li><li><p>
              <code class="literal">MAXPROC</code> should be set to at least
              3000/4000 (depends on number of users) or more.
            </p></li><li><p>
              The following formulas are recommended to calculate values
              for <code class="literal">SEMMSL</code>, <code class="literal">SEMMNS</code>,
              and <code class="literal">SEMMNU</code>:
            </p><pre class="programlisting">SEMMSL = 13
</pre><p>
              13 is what has been found to be the best for both Progress
              and MySQL.
            </p><pre class="programlisting">SEMMNS = SEMMSL × <em class="replaceable"><code>number of db servers to be run on the system</code></em>
</pre><p>
              Set <code class="literal">SEMMNS</code> to the value of
              <code class="literal">SEMMSL</code> multiplied by the number of
              database servers (maximum) that you are running on the
              system at one time.
            </p><pre class="programlisting">SEMMNU = SEMMNS
</pre><p>
              Set the value of <code class="literal">SEMMNU</code> to equal the
              value of <code class="literal">SEMMNS</code>. You could probably set
              this to 75% of <code class="literal">SEMMNS</code>, but this is a
              conservative estimate.
            </p></li></ul></div><p>
          You need to at least install the SCO OpenServer Linker and
          Application Development Libraries or the OpenServer
          Development System to use <span><strong class="command">gcc</strong></span>. You cannot
          use the GCC Dev system without installing one of these.
        </p><p>
          You should get the FSU Pthreads package and install it first.
          This can be found at
          <a href="http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz" target="_top">http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz</a>.
          You can also get a precompiled package from
          <a href="ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz" target="_top">ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz</a>.
        </p><p>
          FSU Pthreads can be compiled with SCO Unix 4.2 with tcpip, or
          using OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0) with
          the SCO Development System installed using a good port of GCC
          2.5.x. For ODT or OS 3.0, you need a good port of GCC 2.5.x.
          There are a lot of problems without a good port. The port for
          this product requires the SCO Unix Development system. Without
          it, you are missing the libraries and the linker that is
          needed. You also need
          <code class="filename">SCO-3.2v4.2-includes.tar.gz</code>. This file
          contains the changes to the SCO Development include files that
          are needed to get MySQL to build. You need to replace the
          existing system include files with these modified header
          files. They can be obtained from
          <a href="ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz" target="_top">ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz</a>.
        </p><p>
          To build FSU Pthreads on your system, all you should need to
          do is run GNU <span><strong class="command">make</strong></span>. The
          <code class="filename">Makefile</code> in FSU-threads-3.14.tar.gz is
          set up to make FSU-threads.
        </p><p>
          You can run <span><strong class="command">./configure</strong></span> in the
          <code class="filename">threads/src</code> directory and select the SCO
          OpenServer option. This command copies
          <code class="filename">Makefile.SCO5</code> to
          <code class="filename">Makefile</code>. Then run
          <span><strong class="command">make</strong></span>.
        </p><p>
          To install in the default <code class="filename">/usr/include</code>
          directory, log in as <code class="literal">root</code>, and then
          <code class="literal">cd</code> to the <code class="filename">thread/src</code>
          directory and run <span><strong class="command">make install</strong></span>.
        </p><p>
          Remember that you must use GNU <span><strong class="command">make</strong></span> to
          build MySQL.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If you don't start <a href="programs.html#mysqld-safe" title="4.3.2. mysqld_safe — MySQL Server Startup Script"><span><strong class="command">mysqld_safe</strong></span></a> as
            <code class="literal">root</code>, you should get only the default 110
            open files per process. <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> writes a
            note about this in the log file.
          </p></div><p>
          With SCO 3.2V4.2, you should use FSU Pthreads version 3.14 or
          newer. The following <span><strong class="command">configure</strong></span> command
          should work:
        </p><pre class="programlisting">CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
./configure \
    --prefix=/usr/local/mysql \
    --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
    --with-named-curses-libs="-lcurses"
</pre><p>
          You may have problems with some include files. In this case,
          you can find new SCO-specific include files at
          <a href="ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz" target="_top">ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz</a>.
        </p><p>
          You should unpack this file in the
          <code class="filename">include</code> directory of your MySQL source
          tree.
        </p><p>
          SCO development notes:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              MySQL should automatically detect FSU Pthreads and link
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with <code class="option">-lgthreads -lsocket
              -lgthreads</code>.
            </p></li><li><p>
              The SCO development libraries are re-entrant in FSU
              Pthreads. SCO claims that its library functions are
              re-entrant, so they must be re-entrant with FSU Pthreads.
              FSU Pthreads on OpenServer tries to use the SCO scheme to
              make re-entrant libraries.
            </p></li><li><p>
              FSU Pthreads (at least the version at
              <a href="ftp://ftp.zenez.com" target="_top">ftp://ftp.zenez.com</a>) comes linked with GNU
              <code class="literal">malloc</code>. If you encounter problems with
              memory usage, make sure that
              <code class="filename">gmalloc.o</code> is included in
              <code class="filename">libgthreads.a</code> and
              <code class="filename">libgthreads.so</code>.
            </p></li><li><p>
              In FSU Pthreads, the following system calls are
              pthreads-aware: <code class="literal">read()</code>,
              <code class="literal">write()</code>, <code class="literal">getmsg()</code>,
              <code class="literal">connect()</code>, <code class="literal">accept(),</code>
              <code class="literal">select()</code>, and
              <code class="literal">wait()</code>.
            </p></li><li><p>
              The CSSA-2001-SCO.35.2 (the patch is listed in custom as
              erg711905-dscr_remap security patch (version 2.0.0))
              breaks FSU threads and makes <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
              unstable. You have to remove this one if you want to run
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> on an OpenServer 5.0.6 machine.
            </p></li><li><p>
              If you use SCO OpenServer 5, you may need to recompile FSU
              pthreads with <code class="literal">-DDRAFT7</code> in
              <code class="literal">CFLAGS</code>. Otherwise,
              <code class="literal">InnoDB</code> may hang at a
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> startup.
            </p></li><li><p>
              SCO provides operating system patches at
              <a href="ftp://ftp.sco.com/pub/openserver5" target="_top">ftp://ftp.sco.com/pub/openserver5</a> for
              OpenServer 5.0.x.
            </p></li><li><p>
              SCO provides security fixes and
              <code class="literal">libsocket.so.2</code> at
              <a href="ftp://ftp.sco.com/pub/security/OpenServer" target="_top">ftp://ftp.sco.com/pub/security/OpenServer</a>
              and <a href="ftp://ftp.sco.com/pub/security/sse" target="_top">ftp://ftp.sco.com/pub/security/sse</a> for
              OpenServer 5.0.x.
            </p></li><li><p>
              Pre-OSR506 security fixes. Also, the
              <code class="literal">telnetd</code> fix at
              <a href="ftp://stage.caldera.com/pub/security/openserver/" target="_top">ftp://stage.caldera.com/pub/security/openserver/</a>
              or
              <a href="ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/" target="_top">ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/</a>
              as both <code class="filename">libsocket.so.2</code> and
              <code class="filename">libresolv.so.1</code> with instructions for
              installing on pre-OSR506 systems.
            </p><p>
              It is probably a good idea to install these patches before
              trying to compile/use MySQL.
            </p></li></ul></div><p>
          Beginning with Legend/OpenServer 6.0.0, there are native
          threads and no 2GB file size limit.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sco-openserver"></a>2.19.5.9. SCO OpenServer 6.0.x Notes</h4></div></div></div><p>
          OpenServer 6 includes these key improvements:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              Larger file support up to 1 TB
            </p></li><li><p>
              Multiprocessor support increased from 4 to 32 processors
            </p></li><li><p>
              Increased memory support up to 64GB
            </p></li><li><p>
              Extending the power of UnixWare into OpenServer 6
            </p></li><li><p>
              Dramatic performance improvement
            </p></li></ul></div><p>
          OpenServer 6.0.0 commands are organized as follows:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="filename">/bin</code> is for commands that behave
              exactly the same as on OpenServer 5.0.x.
            </p></li><li><p>
              <code class="filename">/u95/bin</code> is for commands that have
              better standards conformance, for example Large File
              System (LFS) support.
            </p></li><li><p>
              <code class="filename">/udk/bin</code> is for commands that behave
              the same as on UnixWare 7.1.4. The default is for the LFS
              support.
            </p></li></ul></div><p>
          The following is a guide to setting <code class="literal">PATH</code> on
          OpenServer 6. If the user wants the traditional OpenServer
          5.0.x then <code class="literal">PATH</code> should be
          <code class="filename">/bin</code> first. If the user wants LFS
          support, the path should be
          <code class="filename">/u95/bin:/bin</code>. If the user wants UnixWare
          7 support first, the path would be
          <code class="filename">/udk/bin:/u95/bin:/bin:</code>.
        </p><p>
          Use the latest production release of MySQL. Should you choose
          to use an older release of MySQL on OpenServer 6.0.x, you must
          use a version of MySQL at least as recent as 3.22.13 to get
          fixes for some portability and OS problems.
        </p><p>
          MySQL distribution files with names of the following form are
          <span><strong class="command">tar</strong></span> archives of media are tar archives of
          media images suitable for installation with the SCO Software
          Manager (<code class="filename">/etc/custom</code>) on SCO OpenServer
          6:
        </p><pre class="programlisting">mysql-<em class="replaceable"><code>PRODUCT</code></em>-5.0.86-sco-osr6-i686.VOLS.tar
</pre><p>
          A distribution where <em class="replaceable"><code>PRODUCT</code></em> is
          <code class="literal">pro-cert</code> is the Commercially licensed MySQL
          Pro Certified server. A distribution where
          <em class="replaceable"><code>PRODUCT</code></em> is
          <code class="literal">pro-gpl-cert</code> is the MySQL Pro Certified
          server licensed under the terms of the General Public License
          (GPL).
        </p><p>
          Select whichever distribution you wish to install and, after
          download, extract the <span><strong class="command">tar</strong></span> archive into an
          empty directory. For example:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir /tmp/mysql-pro</code></strong>
shell&gt; <strong class="userinput"><code>cd /tmp/mysql-pro</code></strong>
shell&gt; <strong class="userinput"><code>tar xf /tmp/mysql-pro-cert-5.0.86-sco-osr6-i686.VOLS.tar</code></strong>
</pre><p>
          Prior to installation, back up your data in accordance with
          the procedures outlined in <a href="installing.html#upgrade" title="2.18.1. Upgrading MySQL">Section 2.18.1, “Upgrading MySQL”</a>.
        </p><p>
          Remove any previously installed <span><strong class="command">pkgadd</strong></span>
          version of MySQL:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>pkginfo mysql 2&gt;&amp;1 &gt; /dev/null &amp;&amp; pkgrm mysql</code></strong>
</pre><p>
          Install MySQL Pro from media images using the SCO Software
          Manager:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>/etc/custom -p SCO:MySQL -i -z /tmp/mysql-pro</code></strong>
</pre><p>
          Alternatively, the SCO Software Manager can be displayed
          graphically by clicking on the <code class="literal">Software
          Manager</code> icon on the desktop, selecting
          <code class="literal">Software -&gt; Install New</code>, selecting the
          host, selecting <code class="literal">Media Images</code> for the Media
          Device, and entering <code class="filename">/tmp/mysql-pro</code> as
          the Image Directory.
        </p><p>
          After installation, run <span><strong class="command">mkdev mysql</strong></span> as the
          <code class="literal">root</code> user to configure your newly installed
          MySQL Pro Certified server.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The installation procedure for VOLS packages does not create
            the <code class="literal">mysql</code> user and group that the package
            uses by default. You should either create the
            <code class="literal">mysql</code> user and group, or else select a
            different user and group using an option in <span><strong class="command">mkdev
            mysql</strong></span>.
          </p></div><p>
          If you wish to configure your MySQL Pro server to interface
          with the Apache Web server via PHP, download and install the
          PHP update from SCO at
          <a href="ftp://ftp.sco.com/pub/updates/OpenServer/SCOSA-2006.17/" target="_top">ftp://ftp.sco.com/pub/updates/OpenServer/SCOSA-2006.17/</a>.
        </p><p>
          We have been able to compile MySQL with the following
          <span><strong class="command">configure</strong></span> command on OpenServer 6.0.x:
        </p><pre class="programlisting">CC=cc CFLAGS="-D_FILE_OFFSET_BITS=64 -O3" \
CXX=CC CXXFLAGS="-D_FILE_OFFSET_BITS=64 -O3" \
./configure --prefix=/usr/local/mysql \
    --enable-thread-safe-client --with-berkeley-db \
    --with-extra-charsets=complex \
    --build=i686-unknown-sysv5SCO_SV6.0.0
</pre><p>
          If you use <span><strong class="command">gcc</strong></span>, you must use
          <span><strong class="command">gcc</strong></span> 2.95.3 or newer.
        </p><pre class="programlisting">CC=gcc CXX=g++ ... ./configure ...
</pre><p>
          The version of Berkeley DB that comes with either UnixWare
          7.1.4 or OpenServer 6.0.0 is not used when building MySQL.
          MySQL instead uses its own version of Berkeley DB. The
          <span><strong class="command">configure</strong></span> command needs to build both a
          static and a dynamic library in
          <code class="filename"><em class="replaceable"><code>src_directory</code></em>/bdb/build_unix/</code>,
          but it does not with MySQL's own <code class="literal">BDB</code>
          version. The workaround is as follows.
        </p><div class="orderedlist"><ol type="1"><li><p>
              Configure as normal for MySQL.
            </p></li><li><p>
              <code class="literal">cd bdb/build_unix/</code>
            </p></li><li><p>
              <code class="literal">cp -p Makefile Makefile.sav</code>
            </p></li><li><p>
              Use same options and run
              <span><strong class="command">../dist/configure</strong></span>.
            </p></li><li><p>
              Run <span><strong class="command">gmake</strong></span>.
            </p></li><li><p>
              <code class="literal">cp -p Makefile.sav Makefile</code>
            </p></li><li><p>
              Change location to the top source directory and run
              <span><strong class="command">gmake</strong></span>.
            </p></li></ol></div><p>
          This allows both the shared and dynamic libraries to be made
          and work.
        </p><p>
          SCO provides OpenServer 6 operating system patches at
          <a href="ftp://ftp.sco.com/pub/openserver6" target="_top">ftp://ftp.sco.com/pub/openserver6</a>.
        </p><p>
          SCO provides information about security fixes at
          <a href="ftp://ftp.sco.com/pub/security/OpenServer" target="_top">ftp://ftp.sco.com/pub/security/OpenServer</a>.
        </p><p>
          By default, the maximum file size on a OpenServer 6.0.0 system
          is 1TB. Some operating system utilities have a limitation of
          2GB. The maximum possible file size on UnixWare 7 is 1TB with
          VXFS or HTFS.
        </p><p>
          OpenServer 6 can be configured for large file support (file
          sizes greater than 2GB) by tuning the UNIX kernel.
        </p><p>
          By default, the entries in
          <code class="filename">/etc/conf/cf.d/mtune</code> are set as follows:
        </p><pre class="programlisting">Value           Default         Min             Max
-----           -------         ---             ---
SVMMLIM         0x9000000       0x1000000       0x7FFFFFFF
HVMMLIM         0x9000000       0x1000000       0x7FFFFFFF
</pre><p>
          To make changes to the kernel, use the <span><strong class="command">idtune
          <em class="replaceable"><code>name parameter</code></em></strong></span> command.
          <span><strong class="command">idtune</strong></span> modifies the
          <code class="filename">/etc/conf/cf.d/stune</code> file for you. To set
          the kernel values, execute the following commands as
          <code class="literal">root</code>:
        </p><pre class="programlisting"># <strong class="userinput"><code>/etc/conf/bin/idtune SDATLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune HDATLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune SVMMLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune HVMMLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune SFNOLIM 2048</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune HFNOLIM 2048</code></strong>
</pre><p>
          Then rebuild and reboot the kernel by issuing this command:
        </p><pre class="programlisting"># <strong class="userinput"><code>/etc/conf/bin/idbuild -B &amp;&amp; init 6</code></strong>
</pre><p>
          To tune the system, the proper parameter values to use depend
          on the number of users accessing the application or database
          and size the of the database (that is, the used buffer pool).
          The following kernel parameters can be set with
          <span><strong class="command">idtune</strong></span>:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="literal">SHMMAX</code> (recommended setting: 128MB) and
              <code class="literal">SHMSEG</code> (recommended setting: 15). These
              parameters have an influence on the MySQL database engine
              to create user buffer pools.
            </p></li><li><p>
              <code class="literal">SFNOLIM</code> and <code class="literal">HFNOLIM</code>
              should be at maximum 2048.
            </p></li><li><p>
              <code class="literal">NPROC</code> should be set to at least
              3000/4000 (depends on number of users).
            </p></li><li><p>
              The following formulas are recommended to calculate values
              for <code class="literal">SEMMSL</code>, <code class="literal">SEMMNS</code>,
              and <code class="literal">SEMMNU</code>:
            </p><pre class="programlisting">SEMMSL = 13
</pre><p>
              13 is what has been found to be the best for both Progress
              and MySQL.
            </p><pre class="programlisting">SEMMNS = SEMMSL × <em class="replaceable"><code>number of db servers to be run on the system</code></em>
</pre><p>
              Set <code class="literal">SEMMNS</code> to the value of
              <code class="literal">SEMMSL</code> multiplied by the number of
              database servers (maximum) that you are running on the
              system at one time.
            </p><pre class="programlisting">SEMMNU = SEMMNS
</pre><p>
              Set the value of <code class="literal">SEMMNU</code> to equal the
              value of <code class="literal">SEMMNS</code>. You could probably set
              this to 75% of <code class="literal">SEMMNS</code>, but this is a
              conservative estimate.
            </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="sco-unixware"></a>2.19.5.10. SCO UnixWare 7.1.x and OpenUNIX 8.0.0 Notes</h4></div></div></div><p>
          Use the latest production release of MySQL. Should you choose
          to use an older release of MySQL on UnixWare 7.1.x, you must
          use a version of MySQL at least as recent as 3.22.13 to get
          fixes for some portability and OS problems.
        </p><p>
          We have been able to compile MySQL with the following
          <span><strong class="command">configure</strong></span> command on UnixWare 7.1.x:
        </p><pre class="programlisting">CC="cc" CFLAGS="-I/usr/local/include" \
CXX="CC" CXXFLAGS="-I/usr/local/include" \
./configure --prefix=/usr/local/mysql \
    --enable-thread-safe-client --with-berkeley-db=./bdb \
    --with-innodb --with-openssl --with-extra-charsets=complex
</pre><p>
          If you want to use <span><strong class="command">gcc</strong></span>, you must use
          <span><strong class="command">gcc</strong></span> 2.95.3 or newer.
        </p><pre class="programlisting">CC=gcc CXX=g++ ... ./configure ...
</pre><p>
          The version of Berkeley DB that comes with either UnixWare
          7.1.4 or OpenServer 6.0.0 is not used when building MySQL.
          MySQL instead uses its own version of Berkeley DB. The
          <span><strong class="command">configure</strong></span> command needs to build both a
          static and a dynamic library in
          <code class="filename"><em class="replaceable"><code>src_directory</code></em>/bdb/build_unix/</code>,
          but it does not with MySQL's own <code class="literal">BDB</code>
          version. The workaround is as follows.
        </p><div class="orderedlist"><ol type="1"><li><p>
              Configure as normal for MySQL.
            </p></li><li><p>
              <code class="literal">cd bdb/build_unix/</code>
            </p></li><li><p>
              <code class="literal">cp -p Makefile Makefile.sav</code>
            </p></li><li><p>
              Use same options and run
              <span><strong class="command">../dist/configure</strong></span>.
            </p></li><li><p>
              Run <span><strong class="command">gmake</strong></span>.
            </p></li><li><p>
              <code class="literal">cp -p Makefile.sav Makefile</code>
            </p></li><li><p>
              Change to top source directory and run
              <span><strong class="command">gmake</strong></span>.
            </p></li></ol></div><p>
          This allows both the shared and dynamic libraries to be made
          and work.
        </p><p>
          SCO provides operating system patches at
          <a href="ftp://ftp.sco.com/pub/unixware7" target="_top">ftp://ftp.sco.com/pub/unixware7</a> for UnixWare
          7.1.1, <a href="ftp://ftp.sco.com/pub/unixware7/713/" target="_top">ftp://ftp.sco.com/pub/unixware7/713/</a> for
          UnixWare 7.1.3,
          <a href="ftp://ftp.sco.com/pub/unixware7/714/" target="_top">ftp://ftp.sco.com/pub/unixware7/714/</a> for
          UnixWare 7.1.4, and
          <a href="ftp://ftp.sco.com/pub/openunix8" target="_top">ftp://ftp.sco.com/pub/openunix8</a> for OpenUNIX
          8.0.0.
        </p><p>
          SCO provides information about security fixes at
          <a href="ftp://ftp.sco.com/pub/security/OpenUNIX" target="_top">ftp://ftp.sco.com/pub/security/OpenUNIX</a> for
          OpenUNIX and
          <a href="ftp://ftp.sco.com/pub/security/UnixWare" target="_top">ftp://ftp.sco.com/pub/security/UnixWare</a> for
          UnixWare.
        </p><p>
          The UnixWare 7 file size limit is 1 TB with VXFS. Some OS
          utilities have a limitation of 2GB.
        </p><p>
          On UnixWare 7.1.4 you do not need to do anything to get large
          file support, but to enable large file support on prior
          versions of UnixWare 7.1.x, run <span><strong class="command">fsadm</strong></span>.
        </p><pre class="programlisting"># <strong class="userinput"><code>fsadm -Fvxfs -o largefiles /</code></strong>
# <strong class="userinput"><code>fsadm /</code></strong>         * Note
# <strong class="userinput"><code>ulimit unlimited</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune SFSZLIM 0x7FFFFFFF</code></strong>     ** Note
# <strong class="userinput"><code>/etc/conf/bin/idtune HFSZLIM 0x7FFFFFFF</code></strong>     ** Note
# <strong class="userinput"><code>/etc/conf/bin/idbuild -B</code></strong>

* This should report "largefiles".
** 0x7FFFFFFF represents infinity for these values.
</pre><p>
          Reboot the system using <code class="literal">shutdown</code>.
        </p><p>
          By default, the entries in
          <code class="filename">/etc/conf/cf.d/mtune</code> are set as follows:
        </p><pre class="programlisting">Value           Default         Min             Max
-----           -------         ---             ---
SVMMLIM         0x9000000       0x1000000       0x7FFFFFFF
HVMMLIM         0x9000000       0x1000000       0x7FFFFFFF
</pre><p>
          To make changes to the kernel, use the <span><strong class="command">idtune
          <em class="replaceable"><code>name parameter</code></em></strong></span> command.
          <span><strong class="command">idtune</strong></span> modifies the
          <code class="filename">/etc/conf/cf.d/stune</code> file for you. To set
          the kernel values, execute the following commands as
          <code class="literal">root</code>:
        </p><pre class="programlisting"># <strong class="userinput"><code>/etc/conf/bin/idtune SDATLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune HDATLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune SVMMLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune HVMMLIM 0x7FFFFFFF</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune SFNOLIM 2048</code></strong>
# <strong class="userinput"><code>/etc/conf/bin/idtune HFNOLIM 2048</code></strong>
</pre><p>
          Then rebuild and reboot the kernel by issuing this command:
        </p><pre class="programlisting"># <strong class="userinput"><code>/etc/conf/bin/idbuild -B &amp;&amp; init 6</code></strong>
</pre><p>
          To tune the system, the proper parameter values to use depend
          on the number of users accessing the application or database
          and size the of the database (that is, the used buffer pool).
          The following kernel parameters can be set with
          <span><strong class="command">idtune</strong></span>:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              <code class="literal">SHMMAX</code> (recommended setting: 128MB) and
              <code class="literal">SHMSEG</code> (recommended setting: 15). These
              parameters have an influence on the MySQL database engine
              to create user buffer pools.
            </p></li><li><p>
              <code class="literal">SFNOLIM</code> and <code class="literal">HFNOLIM</code>
              should be at maximum 2048.
            </p></li><li><p>
              <code class="literal">NPROC</code> should be set to at least
              3000/4000 (depends on number of users).
            </p></li><li><p>
              The following formulas are recommended to calculate values
              for <code class="literal">SEMMSL</code>, <code class="literal">SEMMNS</code>,
              and <code class="literal">SEMMNU</code>:
            </p><pre class="programlisting">SEMMSL = 13
</pre><p>
              13 is what has been found to be the best for both Progress
              and MySQL.
            </p><pre class="programlisting">SEMMNS = SEMMSL × <em class="replaceable"><code>number of db servers to be run on the system</code></em>
</pre><p>
              Set <code class="literal">SEMMNS</code> to the value of
              <code class="literal">SEMMSL</code> multiplied by the number of
              database servers (maximum) that you are running on the
              system at one time.
            </p><pre class="programlisting">SEMMNU = SEMMNS
</pre><p>
              Set the value of <code class="literal">SEMMNU</code> to equal the
              value of <code class="literal">SEMMNS</code>. You could probably set
              this to 75% of <code class="literal">SEMMNS</code>, but this is a
              conservative estimate.
            </p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="os-2"></a>2.19.6. OS/2 Notes</h3></div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          We no longer test builds on OS/2. The notes in this section
          are provided for your information but may not work on your
          system.
        </p></div><p>
        MySQL uses quite a few open files. Because of this, you should
        add something like the following to your
        <code class="filename">CONFIG.SYS</code> file:
      </p><pre class="programlisting">SET EMXOPT=-c -n -h1024
</pre><p>
        If you do not do this, you may encounter the following error:
      </p><pre class="programlisting">File '<em class="replaceable"><code>xxxx</code></em>' not found (Errcode: 24)
</pre><p>
        When using MySQL with OS/2 Warp 3, FixPack 29 or above is
        required. With OS/2 Warp 4, FixPack 4 or above is required. This
        is a requirement of the Pthreads library. MySQL must be
        installed on a partition with a type that supports long file
        names, such as HPFS, FAT32, and so on.
      </p><p>
        The <span><strong class="command">INSTALL.CMD</strong></span> script must be run from
        OS/2's own <span><strong class="command">CMD.EXE</strong></span> and may not work with
        replacement shells such as <span><strong class="command">4OS2.EXE</strong></span>.
      </p><p>
        The <code class="filename">scripts/mysql-install-db</code> script has
        been renamed. It is called <code class="filename">install.cmd</code> and
        is a REXX script, which sets up the default MySQL security
        settings and creates the WorkPlace Shell icons for MySQL.
      </p><p>
        Dynamic module support is compiled in but not fully tested.
        Dynamic modules should be compiled using the Pthreads runtime
        library.
      </p><pre class="programlisting">gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
    -o example udf_example.c -L../lib -lmysqlclient udf_example.def
mv example.dll example.udf
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Due to limitations in OS/2, UDF module name stems must not
          exceed eight characters. Modules are stored in the
          <code class="filename">/mysql2/udf</code> directory; the
          <code class="literal">safe-mysqld.cmd</code> script puts this directory
          in the <code class="literal">BEGINLIBPATH</code> environment variable.
          When using UDF modules, specified extensions are ignored---it
          is assumed to be <code class="filename">.udf</code>. For example, in
          Unix, the shared module might be named
          <code class="filename">example.so</code> and you would load a function
          from it like this:
        </p></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE FUNCTION metaphon RETURNS STRING SONAME 'example.so';</code></strong>
</pre><p>
        In OS/2, the module would be named
        <code class="filename">example.udf</code>, but you would not specify the
        module extension:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE FUNCTION metaphon RETURNS STRING SONAME 'example';</code></strong>
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="environment-variables"></a>2.20. Environment Variables</h2></div></div></div><a class="indexterm" name="id1706317"></a><p>
      This section lists all the environment variables that are used
      directly or indirectly by MySQL. Most of these can also be found
      in other places in this manual.
    </p><p>
      Note that any options on the command line take precedence over
      values specified in option files and environment variables, and
      values in option files take precedence over values in environment
      variables.
    </p><p>
      In many cases, it is preferable to use an option file instead of
      environment variables to modify the behavior of MySQL. See
      <a href="programs.html#option-files" title="4.2.3.3. Using Option Files">Section 4.2.3.3, “Using Option Files”</a>.
    </p><a class="indexterm" name="id1706348"></a><a class="indexterm" name="id1706358"></a><a class="indexterm" name="id1706370"></a><a class="indexterm" name="id1706379"></a><a class="indexterm" name="id1706391"></a><a class="indexterm" name="id1706400"></a><a class="indexterm" name="id1706412"></a><a class="indexterm" name="id1706421"></a><a class="indexterm" name="id1706434"></a><a class="indexterm" name="id1706443"></a><a class="indexterm" name="id1706455"></a><a class="indexterm" name="id1706464"></a><a class="indexterm" name="id1706477"></a><a class="indexterm" name="id1706486"></a><a class="indexterm" name="id1706498"></a><a class="indexterm" name="id1706507"></a><a class="indexterm" name="id1706520"></a><a class="indexterm" name="id1706529"></a><a class="indexterm" name="id1706541"></a><a class="indexterm" name="id1706550"></a><a class="indexterm" name="id1706562"></a><a class="indexterm" name="id1706572"></a><a class="indexterm" name="id1706584"></a><a class="indexterm" name="id1706593"></a><a class="indexterm" name="id1706605"></a><a class="indexterm" name="id1706614"></a><a class="indexterm" name="id1706627"></a><a class="indexterm" name="id1706636"></a><a class="indexterm" name="id1706648"></a><a class="indexterm" name="id1706657"></a><a class="indexterm" name="id1706670"></a><a class="indexterm" name="id1706679"></a><a class="indexterm" name="id1706691"></a><a class="indexterm" name="id1706700"></a><a class="indexterm" name="id1706713"></a><a class="indexterm" name="id1706722"></a><a class="indexterm" name="id1706734"></a><a class="indexterm" name="id1706743"></a><a class="indexterm" name="id1706756"></a><a class="indexterm" name="id1706765"></a><a class="indexterm" name="id1706777"></a><a class="indexterm" name="id1706786"></a><a class="indexterm" name="id1706798"></a><a class="indexterm" name="id1706807"></a><a class="indexterm" name="id1706820"></a><a class="indexterm" name="id1706829"></a><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Variable</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">CXX</code></td><td>The name of your C++ compiler (for running
              <span><strong class="command">configure</strong></span>).</td></tr><tr><td><code class="literal">CC</code></td><td>The name of your C compiler (for running <span><strong class="command">configure</strong></span>).</td></tr><tr><td><code class="literal">CFLAGS</code></td><td>Flags for your C compiler (for running <span><strong class="command">configure</strong></span>).</td></tr><tr><td><code class="literal">CXXFLAGS</code></td><td>Flags for your C++ compiler (for running <span><strong class="command">configure</strong></span>).</td></tr><tr><td><code class="literal">DBI_USER</code></td><td>The default user name for Perl DBI.</td></tr><tr><td><code class="literal">DBI_TRACE</code></td><td>Trace options for Perl DBI.</td></tr><tr><td><code class="literal">HOME</code></td><td>The default path for the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> history file is
              <code class="filename">$HOME/.mysql_history</code>.</td></tr><tr><td><code class="literal">LD_RUN_PATH</code></td><td>Used to specify the location of <code class="filename">libmysqlclient.so</code>.</td></tr><tr><td><code class="literal">MYSQL_DEBUG</code></td><td>Debug trace options when debugging.</td></tr><tr><td><code class="literal">MYSQL_GROUP_SUFFIX</code></td><td>Option group suffix value (like specifying
              <a href="programs.html#option_general_defaults-group-suffix"><code class="option">--defaults-group-suffix</code></a>).</td></tr><tr><td><code class="literal">MYSQL_HISTFILE</code></td><td>The path to the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> history file. If this variable
              is set, its value overrides the default for
              <code class="filename">$HOME/.mysql_history</code>.</td></tr><tr><td><code class="literal">MYSQL_HOME</code></td><td>The path to the directory in which the server-specific
              <code class="filename">my.cnf</code> file resides (as of MySQL
              5.0.3).</td></tr><tr><td><code class="literal">MYSQL_HOST</code></td><td>The default host name used by the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command-line
              client.</td></tr><tr><td><code class="literal">MYSQL_PS1</code></td><td>The command prompt to use in the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> command-line
              client.</td></tr><tr><td><code class="literal">MYSQL_PWD</code></td><td>The default password when connecting to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>. Note
              that using this is insecure. See
              <a href="server-administration.html#password-security-user" title="5.5.6.2. End-User Guidelines for Password Security">Section 5.5.6.2, “End-User Guidelines for Password Security”</a>.</td></tr><tr><td><code class="literal">MYSQL_TCP_PORT</code></td><td>The default TCP/IP port number.</td></tr><tr><td><code class="literal">MYSQL_UNIX_PORT</code></td><td>The default Unix socket file name; used for connections to
              <code class="literal">localhost</code>.</td></tr><tr><td><code class="literal">PATH</code></td><td>Used by the shell to find MySQL programs.</td></tr><tr><td><code class="literal">TMPDIR</code></td><td>The directory where temporary files are created.</td></tr><tr><td><code class="literal">TZ</code></td><td>This should be set to your local time zone. See
              <a href="error-handling.html#timezone-problems" title="B.1.4.6. Time Zone Problems">Section B.1.4.6, “Time Zone Problems”</a>.</td></tr><tr><td><code class="literal">UMASK</code></td><td>The user-file creation mode when creating files. See note following
              table.</td></tr><tr><td><code class="literal">UMASK_DIR</code></td><td>The user-directory creation mode when creating directories. See note
              following table.</td></tr><tr><td><code class="literal">USER</code></td><td>The default user name on Windows and NetWare used when connecting to
              <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>.</td></tr></tbody></table></div><p>
      The <code class="literal">UMASK</code> and <code class="literal">UMASK_DIR</code>
      variables, despite their names, are used as modes, not masks:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If <code class="literal">UMASK</code> is set, <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
          uses <code class="literal">($UMASK | 0600)</code> as the mode for file
          creation, so that newly created files have a mode in the range
          from 0600 to 0666 (all values octal).
        </p></li><li><p>
          If <code class="literal">UMASK_DIR</code> is set,
          <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> uses <code class="literal">($UMASK_DIR |
          0700)</code> as the base mode for directory creation, which
          then is AND-ed with <code class="literal">~(~$UMASK &amp; 0666)</code>,
          so that newly created directories have a mode in the range
          from 0700 to 0777 (all values octal). The AND operation may
          remove read and write permissions from the directory mode, but
          not execute permissions.
        </p></li></ul></div><p>
      MySQL assumes that the value for <code class="literal">UMASK</code> or
      <code class="literal">UMASK_DIR</code> is in octal if it starts with a zero.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="perl-support"></a>2.21. Perl Installation Notes</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="installing.html#perl-installation">2.21.1. Installing Perl on Unix</a></span></dt><dt><span class="section"><a href="installing.html#activestate-perl">2.21.2. Installing ActiveState Perl on Windows</a></span></dt><dt><span class="section"><a href="installing.html#perl-support-problems">2.21.3. Problems Using the Perl <code class="literal">DBI</code>/<code class="literal">DBD</code>
        Interface</a></span></dt></dl></div><a class="indexterm" name="id1707412"></a><a class="indexterm" name="id1707425"></a><p>
      Perl support for MySQL is provided by means of the
      <code class="literal">DBI</code>/<code class="literal">DBD</code> client interface.
      The interface requires Perl 5.6.0, and 5.6.1 or later is
      preferred. DBI <span class="emphasis"><em>does not work</em></span> if you have an
      older version of Perl.
    </p><p>
      If you want to use transactions with Perl DBI, you need to have
      <code class="literal">DBD::mysql</code> 2.0900. If you are using the MySQL
      4.1 or newer client library, you must use
      <code class="literal">DBD::mysql</code> 2.9003 or newer. Support for
      server-side prepared statements requires
      <code class="literal">DBD::mysql</code> 3.0009 or newer.
    </p><p>
      Perl support is not included with MySQL distributions. You can
      obtain the necessary modules from
      <a href="http://search.cpan.org" target="_top">http://search.cpan.org</a> for Unix, or by using the
      ActiveState <span><strong class="command">ppm</strong></span> program on Windows. The
      following sections describe how to do this.
    </p><p>
      Perl support for MySQL must be installed if you want to run the
      MySQL benchmark scripts; see <a href="optimization.html#mysql-benchmarks" title="7.1.4. The MySQL Benchmark Suite">Section 7.1.4, “The MySQL Benchmark Suite”</a>.
      It is also required for the MySQL Cluster
      <span><strong class="command">ndb_size.pl</strong></span> utility; see
      <a href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="17.6.19. ndb_size.pl — NDBCLUSTER Size Requirement Estimator">Section 17.6.19, “<span><strong class="command">ndb_size.pl</strong></span> — NDBCLUSTER Size Requirement Estimator”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="perl-installation"></a>2.21.1. Installing Perl on Unix</h3></div></div></div><p>
        MySQL Perl support requires that you have installed MySQL client
        programming support (libraries and header files). Most
        installation methods install the necessary files. However, if
        you installed MySQL from RPM files on Linux, be sure that you've
        installed the developer RPM. The client programs are in the
        client RPM, but client programming support is in the developer
        RPM.
      </p><p>
        If you want to install Perl support, the files you need can be
        obtained from the CPAN (Comprehensive Perl Archive Network) at
        <a href="http://search.cpan.org" target="_top">http://search.cpan.org</a>.
      </p><p>
        The easiest way to install Perl modules on Unix is to use the
        <code class="literal">CPAN</code> module. For example:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>perl -MCPAN -e shell</code></strong>
cpan&gt; <strong class="userinput"><code>install DBI</code></strong>
cpan&gt; <strong class="userinput"><code>install DBD::mysql</code></strong>
</pre><p>
        The <code class="literal">DBD::mysql</code> installation runs a number of
        tests. These tests attempt to connect to the local MySQL server
        using the default user name and password. (The default user name
        is your login name on Unix, and <code class="literal">ODBC</code> on
        Windows. The default password is “<span class="quote">no password.</span>”) If
        you cannot connect to the server with those values (for example,
        if your account has a password), the tests fail. You can use
        <code class="literal">force install DBD::mysql</code> to ignore the failed
        tests.
      </p><p>
        <code class="literal">DBI</code> requires the
        <code class="literal">Data::Dumper</code> module. It may be installed; if
        not, you should install it before installing
        <code class="literal">DBI</code>.
      </p><p>
        It is also possible to download the module distributions in the
        form of compressed <span><strong class="command">tar</strong></span> archives and build the
        modules manually. For example, to unpack and build a DBI
        distribution, use a procedure such as this:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Unpack the distribution into the current directory:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gunzip &lt; DBI-<em class="replaceable"><code>VERSION</code></em>.tar.gz | tar xvf -</code></strong>
</pre><p>
            This command creates a directory named
            <code class="filename">DBI-<em class="replaceable"><code>VERSION</code></em></code>.
          </p></li><li><p>
            Change location into the top-level directory of the unpacked
            distribution:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd DBI-<em class="replaceable"><code>VERSION</code></em></code></strong>
</pre></li><li><p>
            Build the distribution and compile everything:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>perl Makefile.PL</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
shell&gt; <strong class="userinput"><code>make test</code></strong>
shell&gt; <strong class="userinput"><code>make install</code></strong>
</pre></li></ol></div><p>
        The <span><strong class="command">make test</strong></span> command is important because it
        verifies that the module is working. Note that when you run that
        command during the <code class="literal">DBD::mysql</code> installation to
        exercise the interface code, the MySQL server must be running or
        the test fails.
      </p><p>
        It is a good idea to rebuild and reinstall the
        <code class="literal">DBD::mysql</code> distribution whenever you install
        a new release of MySQL, particularly if you notice symptoms such
        as that all your <code class="literal">DBI</code> scripts fail after you
        upgrade MySQL.
      </p><p>
        If you do not have access rights to install Perl modules in the
        system directory or if you want to install local Perl modules,
        the following reference may be useful:
        <a href="http://servers.digitaldaze.com/extensions/perl/modules.html#modules" target="_top">http://servers.digitaldaze.com/extensions/perl/modules.html#modules</a>
      </p><p>
        Look under the heading “<span class="quote">Installing New Modules that
        Require Locally Installed Modules.</span>”
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="activestate-perl"></a>2.21.2. Installing ActiveState Perl on Windows</h3></div></div></div><a class="indexterm" name="id1707806"></a><a class="indexterm" name="id1707818"></a><a class="indexterm" name="id1707830"></a><p>
        On Windows, you should do the following to install the MySQL
        <code class="literal">DBD</code> module with ActiveState Perl:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Get ActiveState Perl from
            <a href="http://www.activestate.com/Products/ActivePerl/" target="_top">http://www.activestate.com/Products/ActivePerl/</a>
            and install it.
          </p></li><li><p>
            Open a console window (a “<span class="quote">DOS window</span>”).
          </p></li><li><p>
            If necessary, set the <code class="literal">HTTP_proxy</code>
            variable. For example, you might try a setting like this:
          </p><pre class="programlisting">set HTTP_proxy=my.proxy.com:3128
</pre></li><li><p>
            Start the PPM program:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>C:\perl\bin\ppm.pl</code></strong>
</pre></li><li><p>
            If you have not previously done so, install
            <code class="literal">DBI</code>:
          </p><pre class="programlisting">ppm&gt; install DBI
</pre></li><li><p>
            If this succeeds, run the following command:
          </p><pre class="programlisting">ppm&gt; <strong class="userinput"><code>install DBD-mysql</code></strong>
</pre></li></ol></div><p>
        This procedure should work with ActiveState Perl 5.6 or newer.
      </p><p>
        If you cannot get the procedure to work, you should install the
        MyODBC driver instead and connect to the MySQL server through
        ODBC:
      </p><pre class="programlisting">use DBI;
$dbh= DBI-&gt;connect("DBI:ODBC:$dsn",$user,$password) ||
  die "Got error $DBI::errstr when connecting to $dsn\n";
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="perl-support-problems"></a>2.21.3. Problems Using the Perl <code class="literal">DBI</code>/<code class="literal">DBD</code>
        Interface</h3></div></div></div><a class="indexterm" name="id1707994"></a><a class="indexterm" name="id1708006"></a><p>
        If Perl reports that it cannot find the
        <code class="filename">../mysql/mysql.so</code> module, the problem is
        probably that Perl cannot locate the
        <code class="filename">libmysqlclient.so</code> shared library. You
        should be able to fix this problem by one of the following
        methods:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Compile the <code class="literal">DBD::mysql</code> distribution with
            <code class="literal">perl Makefile.PL -static -config</code> rather
            than <code class="literal">perl Makefile.PL</code>.
          </p></li><li><p>
            Copy <code class="filename">libmysqlclient.so</code> to the directory
            where your other shared libraries are located (probably
            <code class="filename">/usr/lib</code> or <code class="filename">/lib</code>).
          </p></li><li><p>
            Modify the <code class="option">-L</code> options used to compile
            <code class="literal">DBD::mysql</code> to reflect the actual location
            of <code class="filename">libmysqlclient.so</code>.
          </p></li><li><p>
            On Linux, you can add the path name of the directory where
            <code class="filename">libmysqlclient.so</code> is located to the
            <code class="filename">/etc/ld.so.conf</code> file.
          </p></li><li><p>
            <a class="indexterm" name="id1708135"></a>

            <a class="indexterm" name="id1708144"></a>

            <a class="indexterm" name="id1708156"></a>

            <a class="indexterm" name="id1708165"></a>

            Add the path name of the directory where
            <code class="filename">libmysqlclient.so</code> is located to the
            <code class="literal">LD_RUN_PATH</code> environment variable. Some
            systems use <code class="literal">LD_LIBRARY_PATH</code> instead.
          </p></li></ul></div><p>
        Note that you may also need to modify the <code class="option">-L</code>
        options if there are other libraries that the linker fails to
        find. For example, if the linker cannot find
        <code class="literal">libc</code> because it is in
        <code class="filename">/lib</code> and the link command specifies
        <code class="option">-L/usr/lib</code>, change the <code class="option">-L</code>
        option to <code class="option">-L/lib</code> or add <code class="option">-L/lib</code>
        to the existing link command.
      </p><p>
        If you get the following errors from
        <code class="literal">DBD::mysql</code>, you are probably using
        <span><strong class="command">gcc</strong></span> (or using an old binary compiled with
        <span><strong class="command">gcc</strong></span>):
      </p><pre class="programlisting">/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</pre><p>
        Add <code class="option">-L/usr/lib/gcc-lib/... -lgcc</code> to the link
        command when the <code class="filename">mysql.so</code> library gets
        built (check the output from <span><strong class="command">make</strong></span> for
        <code class="filename">mysql.so</code> when you compile the Perl client).
        The <code class="option">-L</code> option should specify the path name of
        the directory where <code class="filename">libgcc.a</code> is located on
        your system.
      </p><p>
        Another cause of this problem may be that Perl and MySQL are not
        both compiled with <span><strong class="command">gcc</strong></span>. In this case, you can
        solve the mismatch by compiling both with
        <span><strong class="command">gcc</strong></span>.
      </p><p>
        You may see the following error from
        <code class="literal">DBD::mysql</code> when you run the tests:
      </p><pre class="programlisting">t/00base............install_driver(mysql) failed:
Can't load '../blib/arch/auto/DBD/mysql/mysql.so' for module DBD::mysql:
../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol:
uncompress at /usr/lib/perl5/5.00503/i586-linux/DynaLoader.pm line 169.
</pre><p>
        This means that you need to include the <code class="option">-lz</code>
        compression library on the link line. That can be done by
        changing the following line in the file
        <code class="filename">lib/DBD/mysql/Install.pm</code>:
      </p><pre class="programlisting">$sysliblist .= " -lm";
</pre><p>
        Change that line to:
      </p><pre class="programlisting">$sysliblist .= " -lm -lz";
</pre><p>
        After this, you <span class="emphasis"><em>must</em></span> run <span><strong class="command">make
        realclean</strong></span> and then proceed with the installation from
        the beginning.
      </p><p>
        If you want to install DBI on SCO, you have to edit the
        <code class="filename">Makefile</code> in
        DBI-<em class="replaceable"><code>xxx</code></em> and each subdirectory. Note
        that the following assumes <span><strong class="command">gcc</strong></span> 2.95.2 or
        newer:
      </p><pre class="programlisting">OLD:                                  NEW:
CC = cc                               CC = gcc
CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =

LD = ld                               LD = gcc -G -fpic
LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib

LD = ld                               LD = gcc -G -fpic
OPTIMISE = -Od                        OPTIMISE = -O1

OLD:
CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include

NEW:
CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include
</pre><p>
        These changes are necessary because the Perl dynaloader does not
        load the <code class="literal">DBI</code> modules if they were compiled
        with <span><strong class="command">icc</strong></span> or <span><strong class="command">cc</strong></span>.
      </p><p>
        If you want to use the Perl module on a system that does not
        support dynamic linking (such as SCO), you can generate a static
        version of Perl that includes <code class="literal">DBI</code> and
        <code class="literal">DBD::mysql</code>. The way this works is that you
        generate a version of Perl with the <code class="literal">DBI</code> code
        linked in and install it on top of your current Perl. Then you
        use that to build a version of Perl that additionally has the
        <code class="literal">DBD</code> code linked in, and install that.
      </p><p>
        On SCO, you must have the following environment variables set:
      </p><pre class="programlisting">LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib
</pre><p>
        Or:
      </p><pre class="programlisting">LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\
    /usr/progressive/lib:/usr/skunk/lib
LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\
    /usr/progressive/lib:/usr/skunk/lib
MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:\
    /usr/skunk/man:
</pre><p>
        First, create a Perl that includes a statically linked
        <code class="literal">DBI</code> module by running these commands in the
        directory where your <code class="literal">DBI</code> distribution is
        located:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>perl Makefile.PL -static -config</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
shell&gt; <strong class="userinput"><code>make install</code></strong>
shell&gt; <strong class="userinput"><code>make perl</code></strong>
</pre><p>
        Then you must install the new Perl. The output of <span><strong class="command">make
        perl</strong></span> indicates the exact <span><strong class="command">make</strong></span>
        command you need to execute to perform the installation. On SCO,
        this is <span><strong class="command">make -f Makefile.aperl inst_perl
        MAP_TARGET=perl</strong></span>.
      </p><p>
        Next, use the just-created Perl to create another Perl that also
        includes a statically linked <code class="literal">DBD::mysql</code> by
        running these commands in the directory where your
        <code class="literal">DBD::mysql</code> distribution is located:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>perl Makefile.PL -static -config</code></strong>
shell&gt; <strong class="userinput"><code>make</code></strong>
shell&gt; <strong class="userinput"><code>make install</code></strong>
shell&gt; <strong class="userinput"><code>make perl</code></strong>
</pre><p>
        Finally, you should install this new Perl. Again, the output of
        <span><strong class="command">make perl</strong></span> indicates the command to use.
      </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="introduction.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="tutorial.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 1. General Information </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 3. Tutorial</td></tr></table></div></body></html>
