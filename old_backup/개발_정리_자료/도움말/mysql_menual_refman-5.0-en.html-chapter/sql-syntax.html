<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Chapter 12. SQL Statement Syntax</title><link rel="stylesheet" href="mysql-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.69.1"><link rel="start" href="index.html" title="MySQL 5.0 Reference Manual"><link rel="up" href="index.html" title="MySQL 5.0 Reference Manual"><link rel="prev" href="functions.html" title="Chapter 11. Functions and Operators"><link rel="next" href="storage-engines.html" title="Chapter 13. Storage Engines"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 12. SQL Statement Syntax</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="functions.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="storage-engines.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="sql-syntax"></a>Chapter 12. SQL Statement Syntax</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="sql-syntax.html#sql-syntax-data-definition">12.1. Data Definition Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#alter-database">12.1.1. <code class="literal">ALTER DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-function">12.1.2. <code class="literal">ALTER FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-procedure">12.1.3. <code class="literal">ALTER PROCEDURE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-table">12.1.4. <code class="literal">ALTER TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-view">12.1.5. <code class="literal">ALTER VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-database">12.1.6. <code class="literal">CREATE DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-function">12.1.7. <code class="literal">CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-index">12.1.8. <code class="literal">CREATE INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-procedure">12.1.9. <code class="literal">CREATE PROCEDURE</code> and
      <code class="literal">CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-table">12.1.10. <code class="literal">CREATE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-trigger">12.1.11. <code class="literal">CREATE TRIGGER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-view">12.1.12. <code class="literal">CREATE VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-database">12.1.13. <code class="literal">DROP DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-function">12.1.14. <code class="literal">DROP FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-index">12.1.15. <code class="literal">DROP INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-procedure">12.1.16. <code class="literal">DROP PROCEDURE</code> and
      <code class="literal">DROP FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-table">12.1.17. <code class="literal">DROP TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-trigger">12.1.18. <code class="literal">DROP TRIGGER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-view">12.1.19. <code class="literal">DROP VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-table">12.1.20. <code class="literal">RENAME TABLE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-data-manipulation">12.2. Data Manipulation Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#call">12.2.1. <code class="literal">CALL</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#delete">12.2.2. <code class="literal">DELETE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#do">12.2.3. <code class="literal">DO</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#handler">12.2.4. <code class="literal">HANDLER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert">12.2.5. <code class="literal">INSERT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-data">12.2.6. <code class="literal">LOAD DATA INFILE</code>
      Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replace">12.2.7. <code class="literal">REPLACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#select">12.2.8. <code class="literal">SELECT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#subqueries">12.2.9. Subquery Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#truncate">12.2.10. <code class="literal">TRUNCATE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#update">12.2.11. <code class="literal">UPDATE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-utility">12.3. MySQL Utility Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#describe">12.3.1. <code class="literal">DESCRIBE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#explain">12.3.2. <code class="literal">EXPLAIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#help">12.3.3. <code class="literal">HELP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#use">12.3.4. <code class="literal">USE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-transactions">12.4. MySQL Transactional and Locking Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#commit">12.4.1. <code class="literal">START TRANSACTION</code>,
      <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#cannot-roll-back">12.4.2. Statements That Cannot Be Rolled Back</a></span></dt><dt><span class="section"><a href="sql-syntax.html#implicit-commit">12.4.3. Statements That Cause an Implicit Commit</a></span></dt><dt><span class="section"><a href="sql-syntax.html#savepoint">12.4.4. <code class="literal">SAVEPOINT</code> and
      <code class="literal">ROLLBACK TO
      SAVEPOINT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#lock-tables">12.4.5. <code class="literal">LOCK TABLES</code> and
      <code class="literal">UNLOCK
      TABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-transaction">12.4.6. <code class="literal">SET TRANSACTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#xa">12.4.7. XA Transactions</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-server-administration">12.5. Database Administration Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#account-management-sql">12.5.1. Account Management Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#table-maintenance-sql">12.5.2. Table Maintenance Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#plugin-sql">12.5.3. User-Defined Function Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-option">12.5.4. <code class="literal">SET</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show">12.5.5. <code class="literal">SHOW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#other-administrative-sql">12.5.6. Other Administrative Statements</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-replication">12.6. Replication Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#replication-master-sql">12.6.1. SQL Statements for Controlling Master Servers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replication-slave-sql">12.6.2. SQL Statements for Controlling Slave Servers</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-prepared-statements">12.7. SQL Syntax for Prepared Statements</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#prepare">12.7.1. <code class="literal">PREPARE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#execute">12.7.2. <code class="literal">EXECUTE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#deallocate-prepare">12.7.3. <code class="literal">DEALLOCATE PREPARE</code> Syntax</a></span></dt></dl></dd><dt><span class="section"><a href="sql-syntax.html#sql-syntax-compound-statements">12.8. MySQL Compound-Statement Syntax</a></span></dt><dd><dl><dt><span class="section"><a href="sql-syntax.html#begin-end">12.8.1. <code class="literal">BEGIN ... END</code> Compound Statement Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#declare">12.8.2. <code class="literal">DECLARE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#variables-in-stored-programs">12.8.3. Variables in Stored Programs</a></span></dt><dt><span class="section"><a href="sql-syntax.html#conditions-and-handlers">12.8.4. Conditions and Handlers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#cursors">12.8.5. Cursors</a></span></dt><dt><span class="section"><a href="sql-syntax.html#flow-control-constructs">12.8.6. Flow Control Constructs</a></span></dt><dt><span class="section"><a href="sql-syntax.html#return">12.8.7. <code class="literal">RETURN</code> Syntax</a></span></dt></dl></dd></dl></div><p>
    This chapter describes the syntax for the SQL statements supported
    by MySQL.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-data-definition"></a>12.1. Data Definition Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#alter-database">12.1.1. <code class="literal">ALTER DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-function">12.1.2. <code class="literal">ALTER FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-procedure">12.1.3. <code class="literal">ALTER PROCEDURE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-table">12.1.4. <code class="literal">ALTER TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#alter-view">12.1.5. <code class="literal">ALTER VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-database">12.1.6. <code class="literal">CREATE DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-function">12.1.7. <code class="literal">CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-index">12.1.8. <code class="literal">CREATE INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-procedure">12.1.9. <code class="literal">CREATE PROCEDURE</code> and
      <code class="literal">CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-table">12.1.10. <code class="literal">CREATE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-trigger">12.1.11. <code class="literal">CREATE TRIGGER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#create-view">12.1.12. <code class="literal">CREATE VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-database">12.1.13. <code class="literal">DROP DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-function">12.1.14. <code class="literal">DROP FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-index">12.1.15. <code class="literal">DROP INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-procedure">12.1.16. <code class="literal">DROP PROCEDURE</code> and
      <code class="literal">DROP FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-table">12.1.17. <code class="literal">DROP TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-trigger">12.1.18. <code class="literal">DROP TRIGGER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-view">12.1.19. <code class="literal">DROP VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-table">12.1.20. <code class="literal">RENAME TABLE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-database"></a>12.1.1. <code class="literal">ALTER DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2061390"></a><a class="indexterm" name="id2061399"></a><a class="indexterm" name="id2061408"></a><a class="indexterm" name="id2061420"></a><a class="indexterm" name="id2061432"></a><a class="indexterm" name="id2061445"></a><pre class="programlisting">ALTER {DATABASE | SCHEMA} [<em class="replaceable"><code>db_name</code></em>]
    <em class="replaceable"><code>alter_specification</code></em> ...

<em class="replaceable"><code>alter_specification</code></em>:
    [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em>
  | [DEFAULT] COLLATE [=] <em class="replaceable"><code>collation_name</code></em>
</pre><p>
      <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER DATABASE</code></a> enables you to
      change the overall characteristics of a database. These
      characteristics are stored in the <code class="filename">db.opt</code> file
      in the database directory. To use <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER
      DATABASE</code></a>, you need the
      <a href="server-administration.html#priv_alter"><code class="literal">ALTER</code></a> privilege on the database.
      <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER
      SCHEMA</code></a> is a synonym for <a href="sql-syntax.html#alter-database" title="12.1.1. ALTER DATABASE Syntax"><code class="literal">ALTER
      DATABASE</code></a> as of MySQL 5.0.2.
    </p><p>
      The <code class="literal">CHARACTER SET</code> clause changes the default
      database character set. The <code class="literal">COLLATE</code> clause
      changes the default database collation. <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>,
      discusses character set and collation names.
    </p><p>
      You can see what character sets and collations are available
      using, respectively, the <a href="sql-syntax.html#show-character-set" title="12.5.5.3. SHOW CHARACTER SET Syntax"><code class="literal">SHOW CHARACTER
      SET</code></a> and <a href="sql-syntax.html#show-collation" title="12.5.5.4. SHOW COLLATION Syntax"><code class="literal">SHOW COLLATION</code></a>
      statements. See <a href="sql-syntax.html#show-character-set" title="12.5.5.3. SHOW CHARACTER SET Syntax">Section 12.5.5.3, “<code class="literal">SHOW CHARACTER SET</code> Syntax”</a>, and
      <a href="sql-syntax.html#show-collation" title="12.5.5.4. SHOW COLLATION Syntax">Section 12.5.5.4, “<code class="literal">SHOW COLLATION</code> Syntax”</a>, for more information.
    </p><p>
      The database name can be omitted, in which case the statement
      applies to the default database.
    </p><p class="mnmas"><b>MySQL Enterprise</b>
        In a production environment, alteration of a database is not a
        common occurrence and may indicate a security breach. Advisors
        provided as part of the MySQL Enterprise Monitor automatically
        alert you when data definition statements are issued. For more
        information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-function"></a>12.1.2. <code class="literal">ALTER FUNCTION</code> Syntax</h3></div></div></div><a class="indexterm" name="id2061638"></a><pre class="programlisting">ALTER FUNCTION <em class="replaceable"><code>func_name</code></em> [<em class="replaceable"><code>characteristic</code></em> ...]

<em class="replaceable"><code>characteristic</code></em>:
    { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER }
  | COMMENT '<em class="replaceable"><code>string</code></em>'
</pre><p>
      This statement can be used to change the characteristics of a
      stored function. More than one change may be specified in an
      <a href="sql-syntax.html#alter-function" title="12.1.2. ALTER FUNCTION Syntax"><code class="literal">ALTER FUNCTION</code></a> statement. However,
      you cannot change the parameters or body of a stored function
      using this statement; to make such changes, you must drop and
      re-create the function using <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP
      FUNCTION</code></a> and <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE
      FUNCTION</code></a>.
    </p><p>
      As of MySQL 5.0.3, you must have the <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER
      ROUTINE</code></a> privilege for the function. (That privilege is
      granted automatically to the function creator.) If binary logging
      is enabled, the <a href="sql-syntax.html#alter-function" title="12.1.2. ALTER FUNCTION Syntax"><code class="literal">ALTER FUNCTION</code></a>
      statement might also require the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege, as described in
      <a href="stored-programs-views.html#stored-programs-logging" title="18.5. Binary Logging of Stored Programs">Section 18.5, “Binary Logging of Stored Programs”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-procedure"></a>12.1.3. <code class="literal">ALTER PROCEDURE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2061770"></a><pre class="programlisting">ALTER PROCEDURE <em class="replaceable"><code>proc_name</code></em> [<em class="replaceable"><code>characteristic</code></em> ...]

<em class="replaceable"><code>characteristic</code></em>:
    { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER }
  | COMMENT '<em class="replaceable"><code>string</code></em>'
</pre><p>
      This statement can be used to change the characteristics of a
      stored procedure. More than one change may be specified in an
      <a href="sql-syntax.html#alter-procedure" title="12.1.3. ALTER PROCEDURE Syntax"><code class="literal">ALTER PROCEDURE</code></a> statement. However,
      you cannot change the parameters or body of a stored procedure
      using this statement; to make such changes, you must drop and
      re-create the procedure using <a href="sql-syntax.html#drop-procedure" title="12.1.16. DROP PROCEDURE and
      DROP FUNCTION Syntax"><code class="literal">DROP
      PROCEDURE</code></a> and <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE
      PROCEDURE</code></a>.
    </p><p>
      As of MySQL 5.0.3, you must have the <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER
      ROUTINE</code></a> privilege for the procedure. (That privilege is
      granted automatically to the procedure creator.)
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-table"></a>12.1.4. <code class="literal">ALTER TABLE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2061882"></a><a class="indexterm" name="id2061891"></a><a class="indexterm" name="id2061903"></a><pre class="programlisting">ALTER [IGNORE] TABLE <em class="replaceable"><code>tbl_name</code></em>
    <em class="replaceable"><code>alter_specification</code></em> [, <em class="replaceable"><code>alter_specification</code></em>] ...

<em class="replaceable"><code>alter_specification</code></em>:
    <em class="replaceable"><code>table_options</code></em>
  | ADD [COLUMN] <em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
        [FIRST | AFTER <em class="replaceable"><code>col_name</code></em> ]
  | ADD [COLUMN] (<em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>,...)
  | ADD {INDEX|KEY} [<em class="replaceable"><code>index_name</code></em>]
        [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_type</code></em>]
  | ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] PRIMARY KEY
        [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_type</code></em>]
  | ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]]
        UNIQUE [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>]
        [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_type</code></em>]
  | ADD [FULLTEXT|SPATIAL] [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>]
        (<em class="replaceable"><code>index_col_name</code></em>,...) [<em class="replaceable"><code>index_type</code></em>]
  | ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]]
        FOREIGN KEY [<em class="replaceable"><code>index_name</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
        <em class="replaceable"><code>reference_definition</code></em>
  | ALTER [COLUMN] <em class="replaceable"><code>col_name</code></em> {SET DEFAULT <em class="replaceable"><code>literal</code></em> | DROP DEFAULT}
  | CHANGE [COLUMN] <em class="replaceable"><code>old_col_name</code></em> <em class="replaceable"><code>new_col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
        [FIRST|AFTER <em class="replaceable"><code>col_name</code></em>]
  | MODIFY [COLUMN] <em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
        [FIRST | AFTER <em class="replaceable"><code>col_name</code></em>]
  | DROP [COLUMN] <em class="replaceable"><code>col_name</code></em>
  | DROP PRIMARY KEY
  | DROP {INDEX|KEY} <em class="replaceable"><code>index_name</code></em>
  | DROP FOREIGN KEY <em class="replaceable"><code>fk_symbol</code></em>
  | DISABLE KEYS
  | ENABLE KEYS
  | RENAME [TO] <em class="replaceable"><code>new_tbl_name</code></em>
  | ORDER BY <em class="replaceable"><code>col_name</code></em> [, <em class="replaceable"><code>col_name</code></em>] ...
  | CONVERT TO CHARACTER SET <em class="replaceable"><code>charset_name</code></em> [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em> [COLLATE [=] <em class="replaceable"><code>collation_name</code></em>]
  | DISCARD TABLESPACE
  | IMPORT TABLESPACE

<em class="replaceable"><code>index_col_name</code></em>:
    <em class="replaceable"><code>col_name</code></em> [(<em class="replaceable"><code>length</code></em>)] [ASC | DESC]

<em class="replaceable"><code>index_type</code></em>:
    USING {BTREE | HASH | RTREE}

<em class="replaceable"><code>table_options</code></em>:
    <em class="replaceable"><code>table_option</code></em> [[,] <em class="replaceable"><code>table_option</code></em>] ...
</pre><p>
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> enables you to change
      the structure of an existing table. For example, you can add or
      delete columns, create or destroy indexes, change the type of
      existing columns, or rename columns or the table itself. You can
      also change the comment for the table and type of the table.
    </p><p>
      The syntax for many of the allowable alterations is similar to
      clauses of the <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
      statement. See <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>, for more
      information.
    </p><p>
      Some operations may result in warnings if attempted on a table for
      which the storage engine does not support the operation. These
      warnings can be displayed with <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax"><code class="literal">SHOW
      WARNINGS</code></a>. See <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p><p>
      If you use <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> to change a
      column specification but <code class="literal">DESCRIBE
      <em class="replaceable"><code>tbl_name</code></em></code> indicates that your
      column was not changed, it is possible that MySQL ignored your
      modification for one of the reasons described in
      <a href="sql-syntax.html#silent-column-changes" title="12.1.10.1. Silent Column Specification Changes">Section 12.1.10.1, “Silent Column Specification Changes”</a>.
    </p><p>
      In most cases, <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> works by
      making a temporary copy of the original table. The alteration is
      performed on the copy, and then the original table is deleted and
      the new one is renamed. While <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
      TABLE</code></a> is executing, the original table is readable by
      other sessions. Updates and writes to the table are stalled until
      the new table is ready, and then are automatically redirected to
      the new table without any failed updates. The temporary table is
      created in the database directory of the new table. This can be
      different from the database directory of the original table if
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> is renaming the table
      to a different database.
    </p><p>
      If you use <code class="literal">ALTER TABLE
      <em class="replaceable"><code>tbl_name</code></em> RENAME TO
      <em class="replaceable"><code>new_tbl_name</code></em></code> without any
      other options, MySQL simply renames any files that correspond to
      the table <em class="replaceable"><code>tbl_name</code></em>. (You can also use
      the <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a> statement to
      rename tables. See <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax">Section 12.1.20, “<code class="literal">RENAME TABLE</code> Syntax”</a>.) Any privileges
      granted specifically for the renamed table are not migrated to the
      new name. They must be changed manually.
    </p><p>
      If you use any option to <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
      TABLE</code></a> other than <code class="literal">RENAME</code>, MySQL always
      creates a temporary table, even if the data wouldn't strictly need
      to be copied (such as when you change the name of a column). For
      <code class="literal">MyISAM</code> tables, you can speed up the index
      re-creation operation (which is the slowest part of the alteration
      process) by setting the
      <a href="server-administration.html#sysvar_myisam_sort_buffer_size"><code class="literal">myisam_sort_buffer_size</code></a> system
      variable to a high value.
    </p><p>
      For information on troubleshooting <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
      TABLE</code></a>, see <a href="error-handling.html#alter-table-problems" title="B.1.7.1. Problems with ALTER TABLE">Section B.1.7.1, “Problems with <code class="literal">ALTER TABLE</code>”</a>.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To use <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>, you need
          <a href="server-administration.html#priv_alter"><code class="literal">ALTER</code></a>,
          <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a>, and
          <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a> privileges for the
          table.
        </p></li><li><p>
          <code class="literal">IGNORE</code> is a MySQL extension to standard
          SQL. It controls how <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
          TABLE</code></a> works if there are duplicates on unique keys
          in the new table or if warnings occur when strict mode is
          enabled. If <code class="literal">IGNORE</code> is not specified, the
          copy is aborted and rolled back if duplicate-key errors occur.
          If <code class="literal">IGNORE</code> is specified, only the first row
          is used of rows with duplicates on a unique key, The other
          conflicting rows are deleted. Incorrect values are truncated
          to the closest matching acceptable value.
        </p></li><li><p>
          <em class="replaceable"><code>table_option</code></em> signifies a table
          option of the kind that can be used in the
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement, such as
          <code class="literal">ENGINE</code>, <code class="literal">AUTO_INCREMENT</code>,
          or <code class="literal">AVG_ROW_LENGTH</code>.
          (<a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>, lists all table options.)
          However, <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> ignores
          the <code class="literal">DATA DIRECTORY</code> and <code class="literal">INDEX
          DIRECTORY</code> table options.
        </p><p>
          For example, to convert a table to be an
          <code class="literal">InnoDB</code> table, use this statement:
        </p><pre class="programlisting">ALTER TABLE t1 ENGINE = InnoDB;
</pre><p>
          The outcome of attempting to change a table's storage engine
          is affected by whether the desired storage engine is available
          and the setting of the
          <a href="server-administration.html#sqlmode_no_engine_substitution"><code class="literal">NO_ENGINE_SUBSTITUTION</code></a> SQL
          mode, as described in <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
        </p><p>
          As of MySQL 5.0.23, to prevent inadvertent loss of data,
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> cannot be used to
          change the storage engine of a table to
          <code class="literal">MERGE</code> or <code class="literal">BLACKHOLE</code>.
        </p><p>
          To change the value of the <code class="literal">AUTO_INCREMENT</code>
          counter to be used for new rows, do this:
        </p><pre class="programlisting">ALTER TABLE t2 AUTO_INCREMENT = <em class="replaceable"><code>value</code></em>;
</pre><p>
          You cannot reset the counter to a value less than or equal to
          any that have already been used. For
          <code class="literal">MyISAM</code>, if the value is less than or equal
          to the maximum value currently in the
          <code class="literal">AUTO_INCREMENT</code> column, the value is reset
          to the current maximum plus one. For
          <code class="literal">InnoDB</code>, you can use <code class="literal">ALTER TABLE
          ... AUTO_INCREMENT =
          <em class="replaceable"><code>value</code></em></code> as of MySQL 5.0.3,
          but <span class="emphasis"><em>if the value is less than the current maximum
          value in the column, no error occurs and the current sequence
          value is not changed.</em></span>
        </p></li><li><p>
          You can issue multiple <code class="literal">ADD</code>,
          <code class="literal">ALTER</code>, <code class="literal">DROP</code>, and
          <code class="literal">CHANGE</code> clauses in a single
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement,
          separated by commas. This is a MySQL extension to standard
          SQL, which allows only one of each clause per
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement. For
          example, to drop multiple columns in a single statement, do
          this:
        </p><pre class="programlisting">ALTER TABLE t2 DROP COLUMN c, DROP COLUMN d;
</pre></li><li><p>
          <code class="literal">CHANGE <em class="replaceable"><code>col_name</code></em></code>,
          <code class="literal">DROP <em class="replaceable"><code>col_name</code></em></code>,
          and <a href="sql-syntax.html#drop-index" title="12.1.15. DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a> are MySQL
          extensions to standard SQL.
        </p></li><li><p>
          <code class="literal">MODIFY</code> is an Oracle extension to
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>.
        </p></li><li><p>
          The word <code class="literal">COLUMN</code> is optional and can be
          omitted.
        </p></li><li><p>
          <em class="replaceable"><code>column_definition</code></em> clauses use the
          same syntax for <code class="literal">ADD</code> and
          <code class="literal">CHANGE</code> as for <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
          TABLE</code></a>. See <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
        </p></li><li><p>
          You can rename a column using a <code class="literal">CHANGE
          <em class="replaceable"><code>old_col_name</code></em>
          <em class="replaceable"><code>new_col_name</code></em>
          <em class="replaceable"><code>column_definition</code></em></code> clause.
          To do so, specify the old and new column names and the
          definition that the column currently has. For example, to
          rename an <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INTEGER</code></a> column from
          <code class="literal">a</code> to <code class="literal">b</code>, you can do this:
        </p><pre class="programlisting">ALTER TABLE t1 CHANGE a b INTEGER;
</pre><p>
          If you want to change a column's type but not the name,
          <code class="literal">CHANGE</code> syntax still requires an old and new
          column name, even if they are the same. For example:
        </p><pre class="programlisting">ALTER TABLE t1 CHANGE b b BIGINT NOT NULL;
</pre><p>
          You can also use <code class="literal">MODIFY</code> to change a
          column's type without renaming it:
        </p><pre class="programlisting">ALTER TABLE t1 MODIFY b BIGINT NOT NULL;
</pre><p>
          When you use <code class="literal">CHANGE</code> or
          <code class="literal">MODIFY</code>,
          <em class="replaceable"><code>column_definition</code></em> must include the
          data type and all attributes that should apply to the new
          column, other than index attributes such as <code class="literal">PRIMARY
          KEY</code> or <code class="literal">UNIQUE</code>. Attributes present
          in the original definition but not specified for the new
          definition are not carried forward. Suppose a column
          <code class="literal">col1</code> is defined as <code class="literal">INT UNSIGNED
          DEFAULT 1 COMMENT 'my column'</code> and you modify the
          column as follows:
        </p><pre class="programlisting">ALTER TABLE t1 MODIFY col1 BIGINT;
</pre><p>
          The resulting column will be defined as
          <code class="literal">BIGINT</code>, but will not include the attributes
          <code class="literal">UNSIGNED DEFAULT 1 COMMENT 'my column'</code>. To
          retain them, the statement should be:

</p><pre class="programlisting">ALTER TABLE t1 MODIFY col1 BIGINT UNSIGNED DEFAULT 1 COMMENT 'my column';
</pre><p>
        </p></li><li><p>
          When you change a data type using <code class="literal">CHANGE</code> or
          <code class="literal">MODIFY</code>, MySQL tries to convert existing
          column values to the new type as well as possible.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            This conversion may result in alteration of data. For
            example, if you shorten a string column, values may be
            truncated. To prevent the operation from succeeding if
            conversions to the new data type would result in loss of
            data, enable strict SQL mode before using
            <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> (see
            <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>).
          </p></div></li><li><p>
          To add a column at a specific position within a table row, use
          <code class="literal">FIRST</code> or <code class="literal">AFTER
          <em class="replaceable"><code>col_name</code></em></code>. The default is
          to add the column last. You can also use
          <code class="literal">FIRST</code> and <code class="literal">AFTER</code> in
          <code class="literal">CHANGE</code> or <code class="literal">MODIFY</code>
          operations to reorder columns within a table.
        </p></li><li><p>
          <a class="indexterm" name="id2062980"></a>

          <a class="indexterm" name="id2062989"></a>

          <a class="indexterm" name="id2063002"></a>

          <a class="indexterm" name="id2063014"></a>

          <a class="indexterm" name="id2063026"></a>

          <code class="literal">ALTER ... SET DEFAULT</code> or <code class="literal">ALTER ...
          DROP DEFAULT</code> specify a new default value for a
          column or remove the old default value, respectively. If the
          old default is removed and the column can be
          <code class="literal">NULL</code>, the new default is
          <code class="literal">NULL</code>. If the column cannot be
          <code class="literal">NULL</code>, MySQL assigns a default value as
          described in <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2063082"></a>

          <a class="indexterm" name="id2063091"></a>

          <a class="indexterm" name="id2063103"></a>

          <a href="sql-syntax.html#drop-index" title="12.1.15. DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a> removes an index.
          This is a MySQL extension to standard SQL. See
          <a href="sql-syntax.html#drop-index" title="12.1.15. DROP INDEX Syntax">Section 12.1.15, “<code class="literal">DROP INDEX</code> Syntax”</a>. If you are unsure of the index
          name, use <code class="literal">SHOW INDEX FROM
          <em class="replaceable"><code>tbl_name</code></em></code>.
        </p></li><li><p>
          If columns are dropped from a table, the columns are also
          removed from any index of which they are a part. If all
          columns that make up an index are dropped, the index is
          dropped as well. If you use <code class="literal">CHANGE</code> or
          <code class="literal">MODIFY</code> to shorten a column for which an
          index exists on the column, and the resulting column length is
          less than the index length, MySQL shortens the index
          automatically.
        </p></li><li><p>
          If a table contains only one column, the column cannot be
          dropped. If what you intend is to remove the table, use
          <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> instead.
        </p></li><li><p>
          <a class="indexterm" name="id2063180"></a>

          <a class="indexterm" name="id2063189"></a>

          <a class="indexterm" name="id2063202"></a>

          <code class="literal">DROP PRIMARY KEY</code> drops the primary key. If
          there is no primary key, an error occurs.
        </p><a class="indexterm" name="id2063222"></a><a class="indexterm" name="id2063230"></a><p>
          If you add a <code class="literal">UNIQUE INDEX</code> or
          <code class="literal">PRIMARY KEY</code> to a table, it is stored before
          any nonunique index so that MySQL can detect duplicate keys as
          early as possible.
        </p></li><li><p>
          Some storage engines allow you to specify an index type when
          creating an index. The syntax for the
          <em class="replaceable"><code>index_type</code></em> specifier is
          <code class="literal">USING <em class="replaceable"><code>type_name</code></em></code>.
          For details about <code class="literal">USING</code>, see
          <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax">Section 12.1.8, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
        </p></li><li><p>
          After an <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement,
          it may be necessary to run <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE
          TABLE</code></a> to update index cardinality information. See
          <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax">Section 12.5.5.18, “<code class="literal">SHOW INDEX</code> Syntax”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2063318"></a>

          <code class="literal">ORDER BY</code> enables you to create the new
          table with the rows in a specific order. Note that the table
          does not remain in this order after inserts and deletes. This
          option is useful primarily when you know that you are mostly
          to query the rows in a certain order most of the time. By
          using this option after major changes to the table, you might
          be able to get higher performance. In some cases, it might
          make sorting easier for MySQL if the table is in order by the
          column that you want to order it by later.
        </p><p>
          <code class="literal">ORDER BY</code> syntax allows for one or more
          column names to be specified for sorting, each of which
          optionally can be followed by <code class="literal">ASC</code> or
          <code class="literal">DESC</code> to indicate ascending or descending
          sort order, respectively. The default is ascending order. Only
          column names are allowed as sort criteria; arbitrary
          expressions are not allowed.
        </p><p>
          <code class="literal">ORDER BY</code> does not make sense for
          <code class="literal">InnoDB</code> tables that contain a user-defined
          clustered index (<code class="literal">PRIMARY KEY</code> or
          <code class="literal">NOT NULL UNIQUE</code> index).
          <code class="literal">InnoDB</code> always orders table rows according
          to such an index if one is present. The same is true for
          <code class="literal">BDB</code> tables that contain a user-defined
          <code class="literal">PRIMARY KEY</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2063415"></a>

          <a class="indexterm" name="id2063424"></a>

          <a class="indexterm" name="id2063436"></a>

          If you use <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on a
          <code class="literal">MyISAM</code> table, all nonunique indexes are
          created in a separate batch (as for
          <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>). This should make
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> much faster when
          you have many indexes.
        </p><p>
          This feature can be activated explicitly for a
          <code class="literal">MyISAM</code> table. <code class="literal">ALTER TABLE ...
          DISABLE KEYS</code> tells MySQL to stop updating nonunique
          indexes. <code class="literal">ALTER TABLE ... ENABLE KEYS</code> then
          should be used to re-create missing indexes. MySQL does this
          with a special algorithm that is much faster than inserting
          keys one by one, so disabling keys before performing bulk
          insert operations should give a considerable speedup. Using
          <code class="literal">ALTER TABLE ... DISABLE KEYS</code> requires the
          <a href="server-administration.html#priv_index"><code class="literal">INDEX</code></a> privilege in addition to
          the privileges mentioned earlier.
        </p><p>
          While the nonunique indexes are disabled, they are ignored for
          statements such as <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and
          <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> that otherwise would
          use them.
        </p></li><li><p>
          If <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> for an
          <code class="literal">InnoDB</code> table results in changes to column
          values (for example, because a column is truncated),
          <code class="literal">InnoDB</code>'s <code class="literal">FOREIGN KEY</code>
          constraint checks do not notice possible violations caused by
          changing the values.
        </p></li><li><p>
          <a class="indexterm" name="id2063574"></a>

          <a class="indexterm" name="id2063583"></a>

          The <code class="literal">FOREIGN KEY</code> and
          <code class="literal">REFERENCES</code> clauses are supported by the
          <code class="literal">InnoDB</code> storage engine, which implements
          <code class="literal">ADD [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]]
          FOREIGN KEY (...) REFERENCES ... (...)</code>. See
          <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.2.4.4. FOREIGN KEY Constraints">Section 13.2.4.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>. For other
          storage engines, the clauses are parsed but ignored. The
          <code class="literal">CHECK</code> clause is parsed but ignored by all
          storage engines. See <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>. The
          reason for accepting but ignoring syntax clauses is for
          compatibility, to make it easier to port code from other SQL
          servers, and to run applications that create tables with
          references. See <a href="introduction.html#differences-from-ansi" title="1.7.5. MySQL Differences from Standard SQL">Section 1.7.5, “MySQL Differences from Standard SQL”</a>.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            The inline <code class="literal">REFERENCES</code> specifications
            where the references are defined as part of the column
            specification are silently ignored by
            <code class="literal">InnoDB</code>. InnoDB only accepts
            <code class="literal">REFERENCES</code> clauses defined as part of a
            separate <code class="literal">FOREIGN KEY</code> specification.
          </p></div></li><li><p>
          <a class="indexterm" name="id2063682"></a>

          <a class="indexterm" name="id2063691"></a>

          <a class="indexterm" name="id2063704"></a>

          <code class="literal">InnoDB</code> supports the use of
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> to drop foreign
          keys:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> DROP FOREIGN KEY <em class="replaceable"><code>fk_symbol</code></em>;
</pre><p>
          For more information, see
          <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.2.4.4. FOREIGN KEY Constraints">Section 13.2.4.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>.
        </p></li><li><p>
          You cannot add a foreign key and drop a foreign key in
          separate clauses of a single <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
          TABLE</code></a> statement. You must use separate statements.
        </p></li><li><p>
          <a class="indexterm" name="id2063772"></a>

          <a class="indexterm" name="id2063781"></a>

          For an <code class="literal">InnoDB</code> table that is created with
          its own tablespace in an <code class="filename">.ibd</code> file, that
          file can be discarded and imported. To discard the
          <code class="filename">.ibd</code> file, use this statement:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> DISCARD TABLESPACE;
</pre><p>
          This deletes the current <code class="filename">.ibd</code> file, so be
          sure that you have a backup first. Attempting to access the
          table while the tablespace file is discarded results in an
          error.
        </p><p>
          To import the backup <code class="filename">.ibd</code> file back into
          the table, copy it into the database directory, and then issue
          this statement:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> IMPORT TABLESPACE;
</pre><p>
          See <a href="storage-engines.html#multiple-tablespaces" title="13.2.2.1. Using Per-Table Tablespaces">Section 13.2.2.1, “Using Per-Table Tablespaces”</a>.
        </p></li><li><p>
          Pending <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
          statements are lost if a table is write locked and
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> is used to modify
          the table structure.
        </p></li><li><p>
          <a class="indexterm" name="id2063886"></a>

          If you want to change the table default character set and all
          character columns (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>) to a new character set,
          use a statement like this:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> CONVERT TO CHARACTER SET <em class="replaceable"><code>charset_name</code></em>;
</pre><p>
          For a column that has a data type of
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> or one of the
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types, <code class="literal">CONVERT TO
          CHARACTER SET</code> will change the data type as necessary
          to ensure that the new column is long enough to store as many
          characters as the original column. For example, a
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column has two length
          bytes, which store the byte-length of values in the column, up
          to a maximum of 65,535. For a <code class="literal">latin1</code>
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column, each character
          requires a single byte, so the column can store up to 65,535
          characters. If the column is converted to
          <code class="literal">utf8</code>, each character might require up to 3
          bytes, for a maximum possible length of 3 × 65,535 =
          196,605 bytes. That length will not fit in a
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column's length bytes, so
          MySQL will convert the data type to
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">MEDIUMTEXT</code></a>, which is the
          smallest string type for which the length bytes can record a
          value of 196,605. Similarly, a
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> column might be
          converted to <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">MEDIUMTEXT</code></a>.
        </p><p>
          To avoid data type changes of the type just described, do not
          use <code class="literal">CONVERT TO CHARACTER SET</code>. Instead, use
          <code class="literal">MODIFY</code> to change individual columns. For
          example:
        </p><pre class="programlisting">ALTER TABLE t MODIFY latin1_text_col TEXT CHARACTER SET utf8;
ALTER TABLE t MODIFY latin1_varchar_col VARCHAR(<em class="replaceable"><code>M</code></em>) CHARACTER SET utf8;
</pre><p>
          If you specify <code class="literal">CONVERT TO CHARACTER SET
          binary</code>, the <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns are converted to
          their corresponding binary string types
          (<a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>,
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>). This means that the
          columns no longer will have a character set and a subsequent
          <code class="literal">CONVERT TO</code> operation will not apply to
          them.
        </p><p>
          If <em class="replaceable"><code>charset_name</code></em> is
          <code class="literal">DEFAULT</code>, the database character set is
          used.
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
            The <code class="literal">CONVERT TO</code> operation converts column
            values between the character sets. This is
            <span class="emphasis"><em>not</em></span> what you want if you have a column
            in one character set (like <code class="literal">latin1</code>) but
            the stored values actually use some other, incompatible
            character set (like <code class="literal">utf8</code>). In this case,
            you have to do the following for each such column:
          </p><pre class="programlisting">ALTER TABLE t1 CHANGE c1 c1 BLOB;
ALTER TABLE t1 CHANGE c1 c1 TEXT CHARACTER SET utf8;
</pre><p>
            The reason this works is that there is no conversion when
            you convert to or from <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
            columns.
          </p></div><p>
          To change only the <span class="emphasis"><em>default</em></span> character set
          for a table, use this statement:
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> DEFAULT CHARACTER SET <em class="replaceable"><code>charset_name</code></em>;
</pre><p>
          The word <code class="literal">DEFAULT</code> is optional. The default
          character set is the character set that is used if you do not
          specify the character set for columns that you add to a table
          later (for example, with <code class="literal">ALTER TABLE ... ADD
          column</code>).
        </p></li></ul></div><a class="indexterm" name="id2064207"></a><p>
      With the <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API
      function, you can find out how many rows were copied, and (when
      <code class="literal">IGNORE</code> is used) how many rows were deleted due
      to duplication of unique key values. See
      <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()">Section 20.9.3.35, “<code class="literal">mysql_info()</code>”</a>.
    </p><p>
      Here are some examples that show uses of
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>. Begin with a table
      <code class="literal">t1</code> that is created as shown here:
    </p><pre class="programlisting">CREATE TABLE t1 (a INTEGER,b CHAR(10));
</pre><p>
      To rename the table from <code class="literal">t1</code> to
      <code class="literal">t2</code>:
    </p><pre class="programlisting">ALTER TABLE t1 RENAME t2;
</pre><p>
      To change column <code class="literal">a</code> from
      <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INTEGER</code></a> to <code class="literal">TINYINT NOT
      NULL</code> (leaving the name the same), and to change column
      <code class="literal">b</code> from <code class="literal">CHAR(10)</code> to
      <code class="literal">CHAR(20)</code> as well as renaming it from
      <code class="literal">b</code> to <code class="literal">c</code>:
    </p><pre class="programlisting">ALTER TABLE t2 MODIFY a TINYINT NOT NULL, CHANGE b c CHAR(20);
</pre><p>
      To add a new <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column named
      <code class="literal">d</code>:
    </p><pre class="programlisting">ALTER TABLE t2 ADD d TIMESTAMP;
</pre><p>
      To add an index on column <code class="literal">d</code> and a
      <code class="literal">UNIQUE</code> index on column <code class="literal">a</code>:
    </p><pre class="programlisting">ALTER TABLE t2 ADD INDEX (d), ADD UNIQUE (a);
</pre><p>
      To remove column <code class="literal">c</code>:
    </p><pre class="programlisting">ALTER TABLE t2 DROP COLUMN c;
</pre><p>
      To add a new <code class="literal">AUTO_INCREMENT</code> integer column
      named <code class="literal">c</code>:
    </p><pre class="programlisting">ALTER TABLE t2 ADD c INT UNSIGNED NOT NULL AUTO_INCREMENT,
  ADD PRIMARY KEY (c);
</pre><p>
      Note that we indexed <code class="literal">c</code> (as a <code class="literal">PRIMARY
      KEY</code>) because <code class="literal">AUTO_INCREMENT</code> columns
      must be indexed, and also that we declare <code class="literal">c</code> as
      <code class="literal">NOT NULL</code> because primary key columns cannot be
      <code class="literal">NULL</code>.
    </p><p>
      When you add an <code class="literal">AUTO_INCREMENT</code> column, column
      values are filled in with sequence numbers automatically. For
      <code class="literal">MyISAM</code> tables, you can set the first sequence
      number by executing <code class="literal">SET
      INSERT_ID=<em class="replaceable"><code>value</code></em></code> before
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> or by using the
      <code class="literal">AUTO_INCREMENT=<em class="replaceable"><code>value</code></em></code>
      table option. See <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>.
    </p><p>
      With <code class="literal">MyISAM</code> tables, if you do not change the
      <code class="literal">AUTO_INCREMENT</code> column, the sequence number is
      not affected. If you drop an <code class="literal">AUTO_INCREMENT</code>
      column and then add another <code class="literal">AUTO_INCREMENT</code>
      column, the numbers are resequenced beginning with 1.
    </p><p>
      When replication is used, adding an
      <code class="literal">AUTO_INCREMENT</code> column to a table might not
      produce the same ordering of the rows on the slave and the master.
      This occurs because the order in which the rows are numbered
      depends on the specific storage engine used for the table and the
      order in which the rows were inserted. If it is important to have
      the same order on the master and slave, the rows must be ordered
      before assigning an <code class="literal">AUTO_INCREMENT</code> number.
      Assuming that you want to add an <code class="literal">AUTO_INCREMENT</code>
      column to the table <code class="literal">t1</code>, the following
      statements produce a new table <code class="literal">t2</code> identical to
      <code class="literal">t1</code> but with an
      <code class="literal">AUTO_INCREMENT</code> column:
    </p><pre class="programlisting">CREATE TABLE t2 (id INT AUTO_INCREMENT PRIMARY KEY)
SELECT * FROM t1 ORDER BY col1, col2;
</pre><p>
      This assumes that the table <code class="literal">t1</code> has columns
      <code class="literal">col1</code> and <code class="literal">col2</code>.
    </p><p>
      This set of statements will also produce a new table
      <code class="literal">t2</code> identical to <code class="literal">t1</code>, with the
      addition of an <code class="literal">AUTO_INCREMENT</code> column:
    </p><pre class="programlisting">CREATE TABLE t2 LIKE t1;
ALTER TABLE T2 ADD id INT AUTO_INCREMENT PRIMARY KEY;
INSERT INTO t2 SELECT * FROM t1 ORDER BY col1, col2;
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        To guarantee the same ordering on both master and slave,
        <span class="emphasis"><em>all</em></span> columns of <code class="literal">t1</code> must
        be referenced in the <code class="literal">ORDER BY</code> clause.
      </p></div><p>
      Regardless of the method used to create and populate the copy
      having the <code class="literal">AUTO_INCREMENT</code> column, the final
      step is to drop the original table and then rename the copy:
    </p><pre class="programlisting">DROP t1;
ALTER TABLE t2 RENAME t1;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="alter-view"></a>12.1.5. <code class="literal">ALTER VIEW</code> Syntax</h3></div></div></div><a class="indexterm" name="id2064695"></a><pre class="programlisting">ALTER
    [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
    [DEFINER = { <em class="replaceable"><code>user</code></em> | CURRENT_USER }]
    [SQL SECURITY { DEFINER | INVOKER }]
    VIEW <em class="replaceable"><code>view_name</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
    AS <em class="replaceable"><code>select_statement</code></em>
    [WITH [CASCADED | LOCAL] CHECK OPTION]
</pre><p>
      This statement changes the definition of a view, which must exist.
      The syntax is similar to that for <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE
      VIEW</code></a> and the effect is the same as for <code class="literal">CREATE
      OR REPLACE VIEW</code>. See <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax">Section 12.1.12, “<code class="literal">CREATE VIEW</code> Syntax”</a>. This
      statement requires the <a href="server-administration.html#priv_create-view"><code class="literal">CREATE VIEW</code></a>
      and <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a> privileges for the view,
      and some privilege for each column referred to in the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. As of MySQL
      5.0.52, <a href="sql-syntax.html#alter-view" title="12.1.5. ALTER VIEW Syntax"><code class="literal">ALTER VIEW</code></a> is allowed only
      to the original definer or users with the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
    </p><p>
      This statement was added in MySQL 5.0.1. The
      <code class="literal">DEFINER</code> and <code class="literal">SQL SECURITY</code>
      clauses may be used as of MySQL 5.0.16 to specify the security
      context to be used when checking access privileges at view
      invocation time. For details, see <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax">Section 12.1.12, “<code class="literal">CREATE VIEW</code> Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-database"></a>12.1.6. <code class="literal">CREATE DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2064843"></a><a class="indexterm" name="id2064852"></a><a class="indexterm" name="id2064861"></a><a class="indexterm" name="id2064874"></a><a class="indexterm" name="id2064886"></a><a class="indexterm" name="id2064898"></a><pre class="programlisting">CREATE {DATABASE | SCHEMA} [IF NOT EXISTS] <em class="replaceable"><code>db_name</code></em>
    [<em class="replaceable"><code>create_specification</code></em>] ...

<em class="replaceable"><code>create_specification</code></em>:
    [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em>
  | [DEFAULT] COLLATE [=] <em class="replaceable"><code>collation_name</code></em>
</pre><p>
      <a href="sql-syntax.html#create-database" title="12.1.6. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> creates a database
      with the given name. To use this statement, you need the
      <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a> privilege for the database.
      <a href="sql-syntax.html#create-database" title="12.1.6. CREATE DATABASE Syntax"><code class="literal">CREATE
      SCHEMA</code></a> is a synonym for <a href="sql-syntax.html#create-database" title="12.1.6. CREATE DATABASE Syntax"><code class="literal">CREATE
      DATABASE</code></a> as of MySQL 5.0.2.
    </p><p>
      An error occurs if the database exists and you did not specify
      <code class="literal">IF NOT EXISTS</code>.
    </p><p>
      <em class="replaceable"><code>create_specification</code></em> options specify
      database characteristics. Database characteristics are stored in
      the <code class="filename">db.opt</code> file in the database directory.
      The <code class="literal">CHARACTER SET</code> clause specifies the default
      database character set. The <code class="literal">COLLATE</code> clause
      specifies the default database collation.
      <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>, discusses character set and collation
      names.
    </p><p>
      A database in MySQL is implemented as a directory containing files
      that correspond to tables in the database. Because there are no
      tables in a database when it is initially created, the
      <a href="sql-syntax.html#create-database" title="12.1.6. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a> statement creates
      only a directory under the MySQL data directory and the
      <code class="filename">db.opt</code> file. Rules for allowable database
      names are given in <a href="language-structure.html#identifiers" title="8.2. Schema Object Names">Section 8.2, “Schema Object Names”</a>.
    </p><p>
      If you manually create a directory under the data directory (for
      example, with <span><strong class="command">mkdir</strong></span>), the server considers it a
      database directory and it shows up in the output of
      <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a>.
    </p><a class="indexterm" name="id2065077"></a><p>
      You can also use the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> program to
      create databases. See <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server">Section 4.5.2, “<span><strong class="command">mysqladmin</strong></span> — Client for Administering a MySQL Server”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-function"></a>12.1.7. <code class="literal">CREATE FUNCTION</code> Syntax</h3></div></div></div><p>
      The <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statement is
      used to create stored functions and user-defined functions (UDFs):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For information about creating stored functions, see
          <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax">Section 12.1.9, “<code class="literal">CREATE PROCEDURE</code> and
      <code class="literal">CREATE FUNCTION</code> Syntax”</a>.
        </p></li><li><p>
          For information about creating user-defined functions, see
          <a href="sql-syntax.html#create-function-udf" title="12.5.3.1. CREATE FUNCTION Syntax">Section 12.5.3.1, “<code class="literal">CREATE FUNCTION</code> Syntax”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-index"></a>12.1.8. <code class="literal">CREATE INDEX</code> Syntax</h3></div></div></div><a class="indexterm" name="id2065184"></a><a class="indexterm" name="id2065193"></a><a class="indexterm" name="id2065202"></a><a class="indexterm" name="id2065214"></a><pre class="programlisting">CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX <em class="replaceable"><code>index_name</code></em>
    [<em class="replaceable"><code>index_type</code></em>]
    ON <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>index_col_name</code></em>,...)
    [<em class="replaceable"><code>index_type</code></em>]

<em class="replaceable"><code>index_col_name</code></em>:
    <em class="replaceable"><code>col_name</code></em> [(<em class="replaceable"><code>length</code></em>)] [ASC | DESC]

<em class="replaceable"><code>index_type</code></em>:
    USING {BTREE | HASH | RTREE}
</pre><p>
      <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a> is mapped to an
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement to create
      indexes. See <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>.
      <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a> cannot be used to
      create a <code class="literal">PRIMARY KEY</code>; use
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> instead. For more
      information about indexes, see <a href="optimization.html#mysql-indexes" title="7.4.4. How MySQL Uses Indexes">Section 7.4.4, “How MySQL Uses Indexes”</a>.
    </p><p>
      Normally, you create all indexes on a table at the time the table
      itself is created with <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
      TABLE</code></a>. See <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
      <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a> enables you to add
      indexes to existing tables.
    </p><p>
      A column list of the form <code class="literal">(col1,col2,...)</code>
      creates a multiple-column index. Index values are formed by
      concatenating the values of the given columns.
    </p><p>
      Indexes can be created that use only the leading part of column
      values, using
      <code class="literal"><em class="replaceable"><code>col_name</code></em>(<em class="replaceable"><code>length</code></em>)</code>
      syntax to specify an index prefix length:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Prefixes can be specified for
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>, and
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns.
        </p></li><li><p>
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns also can be
          indexed, but a prefix length <span class="emphasis"><em>must</em></span> be
          given.
        </p></li><li><p>
          Prefix lengths are given in characters for nonbinary string
          types and in bytes for binary string types. That is, index
          entries consist of the first <em class="replaceable"><code>length</code></em>
          characters of each column value for
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns, and the first
          <em class="replaceable"><code>length</code></em> bytes of each column value
          for <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>, and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns.
        </p></li><li><p>
          For spatial columns, prefix values can be given as described
          later in this section.
        </p></li></ul></div><p>
      The statement shown here creates an index using the first 10
      characters of the <code class="literal">name</code> column:
    </p><pre class="programlisting">CREATE INDEX part_of_name ON customer (name(10));
</pre><p>
      If names in the column usually differ in the first 10 characters,
      this index should not be much slower than an index created from
      the entire <code class="literal">name</code> column. Also, using column
      prefixes for indexes can make the index file much smaller, which
      could save a lot of disk space and might also speed up
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> operations.
    </p><p>
      Prefix support and lengths of prefixes (where supported) are
      storage engine dependent. For example, a prefix can be up to 1000
      bytes long for <code class="literal">MyISAM</code> tables, and 767 bytes for
      <code class="literal">InnoDB</code> tables. The
      <code class="literal">NDBCLUSTER</code> storage engine does not support
      prefixes (see
      <a href="mysql-cluster.html#mysql-cluster-limitations-unsupported" title="17.10.6. Unsupported or Missing Features in MySQL Cluster">Section 17.10.6, “Unsupported or Missing Features in MySQL Cluster”</a>).
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Prefix limits are measured in bytes, whereas the prefix length
        in <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a> statements is
        interpreted as number of characters for nonbinary data types
        (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
        <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>). Take this into account
        when specifying a prefix length for a column that uses a
        multi-byte character set.
      </p></div><p>
      A <code class="literal">UNIQUE</code> index creates a constraint such that
      all values in the index must be distinct. An error occurs if you
      try to add a new row with a key value that matches an existing
      row. This constraint does not apply to <code class="literal">NULL</code>
      values except for the <code class="literal">BDB</code> storage engine. For
      other engines, a <code class="literal">UNIQUE</code> index allows multiple
      <code class="literal">NULL</code> values for columns that can contain
      <code class="literal">NULL</code>. If you specify a prefix value for a
      column in a <code class="literal">UNIQUE</code> index, the column values
      must be unique within the prefix.
    </p><p class="mnmas"><b>MySQL Enterprise</b>
        Lack of proper indexes can greatly reduce performance. Subscribe
        to the MySQL Enterprise Monitor for notification of inefficient
        use of indexes. For more information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><p>
      <code class="literal">FULLTEXT</code> indexes are supported only for
      <code class="literal">MyISAM</code> tables and can include only
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns. Indexing always
      happens over the entire column; column prefix indexing is not
      supported and any prefix length is ignored if specified. See
      <a href="functions.html#fulltext-search" title="11.8. Full-Text Search Functions">Section 11.8, “Full-Text Search Functions”</a>, for details of operation.
    </p><p>
      The <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>,
      <code class="literal">NDB</code>, <code class="literal">BDB</code>, and
      <code class="literal">ARCHIVE</code> storage engines support spatial columns
      such as (<code class="literal">POINT</code> and <code class="literal">GEOMETRY</code>.
      (<a href="functions.html#spatial-extensions" title="11.12. Spatial Extensions">Section 11.12, “Spatial Extensions”</a>, describes the spatial data
      types.) However, support for spatial column indexing varies among
      engines. Spatial and nonspatial indexes are available according to
      the following rules.
    </p><p>
      Spatial indexes (created using <code class="literal">SPATIAL INDEX</code>):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Available only for <code class="literal">MyISAM</code> tables.
          Specifying a <code class="literal">SPATIAL INDEX</code> for other
          storage engines results in an error.
        </p></li><li><p>
          Indexed columns must be <code class="literal">NOT NULL</code>.
        </p></li><li><p>
          In MySQL 5.0, the full width of each column is
          indexed by default, but column prefix lengths are allowed.
          However, as of MySQL 5.0.40, the length is not displayed in
          <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> output.
          <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> uses that statement. As of that
          version, if a table with <code class="literal">SPATIAL</code> indexes
          containing prefixed columns is dumped and reloaded, the index
          is created with no prefixes. (The full column width of each
          column is indexed.)
        </p></li></ul></div><p>
      Nonspatial indexes (created with <code class="literal">INDEX</code>,
      <code class="literal">UNIQUE</code>, or <code class="literal">PRIMARY KEY</code>):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Allowed for any storage engine that supports spatial columns
          except <code class="literal">ARCHIVE</code>.
        </p></li><li><p>
          Columns can be <code class="literal">NULL</code> unless the index is a
          primary key.
        </p></li><li><p>
          For each spatial column in a non-<code class="literal">SPATIAL</code>
          index except <code class="literal">POINT</code> columns, a column prefix
          length must be specified. (This is the same requirement as for
          indexed <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns.) The
          prefix length is given in bytes.
        </p></li><li><p>
          The index type for a non-<code class="literal">SPATIAL</code> index
          depends on the storage engine. Currently, B-tree is used.
        </p></li></ul></div><p>
      In MySQL 5.0:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          You can add an index on a column that can have
          <code class="literal">NULL</code> values only if you are using the
          <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>,
          <code class="literal">BDB</code>, or <code class="literal">MEMORY</code> storage
          engine.
        </p></li><li><p>
          You can add an index on a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
          or <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> column only if you are
          using the <code class="literal">MyISAM</code>, <code class="literal">BDB</code>,
          or <code class="literal">InnoDB</code> storage engine.
        </p></li></ul></div><p>
      An <em class="replaceable"><code>index_col_name</code></em> specification can end
      with <code class="literal">ASC</code> or <code class="literal">DESC</code>. These
      keywords are allowed for future extensions for specifying
      ascending or descending index value storage. Currently, they are
      parsed but ignored; index values are always stored in ascending
      order.
    </p><p>
      Some storage engines allow you to specify an index type when
      creating an index. The allowable index type values supported by
      different storage engines are shown in the following table. Where
      multiple index types are listed, the first one is the default when
      no index type specifier is given.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Storage Engine</strong></span></td><td><span class="bold"><strong>Allowable Index Types</strong></span></td></tr><tr><td><code class="literal">MyISAM</code></td><td><code class="literal">BTREE</code>, <code class="literal">RTREE</code></td></tr><tr><td><code class="literal">InnoDB</code></td><td><code class="literal">BTREE</code></td></tr><tr><td><code class="literal">MEMORY</code>/<code class="literal">HEAP</code></td><td><code class="literal">HASH</code>, <code class="literal">BTREE</code></td></tr><tr><td><code class="literal">NDB</code></td><td><code class="literal">HASH</code>, <code class="literal">BTREE</code> (see note in text)</td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        <code class="literal">BTREE</code> indexes are implemented by the
        <code class="literal">NDBCLUSTER</code> storage engine as T-tree
        indexes.
      </p><p>
        For indexes on <code class="literal">NDBCLUSTER</code> table
        columns, the <code class="literal">USING</code> clause can be specified
        only for a unique index or primary key. In such cases, the
        <code class="literal">USING HASH</code> clause prevents the creation of an
        implicit ordered index. Without <code class="literal">USING HASH</code>, a
        statement defining a unique index or primary key automatically
        results in the creation of a <code class="literal">HASH</code> index in
        addition to the ordered index, both of which index the same set
        of columns.
      </p></div><p>
      The <code class="literal">RTREE</code> index type is allowable only for
      <code class="literal">SPATIAL</code> indexes.
    </p><p>
      If you specify an index type that is not legal for a given storage
      engine, but there is another index type available that the engine
      can use without affecting query results, the engine uses the
      available type.
    </p><p>
      Examples:
    </p><pre class="programlisting">CREATE TABLE lookup (id INT) ENGINE = MEMORY;
CREATE INDEX id_index USING BTREE ON lookup (id);
</pre><p>
      <code class="literal">TYPE <em class="replaceable"><code>type_name</code></em></code> is
      recognized as a synonym for <code class="literal">USING
      <em class="replaceable"><code>type_name</code></em></code>. However,
      <code class="literal">USING</code> is the preferred form.
    </p><p>
      Before MySQL 5.0.60, the <code class="literal">index_type</code> option can
      be given only before the <code class="literal">ON
      <em class="replaceable"><code>tbl_name</code></em></code> clause. Use of the
      option in this position is deprecated as of 5.0.60; support for it
      is to be dropped in a future MySQL release. As of 5.0.60, the
      option should be given following the index column list. If an
      <code class="literal">index_type</code> option is given in both the earlier
      and later positions, the final option applies.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-procedure"></a>12.1.9. <code class="literal">CREATE PROCEDURE</code> and
      <code class="literal">CREATE FUNCTION</code> Syntax</h3></div></div></div><a class="indexterm" name="id2066343"></a><a class="indexterm" name="id2066352"></a><pre class="programlisting">CREATE
    [DEFINER = { <em class="replaceable"><code>user</code></em> | CURRENT_USER }]
    PROCEDURE <em class="replaceable"><code>sp_name</code></em> ([<em class="replaceable"><code>proc_parameter</code></em>[,...]])
    [<em class="replaceable"><code>characteristic</code></em> ...] <em class="replaceable"><code>routine_body</code></em>

CREATE
    [DEFINER = { <em class="replaceable"><code>user</code></em> | CURRENT_USER }]
    FUNCTION <em class="replaceable"><code>sp_name</code></em> ([<em class="replaceable"><code>func_parameter</code></em>[,...]])
    RETURNS <em class="replaceable"><code>type</code></em>
    [<em class="replaceable"><code>characteristic</code></em> ...] <em class="replaceable"><code>routine_body</code></em>

<em class="replaceable"><code>proc_parameter</code></em>:
    [ IN | OUT | INOUT ] <em class="replaceable"><code>param_name</code></em> <em class="replaceable"><code>type</code></em>

<em class="replaceable"><code>func_parameter</code></em>:
    <em class="replaceable"><code>param_name</code></em> <em class="replaceable"><code>type</code></em>

<em class="replaceable"><code>type</code></em>:
    <em class="replaceable"><code>Any valid MySQL data type</code></em>

<em class="replaceable"><code>characteristic</code></em>:
    LANGUAGE SQL
  | [NOT] DETERMINISTIC
  | { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }
  | SQL SECURITY { DEFINER | INVOKER }
  | COMMENT '<em class="replaceable"><code>string</code></em>'

<em class="replaceable"><code>routine_body</code></em>:
    <em class="replaceable"><code>Valid SQL procedure statement</code></em>
</pre><p>
      These statements create stored routines. By default, a routine is
      associated with the default database. To associate the routine
      explicitly with a given database, specify the name as
      <em class="replaceable"><code>db_name.sp_name</code></em> when you create it.
    </p><p>
      The <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statement is
      also used in MySQL to support UDFs (user-defined functions). See
      <a href="extending-mysql.html#adding-functions" title="21.2. Adding New Functions to MySQL">Section 21.2, “Adding New Functions to MySQL”</a>. A UDF can be regarded as an
      external stored function. However, do note that stored functions
      share their namespace with UDFs. See
      <a href="language-structure.html#function-resolution" title="8.2.3. Function Name Parsing and Resolution">Section 8.2.3, “Function Name Parsing and Resolution”</a>, for the rules describing
      how the server interprets references to different kinds of
      functions.
    </p><p>
      To invoke a stored procedure, use the
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement (see
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax">Section 12.2.1, “<code class="literal">CALL</code> Syntax”</a>). To invoke a stored function, refer to it
      in an expression. The function returns a value during expression
      evaluation.
    </p><p>
      As of MySQL 5.0.3, to execute the <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE
      PROCEDURE</code></a> or <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE
      FUNCTION</code></a> statement, it is necessary to have the
      <a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a> privilege. By
      default, MySQL automatically grants the <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER
      ROUTINE</code></a> and <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a>
      privileges to the routine creator. This behavior can be changed by
      disabling the
      <a href="server-administration.html#sysvar_automatic_sp_privileges"><code class="literal">automatic_sp_privileges</code></a> system
      variable. See <a href="stored-programs-views.html#stored-routines-privileges" title="18.2.2. Stored Routines and MySQL Privileges">Section 18.2.2, “Stored Routines and MySQL Privileges”</a>. If
      binary logging is enabled, the <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE
      FUNCTION</code></a> statement might also require the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege, as described in
      <a href="stored-programs-views.html#stored-programs-logging" title="18.5. Binary Logging of Stored Programs">Section 18.5, “Binary Logging of Stored Programs”</a>.
    </p><p>
      The <code class="literal">DEFINER</code> and <code class="literal">SQL SECURITY</code>
      clauses specify the security context to be used when checking
      access privileges at routine execution time, as described later.
    </p><p>
      If the routine name is the same as the name of a built-in SQL
      function, a syntax error occurs unless you use a space between the
      name and the following parenthesis when defining the routine or
      invoking it later. For this reason, avoid using the names of
      existing SQL functions for your own stored routines.
    </p><p>
      The <a href="server-administration.html#sqlmode_ignore_space"><code class="literal">IGNORE_SPACE</code></a> SQL mode
      applies to built-in functions, not to stored routines. It is
      always allowable to have spaces after a stored routine name,
      regardless of whether
      <a href="server-administration.html#sqlmode_ignore_space"><code class="literal">IGNORE_SPACE</code></a> is enabled.
    </p><p>
      The parameter list enclosed within parentheses must always be
      present. If there are no parameters, an empty parameter list of
      <code class="literal">()</code> should be used. Parameter names are not case
      sensitive.
    </p><p>
      Each parameter is an <code class="literal">IN</code> parameter by default.
      To specify otherwise for a parameter, use the keyword
      <code class="literal">OUT</code> or <code class="literal">INOUT</code> before the
      parameter name.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Specifying a parameter as <code class="literal">IN</code>,
        <code class="literal">OUT</code>, or <code class="literal">INOUT</code> is valid
        only for a <code class="literal">PROCEDURE</code>.
        (<code class="literal">FUNCTION</code> parameters are always regarded as
        <code class="literal">IN</code> parameters.)
      </p></div><p>
      An <code class="literal">IN</code> parameter passes a value into a
      procedure. The procedure might modify the value, but the
      modification is not visible to the caller when the procedure
      returns. An <code class="literal">OUT</code> parameter passes a value from
      the procedure back to the caller. Its initial value is
      <code class="literal">NULL</code> within the procedure, and its value is
      visible to the caller when the procedure returns. An
      <code class="literal">INOUT</code> parameter is initialized by the caller,
      can be modified by the procedure, and any change made by the
      procedure is visible to the caller when the procedure returns.
    </p><p>
      For each <code class="literal">OUT</code> or <code class="literal">INOUT</code>
      parameter, pass a user-defined variable in the
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement that invokes the
      procedure so that you can obtain its value when the procedure
      returns. If you are calling the procedure from within another
      stored procedure or function, you can also pass a routine
      parameter or local routine variable as an <code class="literal">IN</code> or
      <code class="literal">INOUT</code> parameter.
    </p><p>
      The following example shows a simple stored procedure that uses an
      <code class="literal">OUT</code> parameter:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>delimiter //</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE PROCEDURE simpleproc (OUT param1 INT)</code></strong>
    -&gt; <strong class="userinput"><code>BEGIN</code></strong>
    -&gt;   <strong class="userinput"><code>SELECT COUNT(*) INTO param1 FROM t;</code></strong>
    -&gt; <strong class="userinput"><code>END//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>delimiter ;</code></strong>

mysql&gt; <strong class="userinput"><code>CALL simpleproc(@a);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @a;</code></strong>
+------+
| @a   |
+------+
| 3    |
+------+
1 row in set (0.00 sec)
</pre><p>
      The example uses the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client
      <code class="literal">delimiter</code> command to change the statement
      delimiter from <code class="literal">;</code> to <code class="literal">//</code> while
      the procedure is being defined. This allows the
      <code class="literal">;</code> delimiter used in the procedure body to be
      passed through to the server rather than being interpreted by
      <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> itself. See
      <a href="stored-programs-views.html#stored-programs-defining" title="18.1. Defining Stored Programs">Section 18.1, “Defining Stored Programs”</a>.
    </p><p>
      The <code class="literal">RETURNS</code> clause may be specified only for a
      <code class="literal">FUNCTION</code>, for which it is mandatory. It
      indicates the return type of the function, and the function body
      must contain a <code class="literal">RETURN
      <em class="replaceable"><code>value</code></em></code> statement. If the
      <a href="sql-syntax.html#return" title="12.8.7. RETURN Syntax"><code class="literal">RETURN</code></a> statement returns a value of
      a different type, the value is coerced to the proper type. For
      example, if a function specifies an
      <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> or
      <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> value in the
      <code class="literal">RETURNS</code> clause, but the
      <a href="sql-syntax.html#return" title="12.8.7. RETURN Syntax"><code class="literal">RETURN</code></a> statement returns an
      integer, the value returned from the function is the string for
      the corresponding <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> member of
      set of <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> members.
    </p><p>
      The following example function takes a parameter, performs an
      operation using an SQL function, and returns the result. In this
      case, it is unnecessary to use <code class="literal">delimiter</code>
      because the function definition contains no internal
      <code class="literal">;</code> statement delimiters:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE FUNCTION hello (s CHAR(20))</code></strong>
mysql&gt; <strong class="userinput"><code>RETURNS CHAR(50) DETERMINISTIC</code></strong>
    -&gt; <strong class="userinput"><code>RETURN CONCAT('Hello, ',s,'!');</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT hello('world');</code></strong>
+----------------+
| hello('world') |
+----------------+
| Hello, world!  |
+----------------+
1 row in set (0.00 sec)
</pre><p>
      Parameter types and function return types can be declared to use
      any valid data type, except that the <code class="literal">COLLATE</code>
      attribute cannot be used.
    </p><p>
      The <em class="replaceable"><code>routine_body</code></em> consists of a valid
      SQL procedure statement. This can be a simple statement such as
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> or
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, or it can be a compound
      statement written using <code class="literal">BEGIN</code> and
      <code class="literal">END</code>. Compound statements can contain
      declarations, loops, and other control structure statements. The
      syntax for these statements is described in
      <a href="sql-syntax.html#sql-syntax-compound-statements" title="12.8. MySQL Compound-Statement Syntax">Section 12.8, “MySQL Compound-Statement Syntax”</a>.
    </p><p>
      MySQL allows routines to contain DDL statements, such as
      <code class="literal">CREATE</code> and <code class="literal">DROP</code>. MySQL also
      allows stored procedures (but not stored functions) to contain SQL
      transaction statements such as
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>. Stored functions may not
      contain statements that perform explicit or implicit commit or
      rollback. Support for these statements is not required by the SQL
      standard, which states that each DBMS vendor may decide whether to
      allow them.
    </p><p>
      Statements that return a result set can be used within a stored
      procedcure but not within a stored function. This prohibition
      includes <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements that do
      not have an <code class="literal">INTO
      <em class="replaceable"><code>var_list</code></em></code> clause and other
      statements such as <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a>,
      <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>, and
      <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>. For statements that
      can be determined at function definition time to return a result
      set, a <code class="literal">Not allowed to return a result set from a
      function</code> error occurs
      (<a href="error-handling.html#error_er_sp_no_retset"><code class="literal">ER_SP_NO_RETSET</code></a>). For statements
      that can be determined only at runtime to return a result set, a
      <code class="literal">PROCEDURE %s can't return a result set in the given
      context</code> error occurs
      (<a href="error-handling.html#error_er_sp_badselect"><code class="literal">ER_SP_BADSELECT</code></a>).
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Before MySQL 5.0.10, stored functions created with
        <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> must not contain
        references to tables, with limited exceptions. They may include
        some <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
        statements that contain table references, for example
        <code class="literal">SET a:= (SELECT MAX(id) FROM t)</code>, and
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements that fetch
        values directly into variables, for example <code class="literal">SELECT i
        INTO var1 FROM t</code>.
      </p></div><p>
      <a href="sql-syntax.html#use" title="12.3.4. USE Syntax"><code class="literal">USE</code></a> statements within stored
      routines are disallowed. When a routine is invoked, an implicit
      <code class="literal">USE <em class="replaceable"><code>db_name</code></em></code> is
      performed (and undone when the routine terminates). The causes the
      routine to have the given default database while it executes.
      References to objects in databases other than the routine default
      database should be qualified with the appropriate database name.
    </p><p>
      For additional information about statements that are not allowed
      in stored routines, see
      <a href="restrictions.html#stored-program-restrictions" title="D.1. Restrictions on Stored Routines and Triggers">Section D.1, “Restrictions on Stored Routines and Triggers”</a>.
    </p><p>
      For information about invoking stored procedures from within
      programs written in a language that has a MySQL interface, see
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax">Section 12.2.1, “<code class="literal">CALL</code> Syntax”</a>.
    </p><p>
      MySQL stores the <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> system
      variable setting that is in effect at the time a routine is
      created, and always executes the routine with this setting in
      force, <span class="emphasis"><em>regardless of the server SQL mode in effect when
      the routine is invoked</em></span>.
    </p><p>
      The switch from the SQL mode of the invoker to that of the routine
      occurs after evaluation of arguments and assignment of the
      resulting values to routine parameters. If you define a routine in
      strict SQL mode but invoke it in nonstrict mode, assignment of
      arguments to routine parameters does not take place in strict
      mode. If you require that expressions passed to a routine be
      assigned in strict SQL mode, you should invoke the routine with
      strict mode in effect.
    </p><p>
      A procedure or function is considered “<span class="quote">deterministic</span>”
      if it always produces the same result for the same input
      parameters, and “<span class="quote">not deterministic</span>” otherwise. If
      neither <code class="literal">DETERMINISTIC</code> nor <code class="literal">NOT
      DETERMINISTIC</code> is given in the routine definition, the
      default is <code class="literal">NOT DETERMINISTIC</code>.
    </p><p>
      A routine that contains the <a href="functions.html#function_now"><code class="literal">NOW()</code></a>
      function (or its synonyms) or
      <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> is nondeterministic, but it
      might still be replication-safe. For
      <a href="functions.html#function_now"><code class="literal">NOW()</code></a>, the binary log includes the
      timestamp and replicates correctly.
      <a href="functions.html#function_rand"><code class="literal">RAND()</code></a> also replicates correctly as
      long as it is called only a single time during the execution of a
      routine. (You can consider the routine execution timestamp and
      random number seed as implicit inputs that are identical on the
      master and slave.)
    </p><p>
      Prior to MySQL 5.0.44, the <code class="literal">DETERMINISTIC</code>
      characteristic is accepted, but not used by the optimizer.
      However, if binary logging is enabled, this characteristic always
      affects which routine definitions MySQL accepts. See
      <a href="stored-programs-views.html#stored-programs-logging" title="18.5. Binary Logging of Stored Programs">Section 18.5, “Binary Logging of Stored Programs”</a>.
    </p><p>
      Several characteristics provide information about the nature of
      data use by the routine. In MySQL, these characteristics are
      advisory only. The server does not use them to constrain what
      kinds of statements a routine will be allowed to execute.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">CONTAINS SQL</code> indicates that the routine
          does not contain statements that read or write data. This is
          the default if none of these characteristics is given
          explicitly. Examples of such statements are <code class="literal">SET @x =
          1</code> or <code class="literal">DO RELEASE_LOCK('abc')</code>,
          which execute but neither read nor write data.
        </p></li><li><p>
          <code class="literal">NO SQL</code> indicates that the routine contains
          no SQL statements.
        </p></li><li><p>
          <code class="literal">READS SQL DATA</code> indicates that the routine
          contains statements that read data (for example,
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>), but not statements
          that write data.
        </p></li><li><p>
          <code class="literal">MODIFIES SQL DATA</code> indicates that the
          routine contains statements that may write data (for example,
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>).
        </p></li></ul></div><p>
      The <code class="literal">SQL SECURITY</code> characteristic can be used to
      specify whether the routine should be executed using the
      permissions of the user who creates the routine or the user who
      invokes it. The default value is <code class="literal">DEFINER</code>. This
      feature is new in SQL:2003. The creator or invoker must have
      permission to access the database with which the routine is
      associated. As of MySQL 5.0.3, it is necessary to have the
      <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege to be able to
      execute the routine. The user that must have this privilege is
      either the definer or invoker, depending on how the <code class="literal">SQL
      SECURITY</code> characteristic is set.
    </p><p>
      The <code class="literal">COMMENT</code> characteristic is a MySQL
      extension, and may be used to describe the stored routine. This
      information is displayed by the <a href="sql-syntax.html#show-create-procedure" title="12.5.5.8. SHOW CREATE PROCEDURE Syntax"><code class="literal">SHOW CREATE
      PROCEDURE</code></a> and <a href="sql-syntax.html#show-create-function" title="12.5.5.7. SHOW CREATE FUNCTION Syntax"><code class="literal">SHOW CREATE
      FUNCTION</code></a> statements.
    </p><p>
      The optional <code class="literal">DEFINER</code> clause specifies the MySQL
      account to be used when checking access privileges at routine
      execution time for routines that have the <code class="literal">SQL SECURITY
      DEFINER</code> characteristic. The <code class="literal">DEFINER</code>
      clause was added in MySQL 5.0.20.
    </p><p>
      If a <em class="replaceable"><code>user</code></em> value is given for the
      <code class="literal">DEFINER</code> clause, it should be a MySQL account in
      <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'</code>
      format (the same format used in the
      <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement). The
      <em class="replaceable"><code>user_name</code></em> and
      <em class="replaceable"><code>host_name</code></em> values both are required. The
      definer can also be given as
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> or
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>. The default
      <code class="literal">DEFINER</code> value is the user who executes the
      <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE PROCEDURE</code></a> or
      <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> or statement. (This
      is the same as <code class="literal">DEFINER = CURRENT_USER</code>.)
    </p><p>
      If you specify the <code class="literal">DEFINER</code> clause, these rules
      determine the legal <code class="literal">DEFINER</code> user values:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you do not have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
          privilege, the only legal <em class="replaceable"><code>user</code></em>
          value is your own account, either specified literally or by
          using <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>. You cannot
          set the definer to some other account.
        </p></li><li><p>
          If you have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
          privilege, you can specify any syntactically legal account
          name. If the account does not actually exist, a warning is
          generated.
        </p></li><li><p>
          Although it is possible to create routines with a nonexistent
          <code class="literal">DEFINER</code> value, an error occurs if the
          routine executes with definer privileges but the definer does
          not exist at execution time.
        </p></li></ul></div><p>
      Within a stored routine that is defined with the <code class="literal">SQL
      SECURITY DEFINER</code> characteristic,
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> returns the routine's
      <code class="literal">DEFINER</code> value. For information about user
      auditing within stored routines, see
      <a href="server-administration.html#account-activity-auditing" title="5.5.9. Auditing MySQL Account Activity">Section 5.5.9, “Auditing MySQL Account Activity”</a>.
    </p><p>
      Consider the following procedure, which displays a count of the
      number of MySQL accounts listed in the
      <code class="literal">mysql.user</code> table:
    </p><pre class="programlisting">CREATE DEFINER = 'admin'@'localhost' PROCEDURE account_count()
BEGIN
  SELECT 'Number of accounts:', COUNT(*) FROM mysql.user;
END;
</pre><p>
      The procedure is assigned a <code class="literal">DEFINER</code> account of
      <code class="literal">'admin'@'localhost'</code> no matter which user
      defines it. It executes with the privileges of that account no
      matter which user invokes it (because the default security
      characteristic is <code class="literal">DEFINER</code>). The procedure
      succeeds or fails depending on whether
      <code class="literal">'admin'@'localhost'</code> has the
      <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege for it and the
      <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the
      <code class="literal">mysql.user</code> table.
    </p><p>
      Now suppose that the procedure is defined with the <code class="literal">SQL
      SECURITY INVOKER</code> characteristic:
    </p><pre class="programlisting">CREATE DEFINER = 'admin'@'localhost' PROCEDURE account_count()
SQL SECURITY INVOKER
BEGIN
  SELECT 'Number of accounts:', COUNT(*) FROM mysql.user;
END;
</pre><p>
      The procedure still has a <code class="literal">DEFINER</code> of
      <code class="literal">'admin'@'localhost'</code>, but in this case, it
      executes with the privileges of the invoking user. Thus, the
      procedure succeeds or fails depending on whether the invoker has
      the required privileges.
    </p><p>
      As of MySQL 5.0.18, the handles the data type of a routine
      parameter, local routine variable created with
      <a href="sql-syntax.html#declare" title="12.8.2. DECLARE Syntax"><code class="literal">DECLARE</code></a>, or function return value
      as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Assignments are checked for data type mismatches and overflow.
          Conversion and overflow problems result in warnings, or errors
          in strict SQL mode.
        </p></li><li><p>
          Only scalar values can be assigned. For example, a statement
          such as <code class="literal">SET x = (SELECT 1, 2)</code> is invalid.
        </p></li><li><p>
          For character data types, if there is a <code class="literal">CHARACTER
          SET</code> attribute in the declaration, the specified
          character set and its default collation are used. If there is
          no such attribute, as of MySQL 5.0.25, the database character
          set and collation that are in effect at the time the server
          loads the routine into the routine cache are used. (These are
          given by the values of the
          <a href="server-administration.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a> and
          <a href="server-administration.html#sysvar_collation_database"><code class="literal">collation_database</code></a> system
          variables.) If the database character set or collation change
          while the routine is in the cache, routine execution is
          unaffected by the change until the next time the server
          reloads the routine into the cache. The
          <code class="literal">COLLATE</code> attribute is not supported. (This
          includes use of <code class="literal">BINARY</code>, because in this
          context <code class="literal">BINARY</code> specifies the binary
          collation of the character set.)
        </p></li></ul></div><p>
      Before MySQL 5.0.18, parameters, return values, and local
      variables are treated as items in expressions, and are subject to
      automatic (silent) conversion and truncation. Stored functions
      ignore the <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> setting.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-table"></a>12.1.10. <code class="literal">CREATE TABLE</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#silent-column-changes">12.1.10.1. Silent Column Specification Changes</a></span></dt></dl></div><a class="indexterm" name="id2067930"></a><pre class="programlisting">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] <em class="replaceable"><code>tbl_name</code></em>
    (<em class="replaceable"><code>create_definition</code></em>,...)
    [<em class="replaceable"><code>table_options</code></em>]
</pre><p>
      Or:
    </p><pre class="programlisting">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] <em class="replaceable"><code>tbl_name</code></em>
    [(<em class="replaceable"><code>create_definition</code></em>,...)]
    [<em class="replaceable"><code>table_options</code></em>]
    <em class="replaceable"><code>select_statement</code></em>
</pre><p>
      Or:
    </p><pre class="programlisting">CREATE [TEMPORARY] TABLE [IF NOT EXISTS] <em class="replaceable"><code>tbl_name</code></em>
    { LIKE <em class="replaceable"><code>old_tbl_name</code></em> | (LIKE <em class="replaceable"><code>old_tbl_name</code></em>) }
</pre><pre class="programlisting"><em class="replaceable"><code>create_definition</code></em>:
    <em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definition</code></em>
  | [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] PRIMARY KEY [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
        [<em class="replaceable"><code>index_type</code></em>]
  | {INDEX|KEY} [<em class="replaceable"><code>index_name</code></em>] [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
        [<em class="replaceable"><code>index_type</code></em>]
  | [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] UNIQUE [INDEX|KEY]
        [<em class="replaceable"><code>index_name</code></em>] [<em class="replaceable"><code>index_type</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
        [<em class="replaceable"><code>index_type</code></em>]
  | {FULLTEXT|SPATIAL} [INDEX|KEY] [<em class="replaceable"><code>index_name</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...)
        [<em class="replaceable"><code>index_type</code></em>]
  | [CONSTRAINT [<em class="replaceable"><code>symbol</code></em>]] FOREIGN KEY
        [<em class="replaceable"><code>index_name</code></em>] (<em class="replaceable"><code>index_col_name</code></em>,...) <em class="replaceable"><code>reference_definition</code></em>
  | CHECK (<em class="replaceable"><code>expr</code></em>)

<em class="replaceable"><code>column_definition</code></em>:
    <em class="replaceable"><code>data_type</code></em> [NOT NULL | NULL] [DEFAULT <em class="replaceable"><code>default_value</code></em>]
      [AUTO_INCREMENT] [UNIQUE [KEY] | [PRIMARY] KEY]
      [COMMENT '<em class="replaceable"><code>string</code></em>'] [<em class="replaceable"><code>reference_definition</code></em>]

<em class="replaceable"><code>data_type</code></em>:
    BIT[(<em class="replaceable"><code>length</code></em>)]
  | TINYINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | SMALLINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | MEDIUMINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | INT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | INTEGER[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | BIGINT[(<em class="replaceable"><code>length</code></em>)] [UNSIGNED] [ZEROFILL]
  | REAL[(<em class="replaceable"><code>length</code></em>,<em class="replaceable"><code>decimals</code></em>)] [UNSIGNED] [ZEROFILL]
  | DOUBLE[(<em class="replaceable"><code>length</code></em>,<em class="replaceable"><code>decimals</code></em>)] [UNSIGNED] [ZEROFILL]
  | FLOAT[(<em class="replaceable"><code>length</code></em>,<em class="replaceable"><code>decimals</code></em>)] [UNSIGNED] [ZEROFILL]
  | DECIMAL[(<em class="replaceable"><code>length</code></em>[,<em class="replaceable"><code>decimals</code></em>])] [UNSIGNED] [ZEROFILL]
  | NUMERIC[(<em class="replaceable"><code>length</code></em>[,<em class="replaceable"><code>decimals</code></em>])] [UNSIGNED] [ZEROFILL]
  | DATE
  | TIME
  | TIMESTAMP
  | DATETIME
  | YEAR
  | CHAR[(<em class="replaceable"><code>length</code></em>)]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | VARCHAR(<em class="replaceable"><code>length</code></em>)
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | BINARY[(<em class="replaceable"><code>length</code></em>)]
  | VARBINARY(<em class="replaceable"><code>length</code></em>)
  | TINYBLOB
  | BLOB
  | MEDIUMBLOB
  | LONGBLOB
  | TINYTEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | TEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | MEDIUMTEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | LONGTEXT [BINARY]
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | ENUM(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,<em class="replaceable"><code>value3</code></em>,...)
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | SET(<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,<em class="replaceable"><code>value3</code></em>,...)
      [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>] [COLLATE <em class="replaceable"><code>collation_name</code></em>]
  | <em class="replaceable"><code>spatial_type</code></em>

<em class="replaceable"><code>index_col_name</code></em>:
    <em class="replaceable"><code>col_name</code></em> [(<em class="replaceable"><code>length</code></em>)] [ASC | DESC]

<em class="replaceable"><code>index_type</code></em>:
    USING {BTREE | HASH | RTREE}

<em class="replaceable"><code>reference_definition</code></em>:
    REFERENCES <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>index_col_name</code></em>,...)
      [MATCH FULL | MATCH PARTIAL | MATCH SIMPLE]
      [ON DELETE <em class="replaceable"><code>reference_option</code></em>]
      [ON UPDATE <em class="replaceable"><code>reference_option</code></em>]

<em class="replaceable"><code>reference_option</code></em>:
    RESTRICT | CASCADE | SET NULL | NO ACTION

<em class="replaceable"><code>table_options</code></em>:
    <em class="replaceable"><code>table_option</code></em> [[,] <em class="replaceable"><code>table_option</code></em>] ...

<em class="replaceable"><code>table_option</code></em>:
    {ENGINE|TYPE} [=] <em class="replaceable"><code>engine_name</code></em>
  | AUTO_INCREMENT [=] <em class="replaceable"><code>value</code></em>
  | AVG_ROW_LENGTH [=] <em class="replaceable"><code>value</code></em>
  | [DEFAULT] CHARACTER SET [=] <em class="replaceable"><code>charset_name</code></em>
  | CHECKSUM [=] {0 | 1}
  | [DEFAULT] COLLATE [=] <em class="replaceable"><code>collation_name</code></em>
  | COMMENT [=] '<em class="replaceable"><code>string</code></em>'
  | CONNECTION [=] '<em class="replaceable"><code>connect_string</code></em>'
  | DATA DIRECTORY [=] '<em class="replaceable"><code>absolute path to directory</code></em>'
  | DELAY_KEY_WRITE [=] {0 | 1}
  | INDEX DIRECTORY [=] '<em class="replaceable"><code>absolute path to directory</code></em>'
  | INSERT_METHOD [=] { NO | FIRST | LAST }
  | MAX_ROWS [=] <em class="replaceable"><code>value</code></em>
  | MIN_ROWS [=] <em class="replaceable"><code>value</code></em>
  | PACK_KEYS [=] {0 | 1 | DEFAULT}
  | PASSWORD [=] '<em class="replaceable"><code>string</code></em>'
  | ROW_FORMAT [=] {DEFAULT|DYNAMIC|FIXED|COMPRESSED|REDUNDANT|COMPACT}
  | UNION [=] (<em class="replaceable"><code>tbl_name</code></em>[,<em class="replaceable"><code>tbl_name</code></em>]...)

<em class="replaceable"><code>select_statement:</code></em>
    [IGNORE | REPLACE] [AS] SELECT ...   (<em class="replaceable"><code>Some legal select statement</code></em>)
</pre><p>
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> creates a table with
      the given name. You must have the
      <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a> privilege for the table.
    </p><p>
      Rules for allowable table names are given in
      <a href="language-structure.html#identifiers" title="8.2. Schema Object Names">Section 8.2, “Schema Object Names”</a>. By default, the table is created in
      the default database. An error occurs if the table exists, if
      there is no default database, or if the database does not exist.
    </p><p>
      The table name can be specified as
      <em class="replaceable"><code>db_name.tbl_name</code></em> to create the table in
      a specific database. This works regardless of whether there is a
      default database, assuming that the database exists. If you use
      quoted identifiers, quote the database and table names separately.
      For example, write <code class="literal">`mydb`.`mytbl`</code>, not
      <code class="literal">`mydb.mytbl`</code>.
    </p><p>
      You can use the <code class="literal">TEMPORARY</code> keyword when creating
      a table. A <code class="literal">TEMPORARY</code> table is visible only to
      the current connection, and is dropped automatically when the
      connection is closed. This means that two different connections
      can use the same temporary table name without conflicting with
      each other or with an existing non-<code class="literal">TEMPORARY</code>
      table of the same name. (The existing table is hidden until the
      temporary table is dropped.) To create temporary tables, you must
      have the <a href="server-administration.html#priv_create-temporary-tables"><code class="literal">CREATE TEMPORARY TABLES</code></a>
      privilege.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> does not
        automatically commit the current active transaction if you use
        the <code class="literal">TEMPORARY</code> keyword.
      </p></div><p>
      The keywords <code class="literal">IF NOT EXISTS</code> prevent an error
      from occurring if the table exists. However, there is no
      verification that the existing table has a structure identical to
      that indicated by the <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
      statement.
    </p><p>
      MySQL represents each table by an <code class="filename">.frm</code> table
      format (definition) file in the database directory. The storage
      engine for the table might create other files as well. In the case
      of <code class="literal">MyISAM</code> tables, the storage engine creates
      data and index files. Thus, for each <code class="literal">MyISAM</code>
      table <em class="replaceable"><code>tbl_name</code></em>, there are three disk
      files.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>File</strong></span></td><td><span class="bold"><strong>Purpose</strong></span></td></tr><tr><td><code class="filename"><em class="replaceable"><code>tbl_name</code></em>.frm</code></td><td>Table format (definition) file</td></tr><tr><td><code class="filename"><em class="replaceable"><code>tbl_name</code></em>.MYD</code></td><td>Data file</td></tr><tr><td><code class="filename"><em class="replaceable"><code>tbl_name</code></em>.MYI</code></td><td>Index file</td></tr></tbody></table></div><p>
      <a href="storage-engines.html" title="Chapter 13. Storage Engines">Chapter 13, <i>Storage Engines</i></a>, describes what files each
      storage engine creates to represent tables.
    </p><p>
      <em class="replaceable"><code>data_type</code></em> represents the data type in a
      column definition. <em class="replaceable"><code>spatial_type</code></em>
      represents a spatial data type. The data type syntax shown is
      representative only. For a full description of the syntax
      available for specifying column data types, as well as information
      about the properties of each type, see
      <a href="data-types.html" title="Chapter 10. Data Types">Chapter 10, <i>Data Types</i></a>, and
      <a href="functions.html#spatial-extensions" title="11.12. Spatial Extensions">Section 11.12, “Spatial Extensions”</a>.
    </p><p>
      Some attributes do not apply to all data types.
      <code class="literal">AUTO_INCREMENT</code> applies only to integer and
      floating-point types. <code class="literal">DEFAULT</code> does not apply to
      the <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> types.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If neither <code class="literal">NULL</code> nor <code class="literal">NOT
          NULL</code> is specified, the column is treated as though
          <code class="literal">NULL</code> had been specified.
        </p></li><li><p>
          An integer or floating-point column can have the additional
          attribute <code class="literal">AUTO_INCREMENT</code>. When you insert a
          value of <code class="literal">NULL</code> (recommended) or
          <code class="literal">0</code> into an indexed
          <code class="literal">AUTO_INCREMENT</code> column, the column is set to
          the next sequence value. Typically this is
          <code class="literal"><em class="replaceable"><code>value</code></em>+1</code>, where
          <em class="replaceable"><code>value</code></em> is the largest value for the
          column currently in the table.
          <code class="literal">AUTO_INCREMENT</code> sequences begin with
          <code class="literal">1</code>.
        </p><p>
          To retrieve an <code class="literal">AUTO_INCREMENT</code> value after
          inserting a row, use the
          <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> SQL function
          or the <a href="connectors-apis.html#mysql-insert-id" title="20.9.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> C API
          function. See <a href="functions.html#information-functions" title="11.10.3. Information Functions">Section 11.10.3, “Information Functions”</a>, and
          <a href="connectors-apis.html#mysql-insert-id" title="20.9.3.37. mysql_insert_id()">Section 20.9.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
        </p><p>
          If the <a href="server-administration.html#sqlmode_no_auto_value_on_zero"><code class="literal">NO_AUTO_VALUE_ON_ZERO</code></a>
          SQL mode is enabled, you can store <code class="literal">0</code> in
          <code class="literal">AUTO_INCREMENT</code> columns as
          <code class="literal">0</code> without generating a new sequence value.
          See <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            There can be only one <code class="literal">AUTO_INCREMENT</code>
            column per table, it must be indexed, and it cannot have a
            <code class="literal">DEFAULT</code> value. An
            <code class="literal">AUTO_INCREMENT</code> column works properly only
            if it contains only positive values. Inserting a negative
            number is regarded as inserting a very large positive
            number. This is done to avoid precision problems when
            numbers “<span class="quote">wrap</span>” over from positive to negative
            and also to ensure that you do not accidentally get an
            <code class="literal">AUTO_INCREMENT</code> column that contains
            <code class="literal">0</code>.
          </p></div><p>
          For <code class="literal">MyISAM</code> and <code class="literal">BDB</code>
          tables, you can specify an <code class="literal">AUTO_INCREMENT</code>
          secondary column in a multiple-column key. See
          <a href="tutorial.html#example-auto-increment" title="3.6.9. Using AUTO_INCREMENT">Section 3.6.9, “Using <code class="literal">AUTO_INCREMENT</code>”</a>.
        </p><a class="indexterm" name="id2068943"></a><a class="indexterm" name="id2068952"></a><p>
          To make MySQL compatible with some ODBC applications, you can
          find the <code class="literal">AUTO_INCREMENT</code> value for the last
          inserted row with the following query:
        </p><pre class="programlisting">SELECT * FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>auto_col</code></em> IS NULL
</pre><p>
          For information about <code class="literal">InnoDB</code> and
          <code class="literal">AUTO_INCREMENT</code>, see
          <a href="storage-engines.html#innodb-auto-increment-handling" title="13.2.4.3. AUTO_INCREMENT Handling in InnoDB">Section 13.2.4.3, “<code class="literal">AUTO_INCREMENT</code> Handling in <code class="literal">InnoDB</code>”</a>.
        </p></li><li><p>
          Character data types (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>) can include
          <code class="literal">CHARACTER SET</code> and
          <code class="literal">COLLATE</code> attributes to specify the character
          set and collation for the column. For details, see
          <a href="internationalization-localization.html#charset" title="9.1. Character Set Support">Section 9.1, “Character Set Support”</a>. <code class="literal">CHARSET</code> is a
          synonym for <code class="literal">CHARACTER SET</code>. Example:
        </p><pre class="programlisting">CREATE TABLE t (c CHAR(20) CHARACTER SET utf8 COLLATE utf8_bin);
</pre><p>
          MySQL 5.0 interprets length specifications in
          character column definitions in characters. (Versions before
          MySQL 4.1 interpreted them in bytes.) Lengths for
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> and
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> are in bytes.
        </p></li><li><p>
          <a class="indexterm" name="id2069097"></a>

          <a class="indexterm" name="id2069106"></a>

          The <code class="literal">DEFAULT</code> clause specifies a default
          value for a column. With one exception, the default value must
          be a constant; it cannot be a function or an expression. This
          means, for example, that you cannot set the default for a date
          column to be the value of a function such as
          <a href="functions.html#function_now"><code class="literal">NOW()</code></a> or
          <a href="functions.html#function_current-date"><code class="literal">CURRENT_DATE</code></a>. The exception is
          that you can specify
          <a href="functions.html#function_current-timestamp"><code class="literal">CURRENT_TIMESTAMP</code></a> as the
          default for a <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column.
          See <a href="data-types.html#timestamp" title="10.3.1.1. TIMESTAMP Properties">Section 10.3.1.1, “<code class="literal">TIMESTAMP</code> Properties”</a>.
        </p><p>
          If a column definition includes no explicit
          <code class="literal">DEFAULT</code> value, MySQL determines the default
          value as described in <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
        </p><p>
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns cannot be assigned
          a default value.
        </p><p>
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> fails if a
          date-valued default is not correct according to the
          <a href="server-administration.html#sqlmode_no_zero_in_date"><code class="literal">NO_ZERO_IN_DATE</code></a> SQL mode,
          even if strict SQL mode is not enabled. For example,
          <code class="literal">c1 DATE DEFAULT '2010-00-00'</code> causes
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> to fail with
          <code class="literal">Invalid default value for 'c1'</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2069234"></a>

          A comment for a column can be specified with the
          <code class="literal">COMMENT</code> option, up to 255 characters long.
          The comment is displayed by the <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW
          CREATE TABLE</code></a> and
          <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW FULL
          COLUMNS</code></a> statements.
        </p></li><li><p>
          <code class="literal">KEY</code> is normally a synonym for
          <code class="literal">INDEX</code>. The key attribute <code class="literal">PRIMARY
          KEY</code> can also be specified as just
          <code class="literal">KEY</code> when given in a column definition. This
          was implemented for compatibility with other database systems.
        </p></li><li><p>
          A <code class="literal">UNIQUE</code> index creates a constraint such
          that all values in the index must be distinct. An error occurs
          if you try to add a new row with a key value that matches an
          existing row. This constraint does not apply to
          <code class="literal">NULL</code> values except for the
          <code class="literal">BDB</code> storage engine. For other engines, a
          <code class="literal">UNIQUE</code> index allows multiple
          <code class="literal">NULL</code> values for columns that can contain
          <code class="literal">NULL</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2069347"></a>

          A <code class="literal">PRIMARY KEY</code> is a unique index where all
          key columns must be defined as <code class="literal">NOT NULL</code>. If
          they are not explicitly declared as <code class="literal">NOT
          NULL</code>, MySQL declares them so implicitly (and
          silently). A table can have only one <code class="literal">PRIMARY
          KEY</code>. If you do not have a <code class="literal">PRIMARY
          KEY</code> and an application asks for the <code class="literal">PRIMARY
          KEY</code> in your tables, MySQL returns the first
          <code class="literal">UNIQUE</code> index that has no
          <code class="literal">NULL</code> columns as the <code class="literal">PRIMARY
          KEY</code>.
        </p><p>
          In <code class="literal">InnoDB</code> tables, having a long
          <code class="literal">PRIMARY KEY</code> wastes a lot of space. (See
          <a href="storage-engines.html#innodb-table-and-index" title="13.2.10. InnoDB Table and Index Structures">Section 13.2.10, “<code class="literal">InnoDB</code> Table and Index Structures”</a>.)
        </p></li><li><p>
          In the created table, a <code class="literal">PRIMARY KEY</code> is
          placed first, followed by all <code class="literal">UNIQUE</code>
          indexes, and then the nonunique indexes. This helps the MySQL
          optimizer to prioritize which index to use and also more
          quickly to detect duplicated <code class="literal">UNIQUE</code> keys.
        </p></li><li><p>
          A <code class="literal">PRIMARY KEY</code> can be a multiple-column
          index. However, you cannot create a multiple-column index
          using the <code class="literal">PRIMARY KEY</code> key attribute in a
          column specification. Doing so only marks that single column
          as primary. You must use a separate <code class="literal">PRIMARY
          KEY(<em class="replaceable"><code>index_col_name</code></em>, ...)</code>
          clause.
        </p></li><li><p>
          <a class="indexterm" name="id2069496"></a>

          If a <code class="literal">PRIMARY KEY</code> or
          <code class="literal">UNIQUE</code> index consists of only one column
          that has an integer type, you can also refer to the column as
          <code class="literal">_rowid</code> in
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements.
        </p></li><li><p>
          In MySQL, the name of a <code class="literal">PRIMARY KEY</code> is
          <code class="literal">PRIMARY</code>. For other indexes, if you do not
          assign a name, the index is assigned the same name as the
          first indexed column, with an optional suffix
          (<code class="literal">_2</code>, <code class="literal">_3</code>,
          <code class="literal">...</code>) to make it unique. You can see index
          names for a table using <code class="literal">SHOW INDEX FROM
          <em class="replaceable"><code>tbl_name</code></em></code>. See
          <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax">Section 12.5.5.18, “<code class="literal">SHOW INDEX</code> Syntax”</a>.
        </p></li><li><p>
          Some storage engines allow you to specify an index type when
          creating an index. The syntax for the
          <em class="replaceable"><code>index_type</code></em> specifier is
          <code class="literal">USING <em class="replaceable"><code>type_name</code></em></code>.
        </p><p>
          Example:
        </p><pre class="programlisting">CREATE TABLE lookup
  (id INT, INDEX USING BTREE (id))
  ENGINE = MEMORY;
</pre><p>
          For details about <code class="literal">USING</code>, see
          <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax">Section 12.1.8, “<code class="literal">CREATE INDEX</code> Syntax”</a>.
        </p><p>
          For more information about indexes, see
          <a href="optimization.html#mysql-indexes" title="7.4.4. How MySQL Uses Indexes">Section 7.4.4, “How MySQL Uses Indexes”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2069640"></a>

          <a class="indexterm" name="id2069653"></a>

          In MySQL 5.0, only the <code class="literal">MyISAM</code>,
          <code class="literal">InnoDB</code>, <code class="literal">BDB</code>, and
          <code class="literal">MEMORY</code> storage engines support indexes on
          columns that can have <code class="literal">NULL</code> values. In other
          cases, you must declare indexed columns as <code class="literal">NOT
          NULL</code> or an error results.
        </p></li><li><p>
          For <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>, and
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns, indexes can
          be created that use only the leading part of column values,
          using
          <code class="literal"><em class="replaceable"><code>col_name</code></em>(<em class="replaceable"><code>length</code></em>)</code>
          syntax to specify an index prefix length.
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns also can be
          indexed, but a prefix length <span class="emphasis"><em>must</em></span> be
          given. Prefix lengths are given in characters for nonbinary
          string types and in bytes for binary string types. That is,
          index entries consist of the first
          <em class="replaceable"><code>length</code></em> characters of each column
          value for <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns, and the first
          <em class="replaceable"><code>length</code></em> bytes of each column value
          for <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>, and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns. Indexing only a
          prefix of column values like this can make the index file much
          smaller. See <a href="optimization.html#indexes" title="7.4.2. Column Indexes">Section 7.4.2, “Column Indexes”</a>.
        </p><a class="indexterm" name="id2069827"></a><a class="indexterm" name="id2069839"></a><a class="indexterm" name="id2069851"></a><a class="indexterm" name="id2069864"></a><p>
          Only the <code class="literal">MyISAM</code>, <code class="literal">BDB</code>,
          and <code class="literal">InnoDB</code> storage engines support indexing
          on <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns. For example:
        </p><pre class="programlisting">CREATE TABLE test (blob_col BLOB, INDEX(blob_col(10)));
</pre><p>
          Prefixes can be up to 1000 bytes long (767 bytes for
          <code class="literal">InnoDB</code> tables). Note that prefix limits are
          measured in bytes, whereas the prefix length in
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statements is
          interpreted as number of characters for nonbinary data types
          (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>). Take this into account
          when specifying a prefix length for a column that uses a
          multi-byte character set.
        </p></li><li><p>
          An <em class="replaceable"><code>index_col_name</code></em> specification can
          end with <code class="literal">ASC</code> or <code class="literal">DESC</code>.
          These keywords are allowed for future extensions for
          specifying ascending or descending index value storage.
          Currently, they are parsed but ignored; index values are
          always stored in ascending order.
        </p></li><li><p>
          When you use <code class="literal">ORDER BY</code> or <code class="literal">GROUP
          BY</code> on a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> or
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> column in a
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, the server sorts values
          using only the initial number of bytes indicated by the
          <a href="server-administration.html#sysvar_max_sort_length"><code class="literal">max_sort_length</code></a> system
          variable. See <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types">Section 10.4.3, “The <code class="literal">BLOB</code> and
        <code class="literal">TEXT</code> Types”</a>.
        </p></li><li><p>
          You can create special <code class="literal">FULLTEXT</code> indexes,
          which are used for full-text searches. Only the
          <code class="literal">MyISAM</code> storage engine supports
          <code class="literal">FULLTEXT</code> indexes. They can be created only
          from <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>, and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns. Indexing always
          happens over the entire column; column prefix indexing is not
          supported and any prefix length is ignored if specified. See
          <a href="functions.html#fulltext-search" title="11.8. Full-Text Search Functions">Section 11.8, “Full-Text Search Functions”</a>, for details of operation.
        </p></li><li><p>
          You can create <code class="literal">SPATIAL</code> indexes on spatial
          data types. Spatial types are supported only for
          <code class="literal">MyISAM</code> tables and indexed columns must be
          declared as <code class="literal">NOT NULL</code>. See
          <a href="functions.html#spatial-extensions" title="11.12. Spatial Extensions">Section 11.12, “Spatial Extensions”</a>.
        </p></li><li><p>
          <code class="literal">InnoDB</code> tables support checking of foreign
          key constraints. See <a href="storage-engines.html#innodb" title="13.2. The InnoDB Storage Engine">Section 13.2, “The <code class="literal">InnoDB</code> Storage Engine”</a>. Note that the
          <code class="literal">FOREIGN KEY</code> syntax in
          <code class="literal">InnoDB</code> is more restrictive than the syntax
          presented for the <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
          statement at the beginning of this section: The columns of the
          referenced table must always be explicitly named.
          <code class="literal">InnoDB</code> supports both <code class="literal">ON
          DELETE</code> and <code class="literal">ON UPDATE</code> actions on
          foreign keys. For the precise syntax, see
          <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.2.4.4. FOREIGN KEY Constraints">Section 13.2.4.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>.
        </p><p>
          For other storage engines, MySQL Server parses and ignores the
          <code class="literal">FOREIGN KEY</code> and
          <code class="literal">REFERENCES</code> syntax in
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statements. The
          <code class="literal">CHECK</code> clause is parsed but ignored by all
          storage engines. See <a href="introduction.html#ansi-diff-foreign-keys" title="1.7.5.4. Foreign Keys">Section 1.7.5.4, “Foreign Keys”</a>.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            For users familiar with the ANSI/ISO SQL Standard, please
            note that no storage engine, including
            <code class="literal">InnoDB</code>, recognizes or enforces the
            <code class="literal">MATCH</code> clause used in referential
            integrity constraint definitions. Use of an explicit
            <code class="literal">MATCH</code> clause will not have the specified
            effect, and also causes <code class="literal">ON DELETE</code> and
            <code class="literal">ON UPDATE</code> clauses to be ignored. For
            these reasons, specifying <code class="literal">MATCH</code> should be
            avoided.
          </p><p>
            The <code class="literal">MATCH</code> clause in the SQL standard
            controls how <code class="literal">NULL</code> values in a composite
            (multiple-column) foreign key are handled when comparing to
            a primary key. <code class="literal">InnoDB</code> essentially
            implements the semantics defined by <code class="literal">MATCH
            SIMPLE</code>, which allow a foreign key to be all or
            partially <code class="literal">NULL</code>. In that case, the (child
            table) row containing such a foreign key is allowed to be
            inserted, and does not match any row in the referenced
            (parent) table. It is possible to implement other semantics
            using triggers.
          </p><p>
            Additionally, MySQL and <code class="literal">InnoDB</code> require
            that the referenced columns be indexed for performance.
            However, the system does not enforce a requirement that the
            referenced columns be <code class="literal">UNIQUE</code> or be
            declared <code class="literal">NOT NULL</code>. The handling of
            foreign key references to nonunique keys or keys that
            contain <code class="literal">NULL</code> values is not well defined
            for operations such as <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
            or <code class="literal">DELETE CASCADE</code>. You are advised to use
            foreign keys that reference only <code class="literal">UNIQUE</code>
            and <code class="literal">NOT NULL</code> keys.
          </p><p>
            Furthermore, <code class="literal">InnoDB</code> does not recognize or
            support “<span class="quote">inline <code class="literal">REFERENCES</code>
            specifications</span>” (as defined in the SQL standard)
            where the references are defined as part of the column
            specification. <code class="literal">InnoDB</code> accepts
            <code class="literal">REFERENCES</code> clauses only when specified as
            part of a separate <code class="literal">FOREIGN KEY</code>
            specification. For other storage engines, MySQL Server
            parses and ignores foreign key specifications.
          </p></div></li><li><p>
          There is a hard limit of 4096 columns per table, but the
          effective maximum may be less for a given table and depends on
          the factors discussed in <a href="restrictions.html#column-count-limit" title="D.7.2. The Maximum Number of Columns Per Table">Section D.7.2, “The Maximum Number of Columns Per Table”</a>.
        </p></li></ul></div><p>
      The <code class="literal">ENGINE</code> table option specifies the storage
      engine for the table. <code class="literal">TYPE</code> is a synonym, but
      <code class="literal">ENGINE</code> is the preferred option name.
    </p><p>
      The <code class="literal">ENGINE</code> table option takes the storage
      engine names shown in the following table.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Storage Engine</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">ARCHIVE</code></td><td>The archiving storage engine. See
              <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine">Section 13.8, “The <code class="literal">ARCHIVE</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">BDB</code></td><td>Transaction-safe tables with page locking. Also known as
              <code class="literal">BerkeleyDB</code>. See
              <a href="storage-engines.html#bdb-storage-engine" title="13.5. The BDB (BerkeleyDB) Storage
    Engine">Section 13.5, “The <code class="literal">BDB</code> (<code class="literal">BerkeleyDB</code>) Storage
    Engine”</a>.</td></tr><tr><td><code class="literal">CSV</code></td><td>Tables that store rows in comma-separated values format. See
              <a href="storage-engines.html#csv-storage-engine" title="13.9. The CSV Storage Engine">Section 13.9, “The <code class="literal">CSV</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">EXAMPLE</code></td><td>An example engine. See <a href="storage-engines.html#example-storage-engine" title="13.6. The EXAMPLE Storage Engine">Section 13.6, “The <code class="literal">EXAMPLE</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">FEDERATED</code></td><td>Storage engine that accesses remote tables. See
              <a href="storage-engines.html#federated-storage-engine" title="13.7. The FEDERATED Storage Engine">Section 13.7, “The <code class="literal">FEDERATED</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">HEAP</code></td><td>This is a synonym for <code class="literal">MEMORY</code>.</td></tr><tr><td><code class="literal">ISAM</code> (<span class="emphasis"><em>OBSOLETE</em></span>)</td><td>Not available in MySQL 5.0. If you are upgrading to MySQL
              5.0 from a previous version, you should
              convert any existing <code class="literal">ISAM</code> tables to
              <code class="literal">MyISAM</code> <span class="emphasis"><em>before</em></span>
              performing the upgrade.</td></tr><tr><td><code class="literal">InnoDB</code></td><td>Transaction-safe tables with row locking and foreign keys. See
              <a href="storage-engines.html#innodb" title="13.2. The InnoDB Storage Engine">Section 13.2, “The <code class="literal">InnoDB</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">MEMORY</code></td><td>The data for this storage engine is stored only in memory. See
              <a href="storage-engines.html#memory-storage-engine" title="13.4. The MEMORY (HEAP) Storage Engine">Section 13.4, “The <code class="literal">MEMORY</code> (<code class="literal">HEAP</code>) Storage Engine”</a>.</td></tr><tr><td><code class="literal">MERGE</code></td><td>A collection of <code class="literal">MyISAM</code> tables used as one table. Also
              known as <code class="literal">MRG_MyISAM</code>. See
              <a href="storage-engines.html#merge-storage-engine" title="13.3. The MERGE Storage Engine">Section 13.3, “The <code class="literal">MERGE</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">MyISAM</code></td><td>The binary portable storage engine that is the default storage engine
              used by MySQL. See
              <a href="storage-engines.html#myisam-storage-engine" title="13.1. The MyISAM Storage Engine">Section 13.1, “The <code class="literal">MyISAM</code> Storage Engine”</a>.</td></tr><tr><td><code class="literal">NDBCLUSTER</code></td><td>Clustered, fault-tolerant, memory-based tables. Also known as
              <code class="literal">NDB</code>. See
              <a href="mysql-cluster.html" title="Chapter 17. MySQL Cluster">Chapter 17, <i>MySQL Cluster</i></a>.</td></tr></tbody></table></div><p>
      If a storage engine is specified that is not available, MySQL uses
      the default engine instead. Normally, this is
      <code class="literal">MyISAM</code>. For example, if a table definition
      includes the <code class="literal">ENGINE=BDB</code> option but the MySQL
      server does not support <code class="literal">BDB</code> tables, the table
      is created as a <code class="literal">MyISAM</code> table. This makes it
      possible to have a replication setup where you have transactional
      tables on the master but tables created on the slave are
      nontransactional (to get more speed). In MySQL 5.0, a
      warning occurs if the storage engine specification is not honored.
    </p><p>
      Engine substitution can be controlled by the setting of the
      <a href="server-administration.html#sqlmode_no_engine_substitution"><code class="literal">NO_ENGINE_SUBSTITUTION</code></a> SQL mode,
      as described in <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
    </p><p>
      The other table options are used to optimize the behavior of the
      table. In most cases, you do not have to specify any of them.
      These options apply to all storage engines unless otherwise
      indicated. Options that do not apply to a given storage engine may
      be accepted and remembered as part of the table definition. Such
      options then apply if you later use <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
      TABLE</code></a> to convert the table to use a different storage
      engine.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">AUTO_INCREMENT</code>
        </p><p>
          The initial <code class="literal">AUTO_INCREMENT</code> value for the
          table. In MySQL 5.0, this works for
          <code class="literal">MyISAM</code> and <code class="literal">MEMORY</code>
          tables. It is also supported for <code class="literal">InnoDB</code> as
          of MySQL 5.0.3. To set the first auto-increment value for
          engines that do not support the
          <code class="literal">AUTO_INCREMENT</code> table option, insert a
          “<span class="quote">dummy</span>” row with a value one less than the
          desired value after creating the table, and then delete the
          dummy row.
        </p><p>
          For engines that support the <code class="literal">AUTO_INCREMENT</code>
          table option in <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
          statements, you can also use <code class="literal">ALTER TABLE
          <em class="replaceable"><code>tbl_name</code></em> AUTO_INCREMENT =
          <em class="replaceable"><code>N</code></em></code> to reset the
          <code class="literal">AUTO_INCREMENT</code> value. The value cannot be
          set lower than the maximum value currently in the column.
        </p></li><li><p>
          <code class="literal">AVG_ROW_LENGTH</code>
        </p><p>
          An approximation of the average row length for your table. You
          need to set this only for large tables with variable-size
          rows.
        </p><p>
          When you create a <code class="literal">MyISAM</code> table, MySQL uses
          the product of the <code class="literal">MAX_ROWS</code> and
          <code class="literal">AVG_ROW_LENGTH</code> options to decide how big
          the resulting table is. If you don't specify either option,
          the maximum size for <code class="literal">MyISAM</code> data and index
          table files is 256TB of data by default (4GB before MySQL
          5.0.6). (If your operating system does not support files that
          large, table sizes are constrained by the file size limit.) If
          you want to keep down the pointer sizes to make the index
          smaller and faster and you don't really need big files, you
          can decrease the default pointer size by setting the
          <a href="server-administration.html#sysvar_myisam_data_pointer_size"><code class="literal">myisam_data_pointer_size</code></a>
          system variable, which was added in MySQL 4.1.2. (See
          <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>.) If you want all
          your tables to be able to grow above the default limit and are
          willing to have your tables slightly slower and larger than
          necessary, you can increase the default pointer size by
          setting this variable. Setting the value to 7 allows table
          sizes up to 65,536TB.
        </p></li><li><p>
          <code class="literal">[DEFAULT] CHARACTER SET</code>
        </p><p>
          Specify a default character set for the table.
          <code class="literal">CHARSET</code> is a synonym for <code class="literal">CHARACTER
          SET</code>. If the character set name is
          <code class="literal">DEFAULT</code>, the database character set is
          used.
        </p></li><li><p>
          <code class="literal">CHECKSUM</code>
        </p><p>
          Set this to 1 if you want MySQL to maintain a live checksum
          for all rows (that is, a checksum that MySQL updates
          automatically as the table changes). This makes the table a
          little slower to update, but also makes it easier to find
          corrupted tables. The <a href="sql-syntax.html#checksum-table" title="12.5.2.4. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM
          TABLE</code></a> statement reports the checksum.
          (<code class="literal">MyISAM</code> only.)
        </p></li><li><p>
          <code class="literal">[DEFAULT] COLLATE</code>
        </p><p>
          Specify a default collation for the table.
        </p></li><li><p>
          <code class="literal">COMMENT</code>
        </p><p>
          A comment for the table, up to 60 characters long.
        </p></li><li><p>
          <code class="literal">CONNECTION</code>
        </p><p>
          The connection string for a <code class="literal">FEDERATED</code>
          table. This option is available as of MySQL 5.0.13; before
          that, use a <code class="literal">COMMENT</code> option for the
          connection string.
        </p></li><li><p>
          <code class="literal">DATA DIRECTORY</code>, <code class="literal">INDEX
          DIRECTORY</code>
        </p><p>
          By using <code class="literal">DATA
          DIRECTORY='<em class="replaceable"><code>directory</code></em>'</code> or
          <code class="literal">INDEX
          DIRECTORY='<em class="replaceable"><code>directory</code></em>'</code> you
          can specify where the <code class="literal">MyISAM</code> storage engine
          should put a table's data file and index file. The directory
          must be the full path name to the directory, not a relative
          path.
        </p><p>
          These options work only when you are not using the
          <a href="server-administration.html#option_mysqld_symbolic-links"><code class="option">--skip-symbolic-links</code></a>
          option. Your operating system must also have a working,
          thread-safe <code class="literal">realpath()</code> call. See
          <a href="optimization.html#symbolic-links-to-tables" title="7.6.1.2. Using Symbolic Links for Tables on Unix">Section 7.6.1.2, “Using Symbolic Links for Tables on Unix”</a>, for more complete
          information.
        </p><p>
          If a <code class="literal">MyISAM</code> table is created with no
          <code class="literal">DATA DIRECTORY</code> option, the
          <code class="filename">.MYD</code> file is created in the database
          directory. By default, if <code class="literal">MyISAM</code> finds an
          existing <code class="filename">.MYD</code> file in this case, it
          overwrites it. The same applies to <code class="filename">.MYI</code>
          files for tables created with no <code class="literal">INDEX
          DIRECTORY</code> option. As of MySQL 5.0.48, to suppress
          this behavior, start the server with the
          <a href="server-administration.html#sysvar_keep_files_on_create"><code class="option">--keep_files_on_create</code></a> option,
          in which case <code class="literal">MyISAM</code> will not overwrite
          existing files and returns an error instead.
        </p><p>
          If a <code class="literal">MyISAM</code> table is created with a
          <code class="literal">DATA DIRECTORY</code> or <code class="literal">INDEX
          DIRECTORY</code> option and an existing
          <code class="filename">.MYD</code> or <code class="filename">.MYI</code> file is
          found, MyISAM always returns an error. It will not overwrite a
          file in the specified directory.
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
            Beginning with MySQL 5.0.60, you cannot use path names that
            contain the MySQL data directory with <code class="literal">DATA
            DIRECTORY</code> or <code class="literal">INDEX DIRECTORY</code>.
            (See <a href="http://bugs.mysql.com/32167" target="_top">Bug#32167</a>.)
          </p></div></li><li><p>
          <code class="literal">DELAY_KEY_WRITE</code>
        </p><p>
          Set this to 1 if you want to delay key updates for the table
          until the table is closed. See the description of the
          <a href="server-administration.html#sysvar_delay_key_write"><code class="literal">delay_key_write</code></a> system
          variable in <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>.
          (<code class="literal">MyISAM</code> only.)
        </p></li><li><p>
          <code class="literal">INSERT_METHOD</code>
        </p><p>
          If you want to insert data into a <code class="literal">MERGE</code>
          table, you must specify with <code class="literal">INSERT_METHOD</code>
          the table into which the row should be inserted.
          <code class="literal">INSERT_METHOD</code> is an option useful for
          <code class="literal">MERGE</code> tables only. Use a value of
          <code class="literal">FIRST</code> or <code class="literal">LAST</code> to have
          inserts go to the first or last table, or a value of
          <code class="literal">NO</code> to prevent inserts. See
          <a href="storage-engines.html#merge-storage-engine" title="13.3. The MERGE Storage Engine">Section 13.3, “The <code class="literal">MERGE</code> Storage Engine”</a>.
        </p></li><li><p>
          <code class="literal">MAX_ROWS</code>
        </p><p>
          The maximum number of rows you plan to store in the table.
          This is not a hard limit, but rather a hint to the storage
          engine that the table must be able to store at least this many
          rows.
        </p></li><li><p>
          <code class="literal">MIN_ROWS</code>
        </p><p>
          The minimum number of rows you plan to store in the table. The
          <code class="literal">MEMORY</code> storage engine uses this
          option as a hint about memory use.
        </p></li><li><p>
          <code class="literal">PACK_KEYS</code>
        </p><p>
          <code class="literal">PACK_KEYS</code> takes effect only with
          <code class="literal">MyISAM</code> tables. Set this option to 1 if you
          want to have smaller indexes. This usually makes updates
          slower and reads faster. Setting the option to 0 disables all
          packing of keys. Setting it to <code class="literal">DEFAULT</code>
          tells the storage engine to pack only long
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>, or
          <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns.
        </p><p>
          If you do not use <code class="literal">PACK_KEYS</code>, the default is
          to pack strings, but not numbers. If you use
          <code class="literal">PACK_KEYS=1</code>, numbers are packed as well.
        </p><p>
          When packing binary number keys, MySQL uses prefix
          compression:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              Every key needs one extra byte to indicate how many bytes
              of the previous key are the same for the next key.
            </p></li><li><p>
              The pointer to the row is stored in high-byte-first order
              directly after the key, to improve compression.
            </p></li></ul></div><p>
          This means that if you have many equal keys on two consecutive
          rows, all following “<span class="quote">same</span>” keys usually only take
          two bytes (including the pointer to the row). Compare this to
          the ordinary case where the following keys takes
          <code class="literal">storage_size_for_key + pointer_size</code> (where
          the pointer size is usually 4). Conversely, you get a
          significant benefit from prefix compression only if you have
          many numbers that are the same. If all keys are totally
          different, you use one byte more per key, if the key is not a
          key that can have <code class="literal">NULL</code> values. (In this
          case, the packed key length is stored in the same byte that is
          used to mark if a key is <code class="literal">NULL</code>.)
        </p></li><li><p>
          <code class="literal">PASSWORD</code>
        </p><p>
          This option is unused. If you have a need to scramble your
          <code class="filename">.frm</code> files and make them unusable to any
          other MySQL server, please contact our sales department.
        </p></li><li><p>
          <code class="literal">ROW_FORMAT</code>
        </p><p>
          Defines how the rows should be stored. For
          <code class="literal">MyISAM</code> tables, the option value can be
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FIXED</code></a> or
          <code class="literal">DYNAMIC</code> for static or variable-length row
          format. <a href="programs.html#myisampack" title="4.6.5. myisampack — Generate Compressed, Read-Only MyISAM Tables"><span><strong class="command">myisampack</strong></span></a> sets the type to
          <code class="literal">COMPRESSED</code>. See
          <a href="storage-engines.html#myisam-table-formats" title="13.1.3. MyISAM Table Storage Formats">Section 13.1.3, “<code class="literal">MyISAM</code> Table Storage Formats”</a>.
        </p><p>
          Starting with MySQL 5.0.3, for <code class="literal">InnoDB</code>
          tables, rows are stored in compact format
          (<code class="literal">ROW_FORMAT=COMPACT</code>) by default. The
          noncompact format used in older versions of MySQL can still be
          requested by specifying
          <code class="literal">ROW_FORMAT=REDUNDANT</code>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            When executing a <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
            statement, if you specify a row format which is not
            supported by the storage engine that is used for the table,
            the table is created using that storage engine's
            default row format. The information reported in this column
            in response to <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE
            STATUS</code></a> is the actual row format used. This may
            differ from the value in the
            <code class="literal">Create_options</code> column because the
            original <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
            definition is retained during creation.
          </p></div></li><li><p>
          <code class="literal">RAID_TYPE</code>
        </p><p>
          <code class="literal">RAID</code> support has been removed as of MySQL
          5.0. For information on <code class="literal">RAID</code>, see
          <a href="http://dev.mysql.com/doc/refman/4.1/en/create-table.html" target="_top"><code class="literal">CREATE TABLE</code> Syntax</a>.
        </p></li><li><p>
          <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a>
        </p><p>
          <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> is used when you want to
          access a collection of identical <code class="literal">MyISAM</code>
          tables as one. This works only with <code class="literal">MERGE</code>
          tables. See <a href="storage-engines.html#merge-storage-engine" title="13.3. The MERGE Storage Engine">Section 13.3, “The <code class="literal">MERGE</code> Storage Engine”</a>.
        </p><p>
          You must have <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>,
          <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a>, and
          <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a> privileges for the
          tables you map to a <code class="literal">MERGE</code> table.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Formerly, all tables used had to be in the same database as
            the <code class="literal">MERGE</code> table itself. This restriction
            no longer applies.
          </p></div></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        The original <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>
        statement, including all specifications and table options are
        stored by MySQL when the table is created. The information is
        retained so that if you change storage engines, collations or
        other settings using an <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement, the original table options specified
        are retained. This allows you to change between
        <code class="literal">InnoDB</code> and <code class="literal">MyISAM</code> table
        types even though the row formats supported by the two engines
        are different.
      </p><p>
        Because the text of the original statement is retained, but due
        to the way that certain values and options may be silently
        reconfigured (such as the <code class="literal">ROW_FORMAT</code>), the
        active table definition (accessible through
        <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> or with
        <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE STATUS</code></a>) and the table
        creation string (accessible through <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW
        CREATE TABLE</code></a>) will report different values.
      </p></div><a class="indexterm" name="id2071882"></a><a class="indexterm" name="id2071891"></a><p>
      You can create one table from another by adding a
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement at the end of the
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement:
    </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>new_tbl</code></em> SELECT * FROM <em class="replaceable"><code>orig_tbl</code></em>;
</pre><p>
      MySQL creates new columns for all elements in the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>. For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE test (a INT NOT NULL AUTO_INCREMENT,</code></strong>
    -&gt;        <strong class="userinput"><code>PRIMARY KEY (a), KEY(b))</code></strong>
    -&gt;        <strong class="userinput"><code>ENGINE=MyISAM SELECT b,c FROM test2;</code></strong>
</pre><p>
      This creates a <code class="literal">MyISAM</code> table with three columns,
      <code class="literal">a</code>, <code class="literal">b</code>, and
      <code class="literal">c</code>. Notice that the columns from the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement are appended to
      the right side of the table, not overlapped onto it. Take the
      following example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM foo;</code></strong>
+---+
| n |
+---+
| 1 |
+---+

mysql&gt; <strong class="userinput"><code>CREATE TABLE bar (m INT) SELECT n FROM foo;</code></strong>
Query OK, 1 row affected (0.02 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM bar;</code></strong>
+------+---+
| m    | n |
+------+---+
| NULL | 1 |
+------+---+
1 row in set (0.00 sec)
</pre><p>
      For each row in table <code class="literal">foo</code>, a row is inserted in
      <code class="literal">bar</code> with the values from <code class="literal">foo</code>
      and default values for the new columns.
    </p><p>
      In a table resulting from
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
      SELECT</code></a>, columns named only in the
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> part come first.
      Columns named in both parts or only in the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> part come after that. The
      data type of <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> columns can be
      overridden by also specifying the column in the
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> part.
    </p><p>
      If any errors occur while copying the data to the table, it is
      automatically dropped and not created.
    </p><p>
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
      SELECT</code></a> does not automatically create any indexes for
      you. This is done intentionally to make the statement as flexible
      as possible. If you want to have indexes in the created table, you
      should specify these before the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE bar (UNIQUE (n)) SELECT n FROM foo;</code></strong>
</pre><p>
      Some conversion of data types might occur. For example, the
      <code class="literal">AUTO_INCREMENT</code> attribute is not preserved, and
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> columns can become
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> columns. Retrained attributes
      are <code class="literal">NULL</code> (or <code class="literal">NOT NULL</code>) and,
      for those columns that have them, <code class="literal">CHARACTER
      SET</code>, <code class="literal">COLLATION</code>,
      <code class="literal">COMMENT</code>, and the <code class="literal">DEFAULT</code>
      clause.
    </p><p>
      When creating a table with <code class="literal">CREATE ... SELECT</code>,
      make sure to alias any function calls or expressions in the query.
      If you do not, the <code class="literal">CREATE</code> statement might fail
      or result in undesirable column names.
    </p><pre class="programlisting">CREATE TABLE artists_and_works
  SELECT artist.name, COUNT(work.artist_id) AS number_of_works
  FROM artist LEFT JOIN work ON artist.id = work.artist_id
  GROUP BY artist.id;
</pre><p>
      You can also explicitly specify the data type for a generated
      column:
    </p><pre class="programlisting">CREATE TABLE foo (a TINYINT NOT NULL) SELECT b+1 AS a FROM bar;
</pre><p>
      For <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
      SELECT</code></a>, if <code class="literal">IF NOT EXISTS</code> is given and
      the table already exists, MySQL handles the statement as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The table definition given in the <code class="literal">CREATE
          TABLE</code> part is ignored. No error occurs, even if the
          definition does not match that of the existing table.
        </p></li><li><p>
          If there is a mismatch between the number of columns in the
          table and the number of columns produced by the
          <code class="literal">SELECT</code> part, the selected values are
          assigned to the rightmost columns. For example, if the table
          contains <em class="replaceable"><code>n</code></em> columns and the
          <code class="literal">SELECT</code> produces
          <em class="replaceable"><code>m</code></em> columns, where
          <em class="replaceable"><code>m</code></em> &lt;
          <em class="replaceable"><code>n</code></em>, the selected values are assigned
          to the <em class="replaceable"><code>m</code></em> rightmost columns in the
          table. Each of the initial <em class="replaceable"><code>n</code></em>
          – <em class="replaceable"><code>m</code></em> columns is assigned its
          default value, either that specified explicitly in the column
          definition or the implicit column data type default if the
          definition contains no default.
        </p></li><li><p>
          If strict SQL mode is enabled and any of these initial columns
          do not have an explicit default value, the statement fails
          with an error.
        </p></li></ul></div><p>
      The following example illustrates <code class="literal">IF NOT EXISTS</code>
      handling:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (i1 INT DEFAULT 0, i2 INT, i3 INT, i4 INT);</code></strong>
Query OK, 0 rows affected (0.05 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE IF NOT EXISTS t1 (c1 CHAR(10)) SELECT 1, 2;</code></strong>
Query OK, 1 row affected, 1 warning (0.01 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM t1;</code></strong>
+------+------+------+------+
| i1   | i2   | i3   | i4   |
+------+------+------+------+
|    0 | NULL |    1 |    2 |
+------+------+------+------+
1 row in set (0.00 sec)
</pre><p>
      Use <code class="literal">LIKE</code> to create an empty table based on the
      definition of another table, including any column attributes and
      indexes defined in the original table:
    </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>new_tbl</code></em> LIKE <em class="replaceable"><code>orig_tbl</code></em>;
</pre><p>
      The copy is created using the same version of the table storage
      format as the original table. The
      <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege is required on the
      original table.
    </p><p>
      <code class="literal">LIKE</code> works only for base tables, not for views.
    </p><p>
      <code class="literal">CREATE TABLE ... LIKE</code> does not preserve any
      <code class="literal">DATA DIRECTORY</code> or <code class="literal">INDEX
      DIRECTORY</code> table options that were specified for the
      original table, or any foreign key definitions.
    </p><p>
      You can precede the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> by
      <code class="literal">IGNORE</code> or
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> to indicate how to handle
      rows that duplicate unique key values. With
      <code class="literal">IGNORE</code>, new rows that duplicate an existing row
      on a unique key value are discarded. With
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>, new rows replace rows that
      have the same unique key value. If neither
      <code class="literal">IGNORE</code> nor
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> is specified, duplicate
      unique key values result in an error.
    </p><p>
      To ensure that the binary log can be used to re-create the
      original tables, MySQL does not allow concurrent inserts during
      <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE ...
      SELECT</code></a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="silent-column-changes"></a>12.1.10.1. Silent Column Specification Changes</h4></div></div></div><a class="indexterm" name="id2072489"></a><p>
        In some cases, MySQL silently changes column specifications from
        those given in a <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
        <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement. These
        might be changes to a data type, to attributes associated with a
        data type, or to an index specification.
      </p><p>
        Some silent column specification changes include modifications
        to attribute or index specifications:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> display sizes are
            discarded.
          </p><p>
            Also note that <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a>
            columns are <code class="literal">NOT NULL</code> by default.
          </p></li><li><p>
            Columns that are part of a <code class="literal">PRIMARY KEY</code>
            are made <code class="literal">NOT NULL</code> even if not declared
            that way.
          </p></li><li><p>
            Trailing spaces are automatically deleted from
            <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> and
            <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> member values when the
            table is created.
          </p></li><li><p>
            MySQL maps certain data types used by other SQL database
            vendors to MySQL types. See
            <a href="data-types.html#other-vendor-data-types" title="10.7. Using Data Types from Other Database Engines">Section 10.7, “Using Data Types from Other Database Engines”</a>.
          </p></li><li><p>
            If you include a <code class="literal">USING</code> clause to specify
            an index type that is not legal for a given storage engine,
            but there is another index type available that the engine
            can use without affecting query results, the engine uses the
            available type.
          </p></li></ul></div><p>
        Possible data type changes are given in the following list. If a
        version number is given, the change occurs only up to the
        versions listed. After that, an error occurs if a column cannot
        be created using the specified data type.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Before MySQL 5.0.3, <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
            columns with a length less than four are changed to
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>.
          </p></li><li><p>
            Before MySQL 5.0.3, if any column in a table has a variable
            length, the entire row becomes variable-length as a result.
            Therefore, if a table contains any variable-length columns
            (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>, or
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>), all
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> columns longer than
            three characters are changed to
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> columns. This does
            not affect how you use the columns in any way; in MySQL,
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> is just a different
            way to store characters. MySQL performs this conversion
            because it saves space and makes table operations faster.
            See <a href="storage-engines.html" title="Chapter 13. Storage Engines">Chapter 13, <i>Storage Engines</i></a>.
          </p></li><li><p>
            Before MySQL 5.0.3, a <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> or
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> column with a length
            specification greater than 255 is converted to the smallest
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> type that can hold
            values of the given length. For example,
            <code class="literal">VARCHAR(500)</code> is converted to
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>, and
            <code class="literal">VARCHAR(200000)</code> is converted to
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">MEDIUMTEXT</code></a>. Similar
            conversions occur for <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>
            and <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>, except that
            they are converted to a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
            type.
          </p><p>
            Note that these conversions result in a change in behavior
            with regard to treatment of trailing spaces.
          </p><p>
            As of MySQL 5.0.3, a <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> or
            <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a> column with a length
            specification greater than 255 is not silently converted.
            Instead, an error occurs. From MySQL 5.0.6 on, silent
            conversion of <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> and
            <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a> columns with a
            length specification greater than 65535 does not occur if
            strict SQL mode is enabled. Instead, an error occurs.
          </p></li><li><p>
            Before MySQL 5.0.10, for a specification of
            <code class="literal">DECIMAL(<em class="replaceable"><code>M</code></em>,<em class="replaceable"><code>D</code></em>)</code>,
            if <em class="replaceable"><code>M</code></em> is not larger than
            <em class="replaceable"><code>D</code></em>, it is adjusted upward. For
            example, <code class="literal">DECIMAL(10,10)</code> becomes
            <code class="literal">DECIMAL(11,10)</code>. As of MySQL 5.0.10,
            <code class="literal">DECIMAL(10,10)</code> is created as specified.
          </p></li><li><p>
            Specifying the <code class="literal">CHARACTER SET binary</code>
            attribute for a character data type causes the column to be
            created as the corresponding binary data type:
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a> becomes
            <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
            <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a> becomes
            <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>, and
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> becomes
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>. For the
            <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> and
            <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> data types, this does not
            occur; they are created as declared. Suppose that you
            specify a table using this definition:
          </p><pre class="programlisting">CREATE TABLE t
(
  c1 VARCHAR(10) CHARACTER SET binary,
  c2 TEXT CHARACTER SET binary,
  c3 ENUM('a','b','c') CHARACTER SET binary
);
</pre><p>
            The resulting table has this definition:
          </p><pre class="programlisting">CREATE TABLE t
(
  c1 VARBINARY(10),
  c2 BLOB,
  c3 ENUM('a','b','c') CHARACTER SET binary
);
</pre></li></ul></div><p>
        To see whether MySQL used a data type other than the one you
        specified, issue a <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> or
        <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> statement after
        creating or altering the table.
      </p><a class="indexterm" name="id2072980"></a><p>
        Certain other data type changes can occur if you compress a
        table using <a href="programs.html#myisampack" title="4.6.5. myisampack — Generate Compressed, Read-Only MyISAM Tables"><span><strong class="command">myisampack</strong></span></a>. See
        <a href="storage-engines.html#compressed-format" title="13.1.3.3. Compressed Table Characteristics">Section 13.1.3.3, “Compressed Table Characteristics”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-trigger"></a>12.1.11. <code class="literal">CREATE TRIGGER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2073017"></a><a class="indexterm" name="id2073026"></a><pre class="programlisting">CREATE
    [DEFINER = { <em class="replaceable"><code>user</code></em> | CURRENT_USER }]
    TRIGGER <em class="replaceable"><code>trigger_name</code></em> <em class="replaceable"><code>trigger_time</code></em> <em class="replaceable"><code>trigger_event</code></em>
    ON <em class="replaceable"><code>tbl_name</code></em> FOR EACH ROW <em class="replaceable"><code>trigger_stmt</code></em>
</pre><p>
      This statement creates a new trigger. A trigger is a named
      database object that is associated with a table, and that
      activates when a particular event occurs for the table. The
      trigger becomes associated with the table named
      <em class="replaceable"><code>tbl_name</code></em>, which must refer to a
      permanent table. You cannot associate a trigger with a
      <code class="literal">TEMPORARY</code> table or a view.
      <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a> was added in MySQL
      5.0.2.
    </p><p class="mnmas"><b>MySQL Enterprise</b>
        For expert advice on creating triggers subscribe to the MySQL
        Enterprise Monitor. For more information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><p>
      In MySQL 5.0 <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE
      TRIGGER</code></a> requires the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
    </p><p>
      The <code class="literal">DEFINER</code> clause determines the security
      context to be used when checking access privileges at trigger
      activation time.
    </p><p>
      <em class="replaceable"><code>trigger_time</code></em> is the trigger action
      time. It can be <code class="literal">BEFORE</code> or
      <code class="literal">AFTER</code> to indicate that the trigger activates
      before or after each row to be modified.
    </p><p>
      <em class="replaceable"><code>trigger_event</code></em> indicates the kind of
      statement that activates the trigger. The
      <em class="replaceable"><code>trigger_event</code></em> can be one of the
      following:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>: The trigger is
          activated whenever a new row is inserted into the table; for
          example, through <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a>, and
          <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> statements.
        </p></li><li><p>
          <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>: The trigger is
          activated whenever a row is modified; for example, through
          <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
        </p></li><li><p>
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>: The trigger is
          activated whenever a row is deleted from the table; for
          example, through <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> and
          <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> statements. However,
          <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> and
          <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE</code></a> statements on the
          table do <span class="emphasis"><em>not</em></span> activate this trigger,
          because they do not use <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>.
          See <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax">Section 12.2.10, “<code class="literal">TRUNCATE</code> Syntax”</a>.
        </p></li></ul></div><p>
      It is important to understand that the
      <em class="replaceable"><code>trigger_event</code></em> does not represent a
      literal type of SQL statement that activates the trigger so much
      as it represents a type of table operation. For example, an
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> trigger is activated by not
      only <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements but also
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> statements because both
      statements insert rows into a table.
    </p><p>
      A potentially confusing example of this is the <code class="literal">INSERT
      INTO ... ON DUPLICATE KEY UPDATE ...</code> syntax: a
      <code class="literal">BEFORE INSERT</code> trigger will activate for every
      row, followed by either an <code class="literal">AFTER INSERT</code> trigger
      or both the <code class="literal">BEFORE UPDATE</code> and <code class="literal">AFTER
      UPDATE</code> triggers, depending on whether there was a
      duplicate key for the row.
    </p><p>
      There cannot be two triggers for a given table that have the same
      trigger action time and event. For example, you cannot have two
      <code class="literal">BEFORE UPDATE</code> triggers for a table. But you can
      have a <code class="literal">BEFORE UPDATE</code> and a <code class="literal">BEFORE
      INSERT</code> trigger, or a <code class="literal">BEFORE UPDATE</code>
      and an <code class="literal">AFTER UPDATE</code> trigger.
    </p><p>
      <em class="replaceable"><code>trigger_stmt</code></em> is the statement to
      execute when the trigger activates. If you want to execute
      multiple statements, use the <code class="literal">BEGIN ... END</code>
      compound statement construct. This also enables you to use the
      same statements that are allowable within stored routines. See
      <a href="sql-syntax.html#begin-end" title="12.8.1. BEGIN ... END Compound Statement Syntax">Section 12.8.1, “<code class="literal">BEGIN ... END</code> Compound Statement Syntax”</a>. Some statements are not allowed in
      triggers; see <a href="restrictions.html#stored-program-restrictions" title="D.1. Restrictions on Stored Routines and Triggers">Section D.1, “Restrictions on Stored Routines and Triggers”</a>.
    </p><p>
      MySQL stores the <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> system
      variable setting that is in effect at the time a trigger is
      created, and always executes the trigger with this setting in
      force, <span class="emphasis"><em>regardless of the current server SQL
      mode</em></span>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Currently, triggers are not activated by cascaded foreign key
        actions. This limitation will be lifted as soon as possible.
      </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Before MySQL 5.0.10, triggers cannot contain direct references
        to tables by name. Beginning with MySQL 5.0.10, you can write
        triggers such as the one named <code class="literal">testref</code> shown
        in this example:
      </p></div><pre class="programlisting">CREATE TABLE test1(a1 INT);
CREATE TABLE test2(a2 INT);
CREATE TABLE test3(a3 INT NOT NULL AUTO_INCREMENT PRIMARY KEY);
CREATE TABLE test4(
  a4 INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  b4 INT DEFAULT 0
);

delimiter |

CREATE TRIGGER testref BEFORE INSERT ON test1
  FOR EACH ROW BEGIN
    INSERT INTO test2 SET a2 = NEW.a1;
    DELETE FROM test3 WHERE a3 = NEW.a1;
    UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
  END;
|

delimiter ;

INSERT INTO test3 (a3) VALUES
  (NULL), (NULL), (NULL), (NULL), (NULL),
  (NULL), (NULL), (NULL), (NULL), (NULL);

INSERT INTO test4 (a4) VALUES
  (0), (0), (0), (0), (0), (0), (0), (0), (0), (0);
</pre><p>
      Suppose that you insert the following values into table
      <code class="literal">test1</code> as shown here:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO test1 VALUES </code></strong>
    -&gt; <strong class="userinput"><code>(1), (3), (1), (7), (1), (8), (4), (4);</code></strong>
Query OK, 8 rows affected (0.01 sec)
Records: 8  Duplicates: 0  Warnings: 0
</pre><p>
      As a result, the data in the four tables will be as follows:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM test1;</code></strong>
+------+
| a1   |
+------+
|    1 |
|    3 |
|    1 |
|    7 |
|    1 |
|    8 |
|    4 |
|    4 |
+------+
8 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM test2;</code></strong>
+------+
| a2   |
+------+
|    1 |
|    3 |
|    1 |
|    7 |
|    1 |
|    8 |
|    4 |
|    4 |
+------+
8 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM test3;</code></strong>
+----+
| a3 |
+----+
|  2 |
|  5 |
|  6 |
|  9 |
| 10 |
+----+
5 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM test4;</code></strong>
+----+------+
| a4 | b4   |
+----+------+
|  1 |    3 |
|  2 |    0 |
|  3 |    1 |
|  4 |    2 |
|  5 |    0 |
|  6 |    0 |
|  7 |    1 |
|  8 |    1 |
|  9 |    0 |
| 10 |    0 |
+----+------+
10 rows in set (0.00 sec)
</pre><p>
      You can refer to columns in the subject table (the table
      associated with the trigger) by using the aliases
      <code class="literal">OLD</code> and <code class="literal">NEW</code>.
      <code class="literal">OLD.<em class="replaceable"><code>col_name</code></em></code> refers
      to a column of an existing row before it is updated or deleted.
      <code class="literal">NEW.<em class="replaceable"><code>col_name</code></em></code> refers
      to the column of a new row to be inserted or an existing row after
      it is updated.
    </p><p>
      The <code class="literal">DEFINER</code> clause specifies the MySQL account
      to be used when checking access privileges at trigger activation
      time. It was added in MySQL 5.0.17. If a
      <em class="replaceable"><code>user</code></em> value is given, it should be a
      MySQL account in
      <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'</code>
      format (the same format used in the
      <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement). The
      <em class="replaceable"><code>user_name</code></em> and
      <em class="replaceable"><code>host_name</code></em> values both are required. The
      definer can also be given as
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> or
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>. The default
      <code class="literal">DEFINER</code> value is the user who executes the
      <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a> statement. (This is
      the same as <code class="literal">DEFINER = CURRENT_USER</code>.)
    </p><p>
      If you specify the <code class="literal">DEFINER</code> clause, these rules
      determine the legal <code class="literal">DEFINER</code> user values:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you do not have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
          privilege, the only legal <em class="replaceable"><code>user</code></em>
          value is your own account, either specified literally or by
          using <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>. You cannot
          set the definer to some other account.
        </p></li><li><p>
          If you have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
          privilege, you can specify any syntactically legal account
          name. If the account does not actually exist, a warning is
          generated.
        </p></li><li><p>
          Although it is possible to create triggers with a nonexistent
          <code class="literal">DEFINER</code> value, it is not a good idea for
          such triggers to be activated until the definer actually does
          exist. Otherwise, the behavior with respect to privilege
          checking is undefined.
        </p></li></ul></div><p>
      Note: Because MySQL currently requires the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege for the use of
      <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a>, only the second of
      the preceding rules applies. (MySQL 5.1.6 implements the
      <a href="http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#priv_trigger" target="_top"><code class="literal">TRIGGER</code></a> privilege and requires that
      privilege for trigger creation, so at that point both rules come
      into play and <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> is required
      only for specifying a <code class="literal">DEFINER</code> value other than
      your own account.)
    </p><p>
      From MySQL 5.0.17 on, MySQL takes the <code class="literal">DEFINER</code>
      user into account when checking trigger privileges, as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          At <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a> time, the
          user who issues the statement must have the
          <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
        </p></li><li><p>
          At trigger activation time, privileges are checked against the
          <code class="literal">DEFINER</code> user. This user must have these
          privileges:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
            </p></li><li><p>
              The <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for
              the subject table if references to table columns occur via
              <code class="literal">OLD.<em class="replaceable"><code>col_name</code></em></code>
              or
              <code class="literal">NEW.<em class="replaceable"><code>col_name</code></em></code>
              in the trigger definition.
            </p></li><li><p>
              The <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a> privilege for
              the subject table if table columns are targets of
              <code class="literal">SET NEW.<em class="replaceable"><code>col_name</code></em> =
              <em class="replaceable"><code>value</code></em></code> assignments in
              the trigger definition.
            </p></li><li><p>
              Whatever other privileges normally are required for the
              statements executed by the trigger.
            </p></li></ul></div></li></ul></div><p>
      Before MySQL 5.0.17, <code class="literal">DEFINER</code> is not available
      and MySQL checks trigger privileges like this:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          At <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a> time, the
          user who issues the statement must have the
          <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
        </p></li><li><p>
          At trigger activation time, privileges are checked against the
          user whose actions cause the trigger to be activated. This
          user must have whatever privileges normally are required for
          the statements executed by the trigger.
        </p></li></ul></div><p>
      Within a trigger, the
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> function returns the
      account used to check privileges at trigger activation time.
      Consistent with the privilege-checking rules just given,
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> returns the
      <code class="literal">DEFINER</code> user from MySQL 5.0.17 on. Before
      5.0.17, <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a> returns the
      user whose actions caused the trigger to be activated. For
      information about user auditing within triggers, see
      <a href="server-administration.html#account-activity-auditing" title="5.5.9. Auditing MySQL Account Activity">Section 5.5.9, “Auditing MySQL Account Activity”</a>.
    </p><p>
      If you use <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> to lock a
      table that has triggers, the tables used within the trigger are
      also locked, as described in
      <a href="sql-syntax.html#lock-tables-and-triggers" title="12.4.5.2. LOCK TABLES and Triggers">Section 12.4.5.2, “<code class="literal">LOCK TABLES</code> and Triggers”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="create-view"></a>12.1.12. <code class="literal">CREATE VIEW</code> Syntax</h3></div></div></div><a class="indexterm" name="id2074027"></a><a class="indexterm" name="id2074036"></a><a class="indexterm" name="id2074049"></a><pre class="programlisting">CREATE
    [OR REPLACE]
    [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]
    [DEFINER = { <em class="replaceable"><code>user</code></em> | CURRENT_USER }]
    [SQL SECURITY { DEFINER | INVOKER }]
    VIEW <em class="replaceable"><code>view_name</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
    AS <em class="replaceable"><code>select_statement</code></em>
    [WITH [CASCADED | LOCAL] CHECK OPTION]
</pre><p>
      The <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> statement creates a
      new view, or replaces an existing one if the <code class="literal">OR
      REPLACE</code> clause is given. This statement was added in
      MySQL 5.0.1. If the view does not exist, <code class="literal">CREATE OR
      REPLACE VIEW</code> is the same as <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE
      VIEW</code></a>. If the view does exist, <code class="literal">CREATE OR REPLACE
      VIEW</code> is the same as <a href="sql-syntax.html#alter-view" title="12.1.5. ALTER VIEW Syntax"><code class="literal">ALTER
      VIEW</code></a>.
    </p><p>
      The <em class="replaceable"><code>select_statement</code></em> is a
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement that provides the
      definition of the view. (When you select from the view, you select
      in effect using the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
      statement.) <em class="replaceable"><code>select_statement</code></em> can select
      from base tables or other views.
    </p><p>
      The view definition is “<span class="quote">frozen</span>” at creation time, so
      changes to the underlying tables afterward do not affect the view
      definition. For example, if a view is defined as <code class="literal">SELECT
      *</code> on a table, new columns added to the table later do
      not become part of the view.
    </p><p>
      The <code class="literal">ALGORITHM</code> clause affects how MySQL
      processes the view. The <code class="literal">DEFINER</code> and
      <code class="literal">SQL SECURITY</code> clauses specify the security
      context to be used when checking access privileges at view
      invocation time. The <code class="literal">WITH CHECK OPTION</code> clause
      can be given to constrain inserts or updates to rows in tables
      referenced by the view. These clauses are described later in this
      section.
    </p><p>
      The <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> statement requires
      the <a href="server-administration.html#priv_create-view"><code class="literal">CREATE VIEW</code></a> privilege for the
      view, and some privilege for each column selected by the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. For columns used
      elsewhere in the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement
      you must have the <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege.
      If the <code class="literal">OR REPLACE</code> clause is present, you must
      also have the <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a> privilege for
      the view.
    </p><p>
      A view belongs to a database. By default, a new view is created in
      the default database. To create the view explicitly in a given
      database, specify the name as
      <em class="replaceable"><code>db_name.view_name</code></em> when you create it.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE VIEW test.v AS SELECT * FROM t;</code></strong>
</pre><p>
      Base tables and views share the same namespace within a database,
      so a database cannot contain a base table and a view that have the
      same name.
    </p><p>
      Views must have unique column names with no duplicates, just like
      base tables. By default, the names of the columns retrieved by the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement are used for the
      view column names. To define explicit names for the view columns,
      the optional <em class="replaceable"><code>column_list</code></em> clause can be
      given as a list of comma-separated identifiers. The number of
      names in <em class="replaceable"><code>column_list</code></em> must be the same
      as the number of columns retrieved by the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        When you modify an existing view, the current view definition is
        backed up and saved. It is stored in that table's database
        directory, in a subdirectory named <code class="filename">arc</code>. The
        backup file for a view <code class="literal">v</code> is named
        <code class="filename">v.frm-00001</code>. If you alter the view again,
        the next backup is named <code class="filename">v.frm-00002</code>. The
        three latest view backup definitions are stored.
      </p><p>
        Backed up view definitions are not preserved by
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>, or any other such programs, but
        you can retain them using a file copy operation. However, they
        are not needed for anything but to provide you with a backup of
        your previous view definition.
      </p><p>
        It is safe to remove these backup definitions, but only while
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is not running. If you delete the
        <code class="filename">arc</code> subdirectory or its files while
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> is running, you will receive an error
        the next time you try to alter the view:
      </p><pre class="programlisting">mysql&gt; ALTER VIEW v AS SELECT * FROM t;
ERROR 6 (HY000): Error on delete of '.\test\arc/v.frm-0004' (Errcode:
2)</pre></div><p>
      Columns retrieved by the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
      statement can be simple references to table columns. They can also
      be expressions that use functions, constant values, operators, and
      so forth.
    </p><p>
      Unqualified table or view names in the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement are interpreted
      with respect to the default database. A view can refer to tables
      or views in other databases by qualifying the table or view name
      with the proper database name.
    </p><p>
      A view can be created from many kinds of
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements. It can refer to
      base tables or other views. It can use joins,
      <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a>, and subqueries. The
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> need not even refer to any
      tables. The following example defines a view that selects two
      columns from another table, as well as an expression calculated
      from those columns:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t (qty INT, price INT);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES(3, 50);</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE VIEW v AS SELECT qty, price, qty*price AS value FROM t;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * FROM v;</code></strong>
+------+-------+-------+
| qty  | price | value |
+------+-------+-------+
|    3 |    50 |   150 |
+------+-------+-------+
</pre><p>
      A view definition is subject to the following restrictions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement cannot
          contain a subquery in the <code class="literal">FROM</code> clause.
        </p></li><li><p>
          The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement cannot
          refer to system or user variables.
        </p></li><li><p>
          Within a stored program, the definition cannot refer to
          program parameters or local variables.
        </p></li><li><p>
          The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement cannot
          refer to prepared statement parameters.
        </p></li><li><p>
          Any table or view referred to in the definition must exist.
          However, after a view has been created, it is possible to drop
          a table or view that the definition refers to. In this case,
          use of the view results in an error. To check a view
          definition for problems of this kind, use the
          <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> statement.
        </p></li><li><p>
          The definition cannot refer to a <code class="literal">TEMPORARY</code>
          table, and you cannot create a <code class="literal">TEMPORARY</code>
          view.
        </p></li><li><p>
          Any tables named in the view definition must exist at
          definition time.
        </p></li><li><p>
          You cannot associate a trigger with a view.
        </p></li><li><p>
          As of MySQL 5.0.52, aliases for column names in the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement are checked
          against the maximum column length of 64 characters (not the
          maximum alias length of 256 characters).
        </p></li></ul></div><p>
      <code class="literal">ORDER BY</code> is allowed in a view definition, but
      it is ignored if you select from a view using a statement that has
      its own <code class="literal">ORDER BY</code>.
    </p><p>
      For other options or clauses in the definition, they are added to
      the options or clauses of the statement that references the view,
      but the effect is undefined. For example, if a view definition
      includes a <code class="literal">LIMIT</code> clause, and you select from
      the view using a statement that has its own
      <code class="literal">LIMIT</code> clause, it is undefined which limit
      applies. This same principle applies to options such as
      <code class="literal">ALL</code>, <code class="literal">DISTINCT</code>, or
      <code class="literal">SQL_SMALL_RESULT</code> that follow the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> keyword, and to clauses such
      as <code class="literal">INTO</code>, <code class="literal">FOR UPDATE</code>,
      <code class="literal">LOCK IN SHARE MODE</code>, and
      <code class="literal">PROCEDURE</code>.
    </p><p>
      If you create a view and then change the query processing
      environment by changing system variables, that may affect the
      results that you get from the view:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE VIEW v (mycol) AS SELECT 'abc';</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SET sql_mode = '';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT "mycol" FROM v;</code></strong>
+-------+
| mycol |
+-------+
| mycol |
+-------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SET sql_mode = 'ANSI_QUOTES';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT "mycol" FROM v;</code></strong>
+-------+
| mycol |
+-------+
| abc   |
+-------+
1 row in set (0.00 sec)
</pre><p>
      The <code class="literal">DEFINER</code> and <code class="literal">SQL SECURITY</code>
      clauses determine which MySQL account to use when checking access
      privileges for the view when a statement is executed that
      references the view. They were addded in MySQL 5.0.13, but have no
      effect until MySQL 5.0.16. The legal <code class="literal">SQL
      SECURITY</code> characteristic values are
      <code class="literal">DEFINER</code> and <code class="literal">INVOKER</code>. These
      indicate that the required privileges must be held by the user who
      defined or invoked the view, respectively. The default
      <code class="literal">SQL SECURITY</code> value is
      <code class="literal">DEFINER</code>.
    </p><p>
      If a <em class="replaceable"><code>user</code></em> value is given for the
      <code class="literal">DEFINER</code> clause, it should be a MySQL account in
      <code class="literal">'<em class="replaceable"><code>user_name</code></em>'@'<em class="replaceable"><code>host_name</code></em>'</code>
      format (the same format used in the
      <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement). The
      <em class="replaceable"><code>user_name</code></em> and
      <em class="replaceable"><code>host_name</code></em> values both are required. The
      definer can also be given as
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> or
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER()</code></a>. The default
      <code class="literal">DEFINER</code> value is the user who executes the
      <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a> statement. This is the
      same as specifying <code class="literal">DEFINER = CURRENT_USER</code>
      explicitly.
    </p><p>
      If you specify the <code class="literal">DEFINER</code> clause, these rules
      determine the legal <code class="literal">DEFINER</code> user values:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you do not have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
          privilege, the only legal <em class="replaceable"><code>user</code></em>
          value is your own account, either specified literally or by
          using <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>. You cannot
          set the definer to some other account.
        </p></li><li><p>
          If you have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
          privilege, you can specify any syntactically legal account
          name. If the account does not actually exist, a warning is
          generated.
        </p></li><li><p>
          If the <code class="literal">SQL SECURITY</code> value is
          <code class="literal">DEFINER</code> but the definer account does not
          exist when the view is referenced, an error occurs.
        </p></li></ul></div><p>
      Within a view definition,
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> returns the view's
      <code class="literal">DEFINER</code> value by default as of MySQL 5.0.24.
      For older versions, and for views defined with the <code class="literal">SQL
      SECURITY INVOKER</code> characteristic,
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> returns the account
      for the view's invoker. For information about user auditing within
      views, see <a href="server-administration.html#account-activity-auditing" title="5.5.9. Auditing MySQL Account Activity">Section 5.5.9, “Auditing MySQL Account Activity”</a>.
    </p><p>
      Within a stored routine that is defined with the <code class="literal">SQL
      SECURITY DEFINER</code> characteristic,
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a> returns the routine's
      <code class="literal">DEFINER</code> value. This also affects a view defined
      within such a program, if the view definition contains a
      <code class="literal">DEFINER</code> value of
      <a href="functions.html#function_current-user"><code class="literal">CURRENT_USER</code></a>.
    </p><p>
      As of MySQL 5.0.16 (when the <code class="literal">DEFINER</code> and
      <code class="literal">SQL SECURITY</code> clauses were implemented), view
      privileges are checked like this:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          At view definition time, the view creator must have the
          privileges needed to use the top-level objects accessed by the
          view. For example, if the view definition refers to table
          columns, the creator must have privileges for the columns, as
          described previously. If the definition refers to a stored
          function, only the privileges needed to invoke the function
          can be checked. The privileges required when the function runs
          can be checked only as it executes: For different invocations
          of the function, different execution paths within the function
          might be taken.
        </p></li><li><p>
          When a view is referenced, privileges for objects accessed by
          the view are checked against the privileges held by the view
          creator or invoker, depending on whether the <code class="literal">SQL
          SECURITY</code> characteristic is
          <code class="literal">DEFINER</code> or <code class="literal">INVOKER</code>,
          respectively.
        </p></li><li><p>
          If reference to a view causes execution of a stored function,
          privilege checking for statements executed within the function
          depend on whether the function is defined with a <code class="literal">SQL
          SECURITY</code> characteristic of
          <code class="literal">DEFINER</code> or <code class="literal">INVOKER</code>. If
          the security characteristic is <code class="literal">DEFINER</code>, the
          function runs with the privileges of its creator. If the
          characteristic is <code class="literal">INVOKER</code>, the function
          runs with the privileges determined by the view's <code class="literal">SQL
          SECURITY</code> characteristic.
        </p></li></ul></div><p>
      Prior to MySQL 5.0.16 (before the <code class="literal">DEFINER</code> and
      <code class="literal">SQL SECURITY</code> clauses were implemented),
      privileges required for objects used in a view are checked at view
      creation time.
    </p><p>
      Example: A view might depend on a stored function, and that
      function might invoke other stored routines. For example, the
      following view invokes a stored function <code class="literal">f()</code>:
    </p><pre class="programlisting">CREATE VIEW v AS SELECT * FROM t WHERE t.id = f(t.name);
</pre><p>
      Suppose that <code class="literal">f()</code> contains a statement such as
      this:
    </p><pre class="programlisting">IF name IS NULL then
  CALL p1();
ELSE
  CALL p2();
END IF;
</pre><p>
      The privileges required for executing statements within
      <code class="literal">f()</code> need to be checked when
      <code class="literal">f()</code> executes. This might mean that privileges
      are needed for <code class="literal">p1()</code> or <code class="literal">p2()</code>,
      depending on the execution path within <code class="literal">f()</code>.
      Those privileges must be checked at runtime, and the user who must
      possess the privileges is determined by the <code class="literal">SQL
      SECURITY</code> values of the view <code class="literal">v</code> and the
      function <code class="literal">f()</code>.
    </p><p>
      The <code class="literal">DEFINER</code> and <code class="literal">SQL SECURITY</code>
      clauses for views are extensions to standard SQL. In standard SQL,
      views are handled using the rules for <code class="literal">SQL SECURITY
      INVOKER</code>.
    </p><p>
      If you invoke a view that was created before MySQL 5.0.13, it is
      treated as though it was created with a <code class="literal">SQL SECURITY
      DEFINER</code> clause and with a <code class="literal">DEFINER</code>
      value that is the same as your account. However, because the
      actual definer is unknown, MySQL issues a warning. To make the
      warning go away, it is sufficient to re-create the view so that
      the view definition includes a <code class="literal">DEFINER</code> clause.
    </p><p>
      The optional <code class="literal">ALGORITHM</code> clause is a MySQL
      extension to standard SQL. It affects how MySQL processes the
      view. <code class="literal">ALGORITHM</code> takes three values:
      <code class="literal">MERGE</code>, <code class="literal">TEMPTABLE</code>, or
      <code class="literal">UNDEFINED</code>. The default algorithm is
      <code class="literal">UNDEFINED</code> if no <code class="literal">ALGORITHM</code>
      clause is present. For more information, see
      <a href="stored-programs-views.html#view-algorithms" title="18.4.2. View Processing Algorithms">Section 18.4.2, “View Processing Algorithms”</a>.
    </p><p>
      Some views are updatable. That is, you can use them in statements
      such as <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, or
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> to update the contents of
      the underlying table. For a view to be updatable, there must be a
      one-to-one relationship between the rows in the view and the rows
      in the underlying table. There are also certain other constructs
      that make a view nonupdatable.
    </p><p>
      The <code class="literal">WITH CHECK OPTION</code> clause can be given for
      an updatable view to prevent inserts or updates to rows except
      those for which the <code class="literal">WHERE</code> clause in the
      <em class="replaceable"><code>select_statement</code></em> is true. The
      <code class="literal">WITH CHECK OPTION</code> clause was implemented in
      MySQL 5.0.2.
    </p><p>
      In a <code class="literal">WITH CHECK OPTION</code> clause for an updatable
      view, the <code class="literal">LOCAL</code> and <code class="literal">CASCADED</code>
      keywords determine the scope of check testing when the view is
      defined in terms of another view. The <code class="literal">LOCAL</code>
      keyword restricts the <code class="literal">CHECK OPTION</code> only to the
      view being defined. <code class="literal">CASCADED</code> causes the checks
      for underlying views to be evaluated as well. When neither keyword
      is given, the default is <code class="literal">CASCADED</code>.
    </p><p>
      For more information about updatable views and the <code class="literal">WITH
      CHECK OPTION</code> clause, see
      <a href="stored-programs-views.html#view-updatability" title="18.4.3. Updatable and Insertable Views">Section 18.4.3, “Updatable and Insertable Views”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-database"></a>12.1.13. <code class="literal">DROP DATABASE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2075452"></a><a class="indexterm" name="id2075461"></a><a class="indexterm" name="id2075470"></a><a class="indexterm" name="id2075482"></a><a class="indexterm" name="id2075495"></a><a class="indexterm" name="id2075507"></a><pre class="programlisting">DROP {DATABASE | SCHEMA} [IF EXISTS] <em class="replaceable"><code>db_name</code></em>
</pre><p>
      <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> drops all tables in
      the database and deletes the database. Be
      <span class="emphasis"><em>very</em></span> careful with this statement! To use
      <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a>, you need the
      <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a> privilege on the database.
      <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP
      SCHEMA</code></a> is a synonym for <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP
      DATABASE</code></a> as of MySQL 5.0.2.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        When a database is dropped, user privileges on the database are
        <span class="emphasis"><em>not</em></span> automatically dropped. See
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p></div><p>
      <code class="literal">IF EXISTS</code> is used to prevent an error from
      occurring if the database does not exist.
    </p><p>
      If you use <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> on a
      symbolically linked database, both the link and the original
      database are deleted.
    </p><p>
      <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> returns the number of
      tables that were removed. This corresponds to the number of
      <code class="filename">.frm</code> files removed.
    </p><p>
      The <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> statement removes
      from the given database directory those files and directories that
      MySQL itself may create during normal operation:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          All files with the following extensions.
        </p><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><code class="literal">.BAK</code></td><td><code class="literal">.DAT</code></td><td><code class="literal">.HSH</code></td><td><code class="literal">.MRG</code></td></tr><tr><td><code class="literal">.MYD</code></td><td><code class="literal">.MYI</code></td><td><code class="literal">.TRG</code></td><td><code class="literal">.TRN</code></td></tr><tr><td><code class="literal">.db</code></td><td><code class="literal">.frm</code></td><td><code class="literal">.ibd</code></td><td><code class="literal">.ndb</code></td></tr></tbody></table></div></li><li><p>
          All subdirectories with names that consist of two hex digits
          <code class="literal">00</code>-<code class="literal">ff</code>. These are
          subdirectories used for <code class="literal">RAID</code> tables. (These
          directories are not removed as of MySQL 5.0, when support for
          <code class="literal">RAID</code> tables was removed. You should convert
          any existing <code class="literal">RAID</code> tables and remove these
          directories manually before upgrading to MySQL 5.0. See
          <a href="installing.html#upgrading-from-previous-series" title="2.18.1.2. Upgrading from MySQL 4.1 to 5.0">Section 2.18.1.2, “Upgrading from MySQL 4.1 to 5.0”</a>.)
        </p></li><li><p>
          The <code class="filename">db.opt</code> file, if it exists.
        </p></li></ul></div><p>
      If other files or directories remain in the database directory
      after MySQL removes those just listed, the database directory
      cannot be removed. In this case, you must remove any remaining
      files or directories manually and issue the
      <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP DATABASE</code></a> statement again.
    </p><a class="indexterm" name="id2075861"></a><p>
      You can also drop databases with <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a>.
      See <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server">Section 4.5.2, “<span><strong class="command">mysqladmin</strong></span> — Client for Administering a MySQL Server”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-function"></a>12.1.14. <code class="literal">DROP FUNCTION</code> Syntax</h3></div></div></div><p>
      The <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> statement is used
      to drop stored functions and user-defined functions (UDFs):
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For information about dropping stored functions, see
          <a href="sql-syntax.html#drop-procedure" title="12.1.16. DROP PROCEDURE and
      DROP FUNCTION Syntax">Section 12.1.16, “<code class="literal">DROP PROCEDURE</code> and
      <code class="literal">DROP FUNCTION</code> Syntax”</a>.
        </p></li><li><p>
          For information about dropping user-defined functions, see
          <a href="sql-syntax.html#drop-function-udf" title="12.5.3.2. DROP FUNCTION Syntax">Section 12.5.3.2, “<code class="literal">DROP FUNCTION</code> Syntax”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-index"></a>12.1.15. <code class="literal">DROP INDEX</code> Syntax</h3></div></div></div><a class="indexterm" name="id2075968"></a><a class="indexterm" name="id2075977"></a><a class="indexterm" name="id2075989"></a><pre class="programlisting">DROP INDEX <em class="replaceable"><code>index_name</code></em> ON <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      <a href="sql-syntax.html#drop-index" title="12.1.15. DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a> drops the index named
      <em class="replaceable"><code>index_name</code></em> from the table
      <em class="replaceable"><code>tbl_name</code></em>. This statement is mapped to
      an <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> statement to drop
      the index. See <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax">Section 12.1.4, “<code class="literal">ALTER TABLE</code> Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-procedure"></a>12.1.16. <code class="literal">DROP PROCEDURE</code> and
      <code class="literal">DROP FUNCTION</code> Syntax</h3></div></div></div><a class="indexterm" name="id2076085"></a><a class="indexterm" name="id2076094"></a><pre class="programlisting">DROP {PROCEDURE | FUNCTION} [IF EXISTS] <em class="replaceable"><code>sp_name</code></em>
</pre><p>
      This statement is used to drop a stored procedure or function.
      That is, the specified routine is removed from the server. As of
      MySQL 5.0.3, you must have the <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER
      ROUTINE</code></a> privilege for the routine. (That privilege is
      granted automatically to the routine creator.)
    </p><p>
      The <code class="literal">IF EXISTS</code> clause is a MySQL extension. It
      prevents an error from occurring if the procedure or function does
      not exist. A warning is produced that can be viewed with
      <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        <code class="literal">DROP PROCEDURE IF EXISTS</code> and <code class="literal">DROP
        FUNCTION IF EXISTS</code> are not written to the binary log
        (and thus not replicated) if the stored procedure or function
        named in the <code class="literal">DROP</code> statement does not exist on
        the master. This is a known issue, which is resolved in MySQL
        5.1 and later. (<a href="http://bugs.mysql.com/13684" target="_top">Bug#13684</a>)
      </p></div><p>
      <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> is also used to drop
      user-defined functions (see <a href="sql-syntax.html#drop-function-udf" title="12.5.3.2. DROP FUNCTION Syntax">Section 12.5.3.2, “<code class="literal">DROP FUNCTION</code> Syntax”</a>).
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-table"></a>12.1.17. <code class="literal">DROP TABLE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2076228"></a><a class="indexterm" name="id2076237"></a><a class="indexterm" name="id2076250"></a><pre class="programlisting">DROP [TEMPORARY] TABLE [IF EXISTS]
    <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
    [RESTRICT | CASCADE]
</pre><p>
      <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> removes one or more
      tables. You must have the <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a>
      privilege for each table. All table data and the table definition
      are <span class="emphasis"><em>removed</em></span>, so <span class="emphasis"><em>be
      careful</em></span> with this statement! If any of the tables named
      in the argument list do not exist, MySQL returns an error
      indicating by name which nonexisting tables it was unable to drop,
      but it also drops all of the tables in the list that do exist.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        When a table is dropped, user privileges on the table are
        <span class="emphasis"><em>not</em></span> automatically dropped. See
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p></div><p>
      Use <code class="literal">IF EXISTS</code> to prevent an error from
      occurring for tables that do not exist. A <code class="literal">NOTE</code>
      is generated for each nonexistent table when using <code class="literal">IF
      EXISTS</code>. See <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p><p>
      <code class="literal">RESTRICT</code> and <code class="literal">CASCADE</code> are
      allowed to make porting easier. In MySQL 5.0, they do
      nothing.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> automatically commits
        the current active transaction, unless you use the
        <code class="literal">TEMPORARY</code> keyword.
      </p></div><p>
      The <code class="literal">TEMPORARY</code> keyword has the following
      effects:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The statement drops only <code class="literal">TEMPORARY</code> tables.
        </p></li><li><p>
          The statement does not end an ongoing transaction.
        </p></li><li><p>
          No access rights are checked. (A <code class="literal">TEMPORARY</code>
          table is visible only to the session that created it, so no
          check is necessary.)
        </p></li></ul></div><p>
      Using <code class="literal">TEMPORARY</code> is a good way to ensure that
      you do not accidentally drop a non-<code class="literal">TEMPORARY</code>
      table.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-trigger"></a>12.1.18. <code class="literal">DROP TRIGGER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2076481"></a><a class="indexterm" name="id2076490"></a><pre class="programlisting">DROP TRIGGER [IF EXISTS] [<em class="replaceable"><code>schema_name</code></em>.]<em class="replaceable"><code>trigger_name</code></em>
</pre><p>
      This statement drops a trigger. The schema (database) name is
      optional. If the schema is omitted, the trigger is dropped from
      the default schema. <a href="sql-syntax.html#drop-trigger" title="12.1.18. DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a>
      was added in MySQL 5.0.2. Its use requires the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
    </p><p>
      Use <code class="literal">IF EXISTS</code> to prevent an error from
      occurring for a trigger that does not exist. A
      <code class="literal">NOTE</code> is generated for a nonexistent trigger
      when using <code class="literal">IF EXISTS</code>. See
      <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>. The <code class="literal">IF EXISTS</code>
      clause was added in MySQL 5.0.32.
    </p><p>
      Triggers for a table are also dropped if you drop the table.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Prior to MySQL 5.0.10, the table name was required instead of
        the schema name
        (<code class="literal"><em class="replaceable"><code>table_name</code></em>.<em class="replaceable"><code>trigger_name</code></em></code>).
        When upgrading from a previous version of MySQL 5.0 to MySQL
        5.0.10 or newer, you must drop all triggers <span class="emphasis"><em>before
        upgrading</em></span> and re-create them afterwards, or else
        <a href="sql-syntax.html#drop-trigger" title="12.1.18. DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a> does not work after
        the upgrade. See
        <a href="installing.html#upgrading-from-previous-series" title="2.18.1.2. Upgrading from MySQL 4.1 to 5.0">Section 2.18.1.2, “Upgrading from MySQL 4.1 to 5.0”</a>, for a
        suggested upgrade procedure.
      </p></div><p>
      In addition, triggers created in MySQL 5.0.16 or later cannot be
      dropped following a downgrade to MySQL 5.0.15 or earlier. If you
      wish to perform such a downgrade, you must also in this case drop
      all triggers <span class="emphasis"><em>prior to</em></span> the downgrade, and then
      re-create them afterwards.
    </p><p>
      (For more information about these two issues, see <a href="http://bugs.mysql.com/15921" target="_top">Bug#15921</a> and
      <a href="http://bugs.mysql.com/18588" target="_top">Bug#18588</a>.)
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="drop-view"></a>12.1.19. <code class="literal">DROP VIEW</code> Syntax</h3></div></div></div><a class="indexterm" name="id2076666"></a><pre class="programlisting">DROP VIEW [IF EXISTS]
    <em class="replaceable"><code>view_name</code></em> [, <em class="replaceable"><code>view_name</code></em>] ...
    [RESTRICT | CASCADE]
</pre><p>
      <a href="sql-syntax.html#drop-view" title="12.1.19. DROP VIEW Syntax"><code class="literal">DROP VIEW</code></a> removes one or more
      views. You must have the <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a>
      privilege for each view. If any of the views named in the argument
      list do not exist, MySQL returns an error indicating by name which
      nonexisting views it was unable to drop, but it also drops all of
      the views in the list that do exist.
    </p><p>
      The <code class="literal">IF EXISTS</code> clause prevents an error from
      occurring for views that don't exist. When this clause is given, a
      <code class="literal">NOTE</code> is generated for each nonexistent view.
      See <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p><p>
      <code class="literal">RESTRICT</code> and <code class="literal">CASCADE</code>, if
      given, are parsed and ignored.
    </p><p>
      This statement was added in MySQL 5.0.1.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="rename-table"></a>12.1.20. <code class="literal">RENAME TABLE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2076786"></a><pre class="programlisting">RENAME TABLE <em class="replaceable"><code>tbl_name</code></em> TO <em class="replaceable"><code>new_tbl_name</code></em>
    [, <em class="replaceable"><code>tbl_name2</code></em> TO <em class="replaceable"><code>new_tbl_name2</code></em>] ...
</pre><p>
      This statement renames one or more tables.
    </p><p>
      The rename operation is done atomically, which means that no other
      session can access any of the tables while the rename is running.
      For example, if you have an existing table
      <code class="literal">old_table</code>, you can create another table
      <code class="literal">new_table</code> that has the same structure but is
      empty, and then replace the existing table with the empty one as
      follows (assuming that <code class="literal">backup_table</code> does not
      already exist):
    </p><pre class="programlisting">CREATE TABLE new_table (...);
RENAME TABLE old_table TO backup_table, new_table TO old_table;
</pre><p>
      If the statement renames more than one table, renaming operations
      are done from left to right. If you want to swap two table names,
      you can do so like this (assuming that
      <code class="literal">tmp_table</code> does not already exist):
    </p><pre class="programlisting">RENAME TABLE old_table TO tmp_table,
             new_table TO old_table,
             tmp_table TO new_table;
</pre><p>
      As long as two databases are on the same file system, you can use
      <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a> to move a table from
      one database to another:
    </p><pre class="programlisting">RENAME TABLE <em class="replaceable"><code>current_db.tbl_name</code></em> TO <em class="replaceable"><code>other_db.tbl_name;</code></em>
</pre><p>
      Beginning with MySQL 5.0.2, if there are any triggers associated
      with a table which is moved to a different database using
      <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a>, then the statement
      fails with the error <span class="errortext">Trigger in wrong
      schema</span>.
    </p><p>
      As of MySQL 5.0.14, <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a>
      also works for views, as long as you do not try to rename a view
      into a different database.
    </p><p>
      Any privileges granted specifically for the renamed table or view
      are not migrated to the new name. They must be changed manually.
    </p><p>
      When you execute <code class="literal">RENAME</code>, you cannot have any
      locked tables or active transactions. You must also have the
      <a href="server-administration.html#priv_alter"><code class="literal">ALTER</code></a> and
      <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a> privileges on the original
      table, and the <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a> and
      <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privileges on the new table.
    </p><p>
      If MySQL encounters any errors in a multiple-table rename, it does
      a reverse rename for all renamed tables to return everything to
      its original state.
    </p><p>
      You cannot use <code class="literal">RENAME</code> to rename a
      <code class="literal">TEMPORARY</code> table. However, you can use
      <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> instead:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE orig_name RENAME new_name;</code></strong>
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-data-manipulation"></a>12.2. Data Manipulation Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#call">12.2.1. <code class="literal">CALL</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#delete">12.2.2. <code class="literal">DELETE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#do">12.2.3. <code class="literal">DO</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#handler">12.2.4. <code class="literal">HANDLER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert">12.2.5. <code class="literal">INSERT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-data">12.2.6. <code class="literal">LOAD DATA INFILE</code>
      Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replace">12.2.7. <code class="literal">REPLACE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#select">12.2.8. <code class="literal">SELECT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#subqueries">12.2.9. Subquery Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#truncate">12.2.10. <code class="literal">TRUNCATE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#update">12.2.11. <code class="literal">UPDATE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="call"></a>12.2.1. <code class="literal">CALL</code> Syntax</h3></div></div></div><a class="indexterm" name="id2077059"></a><pre class="programlisting">CALL <em class="replaceable"><code>sp_name</code></em>([<em class="replaceable"><code>parameter</code></em>[,...]])
CALL <em class="replaceable"><code>sp_name</code></em>[()]
</pre><p>
      The <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement invokes a stored
      procedure that was defined previously with
      <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE PROCEDURE</code></a>.
    </p><p>
      As of MySQL 5.0.30, stored procedures that take no arguments can
      be invoked without parentheses. That is, <code class="literal">CALL
      p()</code> and <code class="literal">CALL p</code> are equivalent.
    </p><p>
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> can pass back values to its
      caller using parameters that are declared as
      <code class="literal">OUT</code> or <code class="literal">INOUT</code> parameters.
      When the procedure returns, a client program can also obtain the
      number of rows affected for the final statement executed within
      the routine: At the SQL level, call the
      <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> function; from the C
      API, call the
      <a href="connectors-apis.html#mysql-affected-rows" title="20.9.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> function.
    </p><p>
      To get back a value from a procedure using an
      <code class="literal">OUT</code> or <code class="literal">INOUT</code> parameter, pass
      the parameter by means of a user variable, and then check the
      value of the variable after the procedure returns. (If you are
      calling the procedure from within another stored procedure or
      function, you can also pass a routine parameter or local routine
      variable as an <code class="literal">IN</code> or <code class="literal">INOUT</code>
      parameter.) For an <code class="literal">INOUT</code> parameter, initialize
      its value before passing it to the procedure. The following
      procedure has an <code class="literal">OUT</code> parameter that the
      procedure sets to the current server version, and an
      <code class="literal">INOUT</code> value that the procedure increments by
      one from its current value:
    </p><pre class="programlisting">CREATE PROCEDURE p (OUT ver_param VARCHAR(25), INOUT incr_param INT)
BEGIN
  # Set value of OUT parameter
  SELECT VERSION() INTO ver_param;
  # Increment value of INOUT parameter
  SET incr_param = incr_param + 1;
END;
</pre><p>
      Before calling the procedure, initialize the variable to be passed
      as the <code class="literal">INOUT</code> parameter. After calling the
      procedure, the values of the two variables will have been set or
      modified:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @increment = 10;</code></strong>
mysql&gt; <strong class="userinput"><code>CALL p(@version, @increment);</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @version, @increment;</code></strong>
+------------+------------+
| @version   | @increment |
+------------+------------+
| 5.0.25-log | 11         |
+------------+------------+
</pre><p>
      In prepared <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements used
      with <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> and
      <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>, placeholder support is
      available in MySQL 5.0 for <code class="literal">IN</code>
      parameters, but not for <code class="literal">OUT</code> or
      <code class="literal">INOUT</code> parameters. To work around this
      limitation for <code class="literal">OUT</code> and <code class="literal">INOUT</code>
      parameters, to forgo the use of placeholders: Refer to user
      variables in the <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement
      itself and do not specify them in the
      <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> statement:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @increment = 10;</code></strong>
mysql&gt; <strong class="userinput"><code>PREPARE s FROM 'CALL p(@version, @increment)';</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE s;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @version, @increment;</code></strong>
+-----------------+------------+
| @version        | @increment |
+-----------------+------------+
| 6.0.7-alpha-log | 11         |
+-----------------+------------+
</pre><p>
      To write C programs that use the
      <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> SQL statement to execute
      stored procedures that produce result sets, the
      <code class="literal">CLIENT_MULTI_RESULTS</code> flag must be enabled. This
      is because each <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> returns a
      result to indicate the call status, in addition to any result sets
      that might be returned by statements executed within the
      procedure. <code class="literal">CLIENT_MULTI_RESULTS</code> must also be
      enabled if <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> is used to execute
      any stored procedure that contains prepared statements. It cannot
      be determined when such a procedure is loaded whether those
      statements will produce result sets, so it is necessary to assume
      that they will.
    </p><p>
      <code class="literal">CLIENT_MULTI_RESULTS</code> can be enabled when you
      call <a href="connectors-apis.html#mysql-real-connect" title="20.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, either
      explicitly by passing the <code class="literal">CLIENT_MULTI_RESULTS</code>
      flag itself, or implicitly by passing
      <code class="literal">CLIENT_MULTI_STATEMENTS</code> (which also enables
      <code class="literal">CLIENT_MULTI_RESULTS</code>).
    </p><p>
      To process the result of a <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
      statement executed via
      <a href="connectors-apis.html#mysql-query" title="20.9.3.51. mysql_query()"><code class="literal">mysql_query()</code></a> or
      <a href="connectors-apis.html#mysql-real-query" title="20.9.3.54. mysql_real_query()"><code class="literal">mysql_real_query()</code></a>, use a loop
      that calls <a href="connectors-apis.html#mysql-next-result" title="20.9.3.46. mysql_next_result()"><code class="literal">mysql_next_result()</code></a> to
      determine whether there are more results. For an example, see
      <a href="connectors-apis.html#c-api-multiple-queries" title="20.9.12. C API Support for Multiple Statement Execution">Section 20.9.12, “C API Support for Multiple Statement Execution”</a>.
    </p><p>
      For programs written in a language that provides a MySQL
      interface, there is no native method for directly retrieving the
      results of <code class="literal">OUT</code> or <code class="literal">INOUT</code>
      parameters from <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements. To
      get the parameter values, pass user-defined variables to the
      procedure in the <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statement and
      then execute a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement to
      produce a result set containing the variable values. To handle an
      <code class="literal">INOUT</code> parameter, execute a statement prior to
      the <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> that sets the
      corresponding user variable to the value to be passed to the
      procedure.
    </p><p>
      The following example illustrates the technique (without error
      checking) for the stored procedure <code class="literal">p</code> described
      earlier that has an <code class="literal">OUT</code> parameter and an
      <code class="literal">INOUT</code> parameter:
    </p><pre class="programlisting">mysql_query(mysql, "SET @increment = 10");
mysql_query(mysql, "CALL p(@version, @increment)");
mysql_query(mysql, "SELECT @version, @increment");
result = mysql_store_result(mysql);
row = mysql_fetch_row(result);
mysql_free_result(result);
</pre><p>
      After the preceding code executes, <code class="literal">row[0]</code> and
      <code class="literal">row[1]</code> contain the values of
      <code class="literal">@version</code> and <code class="literal">@increment</code>,
      respectively.
    </p><p></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="delete"></a>12.2.2. <code class="literal">DELETE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2077616"></a><p>
      Single-table syntax:
    </p><pre class="programlisting">DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM <em class="replaceable"><code>tbl_name</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
    [ORDER BY ...]
    [LIMIT <em class="replaceable"><code>row_count</code></em>]
</pre><p>
      Multiple-table syntax:
    </p><pre class="programlisting">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    <em class="replaceable"><code>tbl_name</code></em>[.*] [, <em class="replaceable"><code>tbl_name</code></em>[.*]] ...
    FROM <em class="replaceable"><code>table_references</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
</pre><p>
      Or:
    </p><pre class="programlisting">DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    FROM <em class="replaceable"><code>tbl_name</code></em>[.*] [, <em class="replaceable"><code>tbl_name</code></em>[.*]] ...
    USING <em class="replaceable"><code>table_references</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
</pre><p>
      For the single-table syntax, the
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement deletes rows from
      <em class="replaceable"><code>tbl_name</code></em> and returns a count of the
      number of deleted rows. This count can be obtained by calling the
      <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> function (see
      <a href="functions.html#information-functions" title="11.10.3. Information Functions">Section 11.10.3, “Information Functions”</a>). The
      <code class="literal">WHERE</code> clause, if given, specifies the
      conditions that identify which rows to delete. With no
      <code class="literal">WHERE</code> clause, all rows are deleted. If the
      <code class="literal">ORDER BY</code> clause is specified, the rows are
      deleted in the order that is specified. The
      <code class="literal">LIMIT</code> clause places a limit on the number of
      rows that can be deleted.
    </p><p>
      For the multiple-table syntax,
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> deletes from each
      <em class="replaceable"><code>tbl_name</code></em> the rows that satisfy the
      conditions. In this case, <code class="literal">ORDER BY</code> and
      <code class="literal">LIMIT</code> cannot be used.
    </p><p>
      <em class="replaceable"><code>where_condition</code></em> is an expression that
      evaluates to true for each row to be deleted. It is specified as
      described in <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
    </p><p>
      Currently, you cannot delete from a table and select from the same
      table in a subquery.
    </p><p>
      You need the <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a> privilege on a
      table to delete rows from it. You need only the
      <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for any columns
      that are only read, such as those named in the
      <code class="literal">WHERE</code> clause.
    </p><p>
      As stated, a <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement with
      no <code class="literal">WHERE</code> clause deletes all rows. A faster way
      to do this, when you do not need to know the number of deleted
      rows, is to use <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE
      TABLE</code></a>. However, within a transaction or if you have a
      lock on the table,
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE TABLE</code></a>
      cannot be used whereas <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> can.
      See <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax">Section 12.2.10, “<code class="literal">TRUNCATE</code> Syntax”</a>, and <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax">Section 12.4.5, “<code class="literal">LOCK TABLES</code> and
      <code class="literal">UNLOCK
      TABLES</code> Syntax”</a>.
    </p><p>
      If you delete the row containing the maximum value for an
      <code class="literal">AUTO_INCREMENT</code> column, the value is reused
      later for a <code class="literal">BDB</code> table, but not for a
      <code class="literal">MyISAM</code> or <code class="literal">InnoDB</code> table. If
      you delete all rows in the table with <code class="literal">DELETE FROM
      <em class="replaceable"><code>tbl_name</code></em></code> (without a
      <code class="literal">WHERE</code> clause) in
      <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> mode, the sequence
      starts over for all storage engines except
      <code class="literal">InnoDB</code> and <code class="literal">MyISAM</code>. There are
      some exceptions to this behavior for <code class="literal">InnoDB</code>
      tables, as discussed in
      <a href="storage-engines.html#innodb-auto-increment-handling" title="13.2.4.3. AUTO_INCREMENT Handling in InnoDB">Section 13.2.4.3, “<code class="literal">AUTO_INCREMENT</code> Handling in <code class="literal">InnoDB</code>”</a>.
    </p><p>
      For <code class="literal">MyISAM</code> and <code class="literal">BDB</code> tables,
      you can specify an <code class="literal">AUTO_INCREMENT</code> secondary
      column in a multiple-column key. In this case, reuse of values
      deleted from the top of the sequence occurs even for
      <code class="literal">MyISAM</code> tables. See
      <a href="tutorial.html#example-auto-increment" title="3.6.9. Using AUTO_INCREMENT">Section 3.6.9, “Using <code class="literal">AUTO_INCREMENT</code>”</a>.
    </p><p>
      The <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement supports the
      following modifiers:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you specify <code class="literal">LOW_PRIORITY</code>, the server
          delays execution of the <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>
          until no other clients are reading from the table. This
          affects only storage engines that use only table-level locking
          (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>).
        </p></li><li><p>
          For <code class="literal">MyISAM</code> tables, if you use the
          <code class="literal">QUICK</code> keyword, the storage engine does not
          merge index leaves during delete, which may speed up some
          kinds of delete operations.
        </p></li><li><p>
          The <code class="literal">IGNORE</code> keyword causes MySQL to ignore
          all errors during the process of deleting rows. (Errors
          encountered during the parsing stage are processed in the
          usual manner.) Errors that are ignored due to the use of
          <code class="literal">IGNORE</code> are returned as warnings.
        </p></li></ul></div><p>
      The speed of delete operations may also be affected by factors
      discussed in <a href="optimization.html#delete-speed" title="7.2.21. Speed of DELETE Statements">Section 7.2.21, “Speed of <code class="literal">DELETE</code> Statements”</a>.
    </p><p>
      In <code class="literal">MyISAM</code> tables, deleted rows are maintained
      in a linked list and subsequent
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> operations reuse old row
      positions. To reclaim unused space and reduce file sizes, use the
      <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> statement or the
      <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a> utility to reorganize tables.
      <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> is easier to use,
      but <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a> is faster. See
      <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax">Section 12.5.2.5, “<code class="literal">OPTIMIZE TABLE</code> Syntax”</a>, and <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility">Section 4.6.3, “<span><strong class="command">myisamchk</strong></span> — MyISAM Table-Maintenance Utility”</a>.
    </p><p>
      The <code class="literal">QUICK</code> modifier affects whether index leaves
      are merged for delete operations. <code class="literal">DELETE QUICK</code>
      is most useful for applications where index values for deleted
      rows are replaced by similar index values from rows inserted
      later. In this case, the holes left by deleted values are reused.
    </p><p>
      <code class="literal">DELETE QUICK</code> is not useful when deleted values
      lead to underfilled index blocks spanning a range of index values
      for which new inserts occur again. In this case, use of
      <code class="literal">QUICK</code> can lead to wasted space in the index
      that remains unreclaimed. Here is an example of such a scenario:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Create a table that contains an indexed
          <code class="literal">AUTO_INCREMENT</code> column.
        </p></li><li><p>
          Insert many rows into the table. Each insert results in an
          index value that is added to the high end of the index.
        </p></li><li><p>
          Delete a block of rows at the low end of the column range
          using <code class="literal">DELETE QUICK</code>.
        </p></li></ol></div><p>
      In this scenario, the index blocks associated with the deleted
      index values become underfilled but are not merged with other
      index blocks due to the use of <code class="literal">QUICK</code>. They
      remain underfilled when new inserts occur, because new rows do not
      have index values in the deleted range. Furthermore, they remain
      underfilled even if you later use
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> without
      <code class="literal">QUICK</code>, unless some of the deleted index values
      happen to lie in index blocks within or adjacent to the
      underfilled blocks. To reclaim unused index space under these
      circumstances, use <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>.
    </p><p>
      If you are going to delete many rows from a table, it might be
      faster to use <code class="literal">DELETE QUICK</code> followed by
      <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>. This rebuilds the
      index rather than performing many index block merge operations.
    </p><p>
      The MySQL-specific <code class="literal">LIMIT
      <em class="replaceable"><code>row_count</code></em></code> option to
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> tells the server the maximum
      number of rows to be deleted before control is returned to the
      client. This can be used to ensure that a given
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement does not take too
      much time. You can simply repeat the
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement until the number
      of affected rows is less than the <code class="literal">LIMIT</code> value.
    </p><p>
      If the <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement includes an
      <code class="literal">ORDER BY</code> clause, rows are deleted in the order
      specified by the clause. This is useful primarily in conjunction
      with <code class="literal">LIMIT</code>. For example, the following
      statement finds rows matching the <code class="literal">WHERE</code> clause,
      sorts them by <code class="literal">timestamp_column</code>, and deletes the
      first (oldest) one:
    </p><pre class="programlisting">DELETE FROM somelog WHERE user = 'jcole'
ORDER BY timestamp_column LIMIT 1;
</pre><p>
      <code class="literal">ORDER BY</code> may also be useful in some cases to
      delete rows in an order required to avoid referential integrity
      violations.
    </p><p>
      If you are deleting many rows from a large table, you may exceed
      the lock table size for an <code class="literal">InnoDB</code> table. To
      avoid this problem, or simply to minimize the time that the table
      remains locked, the following strategy (which does not use
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> at all) might be helpful:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Select the rows <span class="emphasis"><em>not</em></span> to be deleted into an
          empty table that has the same structure as the original table:
        </p><pre class="programlisting">INSERT INTO t_copy SELECT * FROM t WHERE ... ;
</pre></li><li><p>
          Use <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a> to atomically
          move the original table out of the way and rename the copy to
          the original name:
        </p><pre class="programlisting">RENAME TABLE t TO t_old, t_copy TO t;
</pre></li><li><p>
          Drop the original table:
        </p><pre class="programlisting">DROP TABLE t_old;
</pre></li></ol></div><p>
      No other sessions can access the tables involved while
      <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a> executes, so the
      rename operation is not subject to concurrency problems. See
      <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax">Section 12.1.20, “<code class="literal">RENAME TABLE</code> Syntax”</a>.
    </p><p>
      You can specify multiple tables in a
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement to delete rows
      from one or more tables depending on the particular condition in
      the <code class="literal">WHERE</code> clause. However, you cannot use
      <code class="literal">ORDER BY</code> or <code class="literal">LIMIT</code> in a
      multiple-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>. The
      <em class="replaceable"><code>table_references</code></em> clause lists the
      tables involved in the join. Its syntax is described in
      <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>.
    </p><p>
      For the first multiple-table syntax, only matching rows from the
      tables listed before the <code class="literal">FROM</code> clause are
      deleted. For the second multiple-table syntax, only matching rows
      from the tables listed in the <code class="literal">FROM</code> clause
      (before the <code class="literal">USING</code> clause) are deleted. The
      effect is that you can delete rows from many tables at the same
      time and have additional tables that are used only for searching:
    </p><pre class="programlisting">DELETE t1, t2 FROM t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id;
</pre><p>
      Or:
    </p><pre class="programlisting">DELETE FROM t1, t2 USING t1 INNER JOIN t2 INNER JOIN t3
WHERE t1.id=t2.id AND t2.id=t3.id;
</pre><p>
      These statements use all three tables when searching for rows to
      delete, but delete matching rows only from tables
      <code class="literal">t1</code> and <code class="literal">t2</code>.
    </p><p>
      The preceding examples use <code class="literal">INNER JOIN</code>, but
      multiple-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements
      can use other types of join allowed in
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements, such as
      <code class="literal">LEFT JOIN</code>. For example, to delete rows that
      exist in <code class="literal">t1</code> that have no match in
      <code class="literal">t2</code>, use a <code class="literal">LEFT JOIN</code>:
    </p><pre class="programlisting">DELETE t1 FROM t1 LEFT JOIN t2 ON t1.id=t2.id WHERE t2.id IS NULL;
</pre><p>
      The syntax allows <code class="literal">.*</code> after each
      <em class="replaceable"><code>tbl_name</code></em> for compatibility with
      <span><strong class="command">Access</strong></span>.
    </p><p>
      If you use a multiple-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>
      statement involving <code class="literal">InnoDB</code> tables for which
      there are foreign key constraints, the MySQL optimizer might
      process tables in an order that differs from that of their
      parent/child relationship. In this case, the statement fails and
      rolls back. Instead, you should delete from a single table and
      rely on the <code class="literal">ON DELETE</code> capabilities that
      <code class="literal">InnoDB</code> provides to cause the other tables to be
      modified accordingly.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you declare an alias for a table, you must use the alias when
        referring to the table:
      </p><pre class="programlisting">DELETE t1 FROM test AS t1, test2 WHERE ...
</pre></div><p>
      If table aliases are used, they should be declared in the
      <em class="replaceable"><code>table_references</code></em> part of the statement.
      Elsewhere in the statement, aliases references are allowed but
      should not be declared.
    </p><p>
      Cross-database deletes are supported for multiple-table deletes,
      but you should be aware that in the list of tables from which to
      delete rows, aliases will have a default database unless one is
      specified explicitly. For example, if the current database is
      <code class="literal">test</code>, the following statement does not work
      because the unqualified alias <code class="literal">a1</code> has a default
      database of <code class="literal">test</code>:
    </p><pre class="programlisting">DELETE a1, a2 FROM db1.t1 AS a1 INNER JOIN db2.t2 AS a2
WHERE a1.id=a2.id;
</pre><p>
      To correctly match the alias, you must explicitly qualify it with
      the database of the table being aliased:
    </p><pre class="programlisting">DELETE db1.a1, db2.a2 FROM db1.t1 AS a1 INNER JOIN db2.t2 AS a2
WHERE a1.id=a2.id;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="do"></a>12.2.3. <code class="literal">DO</code> Syntax</h3></div></div></div><a class="indexterm" name="id2078757"></a><pre class="programlisting">DO <em class="replaceable"><code>expr</code></em> [, <em class="replaceable"><code>expr</code></em>] ...
</pre><p>
      <a href="sql-syntax.html#do" title="12.2.3. DO Syntax"><code class="literal">DO</code></a> executes the expressions but
      does not return any results. In most respects,
      <a href="sql-syntax.html#do" title="12.2.3. DO Syntax"><code class="literal">DO</code></a> is shorthand for <code class="literal">SELECT
      <em class="replaceable"><code>expr</code></em>, ...</code>, but has the
      advantage that it is slightly faster when you do not care about
      the result.
    </p><p>
      <a href="sql-syntax.html#do" title="12.2.3. DO Syntax"><code class="literal">DO</code></a> is useful primarily with
      functions that have side effects, such as
      <a href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="handler"></a>12.2.4. <code class="literal">HANDLER</code> Syntax</h3></div></div></div><a class="indexterm" name="id2078860"></a><pre class="programlisting">HANDLER <em class="replaceable"><code>tbl_name</code></em> OPEN [ [AS] <em class="replaceable"><code>alias</code></em>]
HANDLER <em class="replaceable"><code>tbl_name</code></em> READ <em class="replaceable"><code>index_name</code></em> { = | &gt;= | &lt;= | &lt; } (<em class="replaceable"><code>value1</code></em>,<em class="replaceable"><code>value2</code></em>,...)
    [ WHERE <em class="replaceable"><code>where_condition</code></em> ] [LIMIT ... ]
HANDLER <em class="replaceable"><code>tbl_name</code></em> READ <em class="replaceable"><code>index_name</code></em> { FIRST | NEXT | PREV | LAST }
    [ WHERE <em class="replaceable"><code>where_condition</code></em> ] [LIMIT ... ]
HANDLER <em class="replaceable"><code>tbl_name</code></em> READ { FIRST | NEXT }
    [ WHERE <em class="replaceable"><code>where_condition</code></em> ] [LIMIT ... ]
HANDLER <em class="replaceable"><code>tbl_name</code></em> CLOSE
</pre><p>
      The <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statement provides
      direct access to table storage engine interfaces. It is available
      for <code class="literal">MyISAM</code> and <code class="literal">InnoDB</code>
      tables.
    </p><p>
      The <code class="literal">HANDLER ... OPEN</code> statement opens a table,
      making it accessible via subsequent <code class="literal">HANDLER ...
      READ</code> statements. This table object is not shared by
      other sessions and is not closed until the session calls
      <code class="literal">HANDLER ... CLOSE</code> or the session terminates. If
      you open the table using an alias, further references to the open
      table with other <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statements
      must use the alias rather than the table name.
    </p><p>
      The first <code class="literal">HANDLER ... READ</code> syntax fetches a row
      where the index specified satisfies the given values and the
      <code class="literal">WHERE</code> condition is met. If you have a
      multiple-column index, specify the index column values as a
      comma-separated list. Either specify values for all the columns in
      the index, or specify values for a leftmost prefix of the index
      columns. Suppose that an index <code class="literal">my_idx</code> includes
      three columns named <code class="literal">col_a</code>,
      <code class="literal">col_b</code>, and <code class="literal">col_c</code>, in that
      order. The <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statement can
      specify values for all three columns in the index, or for the
      columns in a leftmost prefix. For example:
    </p><pre class="programlisting">HANDLER ... READ my_idx = (col_a_val,col_b_val,col_c_val) ...
HANDLER ... READ my_idx = (col_a_val,col_b_val) ...
HANDLER ... READ my_idx = (col_a_val) ...
</pre><p>
      To employ the <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> interface to
      refer to a table's <code class="literal">PRIMARY KEY</code>, use the quoted
      identifier <code class="literal">`PRIMARY`</code>:
    </p><pre class="programlisting">HANDLER <em class="replaceable"><code>tbl_name</code></em> READ `PRIMARY` ...
</pre><p>
      The second <code class="literal">HANDLER ... READ</code> syntax fetches a
      row from the table in index order that matches the
      <code class="literal">WHERE</code> condition.
    </p><p>
      The third <code class="literal">HANDLER ... READ</code> syntax fetches a row
      from the table in natural row order that matches the
      <code class="literal">WHERE</code> condition. It is faster than
      <code class="literal">HANDLER <em class="replaceable"><code>tbl_name</code></em> READ
      <em class="replaceable"><code>index_name</code></em></code> when a full table
      scan is desired. Natural row order is the order in which rows are
      stored in a <code class="literal">MyISAM</code> table data file. This
      statement works for <code class="literal">InnoDB</code> tables as well, but
      there is no such concept because there is no separate data file.
    </p><p>
      Without a <code class="literal">LIMIT</code> clause, all forms of
      <code class="literal">HANDLER ... READ</code> fetch a single row if one is
      available. To return a specific number of rows, include a
      <code class="literal">LIMIT</code> clause. It has the same syntax as for the
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. See
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
    </p><p>
      <code class="literal">HANDLER ... CLOSE</code> closes a table that was
      opened with <code class="literal">HANDLER ... OPEN</code>.
    </p><p>
      There are several reasons to use the
      <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> interface instead of normal
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> is faster than
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              A designated storage engine handler object is allocated
              for the <code class="literal">HANDLER ... OPEN</code>. The object is
              reused for subsequent
              <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statements for that
              table; it need not be reinitialized for each one.
            </p></li><li><p>
              There is less parsing involved.
            </p></li><li><p>
              There is no optimizer or query-checking overhead.
            </p></li><li><p>
              The table does not have to be locked between two handler
              requests.
            </p></li><li><p>
              The handler interface does not have to provide a
              consistent look of the data (for example, dirty reads are
              allowed), so the storage engine can use optimizations that
              <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> does not normally
              allow.
            </p></li></ul></div></li><li><p>
          For applications that use a low-level
          <code class="literal">ISAM</code>-like interface,
          <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> makes it much easier to
          port them to MySQL.
        </p></li><li><p>
          <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> enables you to traverse
          a database in a manner that is difficult (or even impossible)
          to accomplish with <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>. The
          <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> interface is a more
          natural way to look at data when working with applications
          that provide an interactive user interface to the database.
        </p></li></ul></div><p>
      <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> is a somewhat low-level
      statement. For example, it does not provide consistency. That is,
      <code class="literal">HANDLER ... OPEN</code> does <span class="emphasis"><em>not</em></span>
      take a snapshot of the table, and does <span class="emphasis"><em>not</em></span>
      lock the table. This means that after a <code class="literal">HANDLER ...
      OPEN</code> statement is issued, table data can be modified (by
      the current session or other sessions) and these modifications
      might be only partially visible to <code class="literal">HANDLER ...
      NEXT</code> or <code class="literal">HANDLER ... PREV</code> scans.
    </p><p>
      An open handler can be closed and marked for reopen, in which case
      the handler loses its position in the table. This occurs when both
      of the following circumstances are true:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Any session executes
          <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES</code></a>
          or DDL statements on the handler's table.
        </p></li><li><p>
          The session in which the handler is open executes
          non-<a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER</code></a> statements that use
          tables.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="insert"></a>12.2.5. <code class="literal">INSERT</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#insert-select">12.2.5.1. <code class="literal">INSERT ...
        SELECT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert-delayed">12.2.5.2. <code class="literal">INSERT DELAYED</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#insert-on-duplicate">12.2.5.3. <code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2079448"></a><a class="indexterm" name="id2079457"></a><pre class="programlisting">INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    {VALUES | VALUE} ({<em class="replaceable"><code>expr</code></em> | DEFAULT},...),(...),...
    [ ON DUPLICATE KEY UPDATE
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
        [, <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>] ... ]
</pre><p>
      Or:
    </p><pre class="programlisting">INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em>
    SET <em class="replaceable"><code>col_name</code></em>={<em class="replaceable"><code>expr</code></em> | DEFAULT}, ...
    [ ON DUPLICATE KEY UPDATE
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
        [, <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>] ... ]
</pre><p>
      Or:
    </p><pre class="programlisting">INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
        [, <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>] ... ]
</pre><p>
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> inserts new rows into an
      existing table. The <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT
      ... VALUES</code></a> and
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ... SET</code></a>
      forms of the statement insert rows based on explicitly specified
      values. The <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT
      ... SELECT</code></a> form inserts rows selected from another table
      or tables. <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT
      ... SELECT</code></a> is discussed further in
      <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax">Section 12.2.5.1, “<code class="literal">INSERT ...
        SELECT</code> Syntax”</a>.
    </p><p>
      You can use <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> instead of
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> to overwrite old rows.
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> is the counterpart to
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT IGNORE</code></a> in
      the treatment of new rows that contain unique key values that
      duplicate old rows: The new rows are used to replace the old rows
      rather than being discarded. See <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax">Section 12.2.7, “<code class="literal">REPLACE</code> Syntax”</a>.
    </p><p>
      <em class="replaceable"><code>tbl_name</code></em> is the table into which rows
      should be inserted. The columns for which the statement provides
      values can be specified as follows:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          You can provide a comma-separated list of column names
          following the table name. In this case, a value for each named
          column must be provided by the <code class="literal">VALUES</code> list
          or the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement.
        </p></li><li><p>
          If you do not specify a list of column names for
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ...
          VALUES</code></a> or
          <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
          SELECT</code></a>, values for every column in the table must be
          provided by the <code class="literal">VALUES</code> list or the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. If you do not
          know the order of the columns in the table, use
          <code class="literal">DESCRIBE
          <em class="replaceable"><code>tbl_name</code></em></code> to find out.
        </p></li><li><p>
          The <code class="literal">SET</code> clause indicates the column names
          explicitly.
        </p></li></ul></div><p>
      Column values can be given in several ways:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2079778"></a>

          If you are not running in strict SQL mode, any column not
          explicitly given a value is set to its default (explicit or
          implicit) value. For example, if you specify a column list
          that does not name all the columns in the table, unnamed
          columns are set to their default values. Default value
          assignment is described in
          <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>. See also
          <a href="introduction.html#constraint-invalid-data" title="1.7.6.2. Constraints on Invalid Data">Section 1.7.6.2, “Constraints on Invalid Data”</a>.
        </p><p>
          If you want an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement
          to generate an error unless you explicitly specify values for
          all columns that do not have a default value, you should use
          strict mode. See <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>.
        </p></li><li><p>
          Use the keyword <code class="literal">DEFAULT</code> to set a column
          explicitly to its default value. This makes it easier to write
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements that assign
          values to all but a few columns, because it enables you to
          avoid writing an incomplete <code class="literal">VALUES</code> list
          that does not include a value for each column in the table.
          Otherwise, you would have to write out the list of column
          names corresponding to each value in the
          <code class="literal">VALUES</code> list.
        </p><p>
          You can also use
          <a href="functions.html#function_default"><code class="literal">DEFAULT(<em class="replaceable"><code>col_name</code></em>)</code></a>
          as a more general form that can be used in expressions to
          produce a given column's default value.
        </p></li><li><p>
          If both the column list and the <code class="literal">VALUES</code> list
          are empty, <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> creates a row
          with each column set to its default value:
        </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> () VALUES();
</pre><p>
          In strict mode, an error occurs if any column doesn't have a
          default value. Otherwise, MySQL uses the implicit default
          value for any column that does not have an explicitly defined
          default.
        </p></li><li><p>
          You can specify an expression <em class="replaceable"><code>expr</code></em>
          to provide a column value. This might involve type conversion
          if the type of the expression does not match the type of the
          column, and conversion of a given value can result in
          different inserted values depending on the data type. For
          example, inserting the string <code class="literal">'1999.0e-2'</code>
          into an <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a>,
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">FLOAT</code></a>,
          <code class="literal">DECIMAL(10,6)</code>, or
          <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> column results in the
          values <code class="literal">1999</code>, <code class="literal">19.9921</code>,
          <code class="literal">19.992100</code>, and <code class="literal">1999</code>
          being inserted, respectively. The reason the value stored in
          the <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a> and
          <a href="data-types.html#year" title="10.3.3. The YEAR Type"><code class="literal">YEAR</code></a> columns is
          <code class="literal">1999</code> is that the string-to-integer
          conversion looks only at as much of the initial part of the
          string as may be considered a valid integer or year. For the
          floating-point and fixed-point columns, the
          string-to-floating-point conversion considers the entire
          string a valid floating-point value.
        </p><p>
          An expression <em class="replaceable"><code>expr</code></em> can refer to any
          column that was set earlier in a value list. For example, you
          can do this because the value for <code class="literal">col2</code>
          refers to <code class="literal">col1</code>, which has previously been
          assigned:
        </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (col1,col2) VALUES(15,col1*2);
</pre><p>
          But the following is not legal, because the value for
          <code class="literal">col1</code> refers to <code class="literal">col2</code>,
          which is assigned after <code class="literal">col1</code>:
        </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (col1,col2) VALUES(col2*2,15);
</pre><p>
          One exception involves columns that contain
          <code class="literal">AUTO_INCREMENT</code> values. Because the
          <code class="literal">AUTO_INCREMENT</code> value is generated after
          other value assignments, any reference to an
          <code class="literal">AUTO_INCREMENT</code> column in the assignment
          returns a <code class="literal">0</code>.
        </p></li></ul></div><p>
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements that use
      <code class="literal">VALUES</code> syntax can insert multiple rows. To do
      this, include multiple lists of column values, each enclosed
      within parentheses and separated by commas. Example:
    </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9);
</pre><p>
      The values list for each row must be enclosed within parentheses.
      The following statement is illegal because the number of values in
      the list does not match the number of column names:
    </p><pre class="programlisting">INSERT INTO <em class="replaceable"><code>tbl_name</code></em> (a,b,c) VALUES(1,2,3,4,5,6,7,8,9);
</pre><p>
      <code class="literal">VALUE</code> is a synonym for
      <code class="literal">VALUES</code> in this context. Neither implies
      anything about the number of values lists, and either may be used
      whether there is a single values list or multiple lists.
    </p><p>
      The affected-rows value for an
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> can be obtained using the
      <a href="functions.html#function_row-count"><code class="literal">ROW_COUNT()</code></a> function (see
      <a href="functions.html#information-functions" title="11.10.3. Information Functions">Section 11.10.3, “Information Functions”</a>), or the
      <a href="connectors-apis.html#mysql-affected-rows" title="20.9.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> C API
      function (see <a href="connectors-apis.html#mysql-affected-rows" title="20.9.3.1. mysql_affected_rows()">Section 20.9.3.1, “<code class="literal">mysql_affected_rows()</code>”</a>).
    </p><p>
      If you use an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT ...
      VALUES</code></a> statement with multiple value lists or
      <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
      SELECT</code></a>, the statement returns an information string in
      this format:
    </p><pre class="programlisting">Records: 100 Duplicates: 0 Warnings: 0
</pre><p>
      <code class="literal">Records</code> indicates the number of rows processed
      by the statement. (This is not necessarily the number of rows
      actually inserted because <code class="literal">Duplicates</code> can be
      nonzero.) <code class="literal">Duplicates</code> indicates the number of
      rows that could not be inserted because they would duplicate some
      existing unique index value. <code class="literal">Warnings</code> indicates
      the number of attempts to insert column values that were
      problematic in some way. Warnings can occur under any of the
      following conditions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Inserting <code class="literal">NULL</code> into a column that has been
          declared <code class="literal">NOT NULL</code>. For multiple-row
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements or
          <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT INTO ...
          SELECT</code></a> statements, the column is set to the implicit
          default value for the column data type. This is
          <code class="literal">0</code> for numeric types, the empty string
          (<code class="literal">''</code>) for string types, and the
          “<span class="quote">zero</span>” value for date and time types.
          <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT INTO ...
          SELECT</code></a> statements are handled the same way as
          multiple-row inserts because the server does not examine the
          result set from the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> to
          see whether it returns a single row. (For a single-row
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, no warning occurs when
          <code class="literal">NULL</code> is inserted into a <code class="literal">NOT
          NULL</code> column. Instead, the statement fails with an
          error.)
        </p></li><li><p>
          Setting a numeric column to a value that lies outside the
          column's range. The value is clipped to the closest endpoint
          of the range.
        </p></li><li><p>
          Assigning a value such as <code class="literal">'10.34 a'</code> to a
          numeric column. The trailing nonnumeric text is stripped off
          and the remaining numeric part is inserted. If the string
          value has no leading numeric part, the column is set to
          <code class="literal">0</code>.
        </p></li><li><p>
          Inserting a string into a string column
          (<a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
          <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>, or
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>) that exceeds the column's
          maximum length. The value is truncated to the column's maximum
          length.
        </p></li><li><p>
          Inserting a value into a date or time column that is illegal
          for the data type. The column is set to the appropriate zero
          value for the type.
        </p></li></ul></div><a class="indexterm" name="id2080405"></a><p>
      If you are using the C API, the information string can be obtained
      by invoking the <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a>
      function. See <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()">Section 20.9.3.35, “<code class="literal">mysql_info()</code>”</a>.
    </p><a class="indexterm" name="id2080430"></a><a class="indexterm" name="id2080439"></a><p>
      If <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> inserts a row into a
      table that has an <code class="literal">AUTO_INCREMENT</code> column, you
      can find the value used for that column by using the SQL
      <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function. From
      within the C API, use the
      <a href="connectors-apis.html#mysql-insert-id" title="20.9.3.37. mysql_insert_id()"><code class="literal">mysql_insert_id()</code></a> function.
      However, you should note that the two functions do not always
      behave identically. The behavior of
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements with respect to
      <code class="literal">AUTO_INCREMENT</code> columns is discussed further in
      <a href="functions.html#information-functions" title="11.10.3. Information Functions">Section 11.10.3, “Information Functions”</a>, and
      <a href="connectors-apis.html#mysql-insert-id" title="20.9.3.37. mysql_insert_id()">Section 20.9.3.37, “<code class="literal">mysql_insert_id()</code>”</a>.
    </p><p>
      The <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement supports the
      following modifiers:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use the <code class="literal">DELAYED</code> keyword, the server
          puts the row or rows to be inserted into a buffer, and the
          client issuing the <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
          DELAYED</code></a> statement can then continue immediately. If
          the table is in use, the server holds the rows. When the table
          is free, the server begins inserting rows, checking
          periodically to see whether there are any new read requests
          for the table. If there are, the delayed row queue is
          suspended until the table becomes free again. See
          <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax">Section 12.2.5.2, “<code class="literal">INSERT DELAYED</code> Syntax”</a>.
        </p><a class="indexterm" name="id2080543"></a><p>
          <code class="literal">DELAYED</code> is ignored with
          <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
          SELECT</code></a> or
          <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT
          ... ON DUPLICATE KEY UPDATE</code></a>.
        </p><a class="indexterm" name="id2080580"></a><a class="indexterm" name="id2080592"></a><p>
          Beginning with MySQL 5.0.42, <code class="literal">DELAYED</code> is
          also disregarded for an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>
          that uses functions accessing tables or triggers, or that is
          called from a function or a trigger.
        </p></li><li><p>
          If you use the <code class="literal">LOW_PRIORITY</code> keyword,
          execution of the <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> is
          delayed until no other clients are reading from the table.
          This includes other clients that began reading while existing
          clients are reading, and while the <code class="literal">INSERT
          LOW_PRIORITY</code> statement is waiting. It is possible,
          therefore, for a client that issues an <code class="literal">INSERT
          LOW_PRIORITY</code> statement to wait for a very long time
          (or even forever) in a read-heavy environment. (This is in
          contrast to <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>,
          which lets the client continue at once. Note that
          <code class="literal">LOW_PRIORITY</code> should normally not be used
          with <code class="literal">MyISAM</code> tables because doing so
          disables concurrent inserts. See
          <a href="optimization.html#concurrent-inserts" title="7.3.3. Concurrent Inserts">Section 7.3.3, “Concurrent Inserts”</a>.
        </p><p>
          If you specify <code class="literal">HIGH_PRIORITY</code>, it overrides
          the effect of the
          <a href="server-administration.html#option_mysqld_low-priority-updates"><code class="option">--low-priority-updates</code></a> option
          if the server was started with that option. It also causes
          concurrent inserts not to be used. See
          <a href="optimization.html#concurrent-inserts" title="7.3.3. Concurrent Inserts">Section 7.3.3, “Concurrent Inserts”</a>.
        </p><p>
          <code class="literal">LOW_PRIORITY</code> and
          <code class="literal">HIGH_PRIORITY</code> affect only storage engines
          that use only table-level locking (<code class="literal">MyISAM</code>,
          <code class="literal">MEMORY</code>, <code class="literal">MERGE</code>).
        </p></li><li><p>
          If you use the <code class="literal">IGNORE</code> keyword, errors that
          occur while executing the
          <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement are treated as
          warnings instead. For example, without
          <code class="literal">IGNORE</code>, a row that duplicates an existing
          <code class="literal">UNIQUE</code> index or <code class="literal">PRIMARY
          KEY</code> value in the table causes a duplicate-key error
          and the statement is aborted. With <code class="literal">IGNORE</code>,
          the row still is not inserted, but no error is issued. Data
          conversions that would trigger errors abort the statement if
          <code class="literal">IGNORE</code> is not specified. With
          <code class="literal">IGNORE</code>, invalid values are adjusted to the
          closest values and inserted; warnings are produced but the
          statement does not abort. You can determine with the
          <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API function
          how many rows were actually inserted into the table.
        </p></li><li><p>
          If you specify <code class="literal">ON DUPLICATE KEY UPDATE</code>, and
          a row is inserted that would cause a duplicate value in a
          <code class="literal">UNIQUE</code> index or <code class="literal">PRIMARY
          KEY</code>, an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> of the
          old row is performed. The affected-rows value per row is 1 if
          the row is inserted as a new row and 2 if an existing row is
          updated. See <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax">Section 12.2.5.3, “<code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code> Syntax”</a>.
        </p></li></ul></div><p>
      Inserting into a table requires the
      <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privilege for the table. If
      the <code class="literal">ON DUPLICATE KEY UPDATE</code> clause is used and
      a duplicate key causes an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> to
      be performed instead, the statement requires the
      <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a> privilege for the columns to
      be updated. For columns that are read but not modified you need
      only the <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege (such as
      for a column referenced only on the right hand side of an
      <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>
      assignment in an <code class="literal">ON DUPLICATE KEY UPDATE</code>
      clause).
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="insert-select"></a>12.2.5.1. <code class="literal">INSERT ...
        SELECT</code> Syntax</h4></div></div></div><a class="indexterm" name="id2080911"></a><pre class="programlisting">INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE <em class="replaceable"><code>col_name</code></em>=<em class="replaceable"><code>expr</code></em>, ... ]
</pre><p>
        With <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a>, you can quickly insert many rows into a table
        from one or many tables. For example:
      </p><pre class="programlisting">INSERT INTO tbl_temp2 (fld_id)
  SELECT tbl_temp1.fld_order_id
  FROM tbl_temp1 WHERE tbl_temp1.fld_order_id &gt; 100;
</pre><p>
        The following conditions hold for a
        <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
        SELECT</code></a> statements:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Specify <code class="literal">IGNORE</code> to ignore rows that would
            cause duplicate-key violations.
          </p></li><li><p>
            <code class="literal">DELAYED</code> is ignored with
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
            SELECT</code></a>.
          </p></li><li><p>
            The target table of the
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement may appear
            in the <code class="literal">FROM</code> clause of the
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> part of the query.
            (This was not possible in some older versions of MySQL.) In
            this case, MySQL creates a temporary table to hold the rows
            from the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and then
            inserts those rows into the target table. However, it
            remains true that you cannot use <code class="literal">INSERT INTO t ...
            SELECT ... FROM t</code> when <code class="literal">t</code> is a
            <code class="literal">TEMPORARY</code> table, because
            <code class="literal">TEMPORARY</code> tables cannot be referred to
            twice in the same statement (see
            <a href="error-handling.html#temporary-table-problems" title="B.1.7.3. TEMPORARY Table Problems">Section B.1.7.3, “<code class="literal">TEMPORARY</code> Table Problems”</a>).
          </p></li><li><p>
            <code class="literal">AUTO_INCREMENT</code> columns work as usual.
          </p></li><li><p>
            To ensure that the binary log can be used to re-create the
            original tables, MySQL does not allow concurrent inserts for
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
            SELECT</code></a> statements.
          </p></li><li><p>
            Currently, you cannot insert into a table and select from
            the same table in a subquery.
          </p></li><li><p>
            To avoid ambiguous column reference problems when the
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and the
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> refer to the same
            table, provide a unique alias for each table used in the
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> part, and qualify
            column names in that part with the appropriate alias.
          </p></li></ul></div><p>
        In the values part of <code class="literal">ON DUPLICATE KEY
        UPDATE</code>, you can refer to columns in other tables, as
        long as you do not use <code class="literal">GROUP BY</code> in the
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> part. One side effect is
        that you must qualify nonunique column names in the values part.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="insert-delayed"></a>12.2.5.2. <code class="literal">INSERT DELAYED</code> Syntax</h4></div></div></div><a class="indexterm" name="id2081200"></a><a class="indexterm" name="id2081208"></a><a class="indexterm" name="id2081217"></a><pre class="programlisting">INSERT DELAYED ...
</pre><p>
        The <code class="literal">DELAYED</code> option for the
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement is a MySQL
        extension to standard SQL that is very useful if you have
        clients that cannot or need not wait for the
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> to complete. This is a
        common situation when you use MySQL for logging and you also
        periodically run <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements that take a
        long time to complete.
      </p><p>
        When a client uses <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
        DELAYED</code></a>, it gets an okay from the server at once, and
        the row is queued to be inserted when the table is not in use by
        any other thread.
      </p><p>
        Another major benefit of using <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
        DELAYED</code></a> is that inserts from many clients are bundled
        together and written in one block. This is much faster than
        performing many separate inserts.
      </p><p>
        Note that <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> is
        slower than a normal <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> if
        the table is not otherwise in use. There is also the additional
        overhead for the server to handle a separate thread for each
        table for which there are delayed rows. This means that you
        should use <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> only
        when you are really sure that you need it.
      </p><p>
        The queued rows are held only in memory until they are inserted
        into the table. This means that if you terminate
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> forcibly (for example, with
        <code class="literal">kill -9</code>) or if <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> dies
        unexpectedly, <span class="emphasis"><em>any queued rows that have not been
        written to disk are lost</em></span>.
      </p><p>
        There are some constraints on the use of
        <code class="literal">DELAYED</code>:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> works only
            with <code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
            and <code class="literal">ARCHIVE</code> tables. For engines that do
            not support <code class="literal">DELAYED</code>, an error occurs.
          </p></li><li><p>
            An error occurs for <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
            DELAYED</code></a> if used with a table that has been locked
            with <code class="literal">LOCK TABLES</code> because the insert must
            be handled by a separate thread, not by the session that
            holds the lock.
          </p></li><li><p>
            For <code class="literal">MyISAM</code> tables, if there are no free
            blocks in the middle of the data file, concurrent
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements are
            supported. Under these circumstances, you very seldom need
            to use <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> with
            <code class="literal">MyISAM</code>.
          </p></li><li><p>
            <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> should be used
            only for <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements
            that specify value lists. The server ignores
            <code class="literal">DELAYED</code> for
            <a href="sql-syntax.html#insert-select" title="12.2.5.1. INSERT ...
        SELECT Syntax"><code class="literal">INSERT ...
            SELECT</code></a> or
            <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax"><code class="literal">INSERT
            ... ON DUPLICATE KEY UPDATE</code></a> statements.
          </p></li><li><p>
            Because the <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
            statement returns immediately, before the rows are inserted,
            you cannot use
            <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> to get the
            <code class="literal">AUTO_INCREMENT</code> value that the statement
            might generate.
          </p></li><li><p>
            <code class="literal">DELAYED</code> rows are not visible to
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements until they
            actually have been inserted.
          </p></li><li><p>
            <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> is treated as
            a normal <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> if the
            statement inserts multiple rows and binary logging is
            enabled.
          </p></li><li><p>
            <code class="literal">DELAYED</code> is ignored on slave replication
            servers, so that <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
            DELAYED</code></a> is treated as a normal
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> on slaves. This is
            because <code class="literal">DELAYED</code> could cause the slave to
            have different data than the master.
          </p></li><li><p>
            Pending <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
            statements are lost if a table is write locked and
            <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> is used to modify
            the table structure.
          </p></li><li><p>
            <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> is not
            supported for views.
          </p></li></ul></div><p>
        The following describes in detail what happens when you use the
        <code class="literal">DELAYED</code> option to
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
        <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>. In this description, the
        “<span class="quote">thread</span>” is the thread that received an
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statement and
        “<span class="quote">handler</span>” is the thread that handles all
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statements for a
        particular table.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            When a thread executes a <code class="literal">DELAYED</code>
            statement for a table, a handler thread is created to
            process all <code class="literal">DELAYED</code> statements for the
            table, if no such handler already exists.
          </p></li><li><p>
            The thread checks whether the handler has previously
            acquired a <code class="literal">DELAYED</code> lock; if not, it tells
            the handler thread to do so. The <code class="literal">DELAYED</code>
            lock can be obtained even if other threads have a
            <code class="literal">READ</code> or <code class="literal">WRITE</code> lock on
            the table. However, the handler waits for all
            <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> locks or
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a> statements to finish, to ensure that the
            table structure is up to date.
          </p></li><li><p>
            The thread executes the
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement, but instead
            of writing the row to the table, it puts a copy of the final
            row into a queue that is managed by the handler thread. Any
            syntax errors are noticed by the thread and reported to the
            client program.
          </p></li><li><p>
            The client cannot obtain from the server the number of
            duplicate rows or the <code class="literal">AUTO_INCREMENT</code>
            value for the resulting row, because the
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> returns before the
            insert operation has been completed. (If you use the C API,
            the <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> function
            does not return anything meaningful, for the same reason.)
          </p></li><li><p>
            The binary log is updated by the handler thread when the row
            is inserted into the table. In case of multiple-row inserts,
            the binary log is updated when the first row is inserted.
          </p></li><li><p>
            <a class="indexterm" name="id2081847"></a>

            Each time that
            <a href="server-administration.html#sysvar_delayed_insert_limit"><code class="literal">delayed_insert_limit</code></a> rows
            are written, the handler checks whether any
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements are still
            pending. If so, it allows these to execute before
            continuing.
          </p></li><li><p>
            <a class="indexterm" name="id2081879"></a>

            When the handler has no more rows in its queue, the table is
            unlocked. If no new <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
            DELAYED</code></a> statements are received within
            <a href="server-administration.html#sysvar_delayed_insert_timeout"><code class="literal">delayed_insert_timeout</code></a>
            seconds, the handler terminates.
          </p></li><li><p>
            If more than
            <a href="server-administration.html#sysvar_delayed_queue_size"><code class="literal">delayed_queue_size</code></a> rows are
            pending in a specific handler queue, the thread requesting
            <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> waits until
            there is room in the queue. This is done to ensure that
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> does not use all memory for the
            delayed memory queue.
          </p></li><li><p>
            The handler thread shows up in the MySQL process list with
            <code class="literal">delayed_insert</code> in the
            <code class="literal">Command</code> column. It is killed if you
            execute a <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a> statement or kill it with <code class="literal">KILL
            <em class="replaceable"><code>thread_id</code></em></code>. However,
            before exiting, it first stores all queued rows into the
            table. During this time it does not accept any new
            <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements from other
            threads. If you execute an <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
            DELAYED</code></a> statement after this, a new handler thread
            is created.
          </p><p>
            Note that this means that <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
            DELAYED</code></a> statements have higher priority than
            normal <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements if
            there is an <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>
            handler running. Other update statements have to wait until
            the <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> queue is
            empty, someone terminates the handler thread (with
            <code class="literal">KILL
            <em class="replaceable"><code>thread_id</code></em></code>), or someone
            executes a <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a>.
          </p></li><li><p>
            The following status variables provide information about
            <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> statements.
          </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Status Variable</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><a href="server-administration.html#statvar_Delayed_insert_threads"><code class="literal">Delayed_insert_threads</code></a></td><td>Number of handler threads</td></tr><tr><td><a href="server-administration.html#statvar_Delayed_writes"><code class="literal">Delayed_writes</code></a></td><td>Number of rows written with <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT
                    DELAYED</code></a></td></tr><tr><td><a href="server-administration.html#statvar_Not_flushed_delayed_rows"><code class="literal">Not_flushed_delayed_rows</code></a></td><td>Number of rows waiting to be written</td></tr></tbody></table></div><p>
            You can view these variables by issuing a
            <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> statement or by
            executing a <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin extended-status</strong></span></a>
            command.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="insert-on-duplicate"></a>12.2.5.3. <code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code> Syntax</h4></div></div></div><p>
        If you specify <code class="literal">ON DUPLICATE KEY UPDATE</code>, and a
        row is inserted that would cause a duplicate value in a
        <code class="literal">UNIQUE</code> index or <code class="literal">PRIMARY
        KEY</code>, an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> of the
        old row is performed. For example, if column
        <code class="literal">a</code> is declared as <code class="literal">UNIQUE</code>
        and contains the value <code class="literal">1</code>, the following two
        statements have identical effect:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=c+1;

UPDATE table SET c=c+1 WHERE a=1;
</pre><p>
        With <code class="literal">ON DUPLICATE KEY UPDATE</code>, the
        affected-rows value per row is 1 if the row is inserted as a new
        row and 2 if an existing row is updated.
      </p><p>
        If column <code class="literal">b</code> is also unique, the
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> is equivalent to this
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement instead:
      </p><pre class="programlisting">UPDATE table SET c=c+1 WHERE a=1 OR b=2 LIMIT 1;
</pre><p>
        If <code class="literal">a=1 OR b=2</code> matches several rows, only
        <span class="emphasis"><em>one</em></span> row is updated. In general, you should
        try to avoid using an <code class="literal">ON DUPLICATE KEY</code> clause
        on tables with multiple unique indexes.
      </p><p>
        The <code class="literal">ON DUPLICATE KEY UPDATE</code> clause can
        contain multiple column assignments, separated by commas.
      </p><p>
        You can use the
        <a href="functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        function in the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> clause to
        refer to column values from the
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> portion of the
        <code class="literal">INSERT ... UPDATE</code> statement. In other words,
        <a href="functions.html#function_values"><code class="literal">VALUES(<em class="replaceable"><code>col_name</code></em>)</code></a>
        in the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> clause refers to
        the value of <em class="replaceable"><code>col_name</code></em> that would be
        inserted, had no duplicate-key conflict occurred. This function
        is especially useful in multiple-row inserts. The
        <a href="functions.html#function_values"><code class="literal">VALUES()</code></a> function is meaningful
        only in <code class="literal">INSERT ... UPDATE</code> statements and
        returns <code class="literal">NULL</code> otherwise. Example:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3),(4,5,6)
  ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b);
</pre><p>
        That statement is identical to the following two statements:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE c=3;
INSERT INTO table (a,b,c) VALUES (4,5,6)
  ON DUPLICATE KEY UPDATE c=9;
</pre><p>
        If a table contains an <code class="literal">AUTO_INCREMENT</code> column
        and <code class="literal">INSERT ... UPDATE</code> inserts a row, the
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function returns
        the <code class="literal">AUTO_INCREMENT</code> value. If the statement
        updates a row instead,
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> is not
        meaningful. However, you can work around this by using
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID(<em class="replaceable"><code>expr</code></em>)</code></a>.
        Suppose that <code class="literal">id</code> is the
        <code class="literal">AUTO_INCREMENT</code> column. To make
        <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> meaningful for
        updates, insert rows as follows:
      </p><pre class="programlisting">INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3;
</pre><p>
        The <code class="literal">DELAYED</code> option is ignored when you use
        <code class="literal">ON DUPLICATE KEY UPDATE</code>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="load-data"></a>12.2.6. <code class="literal">LOAD DATA INFILE</code>
      Syntax</h3></div></div></div><a class="indexterm" name="id2082490"></a><pre class="programlisting">LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE '<em class="replaceable"><code>file_name</code></em>'
    [REPLACE | IGNORE]
    INTO TABLE <em class="replaceable"><code>tbl_name</code></em>
    [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [{FIELDS | COLUMNS}
        [TERMINATED BY '<em class="replaceable"><code>string</code></em>']
        [[OPTIONALLY] ENCLOSED BY '<em class="replaceable"><code>char</code></em>']
        [ESCAPED BY '<em class="replaceable"><code>char</code></em>']
    ]
    [LINES
        [STARTING BY '<em class="replaceable"><code>string</code></em>']
        [TERMINATED BY '<em class="replaceable"><code>string</code></em>']
    ]
    [IGNORE <em class="replaceable"><code>number</code></em> LINES]
    [(<em class="replaceable"><code>col_name_or_user_var</code></em>,...)]
    [SET <em class="replaceable"><code>col_name</code></em> = <em class="replaceable"><code>expr</code></em>,...]
</pre><p>
      The <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> statement reads rows from a text file into a
      table at a very high speed. The file name must be given as a
      literal string.
    </p><p>
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> is the complement of
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a>. (See <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.) To write data
      from a table to a file, use
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a>. To read the file back into a table, use
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a>. The syntax of the <code class="literal">FIELDS</code> and
      <code class="literal">LINES</code> clauses is the same for both statements.
      Both clauses are optional, but <code class="literal">FIELDS</code> must
      precede <code class="literal">LINES</code> if both are specified.
    </p><p>
      For more information about the efficiency of
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> versus
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> and speeding up
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a>, see <a href="optimization.html#insert-speed" title="7.2.19. Speed of INSERT Statements">Section 7.2.19, “Speed of <code class="literal">INSERT</code> Statements”</a>.
    </p><p>
      The character set indicated by the
      <a href="server-administration.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a> system
      variable is used to interpret the information in the file.
      <code class="literal">SET NAMES</code> and the setting of
      <a href="server-administration.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a> do not
      affect interpretation of input. If the contents of the input file
      use a character set that differs from the default, it is usually
      preferable to specify the character set of the file by using the
      <code class="literal">CHARACTER SET</code> clause, which is available as of
      MySQL 5.0.38. A character set of <code class="literal">binary</code>
      specifies “<span class="quote">no conversion.</span>”
    </p><p>
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> interprets all fields in the file as having the
      same character set, regardless of the data types of the columns
      into which field values are loaded. For proper interpretation of
      file contents, you must ensure that it was written with the
      correct character set. For example, if you write a data file with
      <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump -T</strong></span></a> or by issuing a
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a> statement in <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>, be sure
      to use a <code class="option">--default-character-set</code> option with
      <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> or <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> so that
      output is written in the character set to be used when the file is
      loaded with <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a>.
    </p><p>
      Note that it is currently not possible to load data files that use
      the <code class="literal">ucs2</code> character set.
    </p><p>
      As of MySQL 5.0.19, the
      <a href="server-administration.html#sysvar_character_set_filesystem"><code class="literal">character_set_filesystem</code></a> system
      variable controls the interpretation of the file name.
    </p><a class="indexterm" name="id2082800"></a><p>
      You can also load data files by using the
      <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a> utility; it operates by sending a
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> statement to the server. The
      <a href="programs.html#option_mysqlimport_local"><code class="option">--local</code></a> option causes
      <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a> to read data files from the client
      host. You can specify the
      <a href="programs.html#option_mysqlimport_compress"><code class="option">--compress</code></a> option to get
      better performance over slow networks if the client and server
      support the compressed protocol. See
      <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program">Section 4.5.5, “<span><strong class="command">mysqlimport</strong></span> — A Data Import Program”</a>.
    </p><p>
      If you use <code class="literal">LOW_PRIORITY</code>, execution of the
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> statement is delayed
      until no other clients are reading from the table. This affects
      only storage engines that use only table-level locking
      (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
      <code class="literal">MERGE</code>).
    </p><p>
      If you specify <code class="literal">CONCURRENT</code> with a
      <code class="literal">MyISAM</code> table that satisfies the condition for
      concurrent inserts (that is, it contains no free blocks in the
      middle), other threads can retrieve data from the table while
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> is executing. Using this
      option affects the performance of <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD
      DATA</code></a> a bit, even if no other thread is using the table
      at the same time.
    </p><p>
      <code class="literal">CONCURRENT</code> is not replicated. See
      <a href="replication.html#replication-features-load" title="16.3.1.10. Replication and LOAD Operations">Section 16.3.1.10, “Replication and <code class="literal">LOAD</code> Operations”</a>, for more information.
    </p><p>
      The <code class="literal">LOCAL</code> keyword, if specified, is interpreted
      with respect to the client end of the connection:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If <code class="literal">LOCAL</code> is specified, the file is read by
          the client program on the client host and sent to the server.
          The file can be given as a full path name to specify its exact
          location. If given as a relative path name, the name is
          interpreted relative to the directory in which the client
          program was started.
        </p></li><li><p>
          If <code class="literal">LOCAL</code> is not specified, the file must be
          located on the server host and is read directly by the server.
          The server uses the following rules to locate the file:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              If the file name is an absolute path name, the server uses
              it as given.
            </p></li><li><p>
              If the file name is a relative path name with one or more
              leading components, the server searches for the file
              relative to the server's data directory.
            </p></li><li><p>
              If a file name with no leading components is given, the
              server looks for the file in the database directory of the
              default database.
            </p></li></ul></div></li></ul></div><p>
      Note that, in the non-<code class="literal">LOCAL</code> case, these rules
      mean that a file named as <code class="filename">./myfile.txt</code> is
      read from the server's data directory, whereas the file named as
      <code class="filename">myfile.txt</code> is read from the database
      directory of the default database. For example, if
      <code class="literal">db1</code> is the default database, the following
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> statement reads the file
      <code class="filename">data.txt</code> from the database directory for
      <code class="literal">db1</code>, even though the statement explicitly loads
      the file into a table in the <code class="literal">db2</code> database:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE db2.my_table;
</pre><p>
      Windows path names are specified using forward slashes rather than
      backslashes. If you do use backslashes, you must double them.
    </p><p>
      For security reasons, when reading text files located on the
      server, the files must either reside in the database directory or
      be readable by all. Also, to use
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> on server files, you must have the
      <a href="server-administration.html#priv_file"><code class="literal">FILE</code></a> privilege. See
      <a href="server-administration.html#privileges-provided" title="5.4.1. Privileges Provided by MySQL">Section 5.4.1, “Privileges Provided by MySQL”</a>. For
      non-<code class="literal">LOCAL</code> load operations, if the
      <a href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a> system variable
      is set to a nonempty directory name, the file to be loaded must be
      located in that directory.
    </p><p>
      Using <code class="literal">LOCAL</code> is a bit slower than letting the
      server access the files directly, because the contents of the file
      must be sent over the connection by the client to the server. On
      the other hand, you do not need the
      <a href="server-administration.html#priv_file"><code class="literal">FILE</code></a> privilege to load local files.
    </p><p>
      With <code class="literal">LOCAL</code>, the default behavior is the same as
      if <code class="literal">IGNORE</code> is specified; this is because the
      server has no way to stop transmission of the file in the middle
      of the operation. <code class="literal">IGNORE</code> is explained further
      later in this section.
    </p><p>
      <code class="literal">LOCAL</code> works only if your server and your client
      both have been enabled to allow it. For example, if
      <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> was started with
      <a href="server-administration.html#option_mysqld_local-infile"><code class="option">--local-infile=0</code></a>,
      <code class="literal">LOCAL</code> does not work. See
      <a href="server-administration.html#load-data-local" title="5.3.4. Security Issues with LOAD
      DATA LOCAL">Section 5.3.4, “Security Issues with <code class="literal">LOAD
      DATA LOCAL</code>”</a>.
    </p><p>
      On Unix, if you need <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA</code></a> to
      read from a pipe, you can use the following technique (here we
      load the listing of the <code class="filename">/</code> directory into a
      table):
    </p><pre class="programlisting">mkfifo /mysql/db/x/x
chmod 666 /mysql/db/x/x
find / -ls &gt; /mysql/db/x/x &amp;
mysql -e "LOAD DATA INFILE 'x' INTO TABLE x" x
</pre><p>
      Note that you must run the command that generates the data to be
      loaded and the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> commands either on
      separate terminals, or run the data generation process in the
      background (as shown in the preceding example). If you do not do
      this, the pipe will block until data is read by the
      <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> process.
    </p><p>
      The <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> and
      <code class="literal">IGNORE</code> keywords control handling of input rows
      that duplicate existing rows on unique key values:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you specify <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>, input
          rows replace existing rows. In other words, rows that have the
          same value for a primary key or unique index as an existing
          row. See <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax">Section 12.2.7, “<code class="literal">REPLACE</code> Syntax”</a>.
        </p></li><li><p>
          If you specify <code class="literal">IGNORE</code>, input rows that
          duplicate an existing row on a unique key value are skipped.
          If you do not specify either option, the behavior depends on
          whether the <code class="literal">LOCAL</code> keyword is specified.
          Without <code class="literal">LOCAL</code>, an error occurs when a
          duplicate key value is found, and the rest of the text file is
          ignored. With <code class="literal">LOCAL</code>, the default behavior
          is the same as if <code class="literal">IGNORE</code> is specified; this
          is because the server has no way to stop transmission of the
          file in the middle of the operation.
        </p></li></ul></div><p>
      If you want to ignore foreign key constraints during the load
      operation, you can issue a <code class="literal">SET foreign_key_checks =
      0</code> statement before executing <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD
      DATA</code></a>.
    </p><p>
      If you use <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> on an empty <code class="literal">MyISAM</code> table, all
      nonunique indexes are created in a separate batch (as for
      <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>). Normally, this makes
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> much faster when you have many indexes. In some
      extreme cases, you can create the indexes even faster by turning
      them off with <code class="literal">ALTER TABLE ... DISABLE KEYS</code>
      before loading the file into the table and using <code class="literal">ALTER
      TABLE ... ENABLE KEYS</code> to re-create the indexes after
      loading the file. See <a href="optimization.html#insert-speed" title="7.2.19. Speed of INSERT Statements">Section 7.2.19, “Speed of <code class="literal">INSERT</code> Statements”</a>.
    </p><p>
      For both the <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> and
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a> statements, the syntax of the
      <code class="literal">FIELDS</code> and <code class="literal">LINES</code> clauses is
      the same. Both clauses are optional, but <code class="literal">FIELDS</code>
      must precede <code class="literal">LINES</code> if both are specified.
    </p><p>
      If you specify a <code class="literal">FIELDS</code> clause, each of its
      subclauses (<code class="literal">TERMINATED BY</code>,
      <code class="literal">[OPTIONALLY] ENCLOSED BY</code>, and <code class="literal">ESCAPED
      BY</code>) is also optional, except that you must specify at
      least one of them.
    </p><p>
      If you specify no <code class="literal">FIELDS</code> clause, the defaults
      are the same as if you had written this:
    </p><pre class="programlisting">FIELDS TERMINATED BY '\t' ENCLOSED BY '' ESCAPED BY '\\'
</pre><p>
      If you specify no <code class="literal">LINES</code> clause, the defaults
      are the same as if you had written this:
    </p><pre class="programlisting">LINES TERMINATED BY '\n' STARTING BY ''
</pre><p>
      In other words, the defaults cause
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> to act as follows when reading input:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Look for line boundaries at newlines.
        </p></li><li><p>
          Do not skip over any line prefix.
        </p></li><li><p>
          Break lines into fields at tabs.
        </p></li><li><p>
          Do not expect fields to be enclosed within any quoting
          characters.
        </p></li><li><p>
          Interpret occurrences of tab, newline, or
          “<span class="quote"><code class="literal">\</code></span>” preceded by
          “<span class="quote"><code class="literal">\</code></span>” as literal characters that
          are part of field values.
        </p></li></ul></div><p>
      Conversely, the defaults cause
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a> to act as follows when writing output:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Write tabs between fields.
        </p></li><li><p>
          Do not enclose fields within any quoting characters.
        </p></li><li><p>
          Use “<span class="quote"><code class="literal">\</code></span>” to escape instances of
          tab, newline, or “<span class="quote"><code class="literal">\</code></span>” that
          occur within field values.
        </p></li><li><p>
          Write newlines at the ends of lines.
        </p></li></ul></div><p>
      Backslash is the MySQL escape character within strings, so to
      write <code class="literal">FIELDS ESCAPED BY '\\'</code>, you must specify
      two backslashes for the value to be interpreted as a single
      backslash.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you have generated the text file on a Windows system, you
        might have to use <code class="literal">LINES TERMINATED BY '\r\n'</code>
        to read the file properly, because Windows programs typically
        use two characters as a line terminator. Some programs, such as
        <span><strong class="command">WordPad</strong></span>, might use <code class="literal">\r</code> as a
        line terminator when writing files. To read such files, use
        <code class="literal">LINES TERMINATED BY '\r'</code>.
      </p></div><p>
      If all the lines you want to read in have a common prefix that you
      want to ignore, you can use <code class="literal">LINES STARTING BY
      '<em class="replaceable"><code>prefix_string</code></em>'</code> to skip over
      the prefix, <span class="emphasis"><em>and anything before it</em></span>. If a line
      does not include the prefix, the entire line is skipped. Suppose
      that you issue the following statement:
    </p><pre class="programlisting">LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test
  FIELDS TERMINATED BY ','  LINES STARTING BY 'xxx';
</pre><p>
      If the data file looks like this:
    </p><pre class="programlisting">xxx"abc",1
something xxx"def",2
"ghi",3
</pre><p>
      The resulting rows will be <code class="literal">("abc",1)</code> and
      <code class="literal">("def",2)</code>. The third row in the file is skipped
      because it does not contain the prefix.
    </p><p>
      The <code class="literal">IGNORE <em class="replaceable"><code>number</code></em>
      LINES</code> option can be used to ignore lines at the start of
      the file. For example, you can use <code class="literal">IGNORE 1
      LINES</code> to skip over an initial header line containing
      column names:
    </p><pre class="programlisting">LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test IGNORE 1 LINES;
</pre><p>
      When you use <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ...
      INTO OUTFILE</code></a> in tandem with
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> to write data from a database into a file and
      then read the file back into the database later, the field- and
      line-handling options for both statements must match. Otherwise,
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> will not interpret the contents of the file
      properly. Suppose that you use
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a> to write a file with fields delimited by commas:
    </p><pre class="programlisting">SELECT * INTO OUTFILE 'data.txt'
  FIELDS TERMINATED BY ','
  FROM table2;
</pre><p>
      To read the comma-delimited file back in, the correct statement
      would be:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE table2
  FIELDS TERMINATED BY ',';
</pre><p>
      If instead you tried to read in the file with the statement shown
      following, it wouldn't work because it instructs
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> to look for tabs between fields:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE table2
  FIELDS TERMINATED BY '\t';
</pre><p>
      The likely result is that each input line would be interpreted as
      a single field.
    </p><a class="indexterm" name="id2083802"></a><a class="indexterm" name="id2083811"></a><p>
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> can be used to read files obtained from external
      sources. For example, many programs can export data in
      comma-separated values (CSV) format, such that lines have fields
      separated by commas and enclosed within double quotes. If lines in
      such a file are terminated by newlines, the statement shown here
      illustrates the field- and line-handling options you would use to
      load the file:
    </p><pre class="programlisting">LOAD DATA INFILE 'data.txt' INTO TABLE <em class="replaceable"><code>tbl_name</code></em>
  FIELDS TERMINATED BY ',' ENCLOSED BY '"'
  LINES TERMINATED BY '\n';
</pre><p>
      If the input values are not necessarily enclosed within quotes,
      use <code class="literal">OPTIONALLY</code> before the <code class="literal">ENCLOSED
      BY</code> keywords.
    </p><p>
      Any of the field- or line-handling options can specify an empty
      string (<code class="literal">''</code>). If not empty, the <code class="literal">FIELDS
      [OPTIONALLY] ENCLOSED BY</code> and <code class="literal">FIELDS ESCAPED
      BY</code> values must be a single character. The
      <code class="literal">FIELDS TERMINATED BY</code>, <code class="literal">LINES STARTING
      BY</code>, and <code class="literal">LINES TERMINATED BY</code> values
      can be more than one character. For example, to write lines that
      are terminated by carriage return/linefeed pairs, or to read a
      file containing such lines, specify a <code class="literal">LINES TERMINATED BY
      '\r\n'</code> clause.
    </p><p>
      To read a file containing jokes that are separated by lines
      consisting of <code class="literal">%%</code>, you can do this
    </p><pre class="programlisting">CREATE TABLE jokes
  (a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  joke TEXT NOT NULL);
LOAD DATA INFILE '/tmp/jokes.txt' INTO TABLE jokes
  FIELDS TERMINATED BY ''
  LINES TERMINATED BY '\n%%\n' (joke);
</pre><p>
      <code class="literal">FIELDS [OPTIONALLY] ENCLOSED BY</code> controls
      quoting of fields. For output
      (<a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
      OUTFILE</code></a>), if you omit the word
      <code class="literal">OPTIONALLY</code>, all fields are enclosed by the
      <code class="literal">ENCLOSED BY</code> character. An example of such
      output (using a comma as the field delimiter) is shown here:
    </p><pre class="programlisting">"1","a string","100.20"
"2","a string containing a , comma","102.20"
"3","a string containing a \" quote","102.20"
"4","a string containing a \", quote and comma","102.20"
</pre><p>
      If you specify <code class="literal">OPTIONALLY</code>, the
      <code class="literal">ENCLOSED BY</code> character is used only to enclose
      values from columns that have a string data type (such as
      <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>,
      <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">BINARY</code></a>,
      <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a>, or
      <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a>):
    </p><pre class="programlisting">1,"a string",100.20
2,"a string containing a , comma",102.20
3,"a string containing a \" quote",102.20
4,"a string containing a \", quote and comma",102.20
</pre><p>
      Note that occurrences of the <code class="literal">ENCLOSED BY</code>
      character within a field value are escaped by prefixing them with
      the <code class="literal">ESCAPED BY</code> character. Also note that if you
      specify an empty <code class="literal">ESCAPED BY</code> value, it is
      possible to inadvertently generate output that cannot be read
      properly by <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a>. For example, the preceding output just shown
      would appear as follows if the escape character is empty. Observe
      that the second field in the fourth line contains a comma
      following the quote, which (erroneously) appears to terminate the
      field:
    </p><pre class="programlisting">1,"a string",100.20
2,"a string containing a , comma",102.20
3,"a string containing a " quote",102.20
4,"a string containing a ", quote and comma",102.20
</pre><p>
      For input, the <code class="literal">ENCLOSED BY</code> character, if
      present, is stripped from the ends of field values. (This is true
      regardless of whether <code class="literal">OPTIONALLY</code> is specified;
      <code class="literal">OPTIONALLY</code> has no effect on input
      interpretation.) Occurrences of the <code class="literal">ENCLOSED BY</code>
      character preceded by the <code class="literal">ESCAPED BY</code> character
      are interpreted as part of the current field value.
    </p><p>
      If the field begins with the <code class="literal">ENCLOSED BY</code>
      character, instances of that character are recognized as
      terminating a field value only if followed by the field or line
      <code class="literal">TERMINATED BY</code> sequence. To avoid ambiguity,
      occurrences of the <code class="literal">ENCLOSED BY</code> character within
      a field value can be doubled and are interpreted as a single
      instance of the character. For example, if <code class="literal">ENCLOSED BY
      '"'</code> is specified, quotes are handled as shown here:
    </p><pre class="programlisting">"The ""BIG"" boss"  -&gt; The "BIG" boss
The "BIG" boss      -&gt; The "BIG" boss
The ""BIG"" boss    -&gt; The ""BIG"" boss
</pre><p>
      <code class="literal">FIELDS ESCAPED BY</code> controls how to write or read
      special characters. If the <code class="literal">FIELDS ESCAPED BY</code>
      character is not empty, it is used to prefix the following
      characters on output:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          The <code class="literal">FIELDS ESCAPED BY</code> character
        </p></li><li><p>
          The <code class="literal">FIELDS [OPTIONALLY] ENCLOSED BY</code>
          character
        </p></li><li><p>
          The first character of the <code class="literal">FIELDS TERMINATED
          BY</code> and <code class="literal">LINES TERMINATED BY</code> values
        </p></li><li><p>
          ASCII <code class="literal">0</code> (what is actually written following
          the escape character is ASCII
          “<span class="quote"><code class="literal">0</code></span>”, not a zero-valued byte)
        </p></li></ul></div><p>
      If the <code class="literal">FIELDS ESCAPED BY</code> character is empty, no
      characters are escaped and <code class="literal">NULL</code> is output as
      <code class="literal">NULL</code>, not <code class="literal">\N</code>. It is probably
      not a good idea to specify an empty escape character, particularly
      if field values in your data contain any of the characters in the
      list just given.
    </p><p>
      For input, if the <code class="literal">FIELDS ESCAPED BY</code> character
      is not empty, occurrences of that character are stripped and the
      following character is taken literally as part of a field value.
      Some two-character sequences that are exceptions, where the first
      character is the escape character. These sequences are shown in
      the following table (using “<span class="quote"><code class="literal">\</code></span>” for
      the escape character). The rules for <code class="literal">NULL</code>
      handling are described later in this section.
    </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><code class="literal">\0</code>

              <a class="indexterm" name="id2084289"></a>

              <a class="indexterm" name="id2084298"></a></td><td>An ASCII NUL (<code class="literal">0x00</code>) character</td></tr><tr><td><code class="literal">\b</code>

              <a class="indexterm" name="id2084325"></a>

              <a class="indexterm" name="id2084334"></a></td><td>A backspace character</td></tr><tr><td><code class="literal">\n</code>

              <a class="indexterm" name="id2084356"></a>

              <a class="indexterm" name="id2084365"></a>

              <a class="indexterm" name="id2084374"></a>

              <a class="indexterm" name="id2084383"></a></td><td>A newline (linefeed) character</td></tr><tr><td><code class="literal">\r</code>

              <a class="indexterm" name="id2084406"></a>

              <a class="indexterm" name="id2084414"></a>

              <a class="indexterm" name="id2084423"></a></td><td>A carriage return character</td></tr><tr><td><code class="literal">\t</code>

              <a class="indexterm" name="id2084446"></a>

              <a class="indexterm" name="id2084455"></a></td><td>A tab character.</td></tr><tr><td><code class="literal">\Z</code>

              <a class="indexterm" name="id2084477"></a>

              <a class="indexterm" name="id2084486"></a></td><td>ASCII 26 (Control-Z)</td></tr><tr><td><code class="literal">\N</code>

              <a class="indexterm" name="id2084508"></a></td><td>NULL</td></tr></tbody></table></div><p>
      For more information about
      “<span class="quote"><code class="literal">\</code></span>”-escape syntax, see
      <a href="language-structure.html#literals" title="8.1. Literal Values">Section 8.1, “Literal Values”</a>.
    </p><p>
      In certain cases, field- and line-handling options interact:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If <code class="literal">LINES TERMINATED BY</code> is an empty string
          and <code class="literal">FIELDS TERMINATED BY</code> is nonempty, lines
          are also terminated with <code class="literal">FIELDS TERMINATED
          BY</code>.
        </p></li><li><p>
          If the <code class="literal">FIELDS TERMINATED BY</code> and
          <code class="literal">FIELDS ENCLOSED BY</code> values are both empty
          (<code class="literal">''</code>), a fixed-row (nondelimited) format is
          used. With fixed-row format, no delimiters are used between
          fields (but you can still have a line terminator). Instead,
          column values are read and written using a field width wide
          enough to hold all values in the field. For
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">TINYINT</code></a>,
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">SMALLINT</code></a>,
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">MEDIUMINT</code></a>,
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">INT</code></a>, and
          <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIGINT</code></a>, the field widths are 4,
          6, 8, 11, and 20, respectively, no matter what the declared
          display width is.
        </p><p>
          <code class="literal">LINES TERMINATED BY</code> is still used to
          separate lines. If a line does not contain all fields, the
          rest of the columns are set to their default values. If you do
          not have a line terminator, you should set this to
          <code class="literal">''</code>. In this case, the text file must
          contain all fields for each row.
        </p><p>
          Fixed-row format also affects handling of
          <code class="literal">NULL</code> values, as described later. Note that
          fixed-size format does not work if you are using a multi-byte
          character set.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Before MySQL 5.0.6, fixed-row format used the display width
            of the column. For example, <code class="literal">INT(4)</code> was
            read or written using a field with a width of 4. However, if
            the column contained wider values, they were dumped to their
            full width, leading to the possibility of a
            “<span class="quote">ragged</span>” field holding values of different
            widths. Using a field wide enough to hold all values in the
            field prevents this problem. However, data files written
            before this change was made might not be reloaded correctly
            with <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
            INFILE</code></a> for MySQL 5.0.6 and up. This change also
            affects data files read by <a href="programs.html#mysqlimport" title="4.5.5. mysqlimport — A Data Import Program"><span><strong class="command">mysqlimport</strong></span></a>
            and written by <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump --tab</strong></span></a>, which use
            <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
            INFILE</code></a> and
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
            OUTFILE</code></a>.
          </p></div></li></ul></div><p>
      Handling of <code class="literal">NULL</code> values varies according to the
      <code class="literal">FIELDS</code> and <code class="literal">LINES</code> options in
      use:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For the default <code class="literal">FIELDS</code> and
          <code class="literal">LINES</code> values, <code class="literal">NULL</code> is
          written as a field value of <code class="literal">\N</code> for output,
          and a field value of <code class="literal">\N</code> is read as
          <code class="literal">NULL</code> for input (assuming that the
          <code class="literal">ESCAPED BY</code> character is
          “<span class="quote"><code class="literal">\</code></span>”).
        </p></li><li><p>
          If <code class="literal">FIELDS ENCLOSED BY</code> is not empty, a field
          containing the literal word <code class="literal">NULL</code> as its
          value is read as a <code class="literal">NULL</code> value. This differs
          from the word <code class="literal">NULL</code> enclosed within
          <code class="literal">FIELDS ENCLOSED BY</code> characters, which is
          read as the string <code class="literal">'NULL'</code>.
        </p></li><li><p>
          If <code class="literal">FIELDS ESCAPED BY</code> is empty,
          <code class="literal">NULL</code> is written as the word
          <code class="literal">NULL</code>.
        </p></li><li><p>
          With fixed-row format (which is used when <code class="literal">FIELDS
          TERMINATED BY</code> and <code class="literal">FIELDS ENCLOSED
          BY</code> are both empty), <code class="literal">NULL</code> is
          written as an empty string. Note that this causes both
          <code class="literal">NULL</code> values and empty strings in the table
          to be indistinguishable when written to the file because both
          are written as empty strings. If you need to be able to tell
          the two apart when reading the file back in, you should not
          use fixed-row format.
        </p></li></ul></div><p>
      An attempt to load <code class="literal">NULL</code> into a <code class="literal">NOT
      NULL</code> column causes assignment of the implicit default
      value for the column's data type and a warning, or an error in
      strict SQL mode. Implicit default values are discussed in
      <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
    </p><p>
      Some cases are not supported by
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a>:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Fixed-size rows (<code class="literal">FIELDS TERMINATED BY</code> and
          <code class="literal">FIELDS ENCLOSED BY</code> both empty) and
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> or
          <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns.
        </p></li><li><p>
          If you specify one separator that is the same as or a prefix
          of another, <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD
          DATA INFILE</code></a> cannot interpret the input properly. For
          example, the following <code class="literal">FIELDS</code> clause would
          cause problems:
        </p><pre class="programlisting">FIELDS TERMINATED BY '"' ENCLOSED BY '"'
</pre></li><li><p>
          If <code class="literal">FIELDS ESCAPED BY</code> is empty, a field
          value that contains an occurrence of <code class="literal">FIELDS ENCLOSED
          BY</code> or <code class="literal">LINES TERMINATED BY</code>
          followed by the <code class="literal">FIELDS TERMINATED BY</code> value
          causes <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
          INFILE</code></a> to stop reading a field or line too early.
          This happens because
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
          INFILE</code></a> cannot properly determine where the field or
          line value ends.
        </p></li></ul></div><p>
      The following example loads all columns of the
      <code class="literal">persondata</code> table:
    </p><pre class="programlisting">LOAD DATA INFILE 'persondata.txt' INTO TABLE persondata;
</pre><p>
      By default, when no column list is provided at the end of the
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> statement, input lines are expected to contain a
      field for each table column. If you want to load only some of a
      table's columns, specify a column list:
    </p><pre class="programlisting">LOAD DATA INFILE 'persondata.txt' INTO TABLE persondata (col1,col2,...);
</pre><p>
      You must also specify a column list if the order of the fields in
      the input file differs from the order of the columns in the table.
      Otherwise, MySQL cannot tell how to match input fields with table
      columns.
    </p><p>
      Before MySQL 5.0.3, the column list must contain only names of
      columns in the table being loaded, and the <code class="literal">SET</code>
      clause is not supported. As of MySQL 5.0.3, the column list can
      contain either column names or user variables. With user
      variables, the <code class="literal">SET</code> clause enables you to
      perform transformations on their values before assigning the
      result to columns.
    </p><p>
      User variables in the <code class="literal">SET</code> clause can be used in
      several ways. The following example uses the first input column
      directly for the value of <code class="literal">t1.column1</code>, and
      assigns the second input column to a user variable that is
      subjected to a division operation before being used for the value
      of <code class="literal">t1.column2</code>:
    </p><pre class="programlisting">LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, @var1)
  SET column2 = @var1/100;
</pre><p>
      The <code class="literal">SET</code> clause can be used to supply values not
      derived from the input file. The following statement sets
      <code class="literal">column3</code> to the current date and time:
    </p><pre class="programlisting">LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, column2)
  SET column3 = CURRENT_TIMESTAMP;
</pre><p>
      You can also discard an input value by assigning it to a user
      variable and not assigning the variable to a table column:
    </p><pre class="programlisting">LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, @dummy, column2, @dummy, column3);
</pre><p>
      Use of the column/variable list and <code class="literal">SET</code> clause
      is subject to the following restrictions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Assignments in the <code class="literal">SET</code> clause should have
          only column names on the left hand side of assignment
          operators.
        </p></li><li><p>
          You can use subqueries in the right hand side of
          <code class="literal">SET</code> assignments. A subquery that returns a
          value to be assigned to a column may be a scalar subquery
          only. Also, you cannot use a subquery to select from the table
          that is being loaded.
        </p></li><li><p>
          Lines ignored by an <code class="literal">IGNORE</code> clause are not
          processed for the column/variable list or
          <code class="literal">SET</code> clause.
        </p></li><li><p>
          User variables cannot be used when loading data with fixed-row
          format because user variables do not have a display width.
        </p></li></ul></div><p>
      When processing an input line, <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD
      DATA</code></a> splits it into fields and uses the values according
      to the column/variable list and the <code class="literal">SET</code> clause,
      if they are present. Then the resulting row is inserted into the
      table. If there are <code class="literal">BEFORE INSERT</code> or
      <code class="literal">AFTER INSERT</code> triggers for the table, they are
      activated before or after inserting the row, respectively.
    </p><p>
      If an input line has too many fields, the extra fields are ignored
      and the number of warnings is incremented.
    </p><p>
      If an input line has too few fields, the table columns for which
      input fields are missing are set to their default values. Default
      value assignment is described in
      <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
    </p><p>
      An empty field value is interpreted differently than if the field
      value is missing:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          For string types, the column is set to the empty string.
        </p></li><li><p>
          For numeric types, the column is set to <code class="literal">0</code>.
        </p></li><li><p>
          For date and time types, the column is set to the appropriate
          “<span class="quote">zero</span>” value for the type. See
          <a href="data-types.html#date-and-time-types" title="10.3. Date and Time Types">Section 10.3, “Date and Time Types”</a>.
        </p></li></ul></div><p>
      These are the same values that result if you assign an empty
      string explicitly to a string, numeric, or date or time type
      explicitly in an <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> or
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement.
    </p><p>
      <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> columns are set to the
      current date and time only if there is a <code class="literal">NULL</code>
      value for the column (that is, <code class="literal">\N</code>) and the
      column is not declared to allow <code class="literal">NULL</code> values, or
      if the <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> column's default
      value is the current timestamp and it is omitted from the field
      list when a field list is specified.
    </p><p>
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> regards all input as strings, so you cannot use
      numeric values for <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> or
      <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> columns the way you can with
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements. All
      <a href="data-types.html#enum" title="10.4.4. The ENUM Type"><code class="literal">ENUM</code></a> and
      <a href="data-types.html#set" title="10.4.5. The SET Type"><code class="literal">SET</code></a> values must be specified as
      strings.
    </p><p>
      <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> values cannot be loaded using
      binary notation (for example, <code class="literal">b'011010'</code>). To
      work around this, specify the values as regular integers and use
      the <code class="literal">SET</code> clause to convert them so that MySQL
      performs a numeric type conversion and loads them into the
      <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">BIT</code></a> column properly:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cat /tmp/bit_test.txt</code></strong>
2
127
shell&gt; <strong class="userinput"><code>mysql test</code></strong>
mysql&gt; <strong class="userinput"><code>LOAD DATA INFILE '/tmp/bit_test.txt'</code></strong>
    -&gt; <strong class="userinput"><code>INTO TABLE bit_test (@var1) SET b= CAST(@var1 AS UNSIGNED);</code></strong>
Query OK, 2 rows affected (0.00 sec)
Records: 2  Deleted: 0  Skipped: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT BIN(b+0) FROM bit_test;</code></strong>
+----------+
| bin(b+0) |
+----------+
| 10       |
| 1111111  |
+----------+
2 rows in set (0.00 sec)
</pre><p>
      When the <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> statement finishes, it returns an information
      string in the following format:
    </p><pre class="programlisting">Records: 1  Deleted: 0  Skipped: 0  Warnings: 0
</pre><a class="indexterm" name="id2085511"></a><p>
      If you are using the C API, you can get information about the
      statement by calling the
      <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> function. See
      <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()">Section 20.9.3.35, “<code class="literal">mysql_info()</code>”</a>.
    </p><p>
      Warnings occur under the same circumstances as when values are
      inserted via the <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statement
      (see <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax">Section 12.2.5, “<code class="literal">INSERT</code> Syntax”</a>), except that
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a> also generates warnings when there are too few or
      too many fields in the input row. The warnings are not stored
      anywhere; the number of warnings can be used only as an indication
      of whether everything went well.
    </p><p>
      You can use <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a> to get a
      list of the first <a href="server-administration.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a>
      warnings as information about what went wrong. See
      <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="replace"></a>12.2.7. <code class="literal">REPLACE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2085595"></a><pre class="programlisting">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    {VALUES | VALUE} ({<em class="replaceable"><code>expr</code></em> | DEFAULT},...),(...),...
</pre><p>
      Or:
    </p><pre class="programlisting">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] <em class="replaceable"><code>tbl_name</code></em>
    SET <em class="replaceable"><code>col_name</code></em>={<em class="replaceable"><code>expr</code></em> | DEFAULT}, ...
</pre><p>
      Or:
    </p><pre class="programlisting">REPLACE [LOW_PRIORITY | DELAYED]
    [INTO] <em class="replaceable"><code>tbl_name</code></em> [(<em class="replaceable"><code>col_name</code></em>,...)]
    SELECT ...
</pre><p>
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> works exactly like
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, except that if an old row
      in the table has the same value as a new row for a
      <code class="literal">PRIMARY KEY</code> or a <code class="literal">UNIQUE</code>
      index, the old row is deleted before the new row is inserted. See
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax">Section 12.2.5, “<code class="literal">INSERT</code> Syntax”</a>.
    </p><p>
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> is a MySQL extension to the
      SQL standard. It either inserts, or <span class="emphasis"><em>deletes</em></span>
      and inserts. For another MySQL extension to standard SQL —
      that either inserts or <span class="emphasis"><em>updates</em></span> — see
      <a href="sql-syntax.html#insert-on-duplicate" title="12.2.5.3. INSERT ... ON
        DUPLICATE KEY UPDATE Syntax">Section 12.2.5.3, “<code class="literal">INSERT ... ON
        DUPLICATE KEY UPDATE</code> Syntax”</a>.
    </p><p>
      Note that unless the table has a <code class="literal">PRIMARY KEY</code> or
      <code class="literal">UNIQUE</code> index, using a
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> statement makes no sense.
      It becomes equivalent to <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
      because there is no index to be used to determine whether a new
      row duplicates another.
    </p><p>
      Values for all columns are taken from the values specified in the
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> statement. Any missing
      columns are set to their default values, just as happens for
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>. You cannot refer to values
      from the current row and use them in the new row. If you use an
      assignment such as <code class="literal">SET
      <em class="replaceable"><code>col_name</code></em> =
      <em class="replaceable"><code>col_name</code></em> + 1</code>, the reference
      to the column name on the right hand side is treated as
      <a href="functions.html#function_default"><code class="literal">DEFAULT(<em class="replaceable"><code>col_name</code></em>)</code></a>,
      so the assignment is equivalent to <code class="literal">SET
      <em class="replaceable"><code>col_name</code></em> =
      DEFAULT(<em class="replaceable"><code>col_name</code></em>) + 1</code>.
    </p><p>
      To use <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>, you must have both
      the <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> and
      <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a> privileges for the table.
    </p><p>
      The <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> statement returns a
      count to indicate the number of rows affected. This is the sum of
      the rows deleted and inserted. If the count is 1 for a single-row
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>, a row was inserted and no
      rows were deleted. If the count is greater than 1, one or more old
      rows were deleted before the new row was inserted. It is possible
      for a single row to replace more than one old row if the table
      contains multiple unique indexes and the new row duplicates values
      for different old rows in different unique indexes.
    </p><p>
      The affected-rows count makes it easy to determine whether
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> only added a row or whether
      it also replaced any rows: Check whether the count is 1 (added) or
      greater (replaced).
    </p><p>
      If you are using the C API, the affected-rows count can be
      obtained using the
      <a href="connectors-apis.html#mysql-affected-rows" title="20.9.3.1. mysql_affected_rows()"><code class="literal">mysql_affected_rows()</code></a> function.
    </p><p>
      Currently, you cannot replace into a table and select from the
      same table in a subquery.
    </p><p>
      MySQL uses the following algorithm for
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a> (and <code class="literal">LOAD DATA ...
      REPLACE</code>):
    </p><div class="orderedlist"><ol type="1"><li><p>
          Try to insert the new row into the table
        </p></li><li><p>
          While the insertion fails because a duplicate-key error occurs
          for a primary key or unique index:
        </p><div class="orderedlist"><ol type="a"><li><p>
              Delete from the table the conflicting row that has the
              duplicate key value
            </p></li><li><p>
              Try again to insert the new row into the table
            </p></li></ol></div></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="select"></a>12.2.8. <code class="literal">SELECT</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#join">12.2.8.1. <code class="literal">JOIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#index-hints">12.2.8.2. Index Hint Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#union">12.2.8.3. <code class="literal">UNION</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2085985"></a><pre class="programlisting">SELECT
    [ALL | DISTINCT | DISTINCTROW ]
      [HIGH_PRIORITY]
      [STRAIGHT_JOIN]
      [SQL_SMALL_RESULT] [SQL_BIG_RESULT] [SQL_BUFFER_RESULT]
      [SQL_CACHE | SQL_NO_CACHE] [SQL_CALC_FOUND_ROWS]
    <em class="replaceable"><code>select_expr</code></em> [, <em class="replaceable"><code>select_expr</code></em> ...]
    [FROM <em class="replaceable"><code>table_references</code></em>
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
    [GROUP BY {<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>expr</code></em> | <em class="replaceable"><code>position</code></em>}
      [ASC | DESC], ... [WITH ROLLUP]]
    [HAVING <em class="replaceable"><code>where_condition</code></em>]
    [ORDER BY {<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>expr</code></em> | <em class="replaceable"><code>position</code></em>}
      [ASC | DESC], ...]
    [LIMIT {[<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em> | <em class="replaceable"><code>row_count</code></em> OFFSET <em class="replaceable"><code>offset</code></em>}]
    [PROCEDURE <em class="replaceable"><code>procedure_name</code></em>(<em class="replaceable"><code>argument_list</code></em>)]
    [INTO OUTFILE '<em class="replaceable"><code>file_name</code></em>' <em class="replaceable"><code>export_options</code></em>
      | INTO DUMPFILE '<em class="replaceable"><code>file_name</code></em>'
      | INTO <em class="replaceable"><code>var_name</code></em> [, <em class="replaceable"><code>var_name</code></em>]]
    [FOR UPDATE | LOCK IN SHARE MODE]]
</pre><p>
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> is used to retrieve rows
      selected from one or more tables, and can include
      <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> statements and subqueries.
      See <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax">Section 12.2.8.3, “<code class="literal">UNION</code> Syntax”</a>, and <a href="sql-syntax.html#subqueries" title="12.2.9. Subquery Syntax">Section 12.2.9, “Subquery Syntax”</a>.
    </p><p>
      The most commonly used clauses of
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements are these:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Each <em class="replaceable"><code>select_expr</code></em> indicates a column
          that you want to retrieve. There must be at least one
          <em class="replaceable"><code>select_expr</code></em>.
        </p></li><li><p>
          <em class="replaceable"><code>table_references</code></em> indicates the
          table or tables from which to retrieve rows. Its syntax is
          described in <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>.
        </p></li><li><p>
          The <code class="literal">WHERE</code> clause, if given, indicates the
          condition or conditions that rows must satisfy to be selected.
          <em class="replaceable"><code>where_condition</code></em> is an expression
          that evaluates to true for each row to be selected. The
          statement selects all rows if there is no
          <code class="literal">WHERE</code> clause.
        </p><p>
          In the <code class="literal">WHERE</code> clause, you can use any of the
          functions and operators that MySQL supports, except for
          aggregate (summary) functions. See
          <a href="functions.html" title="Chapter 11. Functions and Operators">Chapter 11, <i>Functions and Operators</i></a>.
        </p></li></ul></div><p>
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> can also be used to retrieve
      rows computed without reference to any table.
    </p><p>
      For example:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 + 1;</code></strong>
        -&gt; 2
</pre><p>
      <a class="indexterm" name="id2086271"></a>

      You are allowed to specify <code class="literal">DUAL</code> as a dummy
      table name in situations where no tables are referenced:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT 1 + 1 FROM DUAL;</code></strong>
        -&gt; 2
</pre><p>
      <code class="literal">DUAL</code> is purely for the convenience of people
      who require that all <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
      statements should have <code class="literal">FROM</code> and possibly other
      clauses. MySQL may ignore the clauses. MySQL does not require
      <code class="literal">FROM DUAL</code> if no tables are referenced.
    </p><p>
      In general, clauses used must be given in exactly the order shown
      in the syntax description. For example, a
      <code class="literal">HAVING</code> clause must come after any
      <code class="literal">GROUP BY</code> clause and before any <code class="literal">ORDER
      BY</code> clause. The exception is that the
      <code class="literal">INTO</code> clause can appear either as shown in the
      syntax description or immediately following the
      <em class="replaceable"><code>select_expr</code></em> list.
    </p><p>
      The list of <em class="replaceable"><code>select_expr</code></em> terms comprises
      the select list that indicates which columns to retrieve. Terms
      specify a column or expression or can use
      <code class="literal">*</code>-shorthand:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A select list consisting only of a single unqualified
          <code class="literal">*</code> can be used as shorthand to select all
          columns from all tables:
        </p><pre class="programlisting">SELECT * FROM t1 INNER JOIN t2 ...
</pre></li><li><p>
          <code class="literal"><em class="replaceable"><code>tbl_name</code></em>.*</code> can
          be used as a qualified shorthand to select all columns from
          the named table:
        </p><pre class="programlisting">SELECT t1.*, t2.* FROM t1 INNER JOIN t2 ...
</pre></li><li><p>
          Use of an unqualified <code class="literal">*</code> with other items in
          the select list may produce a parse error. To avoid this
          problem, use a qualified
          <code class="literal"><em class="replaceable"><code>tbl_name</code></em>.*</code>
          reference
        </p><pre class="programlisting">SELECT AVG(score), t1.* FROM t1 ...
</pre></li></ul></div><p>
      The following list provides additional information about other
      <code class="literal">SELECT</code> clauses:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2086468"></a>

          <a class="indexterm" name="id2086481"></a>

          A <em class="replaceable"><code>select_expr</code></em> can be given an alias
          using <code class="literal">AS
          <em class="replaceable"><code>alias_name</code></em></code>. The alias is
          used as the expression's column name and can be used in
          <code class="literal">GROUP BY</code>, <code class="literal">ORDER BY</code>, or
          <code class="literal">HAVING</code> clauses. For example:
        </p><pre class="programlisting">SELECT CONCAT(last_name,', ',first_name) AS full_name
  FROM mytable ORDER BY full_name;
</pre><p>
          The <code class="literal">AS</code> keyword is optional when aliasing a
          <em class="replaceable"><code>select_expr</code></em>. The preceding example
          could have been written like this:
        </p><pre class="programlisting">SELECT CONCAT(last_name,', ',first_name) full_name
  FROM mytable ORDER BY full_name;
</pre><p>
          However, because the <code class="literal">AS</code> is optional, a
          subtle problem can occur if you forget the comma between two
          <em class="replaceable"><code>select_expr</code></em> expressions: MySQL
          interprets the second as an alias name. For example, in the
          following statement, <code class="literal">columnb</code> is treated as
          an alias name:
        </p><pre class="programlisting">SELECT columna columnb FROM mytable;
</pre><p>
          For this reason, it is good practice to be in the habit of
          using <code class="literal">AS</code> explicitly when specifying column
          aliases.
        </p><p>
          It is not allowable to refer to a column alias in a
          <code class="literal">WHERE</code> clause, because the column value
          might not yet be determined when the <code class="literal">WHERE</code>
          clause is executed. See <a href="error-handling.html#problems-with-alias" title="B.1.5.4. Problems with Column Aliases">Section B.1.5.4, “Problems with Column Aliases”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2086612"></a>

          <a class="indexterm" name="id2086621"></a>

          The <code class="literal">FROM
          <em class="replaceable"><code>table_references</code></em></code> clause
          indicates the table or tables from which to retrieve rows. If
          you name more than one table, you are performing a join. For
          information on join syntax, see <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>. For
          each table specified, you can optionally specify an alias.
        </p><pre class="programlisting"><em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] [<em class="replaceable"><code>index_hint</code></em>]
</pre><a class="indexterm" name="id2086661"></a><a class="indexterm" name="id2086670"></a><p>
          The use of index hints provides the optimizer with information
          about how to choose indexes during query processing. For a
          description of the syntax for specifying these hints, see
          <a href="sql-syntax.html#index-hints" title="12.2.8.2. Index Hint Syntax">Section 12.2.8.2, “Index Hint Syntax”</a>.
        </p><p>
          You can use <code class="literal">SET
          max_seeks_for_key=<em class="replaceable"><code>value</code></em></code>
          as an alternative way to force MySQL to prefer key scans
          instead of table scans. See
          <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>.
        </p></li><li><p>
          You can refer to a table within the default database as
          <em class="replaceable"><code>tbl_name</code></em>, or as
          <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>
          to specify a database explicitly. You can refer to a column as
          <em class="replaceable"><code>col_name</code></em>,
          <em class="replaceable"><code>tbl_name</code></em>.<em class="replaceable"><code>col_name</code></em>,
          or
          <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>.<em class="replaceable"><code>col_name</code></em>.
          You need not specify a <em class="replaceable"><code>tbl_name</code></em> or
          <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>
          prefix for a column reference unless the reference would be
          ambiguous. See <a href="language-structure.html#identifier-qualifiers" title="8.2.1. Identifier Qualifiers">Section 8.2.1, “Identifier Qualifiers”</a>, for
          examples of ambiguity that require the more explicit column
          reference forms.
        </p></li><li><p>
          <a class="indexterm" name="id2086773"></a>

          <a class="indexterm" name="id2086785"></a>

          A table reference can be aliased using
          <code class="literal"><em class="replaceable"><code>tbl_name</code></em> AS
          <em class="replaceable"><code>alias_name</code></em></code> or
          <em class="replaceable"><code>tbl_name alias_name</code></em>:
        </p><pre class="programlisting">SELECT t1.name, t2.salary FROM employee AS t1, info AS t2
  WHERE t1.name = t2.name;

SELECT t1.name, t2.salary FROM employee t1, info t2
  WHERE t1.name = t2.name;
</pre></li><li><p>
          <a class="indexterm" name="id2086822"></a>

          Columns selected for output can be referred to in
          <code class="literal">ORDER BY</code> and <code class="literal">GROUP BY</code>
          clauses using column names, column aliases, or column
          positions. Column positions are integers and begin with 1:
        </p><pre class="programlisting">SELECT college, region, seed FROM tournament
  ORDER BY region, seed;

SELECT college, region AS r, seed AS s FROM tournament
  ORDER BY r, s;

SELECT college, region, seed FROM tournament
  ORDER BY 2, 3;
</pre><p>
          To sort in reverse order, add the <code class="literal">DESC</code>
          (descending) keyword to the name of the column in the
          <code class="literal">ORDER BY</code> clause that you are sorting by.
          The default is ascending order; this can be specified
          explicitly using the <code class="literal">ASC</code> keyword.
        </p><p>
          If <code class="literal">ORDER BY</code> occurs within a subquery and
          also is applied in the outer query, the outermost
          <code class="literal">ORDER BY</code> takes precedence. For example,
          results for the following statement are sorted in descending
          order, not ascending order:
        </p><pre class="programlisting">(SELECT ... ORDER BY a) ORDER BY a DESC;
</pre><p>
          Use of column positions is deprecated because the syntax has
          been removed from the SQL standard.
        </p></li><li><p>
          <a class="indexterm" name="id2086910"></a>

          <a class="indexterm" name="id2086922"></a>

          If you use <code class="literal">GROUP BY</code>, output rows are sorted
          according to the <code class="literal">GROUP BY</code> columns as if you
          had an <code class="literal">ORDER BY</code> for the same columns. To
          avoid the overhead of sorting that <code class="literal">GROUP BY</code>
          produces, add <code class="literal">ORDER BY NULL</code>:
        </p><pre class="programlisting">SELECT a, COUNT(b) FROM test_table GROUP BY a ORDER BY NULL;
</pre></li><li><p>
          <a class="indexterm" name="id2086978"></a>

          MySQL extends the <code class="literal">GROUP BY</code> clause so that
          you can also specify <code class="literal">ASC</code> and
          <code class="literal">DESC</code> after columns named in the clause:
        </p><pre class="programlisting">SELECT a, COUNT(b) FROM test_table GROUP BY a DESC;
</pre></li><li><p>
          MySQL extends the use of <code class="literal">GROUP BY</code> to allow
          selecting fields that are not mentioned in the <code class="literal">GROUP
          BY</code> clause. If you are not getting the results that
          you expect from your query, please read the description of
          <code class="literal">GROUP BY</code> found in
          <a href="functions.html#group-by-functions-and-modifiers" title="11.11. Functions and Modifiers for Use with GROUP BY Clauses">Section 11.11, “Functions and Modifiers for Use with <code class="literal">GROUP BY</code> Clauses”</a>.
        </p></li><li><p>
          <code class="literal">GROUP BY</code> allows a <code class="literal">WITH
          ROLLUP</code> modifier. See
          <a href="functions.html#group-by-modifiers" title="11.11.2. GROUP BY Modifiers">Section 11.11.2, “<code class="literal">GROUP BY</code> Modifiers”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2087076"></a>

          The <code class="literal">HAVING</code> clause is applied nearly last,
          just before items are sent to the client, with no
          optimization. (<code class="literal">LIMIT</code> is applied after
          <code class="literal">HAVING</code>.)
        </p><p>
          A <code class="literal">HAVING</code> clause can refer to any column or
          alias named in a <em class="replaceable"><code>select_expr</code></em> in the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> list or in outer
          subqueries, and to aggregate functions. However, the SQL
          standard requires that <code class="literal">HAVING</code> must
          reference only columns in the <code class="literal">GROUP BY</code>
          clause or columns used in aggregate functions. To accommodate
          both standard SQL and the MySQL-specific behavior of being
          able to refer columns in the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> list, MySQL 5.0.2 and up
          allows <code class="literal">HAVING</code> to refer to columns in the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> list, columns in the
          <code class="literal">GROUP BY</code> clause, columns in outer
          subqueries, and to aggregate functions.
        </p><p>
          For example, the following statement works in MySQL 5.0.2 but
          produces an error for earlier versions:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM t GROUP BY col1 HAVING col1 = 2;</code></strong>
</pre><p>
          If the <code class="literal">HAVING</code> clause refers to a column
          that is ambiguous, a warning occurs. In the following
          statement, <code class="literal">col2</code> is ambiguous because it is
          used as both an alias and a column name:
        </p><pre class="programlisting">SELECT COUNT(col1) AS col2 FROM t GROUP BY col2 HAVING col2 = 2;
</pre><p>
          Preference is given to standard SQL behavior, so if a
          <code class="literal">HAVING</code> column name is used both in
          <code class="literal">GROUP BY</code> and as an aliased column in the
          output column list, preference is given to the column in the
          <code class="literal">GROUP BY</code> column.
        </p></li><li><p>
          Do not use <code class="literal">HAVING</code> for items that should be
          in the <code class="literal">WHERE</code> clause. For example, do not
          write the following:
        </p><pre class="programlisting">SELECT <em class="replaceable"><code>col_name</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> HAVING <em class="replaceable"><code>col_name</code></em> &gt; 0;
</pre><p>
          Write this instead:
        </p><pre class="programlisting">SELECT <em class="replaceable"><code>col_name</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>col_name</code></em> &gt; 0;
</pre></li><li><p>
          The <code class="literal">HAVING</code> clause can refer to aggregate
          functions, which the <code class="literal">WHERE</code> clause cannot:
        </p><pre class="programlisting">SELECT user, MAX(salary) FROM users
  GROUP BY user HAVING MAX(salary) &gt; 10;
</pre><p>
          (This did not work in some older versions of MySQL.)
        </p></li><li><p>
          MySQL allows duplicate column names. That is, there can be
          more than one <em class="replaceable"><code>select_expr</code></em> with the
          same name. This is an extension to standard SQL. Because MySQL
          also allows <code class="literal">GROUP BY</code> and
          <code class="literal">HAVING</code> to refer to
          <em class="replaceable"><code>select_expr</code></em> values, this can result
          in an ambiguity:
        </p><pre class="programlisting">SELECT 12 AS a, a FROM t GROUP BY a;
</pre><p>
          In that statement, both columns have the name
          <code class="literal">a</code>. To ensure that the correct column is
          used for grouping, use different names for each
          <em class="replaceable"><code>select_expr</code></em>.
        </p></li><li><p>
          MySQL resolves unqualified column or alias references in
          <code class="literal">ORDER BY</code> clauses by searching in the
          <em class="replaceable"><code>select_expr</code></em> values, then in the
          columns of the tables in the <code class="literal">FROM</code> clause.
          For <code class="literal">GROUP BY</code> or <code class="literal">HAVING</code>
          clauses, it searches the <code class="literal">FROM</code> clause before
          searching in the <em class="replaceable"><code>select_expr</code></em>
          values. (For <code class="literal">GROUP BY</code> and
          <code class="literal">HAVING</code>, this differs from the pre-MySQL 5.0
          behavior that used the same rules as for <code class="literal">ORDER
          BY</code>.)
        </p></li><li><p>
          <a class="indexterm" name="id2087434"></a>

          The <code class="literal">LIMIT</code> clause can be used to constrain
          the number of rows returned by the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement.
          <code class="literal">LIMIT</code> takes one or two numeric arguments,
          which must both be nonnegative integer constants (except when
          using prepared statements).
        </p><p>
          With two arguments, the first argument specifies the offset of
          the first row to return, and the second specifies the maximum
          number of rows to return. The offset of the initial row is 0
          (not 1):
        </p><pre class="programlisting">SELECT * FROM tbl LIMIT 5,10;  # Retrieve rows 6-15
</pre><p>
          To retrieve all rows from a certain offset up to the end of
          the result set, you can use some large number for the second
          parameter. This statement retrieves all rows from the 96th row
          to the last:
        </p><pre class="programlisting">SELECT * FROM tbl LIMIT 95,18446744073709551615;
</pre><p>
          With one argument, the value specifies the number of rows to
          return from the beginning of the result set:
        </p><pre class="programlisting">SELECT * FROM tbl LIMIT 5;     # Retrieve first 5 rows
</pre><p>
          In other words, <code class="literal">LIMIT
          <em class="replaceable"><code>row_count</code></em></code> is equivalent
          to <code class="literal">LIMIT 0,
          <em class="replaceable"><code>row_count</code></em></code>.
        </p><p>
          For prepared statements, you can use placeholders (supported
          as of MySQL version 5.0.7). The following statements will
          return one row from the <code class="literal">tbl</code> table:
        </p><pre class="programlisting">SET @a=1;
PREPARE STMT FROM 'SELECT * FROM tbl LIMIT ?';
EXECUTE STMT USING @a;
</pre><p>
          The following statements will return the second to sixth row
          from the <code class="literal">tbl</code> table:
        </p><pre class="programlisting">SET @skip=1; SET @numrows=5;
PREPARE STMT FROM 'SELECT * FROM tbl LIMIT ?, ?';
EXECUTE STMT USING @skip, @numrows;
</pre><p>
          For compatibility with PostgreSQL, MySQL also supports the
          <code class="literal">LIMIT <em class="replaceable"><code>row_count</code></em> OFFSET
          <em class="replaceable"><code>offset</code></em></code> syntax.
        </p><p>
          If <code class="literal">LIMIT</code> occurs within a subquery and also
          is applied in the outer query, the outermost
          <code class="literal">LIMIT</code> takes precedence. For example, the
          following statement produces two rows, not one:
        </p><pre class="programlisting">(SELECT ... LIMIT 1) LIMIT 2;
</pre></li><li><p>
          <a class="indexterm" name="id2087596"></a>

          A <code class="literal">PROCEDURE</code> clause names a procedure that
          should process the data in the result set. For an example, see
          <a href="extending-mysql.html#procedure-analyse" title="21.3.1. PROCEDURE ANALYSE">Section 21.3.1, “<code class="literal">PROCEDURE ANALYSE</code>”</a>, which describes
          <code class="literal">ANALYSE</code>, a procedure that can be used to
          obtain suggestions for optimal column data types that may help
          reduce table sizes.
        </p></li><li><p>
          <a class="indexterm" name="id2087630"></a>

          <a class="indexterm" name="id2087639"></a>

          The <code class="literal">SELECT ... INTO OUTFILE
          '<em class="replaceable"><code>file_name</code></em>'</code> form of
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> writes the selected rows
          to a file. The file is created on the server host, so you must
          have the <a href="server-administration.html#priv_file"><code class="literal">FILE</code></a> privilege to use
          this syntax. <em class="replaceable"><code>file_name</code></em> cannot be an
          existing file, which among other things prevents files such as
          <code class="filename">/etc/passwd</code> and database tables from
          being destroyed. As of MySQL 5.0.19, the
          <a href="server-administration.html#sysvar_character_set_filesystem"><code class="literal">character_set_filesystem</code></a>
          system variable controls the interpretation of the file name.
        </p><p>
          The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
          OUTFILE</code></a> statement is intended primarily to let you
          very quickly dump a table to a text file on the server
          machine. If you want to create the resulting file on some
          client host other than the server host, you cannot use
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
          OUTFILE</code></a>. In that case, you should instead use a
          command such as <code class="literal">mysql -e "SELECT ..." &gt;
          <em class="replaceable"><code>file_name</code></em></code> to generate the
          file on the client host.
        </p><p>
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT ... INTO
          OUTFILE</code></a> is the complement of
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
          INFILE</code></a>. Column values are dumped using the
          <code class="literal">binary</code> character set. In effect, there is
          no character set conversion. If a table contains columns in
          several character sets, the output data file will as well and
          you may not be able to reload the file correctly.
        </p><p>
          The syntax for the <em class="replaceable"><code>export_options</code></em>
          part of the statement consists of the same
          <code class="literal">FIELDS</code> and <code class="literal">LINES</code> clauses
          that are used with the
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
          INFILE</code></a> statement.
        </p><p>
          <code class="literal">FIELDS ESCAPED BY</code> controls how to write
          special characters. If the <code class="literal">FIELDS ESCAPED
          BY</code> character is not empty, it is used as a prefix
          that precedes following characters on output:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              The <code class="literal">FIELDS ESCAPED BY</code> character
            </p></li><li><p>
              The <code class="literal">FIELDS [OPTIONALLY] ENCLOSED BY</code>
              character
            </p></li><li><p>
              The first character of the <code class="literal">FIELDS TERMINATED
              BY</code> and <code class="literal">LINES TERMINATED BY</code>
              values
            </p></li><li><p>
              ASCII <code class="literal">NUL</code> (the zero-valued byte; what
              is actually written following the escape character is
              ASCII “<span class="quote"><code class="literal">0</code></span>”, not a
              zero-valued byte)
            </p></li></ul></div><p>
          The <code class="literal">FIELDS TERMINATED BY</code>, <code class="literal">ENCLOSED
          BY</code>, <code class="literal">ESCAPED BY</code>, or <code class="literal">LINES
          TERMINATED BY</code> characters <span class="emphasis"><em>must</em></span>
          be escaped so that you can read the file back in reliably.
          ASCII <code class="literal">NUL</code> is escaped to make it easier to
          view with some pagers.
        </p><p>
          The resulting file does not have to conform to SQL syntax, so
          nothing else need be escaped.
        </p><p>
          If the <code class="literal">FIELDS ESCAPED BY</code> character is
          empty, no characters are escaped and <code class="literal">NULL</code>
          is output as <code class="literal">NULL</code>, not
          <code class="literal">\N</code>. It is probably not a good idea to
          specify an empty escape character, particularly if field
          values in your data contain any of the characters in the list
          just given.
        </p><a class="indexterm" name="id2087932"></a><a class="indexterm" name="id2087941"></a><p>
          Here is an example that produces a file in the comma-separated
          values (CSV) format used by many programs:
        </p><pre class="programlisting">SELECT a,b,a+b INTO OUTFILE '/tmp/result.txt'
  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
  LINES TERMINATED BY '\n'
  FROM test_table;
</pre><p>
          See <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax">Section 12.2.6, “<code class="literal">LOAD DATA INFILE</code>
      Syntax”</a>, for further information about
          the <code class="literal">FIELDS</code> and <code class="literal">LINES</code>
          clauses, including their default values and allowable values.
        </p></li><li><p>
          <a class="indexterm" name="id2087987"></a>

          If you use <code class="literal">INTO DUMPFILE</code> instead of
          <code class="literal">INTO OUTFILE</code>, MySQL writes only one row
          into the file, without any column or line termination and
          without performing any escape processing. This is useful if
          you want to store a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> value
          in a file.
        </p></li><li><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            Any file created by <code class="literal">INTO OUTFILE</code> or
            <code class="literal">INTO DUMPFILE</code> is writable by all users on
            the server host. The reason for this is that the MySQL
            server cannot create a file that is owned by anyone other
            than the user under whose account it is running. (You should
            <span class="emphasis"><em>never</em></span> run <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> as
            <code class="literal">root</code> for this and other reasons.) The
            file thus must be world-writable so that you can manipulate
            its contents.
          </p><p>
            If the <a href="server-administration.html#sysvar_secure_file_priv"><code class="literal">secure_file_priv</code></a>
            system variable is set to a nonempty directory name, the
            file to be written must be located in that directory.
          </p></div></li><li><p>
          The <code class="literal">INTO</code> clause can name a list of one or
          more variables, which can be user-defined variables, or
          parameters or local variables within a stored function or
          procedure body (see <a href="sql-syntax.html#select-into-statement" title="12.8.3.3. SELECT ... INTO Statement">Section 12.8.3.3, “<code class="literal">SELECT ... INTO</code> Statement”</a>).
          The selected values are assigned to the variables. The number
          of variables must match the number of columns. The query
          should return a single row. If the query returns no rows, a
          warning with error code 1329 occurs (<code class="literal">No
          data</code>), and the variable values remain unchanged. If
          the query returns multiple rows, error 1172 occurs
          (<code class="literal">Result consisted of more than one row</code>). If
          it is possible that the statement may retrieve multiple rows,
          you can use <code class="literal">LIMIT 1</code> to limit the result set
          to a single row.
        </p></li><li><p>
          The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> syntax description
          at the beginning this section shows the
          <code class="literal">INTO</code> clause near the end of the statement.
          It is also possible to use <code class="literal">INTO</code> immediately
          following the <em class="replaceable"><code>select_expr</code></em> list.
        </p></li><li><p>
          An <code class="literal">INTO</code> clause should not be used in a
          nested <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> because such a
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> must return its result
          to the outer context.
        </p></li><li><p>
          <a class="indexterm" name="id2088176"></a>

          <a class="indexterm" name="id2088185"></a>

          If you use <code class="literal">FOR UPDATE</code> with a storage engine
          that uses page or row locks, rows examined by the query are
          write-locked until the end of the current transaction. Using
          <code class="literal">LOCK IN SHARE MODE</code> sets a shared lock that
          allows other transactions to read the examined rows but not to
          update or delete them. See
          <a href="storage-engines.html#innodb-locking-reads" title="13.2.8.3. SELECT ... FOR UPDATE
        and SELECT ... LOCK IN
        SHARE MODE Locking Reads">Section 13.2.8.3, “<code class="literal">SELECT ... FOR UPDATE</code>
        and <code class="literal">SELECT ... LOCK IN
        SHARE MODE</code> Locking Reads”</a>.
        </p></li></ul></div><p>
      Following the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> keyword, you
      can use a number of options that affect the operation of the
      statement.
    </p><a class="indexterm" name="id2088228"></a><a class="indexterm" name="id2088236"></a><a class="indexterm" name="id2088245"></a><p>
      The <code class="literal">ALL</code>, <code class="literal">DISTINCT</code>, and
      <code class="literal">DISTINCTROW</code> options specify whether duplicate
      rows should be returned. If none of these options are given, the
      default is <code class="literal">ALL</code> (all matching rows are
      returned). <code class="literal">DISTINCT</code> and
      <code class="literal">DISTINCTROW</code> are synonyms and specify removal of
      duplicate rows from the result set.
    </p><p>
      <code class="literal">HIGH_PRIORITY</code>,
      <code class="literal">STRAIGHT_JOIN</code>, and options beginning with
      <code class="literal">SQL_</code> are MySQL extensions to standard SQL.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2088323"></a>

          <code class="literal">HIGH_PRIORITY</code> gives the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> higher priority than a
          statement that updates a table. You should use this only for
          queries that are very fast and must be done at once. A
          <code class="literal">SELECT HIGH_PRIORITY</code> query that is issued
          while the table is locked for reading runs even if there is an
          update statement waiting for the table to be free. This
          affects only storage engines that use only table-level locking
          (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>).
        </p><p>
          <code class="literal">HIGH_PRIORITY</code> cannot be used with
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements that are part
          of a <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a>.
        </p></li><li><p>
          <a class="indexterm" name="id2088402"></a>

          <code class="literal">STRAIGHT_JOIN</code> forces the optimizer to join
          the tables in the order in which they are listed in the
          <code class="literal">FROM</code> clause. You can use this to speed up a
          query if the optimizer joins the tables in nonoptimal order.
          <code class="literal">STRAIGHT_JOIN</code> also can be used in the
          <em class="replaceable"><code>table_references</code></em> list. See
          <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>.
        </p><p>
          <a class="indexterm" name="id2088442"></a>

          <a class="indexterm" name="id2088454"></a>

          <code class="literal">STRAIGHT_JOIN</code> does not apply to any table
          that the optimizer treats as a
          <a href="optimization.html#jointype_const"><code class="literal">const</code></a> or
          <a href="optimization.html#jointype_system"><code class="literal">system</code></a> table. Such a table
          produces a single row, is read during the optimization phase
          of query execution, and references to its columns are replaced
          with the appropriate column values before query execution
          proceeds. These tables will appear first in the query plan
          displayed by <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>. See
          <a href="optimization.html#using-explain" title="7.2.1. Optimizing Queries with EXPLAIN">Section 7.2.1, “Optimizing Queries with <code class="literal">EXPLAIN</code>”</a>. This exception may not apply
          to <a href="optimization.html#jointype_const"><code class="literal">const</code></a> or
          <a href="optimization.html#jointype_system"><code class="literal">system</code></a> tables that are used
          on the <code class="literal">NULL</code>-complemented side of an outer
          join (that is, the right-side table of a <code class="literal">LEFT
          JOIN</code> or the left-side table of a <code class="literal">RIGHT
          JOIN</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2088541"></a>

          <code class="literal">SQL_BIG_RESULT</code> can be used with
          <code class="literal">GROUP BY</code> or <code class="literal">DISTINCT</code> to
          tell the optimizer that the result set has many rows. In this
          case, MySQL directly uses disk-based temporary tables if
          needed, and prefers sorting to using a temporary table with a
          key on the <code class="literal">GROUP BY</code> elements.
        </p></li><li><p>
          <a class="indexterm" name="id2088583"></a>

          <code class="literal">SQL_BUFFER_RESULT</code> forces the result to be
          put into a temporary table. This helps MySQL free the table
          locks early and helps in cases where it takes a long time to
          send the result set to the client. This option can be used
          only for top-level <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
          statements, not for subqueries or following
          <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a>.
        </p></li><li><p>
          <a class="indexterm" name="id2088621"></a>

          <code class="literal">SQL_SMALL_RESULT</code> can be used with
          <code class="literal">GROUP BY</code> or <code class="literal">DISTINCT</code> to
          tell the optimizer that the result set is small. In this case,
          MySQL uses fast temporary tables to store the resulting table
          instead of using sorting. This should not normally be needed.
        </p></li><li><p>
          <a class="indexterm" name="id2088656"></a>

          <code class="literal">SQL_CALC_FOUND_ROWS</code> tells MySQL to
          calculate how many rows there would be in the result set,
          disregarding any <code class="literal">LIMIT</code> clause. The number
          of rows can then be retrieved with <code class="literal">SELECT
          FOUND_ROWS()</code>. See
          <a href="functions.html#information-functions" title="11.10.3. Information Functions">Section 11.10.3, “Information Functions”</a>.
        </p></li><li><p>
          <a class="indexterm" name="id2088695"></a>

          <a class="indexterm" name="id2088704"></a>

          The <code class="literal">SQL_CACHE</code> and
          <code class="literal">SQL_NO_CACHE</code> options affect caching of
          query results in the query cache (see
          <a href="optimization.html#query-cache" title="7.5.5. The MySQL Query Cache">Section 7.5.5, “The MySQL Query Cache”</a>). <code class="literal">SQL_CACHE</code>
          tells MySQL to store the result in the query cache if it is
          cacheable and the value of the
          <a href="server-administration.html#sysvar_query_cache_type"><code class="literal">query_cache_type</code></a> system
          variable is <code class="literal">2</code> or <code class="literal">DEMAND</code>.
          <code class="literal">SQL_NO_CACHE</code> tells MySQL not to store the
          result in the query cache. For a query that uses
          <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a>, subqueries, or views,
          the following rules apply:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">SQL_NO_CACHE</code> applies if it appears in
              any <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> in the query.
            </p></li><li><p>
              For a cacheable query, <code class="literal">SQL_CACHE</code>
              applies if it appears in the first
              <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> of the query, or in
              the first <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> of a view
              referred to by the query.
            </p></li></ul></div></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="join"></a>12.2.8.1. <code class="literal">JOIN</code> Syntax</h4></div></div></div><a class="indexterm" name="id2088837"></a><a class="indexterm" name="id2088846"></a><a class="indexterm" name="id2088855"></a><a class="indexterm" name="id2088864"></a><a class="indexterm" name="id2088873"></a><a class="indexterm" name="id2088882"></a><a class="indexterm" name="id2088891"></a><a class="indexterm" name="id2088900"></a><a class="indexterm" name="id2088909"></a><a class="indexterm" name="id2088918"></a><a class="indexterm" name="id2088926"></a><a class="indexterm" name="id2088936"></a><a class="indexterm" name="id2088944"></a><p>
        MySQL supports the following <code class="literal">JOIN</code> syntaxes
        for the <em class="replaceable"><code>table_references</code></em> part of
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements and
        multiple-table <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> and
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements:
      </p><pre class="programlisting"><em class="replaceable"><code>table_references:</code></em>
    <em class="replaceable"><code>table_reference</code></em> [, <em class="replaceable"><code>table_reference</code></em>] ...

<em class="replaceable"><code>table_reference</code></em>:
    <em class="replaceable"><code>table_factor</code></em>
  | <em class="replaceable"><code>join_table</code></em>

<em class="replaceable"><code>table_factor</code></em>:
    <em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] [<em class="replaceable"><code>index_hint</code></em>)]
  | <em class="replaceable"><code>table_subquery</code></em> [AS] <em class="replaceable"><code>alias</code></em>
  | ( <em class="replaceable"><code>table_references</code></em> )
  | { OJ <em class="replaceable"><code>table_reference</code></em> LEFT OUTER JOIN <em class="replaceable"><code>table_reference</code></em>
        ON <em class="replaceable"><code>conditional_expr</code></em> }

<em class="replaceable"><code>join_table</code></em>:
    <em class="replaceable"><code>table_reference</code></em> [INNER | CROSS] JOIN <em class="replaceable"><code>table_factor</code></em> [<em class="replaceable"><code>join_condition</code></em>]
  | <em class="replaceable"><code>table_reference</code></em> STRAIGHT_JOIN <em class="replaceable"><code>table_factor</code></em>
  | <em class="replaceable"><code>table_reference</code></em> STRAIGHT_JOIN <em class="replaceable"><code>table_factor</code></em> ON <em class="replaceable"><code>conditional_expr</code></em>
  | <em class="replaceable"><code>table_reference</code></em> {LEFT|RIGHT} [OUTER] JOIN <em class="replaceable"><code>table_reference</code></em> <em class="replaceable"><code>join_condition</code></em>
  | <em class="replaceable"><code>table_reference</code></em> NATURAL [{LEFT|RIGHT} [OUTER]] JOIN <em class="replaceable"><code>table_factor</code></em>

<em class="replaceable"><code>join_condition</code></em>:
    ON <em class="replaceable"><code>conditional_expr</code></em>
  | USING (<em class="replaceable"><code>column_list</code></em>)

<em class="replaceable"><code>index_hint</code></em>:
    USE {INDEX|KEY} [FOR JOIN] (<em class="replaceable"><code>index_list</code></em>)
  | IGNORE {INDEX|KEY} [FOR JOIN] (<em class="replaceable"><code>index_list</code></em>)
  | FORCE {INDEX|KEY} [FOR JOIN] (<em class="replaceable"><code>index_list</code></em>)

<em class="replaceable"><code>index_list</code></em>:
    <em class="replaceable"><code>index_name</code></em> [, <em class="replaceable"><code>index_name</code></em>] ...
</pre><p>
        A table reference is also known as a join expression.
      </p><p>
        The syntax of <em class="replaceable"><code>table_factor</code></em> is
        extended in comparison with the SQL Standard. The latter accepts
        only <em class="replaceable"><code>table_reference</code></em>, not a list of
        them inside a pair of parentheses.
      </p><p>
        This is a conservative extension if we consider each comma in a
        list of <em class="replaceable"><code>table_reference</code></em> items as
        equivalent to an inner join. For example:
      </p><pre class="programlisting">SELECT * FROM t1 LEFT JOIN (t2, t3, t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)
</pre><p>
        is equivalent to:
      </p><pre class="programlisting">SELECT * FROM t1 LEFT JOIN (t2 CROSS JOIN t3 CROSS JOIN t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)
</pre><p>
        In MySQL, <code class="literal">CROSS JOIN</code> is a syntactic
        equivalent to <code class="literal">INNER JOIN</code> (they can replace
        each other). In standard SQL, they are not equivalent.
        <code class="literal">INNER JOIN</code> is used with an
        <code class="literal">ON</code> clause, <code class="literal">CROSS JOIN</code> is
        used otherwise.
      </p><p>
        In versions of MySQL prior to 5.0.1, parentheses in
        <em class="replaceable"><code>table_references</code></em> were just omitted
        and all join operations were grouped to the left. In general,
        parentheses can be ignored in join expressions containing only
        inner join operations. As of 5.0.1, nested joins are allowed
        (see <a href="optimization.html#nested-join-optimization" title="7.2.11. Nested Join Optimization">Section 7.2.11, “Nested Join Optimization”</a>).
      </p><p>
        Further changes in join processing were made in 5.0.12 to make
        MySQL more compliant with standard SQL. These charges are
        described later in this section.
      </p><p>
        Index hints can be specified to affect how the MySQL optimizer
        makes use of indexes. For more information, see
        <a href="sql-syntax.html#index-hints" title="12.2.8.2. Index Hint Syntax">Section 12.2.8.2, “Index Hint Syntax”</a>.
      </p><p>
        The following list describes general factors to take into
        account when writing joins.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            A table reference can be aliased using
            <code class="literal"><em class="replaceable"><code>tbl_name</code></em> AS
            <em class="replaceable"><code>alias_name</code></em></code> or
            <em class="replaceable"><code>tbl_name alias_name</code></em>:
          </p><pre class="programlisting">SELECT t1.name, t2.salary
  FROM employee AS t1 INNER JOIN info AS t2 ON t1.name = t2.name;

SELECT t1.name, t2.salary
  FROM employee t1 INNER JOIN info t2 ON t1.name = t2.name;
</pre></li><li><p>
            A <em class="replaceable"><code>table_subquery</code></em> is also known as
            a subquery in the <code class="literal">FROM</code> clause. Such
            subqueries <span class="emphasis"><em>must</em></span> include an alias to
            give the subquery result a table name. A trivial example
            follows; see also <a href="sql-syntax.html#unnamed-views" title="12.2.9.8. Subqueries in the FROM clause">Section 12.2.9.8, “Subqueries in the <code class="literal">FROM</code> clause”</a>.
          </p><pre class="programlisting">SELECT * FROM (SELECT 1, 2, 3) AS t1;
</pre></li><li><p>
            <code class="literal">INNER JOIN</code> and <code class="literal">,</code>
            (comma) are semantically equivalent in the absence of a join
            condition: both produce a Cartesian product between the
            specified tables (that is, each and every row in the first
            table is joined to each and every row in the second table).
          </p><p>
            However, the precedence of the comma operator is less than
            of <code class="literal">INNER JOIN</code>, <code class="literal">CROSS
            JOIN</code>, <code class="literal">LEFT JOIN</code>, and so on. If
            you mix comma joins with the other join types when there is
            a join condition, an error of the form <code class="literal">Unknown
            column '<em class="replaceable"><code>col_name</code></em>' in 'on
            clause'</code> may occur. Information about dealing with
            this problem is given later in this section.
          </p></li><li><p>
            The <em class="replaceable"><code>conditional_expr</code></em> used with
            <code class="literal">ON</code> is any conditional expression of the
            form that can be used in a <code class="literal">WHERE</code> clause.
            Generally, you should use the <code class="literal">ON</code> clause
            for conditions that specify how to join tables, and the
            <code class="literal">WHERE</code> clause to restrict which rows you
            want in the result set.
          </p></li><li><p>
            If there is no matching row for the right table in the
            <code class="literal">ON</code> or <code class="literal">USING</code> part in a
            <code class="literal">LEFT JOIN</code>, a row with all columns set to
            <code class="literal">NULL</code> is used for the right table. You can
            use this fact to find rows in a table that have no
            counterpart in another table:
          </p><pre class="programlisting">SELECT left_tbl.*
  FROM left_tbl LEFT JOIN right_tbl ON left_tbl.id = right_tbl.id
  WHERE right_tbl.id IS NULL;
</pre><p>
            This example finds all rows in <code class="literal">left_tbl</code>
            with an <code class="literal">id</code> value that is not present in
            <code class="literal">right_tbl</code> (that is, all rows in
            <code class="literal">left_tbl</code> with no corresponding row in
            <code class="literal">right_tbl</code>). This assumes that
            <code class="literal">right_tbl.id</code> is declared <code class="literal">NOT
            NULL</code>. See
            <a href="optimization.html#left-join-optimization" title="7.2.9. LEFT JOIN and RIGHT JOIN
        Optimization">Section 7.2.9, “<code class="literal">LEFT JOIN</code> and <code class="literal">RIGHT JOIN</code>
        Optimization”</a>.
          </p></li><li><p>
            The
            <code class="literal">USING(<em class="replaceable"><code>column_list</code></em>)</code>
            clause names a list of columns that must exist in both
            tables. If tables <code class="literal">a</code> and
            <code class="literal">b</code> both contain columns
            <code class="literal">c1</code>, <code class="literal">c2</code>, and
            <code class="literal">c3</code>, the following join compares
            corresponding columns from the two tables:
          </p><pre class="programlisting">a LEFT JOIN b USING (c1,c2,c3)
</pre></li><li><p>
            The <code class="literal">NATURAL [LEFT] JOIN</code> of two tables is
            defined to be semantically equivalent to an <code class="literal">INNER
            JOIN</code> or a <code class="literal">LEFT JOIN</code> with a
            <code class="literal">USING</code> clause that names all columns that
            exist in both tables.
          </p></li><li><p>
            <code class="literal">RIGHT JOIN</code> works analogously to
            <code class="literal">LEFT JOIN</code>. To keep code portable across
            databases, it is recommended that you use <code class="literal">LEFT
            JOIN</code> instead of <code class="literal">RIGHT JOIN</code>.
          </p></li><li><p>
            <a class="indexterm" name="id2089636"></a>

            <a class="indexterm" name="id2089645"></a>

            The <code class="literal">{ OJ ... LEFT OUTER JOIN ...}</code> syntax
            shown in the join syntax description exists only for
            compatibility with ODBC. The curly braces in the syntax
            should be written literally; they are not metasyntax as used
            elsewhere in syntax descriptions.
          </p><pre class="programlisting">SELECT left_tbl.*
  FROM { OJ left_tbl LEFT OUTER JOIN right_tbl ON left_tbl.id = right_tbl.id }
  WHERE right_tbl.id IS NULL;
</pre></li><li><p>
            <code class="literal">STRAIGHT_JOIN</code> is similar to
            <code class="literal">JOIN</code>, except that the left table is
            always read before the right table. This can be used for
            those (few) cases for which the join optimizer puts the
            tables in the wrong order.
          </p></li></ul></div><p>
        Some join examples:
      </p><pre class="programlisting">SELECT * FROM table1, table2;

SELECT * FROM table1 INNER JOIN table2 ON table1.id=table2.id;

SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id;

SELECT * FROM table1 LEFT JOIN table2 USING (id);

SELECT * FROM table1 LEFT JOIN table2 ON table1.id=table2.id
  LEFT JOIN table3 ON table2.id=table3.id;
</pre><p>
        <span class="bold"><strong>Join Processing Changes in MySQL
        5.0.12</strong></span>
      </p><p>
        Beginning with MySQL 5.0.12, natural joins and joins with
        <code class="literal">USING</code>, including outer join variants, are
        processed according to the SQL:2003 standard. The goal was to
        align the syntax and semantics of MySQL with respect to
        <code class="literal">NATURAL JOIN</code> and <code class="literal">JOIN ...
        USING</code> according to SQL:2003. However, these changes in
        join processing can result in different output columns for some
        joins. Also, some queries that appeared to work correctly in
        older versions must be rewritten to comply with the standard.
      </p><p>
        These changes have five main aspects:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The way that MySQL determines the result columns of
            <code class="literal">NATURAL</code> or <code class="literal">USING</code> join
            operations (and thus the result of the entire
            <code class="literal">FROM</code> clause).
          </p></li><li><p>
            Expansion of <code class="literal">SELECT *</code> and <code class="literal">SELECT
            <em class="replaceable"><code>tbl_name</code></em>.*</code> into a list
            of selected columns.
          </p></li><li><p>
            Resolution of column names in <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins.
          </p></li><li><p>
            Transformation of <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins into <code class="literal">JOIN ...
            ON</code>.
          </p></li><li><p>
            Resolution of column names in the <code class="literal">ON</code>
            condition of a <code class="literal">JOIN ... ON</code>.
          </p></li></ul></div><p>
        The following list provides more detail about several effects of
        the 5.0.12 change in join processing. The term
        “<span class="quote">previously</span>” means “<span class="quote">prior to MySQL
        5.0.12.</span>”
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The columns of a <code class="literal">NATURAL</code> join or a
            <code class="literal">USING</code> join may be different from
            previously. Specifically, redundant output columns no longer
            appear, and the order of columns for <code class="literal">SELECT
            *</code> expansion may be different from before.
          </p><p>
            Consider this set of statements:
          </p><pre class="programlisting">CREATE TABLE t1 (i INT, j INT);
CREATE TABLE t2 (k INT, j INT);
INSERT INTO t1 VALUES(1,1);
INSERT INTO t2 VALUES(1,1);
SELECT * FROM t1 NATURAL JOIN t2;
SELECT * FROM t1 JOIN t2 USING (j);
</pre><p>
            Previously, the statements produced this output:
          </p><pre class="programlisting">+------+------+------+------+
| i    | j    | k    | j    |
+------+------+------+------+
|    1 |    1 |    1 |    1 |
+------+------+------+------+
+------+------+------+------+
| i    | j    | k    | j    |
+------+------+------+------+
|    1 |    1 |    1 |    1 |
+------+------+------+------+
</pre><p>
            In the first <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
            statement, column <code class="literal">j</code> appears in both
            tables and thus becomes a join column, so, according to
            standard SQL, it should appear only once in the output, not
            twice. Similarly, in the second SELECT statement, column
            <code class="literal">j</code> is named in the
            <code class="literal">USING</code> clause and should appear only once
            in the output, not twice. But in both cases, the redundant
            column is not eliminated. Also, the order of the columns is
            not correct according to standard SQL.
          </p><p>
            Now the statements produce this output:
          </p><pre class="programlisting">+------+------+------+
| j    | i    | k    |
+------+------+------+
|    1 |    1 |    1 |
+------+------+------+
+------+------+------+
| j    | i    | k    |
+------+------+------+
|    1 |    1 |    1 |
+------+------+------+
</pre><p>
            The redundant column is eliminated and the column order is
            correct according to standard SQL:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                First, coalesced common columns of the two joined
                tables, in the order in which they occur in the first
                table
              </p></li><li><p>
                Second, columns unique to the first table, in order in
                which they occur in that table
              </p></li><li><p>
                Third, columns unique to the second table, in order in
                which they occur in that table
              </p></li></ul></div><p>
            The single result column that replaces two common columns is
            defined via the coalesce operation. That is, for two
            <code class="literal">t1.a</code> and <code class="literal">t2.a</code> the
            resulting single join column <code class="literal">a</code> is defined
            as <code class="literal">a = COALESCE(t1.a, t2.a)</code>, where:
          </p><pre class="programlisting">COALESCE(x, y) = (CASE WHEN V1 IS NOT NULL THEN V1 ELSE V2 END)
</pre><p>
            If the join operation is any other join, the result columns
            of the join consists of the concatenation of all columns of
            the joined tables. This is the same as previously.
          </p><p>
            A consequence of the definition of coalesced columns is
            that, for outer joins, the coalesced column contains the
            value of the non-<code class="literal">NULL</code> column if one of
            the two columns is always <code class="literal">NULL</code>. If
            neither or both columns are <code class="literal">NULL</code>, both
            common columns have the same value, so it doesn't matter
            which one is chosen as the value of the coalesced column. A
            simple way to interpret this is to consider that a coalesced
            column of an outer join is represented by the common column
            of the inner table of a <code class="literal">JOIN</code>. Suppose
            that the tables <code class="literal">t1(a,b)</code> and
            <code class="literal">t2(a,c)</code> have the following contents:
          </p><pre class="programlisting">t1    t2
----  ----
1 x   2 z
2 y   3 w
</pre><p>
            Then:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 NATURAL LEFT JOIN t2;</code></strong>
+------+------+------+
| a    | b    | c    |
+------+------+------+
|    1 | x    | NULL |
|    2 | y    | z    |
+------+------+------+
</pre><p>
            Here column <code class="literal">a</code> contains the values of
            <code class="literal">t1.a</code>.
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 NATURAL RIGHT JOIN t2;</code></strong>
+------+------+------+
| a    | c    | b    |
+------+------+------+
|    2 | z    | y    |
|    3 | w    | NULL |
+------+------+------+
</pre><p>
            Here column <code class="literal">a</code> contains the values of
            <code class="literal">t2.a</code>.
          </p><p>
            Compare these results to the otherwise equivalent queries
            with <code class="literal">JOIN ... ON</code>:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 LEFT JOIN t2 ON (t1.a = t2.a);</code></strong>
+------+------+------+------+
| a    | b    | a    | c    |
+------+------+------+------+
|    1 | x    | NULL | NULL |
|    2 | y    |    2 | z    |
+------+------+------+------+
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 RIGHT JOIN t2 ON (t1.a = t2.a);</code></strong>
+------+------+------+------+
| a    | b    | a    | c    |
+------+------+------+------+
|    2 | y    |    2 | z    |
| NULL | NULL |    3 | w    |
+------+------+------+------+
</pre></li><li><p>
            Previously, a <code class="literal">USING</code> clause could be
            rewritten as an <code class="literal">ON</code> clause that compares
            corresponding columns. For example, the following two
            clauses were semantically identical:
          </p><pre class="programlisting">a LEFT JOIN b USING (c1,c2,c3)
a LEFT JOIN b ON a.c1=b.c1 AND a.c2=b.c2 AND a.c3=b.c3
</pre><p>
            Now the two clauses no longer are quite the same:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                With respect to determining which rows satisfy the join
                condition, both joins remain semantically identical.
              </p></li><li><p>
                With respect to determining which columns to display for
                <code class="literal">SELECT *</code> expansion, the two joins are
                not semantically identical. The <code class="literal">USING</code>
                join selects the coalesced value of corresponding
                columns, whereas the <code class="literal">ON</code> join selects
                all columns from all tables. For the preceding
                <code class="literal">USING</code> join, <code class="literal">SELECT
                *</code> selects these values:
              </p><pre class="programlisting">COALESCE(a.c1,b.c1), COALESCE(a.c2,b.c2), COALESCE(a.c3,b.c3)
</pre><p>
                For the <code class="literal">ON</code> join, <code class="literal">SELECT
                *</code> selects these values:
              </p><pre class="programlisting">a.c1, a.c2, a.c3, b.c1, b.c2, b.c3
</pre><p>
                With an inner join,
                <a href="functions.html#function_coalesce"><code class="literal">COALESCE(a.c1,b.c1)</code></a> is
                the same as either <code class="literal">a.c1</code> or
                <code class="literal">b.c1</code> because both columns will have
                the same value. With an outer join (such as
                <code class="literal">LEFT JOIN</code>), one of the two columns
                can be <code class="literal">NULL</code>. That column will be
                omitted from the result.
              </p></li></ul></div></li><li><p>
            The evaluation of multi-way natural joins differs in a very
            important way that affects the result of
            <code class="literal">NATURAL</code> or <code class="literal">USING</code> joins
            and that can require query rewriting. Suppose that you have
            three tables <code class="literal">t1(a,b)</code>,
            <code class="literal">t2(c,b)</code>, and <code class="literal">t3(a,c)</code>
            that each have one row: <code class="literal">t1(1,2)</code>,
            <code class="literal">t2(10,2)</code>, and
            <code class="literal">t3(7,10)</code>. Suppose also that you have this
            <code class="literal">NATURAL JOIN</code> on the three tables:
          </p><pre class="programlisting">SELECT ... FROM t1 NATURAL JOIN t2 NATURAL JOIN t3;
</pre><p>
            Previously, the left operand of the second join was
            considered to be <code class="literal">t2</code>, whereas it should be
            the nested join <code class="literal">(t1 NATURAL JOIN t2)</code>. As
            a result, the columns of <code class="literal">t3</code> are checked
            for common columns only in <code class="literal">t2</code>, and, if
            <code class="literal">t3</code> has common columns with
            <code class="literal">t1</code>, these columns are not used as
            equi-join columns. Thus, previously, the preceding query was
            transformed to the following equi-join:
          </p><pre class="programlisting">SELECT ... FROM t1, t2, t3
  WHERE t1.b = t2.b AND t2.c = t3.c;
</pre><p>
            That join is missing one more equi-join predicate
            <code class="literal">(t1.a = t3.a)</code>. As a result, it produces
            one row, not the empty result that it should. The correct
            equivalent query is this:
          </p><pre class="programlisting">SELECT ... FROM t1, t2, t3
  WHERE t1.b = t2.b AND t2.c = t3.c AND t1.a = t3.a;
</pre><p>
            If you require the same query result in current versions of
            MySQL as in older versions, rewrite the natural join as the
            first equi-join.
          </p></li><li><p>
            Previously, the comma operator (<code class="literal">,</code>) and
            <code class="literal">JOIN</code> both had the same precedence, so the
            join expression <code class="literal">t1, t2 JOIN t3</code> was
            interpreted as <code class="literal">((t1, t2) JOIN t3)</code>. Now
            <code class="literal">JOIN</code> has higher precedence, so the
            expression is interpreted as <code class="literal">(t1, (t2 JOIN
            t3))</code>. This change affects statements that use an
            <code class="literal">ON</code> clause, because that clause can refer
            only to columns in the operands of the join, and the change
            in precedence changes interpretation of what those operands
            are.
          </p><p>
            Example:
          </p><pre class="programlisting">CREATE TABLE t1 (i1 INT, j1 INT);
CREATE TABLE t2 (i2 INT, j2 INT);
CREATE TABLE t3 (i3 INT, j3 INT);
INSERT INTO t1 VALUES(1,1);
INSERT INTO t2 VALUES(1,1);
INSERT INTO t3 VALUES(1,1);
SELECT * FROM t1, t2 JOIN t3 ON (t1.i1 = t3.i3);
</pre><p>
            Previously, the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> was
            legal due to the implicit grouping of
            <code class="literal">t1,t2</code> as <code class="literal">(t1,t2)</code>. Now
            the <code class="literal">JOIN</code> takes precedence, so the
            operands for the <code class="literal">ON</code> clause are
            <code class="literal">t2</code> and <code class="literal">t3</code>. Because
            <code class="literal">t1.i1</code> is not a column in either of the
            operands, the result is an <code class="literal">Unknown column 't1.i1'
            in 'on clause'</code> error. To allow the join to be
            processed, group the first two tables explicitly with
            parentheses so that the operands for the
            <code class="literal">ON</code> clause are <code class="literal">(t1,t2)</code>
            and <code class="literal">t3</code>:
          </p><pre class="programlisting">SELECT * FROM (t1, t2) JOIN t3 ON (t1.i1 = t3.i3);
</pre><p>
            Alternatively, avoid the use of the comma operator and use
            <code class="literal">JOIN</code> instead:
          </p><pre class="programlisting">SELECT * FROM t1 JOIN t2 JOIN t3 ON (t1.i1 = t3.i3);
</pre><p>
            This change also applies to statements that mix the comma
            operator with <code class="literal">INNER JOIN</code>, <code class="literal">CROSS
            JOIN</code>, <code class="literal">LEFT JOIN</code>, and
            <code class="literal">RIGHT JOIN</code>, all of which now have higher
            precedence than the comma operator.
          </p></li><li><p>
            Previously, the <code class="literal">ON</code> clause could refer to
            columns in tables named to its right. Now an
            <code class="literal">ON</code> clause can refer only to its operands.
          </p><p>
            Example:
          </p><pre class="programlisting">CREATE TABLE t1 (i1 INT);
CREATE TABLE t2 (i2 INT);
CREATE TABLE t3 (i3 INT);
SELECT * FROM t1 JOIN t2 ON (i1 = i3) JOIN t3;
</pre><p>
            Previously, the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
            statement was legal. Now the statement fails with an
            <code class="literal">Unknown column 'i3' in 'on clause'</code> error
            because <code class="literal">i3</code> is a column in
            <code class="literal">t3</code>, which is not an operand of the
            <code class="literal">ON</code> clause. The statement should be
            rewritten as follows:
          </p><pre class="programlisting">SELECT * FROM t1 JOIN t2 JOIN t3 ON (i1 = i3);
</pre></li><li><p>
            Resolution of column names in <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins is different than previously.
            For column names that are outside the
            <code class="literal">FROM</code> clause, MySQL now handles a superset
            of the queries compared to previously. That is, in cases
            when MySQL formerly issued an error that some column is
            ambiguous, the query now is handled correctly. This is due
            to the fact that MySQL now treats the common columns of
            <code class="literal">NATURAL</code> or <code class="literal">USING</code> joins
            as a single column, so when a query refers to such columns,
            the query compiler does not consider them as ambiguous.
          </p><p>
            Example:
          </p><pre class="programlisting">SELECT * FROM t1 NATURAL JOIN t2 WHERE b &gt; 1;
</pre><p>
            Previously, this query would produce an error <code class="literal">ERROR
            1052 (23000): Column 'b' in where clause is
            ambiguous</code>. Now the query produces the correct
            result:
          </p><pre class="programlisting">+------+------+------+
| b    | c    | y    |
+------+------+------+
|    4 |    2 |    3 |
+------+------+------+
</pre><p>
            One extension of MySQL compared to the SQL:2003 standard is
            that MySQL allows you to qualify the common (coalesced)
            columns of <code class="literal">NATURAL</code> or
            <code class="literal">USING</code> joins (just as previously), while
            the standard disallows that.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="index-hints"></a>12.2.8.2. Index Hint Syntax</h4></div></div></div><a class="indexterm" name="id2090827"></a><a class="indexterm" name="id2090836"></a><a class="indexterm" name="id2090848"></a><a class="indexterm" name="id2090857"></a><a class="indexterm" name="id2090866"></a><a class="indexterm" name="id2090875"></a><a class="indexterm" name="id2090884"></a><a class="indexterm" name="id2090893"></a><p>
        You can provide hints to give the optimizer information about
        how to choose indexes during query processing.
        <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>, describes the general syntax for
        specifying tables in a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
        statement. The syntax for an individual table, including that
        for index hints, looks like this:
      </p><pre class="programlisting"><em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] [<em class="replaceable"><code>index_hint</code></em>]

<em class="replaceable"><code>index_hint</code></em>:
    USE {INDEX|KEY} [FOR JOIN] (<em class="replaceable"><code>index_list</code></em>)
  | IGNORE {INDEX|KEY} [FOR JOIN] (<em class="replaceable"><code>index_list</code></em>)
  | FORCE {INDEX|KEY} [FOR JOIN] (<em class="replaceable"><code>index_list</code></em>)

<em class="replaceable"><code>index_list</code></em>:
    <em class="replaceable"><code>index_name</code></em> [, <em class="replaceable"><code>index_name</code></em>] ...
</pre><p>
        By specifying <code class="literal">USE INDEX
        (<em class="replaceable"><code>index_list</code></em>)</code>, you can tell
        MySQL to use only one of the named indexes to find rows in the
        table. The alternative syntax <code class="literal">IGNORE INDEX
        (<em class="replaceable"><code>index_list</code></em>)</code> can be used to
        tell MySQL to not use some particular index or indexes. These
        hints are useful if <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> shows
        that MySQL is using the wrong index from the list of possible
        indexes.
      </p><p>
        You can also use <code class="literal">FORCE INDEX</code>, which acts like
        <code class="literal">USE INDEX
        (<em class="replaceable"><code>index_list</code></em>)</code> but with the
        addition that a table scan is assumed to be
        <span class="emphasis"><em>very</em></span> expensive. In other words, a table
        scan is used only if there is no way to use one of the given
        indexes to find rows in the table.
      </p><p>
        Each hint requires the names of <span class="emphasis"><em>indexes</em></span>,
        not the names of columns. The name of a <code class="literal">PRIMARY
        KEY</code> is <code class="literal">PRIMARY</code>. To see the index
        names for a table, use <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax"><code class="literal">SHOW
        INDEX</code></a>.
      </p><p>
        An <em class="replaceable"><code>index_name</code></em> value need not be a
        full index name. It can be an unambiguous prefix of an index
        name. If a prefix is ambiguous, an error occurs.
      </p><p>
        <code class="literal">USE INDEX</code>, <code class="literal">IGNORE INDEX</code>,
        and <code class="literal">FORCE INDEX</code> affect only which indexes are
        used when MySQL decides how to find rows in the table and how to
        do the join. They do not affect whether an index is used when
        resolving an <code class="literal">ORDER BY</code> or <code class="literal">GROUP
        BY</code> clause. As of MySQL 5.0.40, the optional
        <code class="literal">FOR JOIN</code> clause can be added to make this
        explicit.
      </p><p>
        Examples:
      </p><pre class="programlisting">SELECT * FROM table1 USE INDEX (col1_index,col2_index)
  WHERE col1=1 AND col2=2 AND col3=3;

SELECT * FROM table1 IGNORE INDEX (col3_index)
  WHERE col1=1 AND col2=2 AND col3=3;
</pre><p>
        For <code class="literal">FULLTEXT</code> searches, index hints do not
        work before MySQL 5.0.74. As of 5.0.74, index hints work as
        follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For natural language mode searches, index hints are silently
            ignored. For example, <code class="literal">IGNORE INDEX(i)</code> is
            ignored with no warning and the index is still used.
          </p><p>
            For boolean mode searches, index hints are honored.
          </p></li></ul></div><p>
        Index hints are accepted but ignored for
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="union"></a>12.2.8.3. <code class="literal">UNION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2091158"></a><pre class="programlisting">SELECT ...
UNION [ALL | DISTINCT] SELECT ...
[UNION [ALL | DISTINCT] SELECT ...]
</pre><p>
        <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> is used to combine the
        result from multiple <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
        statements into a single result set.
      </p><p>
        The column names from the first
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement are used as the
        column names for the results returned. Selected columns listed
        in corresponding positions of each
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement should have the
        same data type. (For example, the first column selected by the
        first statement should have the same type as the first column
        selected by the other statements.)
      </p><p>
        If the data types of corresponding
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> columns do not match, the
        types and lengths of the columns in the
        <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> result take into account
        the values retrieved by all of the
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements. For example,
        consider the following:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT REPEAT('a',1) UNION SELECT REPEAT('b',10);</code></strong>
+---------------+
| REPEAT('a',1) |
+---------------+
| a             |
| bbbbbbbbbb    |
+---------------+
</pre><p>
        (In some earlier versions of MySQL, only the type and length
        from the first <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> would have
        been used and the second row would have been truncated to a
        length of 1.)
      </p><p>
        The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements are normal
        select statements, but with the following restrictions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Only the last <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
            statement can use <code class="literal">INTO OUTFILE</code>. (However,
            the entire <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> result is
            written to the file.)
          </p></li><li><p>
            <code class="literal">HIGH_PRIORITY</code> cannot be used with
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements that are
            part of a <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a>. If you
            specify it for the first
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, it has no effect. If
            you specify it for any subsequent
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements, a syntax
            error results.
          </p></li></ul></div><p>
        The default behavior for <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> is
        that duplicate rows are removed from the result. The optional
        <code class="literal">DISTINCT</code> keyword has no effect other than the
        default because it also specifies duplicate-row removal. With
        the optional <code class="literal">ALL</code> keyword, duplicate-row
        removal does not occur and the result includes all matching rows
        from all the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements.
      </p><p>
        You can mix <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION
        ALL</code></a> and <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION
        DISTINCT</code></a> in the same query. Mixed
        <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> types are treated such that
        a <code class="literal">DISTINCT</code> union overrides any
        <code class="literal">ALL</code> union to its left. A
        <code class="literal">DISTINCT</code> union can be produced explicitly by
        using <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION
        DISTINCT</code></a> or implicitly by using
        <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> with no following
        <code class="literal">DISTINCT</code> or <code class="literal">ALL</code> keyword.
      </p><p>
        To use an <code class="literal">ORDER BY</code> or
        <code class="literal">LIMIT</code> clause to sort or limit the entire
        <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> result, parenthesize the
        individual <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements and
        place the <code class="literal">ORDER BY</code> or
        <code class="literal">LIMIT</code> after the last one. The following
        example uses both clauses:
      </p><pre class="programlisting">(SELECT a FROM t1 WHERE a=10 AND B=1)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2)
ORDER BY a LIMIT 10;
</pre><p>
        This kind of <code class="literal">ORDER BY</code> cannot use column
        references that include a table name (that is, names in
        <em class="replaceable"><code>tbl_name</code></em>.<em class="replaceable"><code>col_name</code></em>
        format). Instead, provide a column alias in the first
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement and refer to the
        alias in the <code class="literal">ORDER BY</code>. (Alternatively, refer
        to the column in the <code class="literal">ORDER BY</code> using its
        column position. However, use of column positions is
        deprecated.)
      </p><p>
        Also, if a column to be sorted is aliased, the <code class="literal">ORDER
        BY</code> clause <span class="emphasis"><em>must</em></span> refer to the
        alias, not the column name. The first of the following
        statements will work, but the second will fail with an
        <code class="literal">Unknown column 'a' in 'order clause'</code> error:
      </p><pre class="programlisting">(SELECT a AS b FROM t) UNION (SELECT ...) ORDER BY b;
(SELECT a AS b FROM t) UNION (SELECT ...) ORDER BY a;
</pre><p>
        To apply <code class="literal">ORDER BY</code> or <code class="literal">LIMIT</code>
        to an individual <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, place
        the clause inside the parentheses that enclose the
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>:
      </p><pre class="programlisting">(SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10);
</pre><p>
        However, use of <code class="literal">ORDER BY</code> for individual
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements implies nothing
        about the order in which the rows appear in the final result
        because <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> by default produces
        an unordered set of rows. Therefore, the use of <code class="literal">ORDER
        BY</code> in this context is typically in conjunction with
        <code class="literal">LIMIT</code>, so that it is used to determine the
        subset of the selected rows to retrieve for the
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, even though it does not
        necessarily affect the order of those rows in the final
        <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> result. If <code class="literal">ORDER
        BY</code> appears without <code class="literal">LIMIT</code> in a
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, it is optimized away
        because it will have no effect anyway.
      </p><p>
        To cause rows in a <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> result
        to consist of the sets of rows retrieved by each
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> one after the other,
        select an additional column in each
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> to use as a sort column
        and add an <code class="literal">ORDER BY</code> following the last
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>:
      </p><pre class="programlisting">(SELECT 1 AS sort_col, col1a, col1b, ... FROM t1)
UNION
(SELECT 2, col2a, col2b, ... FROM t2) ORDER BY sort_col;
</pre><p>
        To additionally maintain sort order within individual
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> results, add a secondary
        column to the <code class="literal">ORDER BY</code> clause:
      </p><pre class="programlisting">(SELECT 1 AS sort_col, col1a, col1b, ... FROM t1)
UNION
(SELECT 2, col2a, col2b, ... FROM t2) ORDER BY sort_col, col1a;
</pre><p>
        Use of an additional column also enables you to determine which
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> each row comes from. Extra
        columns can provide other identifying information as well, such
        as a string that indicates a table name.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="subqueries"></a>12.2.9. Subquery Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#scalar-subqueries">12.2.9.1. The Subquery as Scalar Operand</a></span></dt><dt><span class="section"><a href="sql-syntax.html#comparisons-using-subqueries">12.2.9.2. Comparisons Using Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#any-in-some-subqueries">12.2.9.3. Subqueries with <code class="literal">ANY</code>, <code class="literal">IN</code>, and
        <code class="literal">SOME</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#all-subqueries">12.2.9.4. Subqueries with <code class="literal">ALL</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#row-subqueries">12.2.9.5. Row Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#exists-and-not-exists-subqueries">12.2.9.6. <code class="literal">EXISTS</code> and <code class="literal">NOT EXISTS</code></a></span></dt><dt><span class="section"><a href="sql-syntax.html#correlated-subqueries">12.2.9.7. Correlated Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#unnamed-views">12.2.9.8. Subqueries in the <code class="literal">FROM</code> clause</a></span></dt><dt><span class="section"><a href="sql-syntax.html#subquery-errors">12.2.9.9. Subquery Errors</a></span></dt><dt><span class="section"><a href="sql-syntax.html#optimizing-subqueries">12.2.9.10. Optimizing Subqueries</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rewriting-subqueries">12.2.9.11. Rewriting Subqueries as Joins</a></span></dt></dl></div><a class="indexterm" name="id2091790"></a><a class="indexterm" name="id2091799"></a><a class="indexterm" name="id2091808"></a><a class="indexterm" name="id2091817"></a><p>
      A subquery is a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement
      within another statement.
    </p><p>
      Starting with MySQL 4.1, all subquery forms and operations that
      the SQL standard requires are supported, as well as a few features
      that are MySQL-specific.
    </p><p>
      Here is an example of a subquery:
    </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);
</pre><p>
      In this example, <code class="literal">SELECT * FROM t1 ...</code> is the
      <span class="emphasis"><em>outer query</em></span> (or <span class="emphasis"><em>outer
      statement</em></span>), and <code class="literal">(SELECT column1 FROM
      t2)</code> is the <span class="emphasis"><em>subquery</em></span>. We say that
      the subquery is <span class="emphasis"><em>nested</em></span> within the outer
      query, and in fact it is possible to nest subqueries within other
      subqueries, to a considerable depth. A subquery must always appear
      within parentheses.
    </p><p>
      The main advantages of subqueries are:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          They allow queries that are <span class="emphasis"><em>structured</em></span> so
          that it is possible to isolate each part of a statement.
        </p></li><li><p>
          They provide alternative ways to perform operations that would
          otherwise require complex joins and unions.
        </p></li><li><p>
          They are, in many people's opinion, more readable than complex
          joins or unions. Indeed, it was the innovation of subqueries
          that gave people the original idea of calling the early SQL
          “<span class="quote">Structured Query Language.</span>”
        </p></li></ul></div><p>
      Here is an example statement that shows the major points about
      subquery syntax as specified by the SQL standard and supported in
      MySQL:
    </p><pre class="programlisting">DELETE FROM t1
WHERE s11 &gt; ANY
 (SELECT COUNT(*) /* no hint */ FROM t2
  WHERE NOT EXISTS
   (SELECT * FROM t3
    WHERE ROW(5*t2.s1,77)=
     (SELECT 50,11*s1 FROM t4 UNION SELECT 50,77 FROM
      (SELECT * FROM t5) AS t5)));
</pre><p>
      A subquery can return a scalar (a single value), a single row, a
      single column, or a table (one or more rows of one or more
      columns). These are called scalar, column, row, and table
      subqueries. Subqueries that return a particular kind of result
      often can be used only in certain contexts, as described in the
      following sections.
    </p><p>
      There are few restrictions on the type of statements in which
      subqueries can be used. A subquery can contain any of the keywords
      or clauses that an ordinary <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
      can contain: <code class="literal">DISTINCT</code>, <code class="literal">GROUP
      BY</code>, <code class="literal">ORDER BY</code>,
      <code class="literal">LIMIT</code>, joins, index hints,
      <a href="sql-syntax.html#union" title="12.2.8.3. UNION Syntax"><code class="literal">UNION</code></a> constructs, comments,
      functions, and so on.
    </p><p>
      One restriction is that a subquery's outer statement must be one
      of: <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>,
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>,
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>,
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>, or
      <a href="sql-syntax.html#do" title="12.2.3. DO Syntax"><code class="literal">DO</code></a>. Another restriction is that
      currently you cannot modify a table and select from the same table
      in a subquery. This applies to statements such as
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>,
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
      <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>,
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>, and (because subqueries can
      be used in the <code class="literal">SET</code> clause)
      <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
      INFILE</code></a>.
    </p><p>
      A more comprehensive discussion of restrictions on subquery use,
      including performance issues for certain forms of subquery syntax,
      is given in <a href="restrictions.html#subquery-restrictions" title="D.3. Restrictions on Subqueries">Section D.3, “Restrictions on Subqueries”</a>.
    </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
        MySQL Enterprise subscribers will find a discussion of this
        topic in the Knowledge Base article,
        <a href="https://kb.mysql.com/view.php?id=5932" target="_top"> How do
        Subqueries Work in MySQL?</a> For information about MySQL
        Enterprise see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="scalar-subqueries"></a>12.2.9.1. The Subquery as Scalar Operand</h4></div></div></div><p>
        In its simplest form, a subquery is a scalar subquery that
        returns a single value. A scalar subquery is a simple operand,
        and you can use it almost anywhere a single column value or
        literal is legal, and you can expect it to have those
        characteristics that all operands have: a data type, a length,
        an indication whether it can be <code class="literal">NULL</code>, and so
        on. For example:
      </p><pre class="programlisting">CREATE TABLE t1 (s1 INT, s2 CHAR(5) NOT NULL);
INSERT INTO t1 VALUES(100, 'abcde');
SELECT (SELECT s2 FROM t1);
</pre><p>
        The subquery in this <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
        returns a single value (<code class="literal">'abcde'</code>) that has a
        data type of <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">CHAR</code></a>, a length of 5,
        a character set and collation equal to the defaults in effect at
        <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> time, and an
        indication that the value in the column can be
        <code class="literal">NULL</code>. In fact, almost all subqueries can be
        <code class="literal">NULL</code>. If the table used in the example were
        empty, the value of the subquery would be
        <code class="literal">NULL</code>.
      </p><p>
        There are a few contexts in which a scalar subquery cannot be
        used. If a statement allows only a literal value, you cannot use
        a subquery. For example, <code class="literal">LIMIT</code> requires
        literal integer arguments, and
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> requires a literal string file name. You cannot
        use subqueries to supply these values.
      </p><p>
        When you see examples in the following sections that contain the
        rather spartan construct <code class="literal">(SELECT column1 FROM
        t1)</code>, imagine that your own code contains much more
        diverse and complex constructions.
      </p><p>
        Suppose that we make two tables:
      </p><pre class="programlisting">CREATE TABLE t1 (s1 INT);
INSERT INTO t1 VALUES (1);
CREATE TABLE t2 (s1 INT);
INSERT INTO t2 VALUES (2);
</pre><p>
        Then perform a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>:
      </p><pre class="programlisting">SELECT (SELECT s1 FROM t2) FROM t1;
</pre><p>
        The result is <code class="literal">2</code> because there is a row in
        <code class="literal">t2</code> containing a column <code class="literal">s1</code>
        that has a value of <code class="literal">2</code>.
      </p><p>
        A scalar subquery can be part of an expression, but remember the
        parentheses, even if the subquery is an operand that provides an
        argument for a function. For example:
      </p><pre class="programlisting">SELECT UPPER((SELECT s1 FROM t1)) FROM t2;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="comparisons-using-subqueries"></a>12.2.9.2. Comparisons Using Subqueries</h4></div></div></div><p>
        The most common use of a subquery is in the form:
      </p><pre class="programlisting"><em class="replaceable"><code>non_subquery_operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> (<em class="replaceable"><code>subquery</code></em>)
</pre><p>
        Where <em class="replaceable"><code>comparison_operator</code></em> is one of
        these operators:
      </p><pre class="programlisting">=  &gt;  &lt;  &gt;=  &lt;=  &lt;&gt;  !=  &lt;=&gt;
</pre><p>
        For example:
      </p><pre class="programlisting">... 'a' = (SELECT column1 FROM t1)
</pre><p>
        At one time the only legal place for a subquery was on the right
        side of a comparison, and you might still find some old DBMSs
        that insist on this.
      </p><p>
        Here is an example of a common-form subquery comparison that you
        cannot do with a join. It finds all the rows in table
        <code class="literal">t1</code> for which the <code class="literal">column1</code>
        value is equal to a maximum value in table
        <code class="literal">t2</code>:
      </p><pre class="programlisting">SELECT * FROM t1
WHERE column1 = (SELECT MAX(column2) FROM t2);
</pre><p>
        Here is another example, which again is impossible with a join
        because it involves aggregating for one of the tables. It finds
        all rows in table <code class="literal">t1</code> containing a value that
        occurs twice in a given column:
      </p><pre class="programlisting">SELECT * FROM t1 AS t
WHERE 2 = (SELECT COUNT(*) FROM t1 WHERE t1.id = t.id);
</pre><p>
        For a comparison of the subquery to a scalar, the subquery must
        return a scalar. For a comparison of the subquery to a row
        constructor, the subquery must be a row subquery that returns a
        row with the same number of values as the row constructor. See
        <a href="sql-syntax.html#row-subqueries" title="12.2.9.5. Row Subqueries">Section 12.2.9.5, “Row Subqueries”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="any-in-some-subqueries"></a>12.2.9.3. Subqueries with <code class="literal">ANY</code>, <code class="literal">IN</code>, and
        <code class="literal">SOME</code></h4></div></div></div><a class="indexterm" name="id2092417"></a><a class="indexterm" name="id2092430"></a><a class="indexterm" name="id2092438"></a><a class="indexterm" name="id2092447"></a><p>
        Syntax:
      </p><pre class="programlisting"><em class="replaceable"><code>operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> ANY (<em class="replaceable"><code>subquery</code></em>)
<em class="replaceable"><code>operand</code></em> IN (<em class="replaceable"><code>subquery</code></em>)
<em class="replaceable"><code>operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> SOME (<em class="replaceable"><code>subquery</code></em>)
</pre><p>
        The <code class="literal">ANY</code> keyword, which must follow a
        comparison operator, means “<span class="quote">return <code class="literal">TRUE</code>
        if the comparison is <code class="literal">TRUE</code> for
        <code class="literal">ANY</code> of the values in the column that the
        subquery returns.</span>” For example:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &gt; ANY (SELECT s1 FROM t2);
</pre><p>
        Suppose that there is a row in table <code class="literal">t1</code>
        containing <code class="literal">(10)</code>. The expression is
        <code class="literal">TRUE</code> if table <code class="literal">t2</code> contains
        <code class="literal">(21,14,7)</code> because there is a value
        <code class="literal">7</code> in <code class="literal">t2</code> that is less than
        <code class="literal">10</code>. The expression is
        <code class="literal">FALSE</code> if table <code class="literal">t2</code> contains
        <code class="literal">(20,10)</code>, or if table <code class="literal">t2</code> is
        empty. The expression is <span class="emphasis"><em>unknown</em></span> if table
        <code class="literal">t2</code> contains
        <code class="literal">(NULL,NULL,NULL)</code>.
      </p><p>
        When used with a subquery, the word <code class="literal">IN</code> is an
        alias for <code class="literal">= ANY</code>. Thus, these two statements
        are the same:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 = ANY (SELECT s1 FROM t2);
SELECT s1 FROM t1 WHERE s1 IN    (SELECT s1 FROM t2);
</pre><p>
        <code class="literal">IN</code> and <code class="literal">= ANY</code> are not
        synonyms when used with an expression list.
        <code class="literal">IN</code> can take an expression list, but
        <code class="literal">= ANY</code> cannot. See
        <a href="functions.html#comparison-operators" title="11.2.3. Comparison Functions and Operators">Section 11.2.3, “Comparison Functions and Operators”</a>.
      </p><p>
        <code class="literal">NOT IN</code> is not an alias for <code class="literal">&lt;&gt;
        ANY</code>, but for <code class="literal">&lt;&gt; ALL</code>. See
        <a href="sql-syntax.html#all-subqueries" title="12.2.9.4. Subqueries with ALL">Section 12.2.9.4, “Subqueries with <code class="literal">ALL</code>”</a>.
      </p><p>
        The word <code class="literal">SOME</code> is an alias for
        <code class="literal">ANY</code>. Thus, these two statements are the same:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &lt;&gt; ANY  (SELECT s1 FROM t2);
SELECT s1 FROM t1 WHERE s1 &lt;&gt; SOME (SELECT s1 FROM t2);
</pre><p>
        Use of the word <code class="literal">SOME</code> is rare, but this
        example shows why it might be useful. To most people's ears, the
        English phrase “<span class="quote">a is not equal to any b</span>” means
        “<span class="quote">there is no b which is equal to a,</span>” but that is
        not what is meant by the SQL syntax. The syntax means
        “<span class="quote">there is some b to which a is not equal.</span>” Using
        <code class="literal">&lt;&gt; SOME</code> instead helps ensure that
        everyone understands the true meaning of the query.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="all-subqueries"></a>12.2.9.4. Subqueries with <code class="literal">ALL</code></h4></div></div></div><a class="indexterm" name="id2092766"></a><a class="indexterm" name="id2092778"></a><p>
        Syntax:
      </p><pre class="programlisting"><em class="replaceable"><code>operand</code></em> <em class="replaceable"><code>comparison_operator</code></em> ALL (<em class="replaceable"><code>subquery</code></em>)
</pre><p>
        The word <code class="literal">ALL</code>, which must follow a comparison
        operator, means “<span class="quote">return <code class="literal">TRUE</code> if the
        comparison is <code class="literal">TRUE</code> for <code class="literal">ALL</code>
        of the values in the column that the subquery returns.</span>”
        For example:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &gt; ALL (SELECT s1 FROM t2);
</pre><p>
        Suppose that there is a row in table <code class="literal">t1</code>
        containing <code class="literal">(10)</code>. The expression is
        <code class="literal">TRUE</code> if table <code class="literal">t2</code> contains
        <code class="literal">(-5,0,+5)</code> because <code class="literal">10</code> is
        greater than all three values in <code class="literal">t2</code>. The
        expression is <code class="literal">FALSE</code> if table
        <code class="literal">t2</code> contains
        <code class="literal">(12,6,NULL,-100)</code> because there is a single
        value <code class="literal">12</code> in table <code class="literal">t2</code> that
        is greater than <code class="literal">10</code>. The expression is
        <span class="emphasis"><em>unknown</em></span> (that is, <code class="literal">NULL</code>)
        if table <code class="literal">t2</code> contains
        <code class="literal">(0,NULL,1)</code>.
      </p><p>
        Finally, if table <code class="literal">t2</code> is empty, the result is
        <code class="literal">TRUE</code>. So, the following statement is
        <code class="literal">TRUE</code> when table <code class="literal">t2</code> is
        empty:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE 1 &gt; ALL (SELECT s1 FROM t2);
</pre><p>
        But this statement is <code class="literal">NULL</code> when table
        <code class="literal">t2</code> is empty:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE 1 &gt; (SELECT s1 FROM t2);
</pre><p>
        In addition, the following statement is <code class="literal">NULL</code>
        when table <code class="literal">t2</code> is empty:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE 1 &gt; ALL (SELECT MAX(s1) FROM t2);
</pre><p>
        In general, <span class="emphasis"><em>tables containing <code class="literal">NULL</code>
        values</em></span> and <span class="emphasis"><em>empty tables</em></span> are
        “<span class="quote">edge cases.</span>” When writing subquery code, always
        consider whether you have taken those two possibilities into
        account.
      </p><p>
        <code class="literal">NOT IN</code> is an alias for <code class="literal">&lt;&gt;
        ALL</code>. Thus, these two statements are the same:
      </p><pre class="programlisting">SELECT s1 FROM t1 WHERE s1 &lt;&gt; ALL (SELECT s1 FROM t2);
SELECT s1 FROM t1 WHERE s1 NOT IN (SELECT s1 FROM t2);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="row-subqueries"></a>12.2.9.5. Row Subqueries</h4></div></div></div><a class="indexterm" name="id2093077"></a><a class="indexterm" name="id2093086"></a><a class="indexterm" name="id2093095"></a><p>
        The discussion to this point has been of scalar or column
        subqueries; that is, subqueries that return a single value or a
        column of values. A <span class="emphasis"><em>row subquery</em></span> is a
        subquery variant that returns a single row and can thus return
        more than one column value. Legal operators for row subquery
        comparisons are:
      </p><pre class="programlisting">=  &gt;  &lt;  &gt;=  &lt;=  &lt;&gt;  !=  &lt;=&gt;
</pre><p>
        Here are two examples:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE (1,2) = (SELECT column1, column2 FROM t2);
SELECT * FROM t1 WHERE ROW(1,2) = (SELECT column1, column2 FROM t2);
</pre><p>
        The queries here are both <code class="literal">TRUE</code> if table
        <code class="literal">t2</code> has a row where <code class="literal">column1 =
        1</code> and <code class="literal">column2 = 2</code>.
      </p><p>
        The expressions <code class="literal">(1,2)</code> and
        <code class="literal">ROW(1,2)</code> are sometimes called <em class="firstterm">row
        constructors</em>. The two are equivalent. The row
        constructor and the row returned by the subquery must contain
        the same number of values.
      </p><p>
        Row constructors are legal in other contexts as well. For
        example, the following two statements are semantically
        equivalent (although the first one cannot be optimized until
        MySQL 5.0.26):
      </p><pre class="programlisting">SELECT * FROM t1 WHERE (column1,column2) = (1,1);
SELECT * FROM t1 WHERE column1 = 1 AND column2 = 1;
</pre><p>
        The normal use of row constructors is for comparisons with
        subqueries that return two or more columns. For example, the
        following query answers the request, “<span class="quote">find all rows in
        table <code class="literal">t1</code> that also exist in table
        <code class="literal">t2</code></span>”:
      </p><pre class="programlisting">SELECT column1,column2,column3
       FROM t1
       WHERE (column1,column2,column3) IN
             (SELECT column1,column2,column3 FROM t2);
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="exists-and-not-exists-subqueries"></a>12.2.9.6. <code class="literal">EXISTS</code> and <code class="literal">NOT EXISTS</code></h4></div></div></div><a class="indexterm" name="id2093237"></a><a class="indexterm" name="id2093249"></a><a class="indexterm" name="id2093262"></a><a class="indexterm" name="id2093274"></a><p>
        If a subquery returns any rows at all, <code class="literal">EXISTS
        <em class="replaceable"><code>subquery</code></em></code> is
        <code class="literal">TRUE</code>, and <code class="literal">NOT EXISTS
        <em class="replaceable"><code>subquery</code></em></code> is
        <code class="literal">FALSE</code>. For example:
      </p><pre class="programlisting">SELECT column1 FROM t1 WHERE EXISTS (SELECT * FROM t2);
</pre><p>
        Traditionally, an <code class="literal">EXISTS</code> subquery starts with
        <code class="literal">SELECT *</code>, but it could begin with
        <code class="literal">SELECT 5</code> or <code class="literal">SELECT column1</code>
        or anything at all. MySQL ignores the
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> list in such a subquery,
        so it makes no difference.
      </p><p>
        For the preceding example, if <code class="literal">t2</code> contains any
        rows, even rows with nothing but <code class="literal">NULL</code> values,
        the <code class="literal">EXISTS</code> condition is
        <code class="literal">TRUE</code>. This is actually an unlikely example
        because a <code class="literal">[NOT] EXISTS</code> subquery almost always
        contains correlations. Here are some more realistic examples:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            What kind of store is present in one or more cities?
          </p><pre class="programlisting">SELECT DISTINCT store_type FROM stores
  WHERE EXISTS (SELECT * FROM cities_stores
                WHERE cities_stores.store_type = stores.store_type);
</pre></li><li><p>
            What kind of store is present in no cities?
          </p><pre class="programlisting">SELECT DISTINCT store_type FROM stores
  WHERE NOT EXISTS (SELECT * FROM cities_stores
                    WHERE cities_stores.store_type = stores.store_type);
</pre></li><li><p>
            What kind of store is present in all cities?
          </p><pre class="programlisting">SELECT DISTINCT store_type FROM stores s1
  WHERE NOT EXISTS (
    SELECT * FROM cities WHERE NOT EXISTS (
      SELECT * FROM cities_stores
       WHERE cities_stores.city = cities.city
       AND cities_stores.store_type = stores.store_type));
</pre></li></ul></div><p>
        The last example is a double-nested <code class="literal">NOT
        EXISTS</code> query. That is, it has a <code class="literal">NOT
        EXISTS</code> clause within a <code class="literal">NOT EXISTS</code>
        clause. Formally, it answers the question “<span class="quote">does a city
        exist with a store that is not in
        <code class="literal">Stores</code></span>”? But it is easier to say that
        a nested <code class="literal">NOT EXISTS</code> answers the question
        “<span class="quote">is <em class="replaceable"><code>x</code></em> <code class="literal">TRUE</code>
        for all <em class="replaceable"><code>y</code></em>?</span>”
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="correlated-subqueries"></a>12.2.9.7. Correlated Subqueries</h4></div></div></div><a class="indexterm" name="id2093503"></a><a class="indexterm" name="id2093512"></a><p>
        A <span class="emphasis"><em>correlated subquery</em></span> is a subquery that
        contains a reference to a table that also appears in the outer
        query. For example:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = ANY
       (SELECT column1 FROM t2 WHERE t2.column2 = t1.column2);
</pre><p>
        Notice that the subquery contains a reference to a column of
        <code class="literal">t1</code>, even though the subquery's
        <code class="literal">FROM</code> clause does not mention a table
        <code class="literal">t1</code>. So, MySQL looks outside the subquery, and
        finds <code class="literal">t1</code> in the outer query.
      </p><p>
        Suppose that table <code class="literal">t1</code> contains a row where
        <code class="literal">column1 = 5</code> and <code class="literal">column2 =
        6</code>; meanwhile, table <code class="literal">t2</code> contains a
        row where <code class="literal">column1 = 5</code> and <code class="literal">column2 =
        7</code>. The simple expression <code class="literal">... WHERE column1 =
        ANY (SELECT column1 FROM t2)</code> would be
        <code class="literal">TRUE</code>, but in this example, the
        <code class="literal">WHERE</code> clause within the subquery is
        <code class="literal">FALSE</code> (because <code class="literal">(5,6)</code> is
        not equal to <code class="literal">(5,7)</code>), so the subquery as a
        whole is <code class="literal">FALSE</code>.
      </p><p>
        <span class="bold"><strong>Scoping rule:</strong></span> MySQL evaluates
        from inside to outside. For example:
      </p><pre class="programlisting">SELECT column1 FROM t1 AS x
  WHERE x.column1 = (SELECT column1 FROM t2 AS x
    WHERE x.column1 = (SELECT column1 FROM t3
      WHERE x.column2 = t3.column1));
</pre><p>
        In this statement, <code class="literal">x.column2</code> must be a column
        in table <code class="literal">t2</code> because <code class="literal">SELECT column1
        FROM t2 AS x ...</code> renames <code class="literal">t2</code>. It is
        not a column in table <code class="literal">t1</code> because
        <code class="literal">SELECT column1 FROM t1 ...</code> is an outer query
        that is <span class="emphasis"><em>farther out</em></span>.
      </p><p>
        For subqueries in <code class="literal">HAVING</code> or <code class="literal">ORDER
        BY</code> clauses, MySQL also looks for column names in the
        outer select list.
      </p><p>
        For certain cases, a correlated subquery is optimized. For
        example:
      </p><pre class="programlisting"><em class="replaceable"><code>val</code></em> IN (SELECT <em class="replaceable"><code>key_val</code></em> FROM <em class="replaceable"><code>tbl_name</code></em> WHERE <em class="replaceable"><code>correlated_condition</code></em>)
</pre><p>
        Otherwise, they are inefficient and likely to be slow. Rewriting
        the query as a join might improve performance.
      </p><p>
        Aggregate functions in correlated subqueries may contain outer
        references, provided the function contains nothing but outer
        references, and provided the function is not contained in
        another function or expression.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="unnamed-views"></a>12.2.9.8. Subqueries in the <code class="literal">FROM</code> clause</h4></div></div></div><a class="indexterm" name="id2093773"></a><a class="indexterm" name="id2093782"></a><p>
        Subqueries are legal in a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
        statement's <code class="literal">FROM</code> clause. The actual syntax
        is:
      </p><pre class="programlisting">SELECT ... FROM (<em class="replaceable"><code>subquery</code></em>) [AS] <em class="replaceable"><code>name</code></em> ...
</pre><p>
        The <code class="literal">[AS] <em class="replaceable"><code>name</code></em></code>
        clause is mandatory, because every table in a
        <code class="literal">FROM</code> clause must have a name. Any columns in
        the <em class="replaceable"><code>subquery</code></em> select list must have
        unique names.
      </p><p>
        For the sake of illustration, assume that you have this table:
      </p><pre class="programlisting">CREATE TABLE t1 (s1 INT, s2 CHAR(5), s3 FLOAT);
</pre><p>
        Here is how to use a subquery in the <code class="literal">FROM</code>
        clause, using the example table:
      </p><pre class="programlisting">INSERT INTO t1 VALUES (1,'1',1.0);
INSERT INTO t1 VALUES (2,'2',2.0);
SELECT sb1,sb2,sb3
       FROM (SELECT s1 AS sb1, s2 AS sb2, s3*2 AS sb3 FROM t1) AS sb
       WHERE sb1 &gt; 1;
</pre><p>
        Result: <code class="literal">2, '2', 4.0</code>.
      </p><p>
        Here is another example: Suppose that you want to know the
        average of a set of sums for a grouped table. This does not
        work:
      </p><pre class="programlisting">SELECT AVG(SUM(column1)) FROM t1 GROUP BY column1;
</pre><p>
        However, this query provides the desired information:
      </p><pre class="programlisting">SELECT AVG(sum_column1)
       FROM (SELECT SUM(column1) AS sum_column1
             FROM t1 GROUP BY column1) AS t1;
</pre><p>
        Notice that the column name used within the subquery
        (<code class="literal">sum_column1</code>) is recognized in the outer
        query.
      </p><p>
        Subqueries in the <code class="literal">FROM</code> clause can return a
        scalar, column, row, or table. Subqueries in the
        <code class="literal">FROM</code> clause cannot be correlated subqueries,
        unless used within the <code class="literal">ON</code> clause of a
        <code class="literal">JOIN</code> operation.
      </p><p>
        Subqueries in the <code class="literal">FROM</code> clause are executed
        even for the <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> statement
        (that is, derived temporary tables are built). This occurs
        because upper-level queries need information about all tables
        during the optimization phase, and the table represented by a
        subquery in the <code class="literal">FROM</code> clause is unavailable
        unless the subquery is executed.
      </p><p>
        It is possible under certain circumstances to modify table data
        using <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        SELECT</code></a>. This can occur if the outer query accesses any
        tables and an inner query invokes a stored function that changes
        one or more rows of a table. For example, suppose there are two
        tables <code class="literal">t1</code> and <code class="literal">t2</code> in
        database <code class="literal">d1</code>, created as shown here:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE DATABASE d1;</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>USE d1;</code></strong>
Database changed

mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (c1 INT);</code></strong>
Query OK, 0 rows affected (0.15 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (c1 INT);</code></strong>
Query OK, 0 rows affected (0.08 sec)
</pre><p>

        Now we create a stored function <code class="literal">f1</code> which
        modifies <code class="literal">t2</code>:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DELIMITER //</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE FUNCTION f1(p1 INT) RETURNS INT</code></strong>
mysql&gt;   <strong class="userinput"><code>BEGIN</code></strong>
mysql&gt;     <strong class="userinput"><code>INSERT INTO t2 VALUES (p1);</code></strong>
mysql&gt;     <strong class="userinput"><code>RETURN p1;</code></strong>
mysql&gt;   <strong class="userinput"><code>END //</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>DELIMITER ;</code></strong>
</pre><p>

        Referencing the function directly in an
        <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        SELECT</code></a> does not have any effect on
        <code class="literal">t2</code>, as shown here:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
Empty set (0.00 sec)

mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT f1(5);</code></strong>
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
|  1 | SIMPLE      | NULL  | NULL | NULL          | NULL | NULL    | NULL | NULL | No tables used |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
Empty set (0.00 sec)
</pre><p>

        This is because the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
        statement did not reference any tables, as can be seen in the
        <code class="literal">table</code> and <code class="literal">Extra</code> columns of
        the output. This is also true of the following nested
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT NOW() AS a1, (SELECT f1(5)) AS a2;</code></strong>
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
|  1 | PRIMARY     | NULL  | NULL | NULL          | NULL | NULL    | NULL | NULL | No tables used |
+----+-------------+-------+------+---------------+------+---------+------+------+----------------+
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+-------+------+------------------------------------------+
| Level | Code | Message                                  |
+-------+------+------------------------------------------+
| Note  | 1249 | Select 2 was reduced during optimization |
+-------+------+------------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
Empty set (0.00 sec)
</pre><p>

        However, if the outer <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
        references any tables, then the optimizer executes the statement
        in the subquery as well:

</p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN SELECT * FROM t1 AS a1, (SELECT f1(5)) AS a2;</code></strong>
+----+-------------+------------+--------+---------------+------+---------+------+------+---------------------+
| id | select_type | table      | type   | possible_keys | key  | key_len | ref  | rows | Extra               |
+----+-------------+------------+--------+---------------+------+---------+------+------+---------------------+
|  1 | PRIMARY     | a1         | system | NULL          | NULL | NULL    | NULL |    0 | const row not found |
|  1 | PRIMARY     | &lt;derived2&gt; | system | NULL          | NULL | NULL    | NULL |    1 |                     |
|  2 | DERIVED     | NULL       | NULL   | NULL          | NULL | NULL    | NULL | NULL | No tables used      |
+----+-------------+------------+--------+---------------+------+---------+------+------+---------------------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t2;</code></strong>
+------+
| c1   |
+------+
|    5 |
+------+
1 row in set (0.00 sec)
</pre><p>
      </p><p>
        This also means that an
        <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
        SELECT</code></a> statement such as the one shown here may take a
        long time to execute:

</p><pre class="programlisting">EXPLAIN SELECT * FROM t1 AS a1, (SELECT BENCHMARK(1000000, MD5(NOW())));
</pre><p>

        This is because the <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a>
        function is executed once for each row in <code class="literal">t1</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="subquery-errors"></a>12.2.9.9. Subquery Errors</h4></div></div></div><a class="indexterm" name="id2094275"></a><a class="indexterm" name="id2094288"></a><p>
        There are some errors that apply only to subqueries. This
        section describes them.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Unsupported subquery syntax:
          </p><pre class="programlisting">ERROR 1235 (ER_NOT_SUPPORTED_YET)
SQLSTATE = 42000
Message = "This version of MySQL does not yet support
'LIMIT &amp; IN/ALL/ANY/SOME subquery'"
</pre><p>
            This means that statements of the following form do not work
            yet:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE s1 IN (SELECT s2 FROM t2 ORDER BY s1 LIMIT 1)
</pre></li><li><p>
            Incorrect number of columns from subquery:
          </p><pre class="programlisting">ERROR 1241 (ER_OPERAND_COL)
SQLSTATE = 21000
Message = "Operand should contain 1 column(s)"
</pre><p>
            This error occurs in cases like this:
          </p><pre class="programlisting">SELECT (SELECT column1, column2 FROM t2) FROM t1;
</pre><p>
            You may use a subquery that returns multiple columns, if the
            purpose is comparison. In other contexts, the subquery must
            be a scalar operand. See <a href="sql-syntax.html#row-subqueries" title="12.2.9.5. Row Subqueries">Section 12.2.9.5, “Row Subqueries”</a>.
          </p></li><li><p>
            Incorrect number of rows from subquery:
          </p><pre class="programlisting">ERROR 1242 (ER_SUBSELECT_NO_1_ROW)
SQLSTATE = 21000
Message = "Subquery returns more than 1 row"
</pre><p>
            This error occurs for statements where the subquery returns
            more than one row. Consider the following example:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);
</pre><p>
            If <code class="literal">SELECT column1 FROM t2</code> returns just
            one row, the previous query will work. If the subquery
            returns more than one row, error 1242 will occur. In that
            case, the query should be rewritten as:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE column1 = ANY (SELECT column1 FROM t2);
</pre></li><li><p>
            Incorrectly used table in subquery:
          </p><pre class="programlisting">Error 1093 (ER_UPDATE_TABLE_USED)
SQLSTATE = HY000
Message = "You can't specify target table 'x'
for update in FROM clause"
</pre><p>
            This error occurs in cases such as the following:
          </p><pre class="programlisting">UPDATE t1 SET column2 = (SELECT MAX(column1) FROM t1);
</pre><p>
            You can use a subquery for assignment within an
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement because
            subqueries are legal in
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> and
            <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements as well as
            in <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements.
            However, you cannot use the same table (in this case, table
            <code class="literal">t1</code>) for both the subquery's
            <code class="literal">FROM</code> clause and the update target.
          </p></li></ul></div><p>
        For transactional storage engines, the failure of a subquery
        causes the entire statement to fail. For nontransactional
        storage engines, data modifications made before the error was
        encountered are preserved.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="optimizing-subqueries"></a>12.2.9.10. Optimizing Subqueries</h4></div></div></div><p>
        Development is ongoing, so no optimization tip is reliable for
        the long term. The following list provides some interesting
        tricks that you might want to play with:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            Use subquery clauses that affect the number or order of the
            rows in the subquery. For example:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE t1.column1 IN
  (SELECT column1 FROM t2 ORDER BY column1);
SELECT * FROM t1 WHERE t1.column1 IN
  (SELECT DISTINCT column1 FROM t2);
SELECT * FROM t1 WHERE EXISTS
  (SELECT * FROM t2 LIMIT 1);
</pre></li><li><p>
            Replace a join with a subquery. For example, try this:
          </p><pre class="programlisting">SELECT DISTINCT column1 FROM t1 WHERE t1.column1 IN (
  SELECT column1 FROM t2);
</pre><p>
            Instead of this:
          </p><pre class="programlisting">SELECT DISTINCT t1.column1 FROM t1, t2
  WHERE t1.column1 = t2.column1;
</pre></li><li><p>
            Some subqueries can be transformed to joins for
            compatibility with older versions of MySQL that do not
            support subqueries. However, in some cases, converting a
            subquery to a join may improve performance. See
            <a href="sql-syntax.html#rewriting-subqueries" title="12.2.9.11. Rewriting Subqueries as Joins">Section 12.2.9.11, “Rewriting Subqueries as Joins”</a>.
          </p></li><li><p>
            Move clauses from outside to inside the subquery. For
            example, use this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE s1 IN (SELECT s1 FROM t1 UNION ALL SELECT s1 FROM t2);
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE s1 IN (SELECT s1 FROM t1) OR s1 IN (SELECT s1 FROM t2);
</pre><p>
            For another example, use this query:
          </p><pre class="programlisting">SELECT (SELECT column1 + 5 FROM t1) FROM t2;
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT (SELECT column1 FROM t1) + 5 FROM t2;
</pre></li><li><p>
            Use a row subquery instead of a correlated subquery. For
            example, use this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE (column1,column2) IN (SELECT column1,column2 FROM t2);
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT * FROM t1
  WHERE EXISTS (SELECT * FROM t2 WHERE t2.column1=t1.column1
  AND t2.column2=t1.column2);
</pre></li><li><p>
            Use <code class="literal">NOT (a = ANY (...))</code> rather than
            <code class="literal">a &lt;&gt; ALL (...)</code>.
          </p></li><li><p>
            Use <code class="literal">x = ANY (<em class="replaceable"><code>table containing
            (1,2)</code></em>)</code> rather than <code class="literal">x=1 OR
            x=2</code>.
          </p></li><li><p>
            Use <code class="literal">= ANY</code> rather than
            <code class="literal">EXISTS</code>.
          </p></li><li><p>
            For uncorrelated subqueries that always return one row,
            <code class="literal">IN</code> is always slower than
            <code class="literal">=</code>. For example, use this query:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE t1.<em class="replaceable"><code>col_name</code></em>
  = (SELECT a FROM t2 WHERE b = <em class="replaceable"><code>some_const</code></em>);
</pre><p>
            Instead of this query:
          </p><pre class="programlisting">SELECT * FROM t1 WHERE t1.<em class="replaceable"><code>col_name</code></em>
  IN (SELECT a FROM t2 WHERE b = <em class="replaceable"><code>some_const</code></em>);
</pre></li></ul></div><p>
        These tricks might cause programs to go faster or slower. Using
        MySQL facilities like the
        <a href="functions.html#function_benchmark"><code class="literal">BENCHMARK()</code></a> function, you can get
        an idea about what helps in your own situation. See
        <a href="functions.html#information-functions" title="11.10.3. Information Functions">Section 11.10.3, “Information Functions”</a>.
      </p><p>
        Some optimizations that MySQL itself makes are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            MySQL executes uncorrelated subqueries only once. Use
            <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> to make sure that a
            given subquery really is uncorrelated.
          </p></li><li><p>
            MySQL rewrites <code class="literal">IN</code>,
            <code class="literal">ALL</code>, <code class="literal">ANY</code>, and
            <code class="literal">SOME</code> subqueries in an attempt to take
            advantage of the possibility that the select-list columns in
            the subquery are indexed.
          </p></li><li><p>
            MySQL replaces subqueries of the following form with an
            index-lookup function, which
            <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> describes as a
            special join type
            (<a href="optimization.html#jointype_unique_subquery"><code class="literal">unique_subquery</code></a> or
            <a href="optimization.html#jointype_index_subquery"><code class="literal">index_subquery</code></a>):
          </p><pre class="programlisting">... IN (SELECT <em class="replaceable"><code>indexed_column</code></em> FROM <em class="replaceable"><code>single_table</code></em> ...)
</pre></li><li><p>
            MySQL enhances expressions of the following form with an
            expression involving <a href="functions.html#function_min"><code class="literal">MIN()</code></a> or
            <a href="functions.html#function_max"><code class="literal">MAX()</code></a>, unless
            <code class="literal">NULL</code> values or empty sets are involved:
          </p><pre class="programlisting"><em class="replaceable"><code>value</code></em> {ALL|ANY|SOME} {&gt; | &lt; | &gt;= | &lt;=} (<em class="replaceable"><code>uncorrelated subquery</code></em>)
</pre><p>
            For example, this <code class="literal">WHERE</code> clause:
          </p><pre class="programlisting">WHERE 5 &gt; ALL (SELECT x FROM t)
</pre><p>
            might be treated by the optimizer like this:
          </p><pre class="programlisting">WHERE 5 &gt; (SELECT MAX(x) FROM t)
</pre></li></ul></div><p>
        See also the MySQL Internals Manual chapter
        <a href="http://forge.mysql.com/wiki/MySQL_Internals_Transformations" target="_top">How
        MySQL Transforms Subqueries</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="rewriting-subqueries"></a>12.2.9.11. Rewriting Subqueries as Joins</h4></div></div></div><a class="indexterm" name="id2094924"></a><p>
        Although MySQL 5.0 supports subqueries (see
        <a href="sql-syntax.html#subqueries" title="12.2.9. Subquery Syntax">Section 12.2.9, “Subquery Syntax”</a>), it is still true that there are
        sometimes other ways to test membership in a set of values. It
        is also true that on some occasions, it is not only possible to
        rewrite a query without a subquery, but it can be more efficient
        to make use of some of these techniques rather than to use
        subqueries. One of these is the <code class="literal">IN()</code>
        construct:
      </p><p>
        For example, this query:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE id IN (SELECT id FROM t2);
</pre><p>
        Can be rewritten as:
      </p><pre class="programlisting">SELECT DISTINCT t1.* FROM t1, t2 WHERE t1.id=t2.id;
</pre><p>
        The queries:
      </p><pre class="programlisting">SELECT * FROM t1 WHERE id NOT IN (SELECT id FROM t2);
SELECT * FROM t1 WHERE NOT EXISTS (SELECT id FROM t2 WHERE t1.id=t2.id);
</pre><p>
        Can be rewritten as:
      </p><pre class="programlisting">SELECT table1.*
  FROM table1 LEFT JOIN table2 ON table1.id=table2.id
  WHERE table2.id IS NULL;
</pre><p>
        A <code class="literal">LEFT [OUTER] JOIN</code> can be faster than an
        equivalent subquery because the server might be able to optimize
        it better — a fact that is not specific to MySQL Server
        alone. Prior to SQL-92, outer joins did not exist, so subqueries
        were the only way to do certain things. Today, MySQL Server and
        many other modern database systems offer a wide range of outer
        join types.
      </p><p>
        MySQL Server supports multiple-table
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements that can be
        used to efficiently delete rows based on information from one
        table or even from many tables at the same time. Multiple-table
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements are also
        supported. See <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax">Section 12.2.2, “<code class="literal">DELETE</code> Syntax”</a>, and
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax">Section 12.2.11, “<code class="literal">UPDATE</code> Syntax”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="truncate"></a>12.2.10. <code class="literal">TRUNCATE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2095063"></a><pre class="programlisting">TRUNCATE [TABLE] <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE TABLE</code></a>
      empties a table completely. Logically, this is equivalent to a
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement that deletes all
      rows, but there are practical differences under some
      circumstances.
    </p><p>
      For an <code class="literal">InnoDB</code> table before version 5.0.3,
      <code class="literal">InnoDB</code> processes
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE TABLE</code></a>
      by deleting rows one by one. As of MySQL 5.0.3, row by row
      deletion is used only if there are any <code class="literal">FOREIGN
      KEY</code> constraints that reference the table. If there are
      no <code class="literal">FOREIGN KEY</code> constraints,
      <code class="literal">InnoDB</code> performs fast truncation by dropping the
      original table and creating an empty one with the same definition,
      which is much faster than deleting rows one by one. (When fast
      truncation is used, it resets any
      <code class="literal">AUTO_INCREMENT</code> counter. From MySQL 5.0.13 on,
      the <code class="literal">AUTO_INCREMENT</code> counter is reset by
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE
      TABLE</code></a>, regardless of whether there is a foreign key
      constraint.)
    </p><p>
      In the case that <code class="literal">FOREIGN KEY</code> constraints
      reference the table, <code class="literal">InnoDB</code> deletes rows one by
      one and processes the constraints on each one. If the
      <code class="literal">FOREIGN KEY</code> constraint specifies
      <code class="literal">DELETE CASCADE</code>, rows from the child
      (referenced) table are deleted, and the truncated table becomes
      empty. If the <code class="literal">FOREIGN KEY</code> constraint does
      <span class="emphasis"><em>not</em></span> specify <code class="literal">CASCADE</code>, the
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE</code></a> statement deletes rows one
      by one and stops if it encounters a parent row that is referenced
      by the child, returning this error:
    </p><pre class="programlisting">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign
key constraint fails (`test`.`child`, CONSTRAINT `child_ibfk_1`
FOREIGN KEY (`parent_id`) REFERENCES `parent` (`id`))
</pre><p>
      This is the same as a <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>
      statement with no <code class="literal">WHERE</code> clause.
    </p><p>
      The count of rows affected by
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE TABLE</code></a>
      is accurate only when it is mapped to a
      <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statement.
    </p><p>
      For other storage engines,
      <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE TABLE</code></a>
      differs from <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> in the
      following ways in MySQL 5.0:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Truncate operations drop and re-create the table, which is
          much faster than deleting rows one by one, particularly for
          large tables.
        </p></li><li><p>
          As of MySQL 5.0.8, truncate operations cause an implicit
          commit. Before 5.0.8, truncate operations are not
          transaction-safe; an error occurs when attempting one in the
          course of an active transaction.
        </p></li><li><p>
          Truncation operations cannot be performed if the session holds
          an active table lock.
        </p></li><li><p>
          Truncation operations do not return a meaningful value for the
          number of deleted rows. The usual result is “<span class="quote">0 rows
          affected,</span>” which should be interpreted as “<span class="quote">no
          information.</span>”
        </p></li><li><p>
          As long as the table format file
          <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.frm</code>
          is valid, the table can be re-created as an empty table with
          <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE
          TABLE</code></a>, even if the data or index files have become
          corrupted.
        </p></li><li><p>
          The table handler does not remember the last used
          <code class="literal">AUTO_INCREMENT</code> value, but starts counting
          from the beginning. This is true even for
          <code class="literal">MyISAM</code> and <code class="literal">InnoDB</code>, which
          normally do not reuse sequence values.
        </p></li><li><p>
          Since truncation of a table does not make any use of
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>, the
          <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE</code></a> statement does not
          invoke <code class="literal">ON DELETE</code> triggers.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="update"></a>12.2.11. <code class="literal">UPDATE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2095433"></a><p>
      Single-table syntax:
    </p><pre class="programlisting">UPDATE [LOW_PRIORITY] [IGNORE] <em class="replaceable"><code>table_reference</code></em>
    SET <em class="replaceable"><code>col_name1</code></em>={<em class="replaceable"><code>expr1</code></em>|DEFAULT} [, <em class="replaceable"><code>col_name2</code></em>={<em class="replaceable"><code>expr2</code></em>|DEFAULT}] ...
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
    [ORDER BY ...]
    [LIMIT <em class="replaceable"><code>row_count</code></em>]
</pre><p>
      Multiple-table syntax:
    </p><pre class="programlisting">UPDATE [LOW_PRIORITY] [IGNORE] <em class="replaceable"><code>table_references</code></em>
    SET <em class="replaceable"><code>col_name1</code></em>={<em class="replaceable"><code>expr1</code></em>|DEFAULT} [, <em class="replaceable"><code>col_name2</code></em>={<em class="replaceable"><code>expr2</code></em>|DEFAULT}] ...
    [WHERE <em class="replaceable"><code>where_condition</code></em>]
</pre><p>
      For the single-table syntax, the
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement updates columns of
      existing rows in the named table with new values. The
      <code class="literal">SET</code> clause indicates which columns to modify
      and the values they should be given. Each value can be given as an
      expression, or the keyword <code class="literal">DEFAULT</code> to set a
      column explicitly to its default value. The
      <code class="literal">WHERE</code> clause, if given, specifies the
      conditions that identify which rows to update. With no
      <code class="literal">WHERE</code> clause, all rows are updated. If the
      <code class="literal">ORDER BY</code> clause is specified, the rows are
      updated in the order that is specified. The
      <code class="literal">LIMIT</code> clause places a limit on the number of
      rows that can be updated.
    </p><p>
      For the multiple-table syntax,
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> updates rows in each table
      named in <em class="replaceable"><code>table_references</code></em> that satisfy
      the conditions. In this case, <code class="literal">ORDER BY</code> and
      <code class="literal">LIMIT</code> cannot be used.
    </p><p>
      <em class="replaceable"><code>where_condition</code></em> is an expression that
      evaluates to true for each row to be updated.
    </p><p>
      <em class="replaceable"><code>table_references</code></em> and
      <em class="replaceable"><code>where_condition</code></em> are is specified as
      described in <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
    </p><p>
      You need the <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a> privilege only
      for columns referenced in an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
      that are actually updated. You need only the
      <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for any columns
      that are read but not modified.
    </p><p>
      The <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement supports the
      following modifiers:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use the <code class="literal">LOW_PRIORITY</code> keyword,
          execution of the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> is
          delayed until no other clients are reading from the table.
          This affects only storage engines that use only table-level
          locking (<code class="literal">MyISAM</code>, <code class="literal">MEMORY</code>,
          <code class="literal">MERGE</code>).
        </p></li><li><p>
          If you use the <code class="literal">IGNORE</code> keyword, the update
          statement does not abort even if errors occur during the
          update. Rows for which duplicate-key conflicts occur are not
          updated. Rows for which columns are updated to values that
          would cause data conversion errors are updated to the closest
          valid values instead.
        </p></li></ul></div><p>
      If you access a column from the table to be updated in an
      expression, <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> uses the current
      value of the column. For example, the following statement sets the
      <code class="literal">age</code> column to one more than its current value:
    </p><pre class="programlisting">UPDATE persondata SET age=age+1;
</pre><p>
      Single-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> assignments are
      generally evaluated from left to right. For multiple-table
      updates, there is no guarantee that assignments are carried out in
      any particular order.
    </p><p>
      If you set a column to the value it currently has, MySQL notices
      this and does not update it.
    </p><p>
      If you update a column that has been declared <code class="literal">NOT
      NULL</code> by setting to <code class="literal">NULL</code>, an error
      occurs if strict SQL mode is enabled; otherwise, the column is set
      to the implicit default value for the column data type and the
      warning count is incremented. The implicit default value is
      <code class="literal">0</code> for numeric types, the empty string
      (<code class="literal">''</code>) for string types, and the
      “<span class="quote">zero</span>” value for date and time types. See
      <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>.
    </p><a class="indexterm" name="id2095812"></a><p>
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> returns the number of rows
      that were actually changed. The
      <a href="connectors-apis.html#mysql-info" title="20.9.3.35. mysql_info()"><code class="literal">mysql_info()</code></a> C API function
      returns the number of rows that were matched and updated and the
      number of warnings that occurred during the
      <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>.
    </p><p>
      You can use <code class="literal">LIMIT
      <em class="replaceable"><code>row_count</code></em></code> to restrict the
      scope of the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>. A
      <code class="literal">LIMIT</code> clause is a rows-matched restriction. The
      statement stops as soon as it has found
      <em class="replaceable"><code>row_count</code></em> rows that satisfy the
      <code class="literal">WHERE</code> clause, whether or not they actually were
      changed.
    </p><p>
      If an <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement includes an
      <code class="literal">ORDER BY</code> clause, the rows are updated in the
      order specified by the clause. This can be useful in certain
      situations that might otherwise result in an error. Suppose that a
      table <code class="literal">t</code> contains a column <code class="literal">id</code>
      that has a unique index. The following statement could fail with a
      duplicate-key error, depending on the order in which rows are
      updated:
    </p><pre class="programlisting">UPDATE t SET id = id + 1;
</pre><p>
      For example, if the table contains 1 and 2 in the
      <code class="literal">id</code> column and 1 is updated to 2 before 2 is
      updated to 3, an error occurs. To avoid this problem, add an
      <code class="literal">ORDER BY</code> clause to cause the rows with larger
      <code class="literal">id</code> values to be updated before those with
      smaller values:
    </p><pre class="programlisting">UPDATE t SET id = id + 1 ORDER BY id DESC;
</pre><p>
      You can also perform <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
      operations covering multiple tables. However, you cannot use
      <code class="literal">ORDER BY</code> or <code class="literal">LIMIT</code> with a
      multiple-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>. The
      <em class="replaceable"><code>table_references</code></em> clause lists the
      tables involved in the join. Its syntax is described in
      <a href="sql-syntax.html#join" title="12.2.8.1. JOIN Syntax">Section 12.2.8.1, “<code class="literal">JOIN</code> Syntax”</a>. Here is an example:
    </p><pre class="programlisting">UPDATE items,month SET items.price=month.price
WHERE items.id=month.id;
</pre><p>
      The preceding example shows an inner join that uses the comma
      operator, but multiple-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
      statements can use any type of join allowed in
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements, such as
      <code class="literal">LEFT JOIN</code>.
    </p><p>
      If you use a multiple-table <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
      statement involving <code class="literal">InnoDB</code> tables for which
      there are foreign key constraints, the MySQL optimizer might
      process tables in an order that differs from that of their
      parent/child relationship. In this case, the statement fails and
      rolls back. Instead, update a single table and rely on the
      <code class="literal">ON UPDATE</code> capabilities that
      <code class="literal">InnoDB</code> provides to cause the other tables to be
      modified accordingly. See
      <a href="storage-engines.html#innodb-foreign-key-constraints" title="13.2.4.4. FOREIGN KEY Constraints">Section 13.2.4.4, “<code class="literal">FOREIGN KEY</code> Constraints”</a>.
    </p><p>
      Currently, you cannot update a table and select from the same
      table in a subquery.
    </p><p>
      Index hints (see <a href="sql-syntax.html#index-hints" title="12.2.8.2. Index Hint Syntax">Section 12.2.8.2, “Index Hint Syntax”</a>) are accepted but
      ignored for <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-utility"></a>12.3. MySQL Utility Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#describe">12.3.1. <code class="literal">DESCRIBE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#explain">12.3.2. <code class="literal">EXPLAIN</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#help">12.3.3. <code class="literal">HELP</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#use">12.3.4. <code class="literal">USE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="describe"></a>12.3.1. <code class="literal">DESCRIBE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2096096"></a><a class="indexterm" name="id2096104"></a><pre class="programlisting">{DESCRIBE | DESC} <em class="replaceable"><code>tbl_name</code></em> [<em class="replaceable"><code>col_name</code></em> | <em class="replaceable"><code>wild</code></em>]
</pre><p>
      <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> provides information about
      the columns in a table. It is a shortcut for <code class="literal">SHOW COLUMNS
      FROM</code>. As of MySQL 5.0.1, these statements also display
      information for views. (See <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax">Section 12.5.5.5, “<code class="literal">SHOW COLUMNS</code> Syntax”</a>.)
    </p><p>
      <em class="replaceable"><code>col_name</code></em> can be a column name, or a
      string containing the SQL “<span class="quote"><code class="literal">%</code></span>” and
      “<span class="quote"><code class="literal">_</code></span>” wildcard characters to obtain
      output only for the columns with names matching the string. There
      is no need to enclose the string within quotes unless it contains
      spaces or other special characters.
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DESCRIBE City;</code></strong>
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| Id         | int(11)  | NO   | PRI | NULL    | auto_increment |
| Name       | char(35) | NO   |     |         |                |
| Country    | char(3)  | NO   | UNI |         |                |
| District   | char(20) | YES  | MUL |         |                |
| Population | int(11)  | NO   |     | 0       |                |
+------------+----------+------+-----+---------+----------------+
5 rows in set (0.00 sec)
</pre><p>
      The description for <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a>
      provides more information about the output columns (see
      <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax">Section 12.5.5.5, “<code class="literal">SHOW COLUMNS</code> Syntax”</a>).
    </p><p>
      If the data types differ from what you expect them to be based on
      a <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement, note that
      MySQL sometimes changes data types when you create or alter a
      table. The conditions under which this occurs are described in
      <a href="sql-syntax.html#silent-column-changes" title="12.1.10.1. Silent Column Specification Changes">Section 12.1.10.1, “Silent Column Specification Changes”</a>.
    </p><a class="indexterm" name="id2096256"></a><a class="indexterm" name="id2096265"></a><p>
      The <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> statement is provided
      for compatibility with Oracle.
    </p><p>
      The <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a>,
      <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE STATUS</code></a>, and
      <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> statements also provide
      information about tables. See <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax">Section 12.5.5, “<code class="literal">SHOW</code> Syntax”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="explain"></a>12.3.2. <code class="literal">EXPLAIN</code> Syntax</h3></div></div></div><a class="indexterm" name="id2096329"></a><a class="indexterm" name="id2096338"></a><pre class="programlisting">EXPLAIN <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
      Or:
    </p><pre class="programlisting">EXPLAIN [EXTENDED] SELECT <em class="replaceable"><code>select_options</code></em>
</pre><p>
      The <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> statement can be used
      either as a synonym for <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> or
      as a way to obtain information about how MySQL executes a
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">EXPLAIN <em class="replaceable"><code>tbl_name</code></em></code>
          is synonymous with <code class="literal">DESCRIBE
          <em class="replaceable"><code>tbl_name</code></em></code> or <code class="literal">SHOW
          COLUMNS FROM <em class="replaceable"><code>tbl_name</code></em></code>.
        </p><p>
          For a description of the
          <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> and
          <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a> statements, see
          <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax">Section 12.3.1, “<code class="literal">DESCRIBE</code> Syntax”</a>, and
          <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax">Section 12.5.5.5, “<code class="literal">SHOW COLUMNS</code> Syntax”</a>.
        </p></li><li><p>
          When you precede a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
          statement with the keyword
          <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a>, MySQL displays
          information from the optimizer about the query execution plan.
          That is, MySQL explains how it would process the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, including information
          about how tables are joined and in which order.
          <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
          EXTENDED</code></a> can be used to provide additional
          information.
        </p><p>
          For information regarding the use of
          <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN</code></a> and
          <a href="sql-syntax.html#explain" title="12.3.2. EXPLAIN Syntax"><code class="literal">EXPLAIN
          EXTENDED</code></a> for obtaining query execution plan
          information, see <a href="optimization.html#using-explain" title="7.2.1. Optimizing Queries with EXPLAIN">Section 7.2.1, “Optimizing Queries with <code class="literal">EXPLAIN</code>”</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="help"></a>12.3.3. <code class="literal">HELP</code> Syntax</h3></div></div></div><a class="indexterm" name="id2096563"></a><pre class="programlisting">HELP '<em class="replaceable"><code>search_string</code></em>'
</pre><p>
      The <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a> statement returns online
      information from the MySQL Reference manual. Its proper operation
      requires that the help tables in the <code class="literal">mysql</code>
      database be initialized with help topic information (see
      <a href="server-administration.html#server-side-help-support" title="5.1.8. Server-Side Help">Section 5.1.8, “Server-Side Help”</a>).
    </p><p>
      The <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a> statement searches the
      help tables for the given search string and displays the result of
      the search. The search string is not case sensitive.
    </p><p>
      The HELP statement understands several types of search strings:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          At the most general level, use <code class="literal">contents</code> to
          retrieve a list of the top-level help categories:
        </p><pre class="programlisting">HELP 'contents'
</pre></li><li><p>
          For a list of topics in a given help category, such as
          <code class="literal">Data Types</code>, use the category name:
        </p><pre class="programlisting">HELP 'data types'
</pre></li><li><p>
          For help on a specific help topic, such as the
          <a href="functions.html#function_ascii"><code class="literal">ASCII()</code></a> function or the
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement, use the
          associated keyword or keywords:
        </p><pre class="programlisting">HELP 'ascii'
HELP 'create table'
</pre></li></ul></div><p>
      In other words, the search string matches a category, many topics,
      or a single topic. You cannot necessarily tell in advance whether
      a given search string will return a list of items or the help
      information for a single help topic. However, you can tell what
      kind of response <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a> returned by
      examining the number of rows and columns in the result set.
    </p><p>
      The following descriptions indicate the forms that the result set
      can take. Output for the example statements is shown using the
      familiar “<span class="quote">tabular</span>” or “<span class="quote">vertical</span>” format
      that you see when using the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client, but
      note that <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> itself reformats
      <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a> result sets in a different
      way.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Empty result set
        </p><p>
          No match could be found for the search string.
        </p></li><li><p>
          Result set containing a single row with three columns
        </p><p>
          This means that the search string yielded a hit for the help
          topic. The result has three columns:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">name</code>: The topic name.
            </p></li><li><p>
              <code class="literal">description</code>: Descriptive help text for
              the topic.
            </p></li><li><p>
              <code class="literal">example</code>: Usage example or examples.
              This column might be blank.
            </p></li></ul></div><p>
          Example: <code class="literal">HELP 'replace'</code>
        </p><p>
          Yields:
        </p><pre class="programlisting">name: REPLACE
description: Syntax:
REPLACE(str,from_str,to_str)

Returns the string str with all occurrences of the string from_str
replaced by the string to_str. REPLACE() performs a case-sensitive
match when searching for from_str.
example: mysql&gt; SELECT REPLACE('www.mysql.com', 'w', 'Ww');
        -&gt; 'WwWwWw.mysql.com'
</pre></li><li><p>
          Result set containing multiple rows with two columns
        </p><p>
          This means that the search string matched many help topics.
          The result set indicates the help topic names:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">name</code>: The help topic name.
            </p></li><li><p>
              <code class="literal">is_it_category</code>: <code class="literal">Y</code> if
              the name represents a help category, <code class="literal">N</code>
              if it does not. If it does not, the
              <code class="literal">name</code> value when specified as the
              argument to the <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a>
              statement should yield a single-row result set containing
              a description for the named item.
            </p></li></ul></div><p>
          Example: <code class="literal">HELP 'status'</code>
        </p><p>
          Yields:
        </p><pre class="programlisting">+-----------------------+----------------+
| name                  | is_it_category |
+-----------------------+----------------+
| SHOW                  | N              |
| SHOW ENGINE           | N              |
| SHOW INNODB STATUS    | N              |
| SHOW MASTER STATUS    | N              |
| SHOW PROCEDURE STATUS | N              |
| SHOW SLAVE STATUS     | N              |
| SHOW STATUS           | N              |
| SHOW TABLE STATUS     | N              |
+-----------------------+----------------+
</pre></li><li><p>
          Result set containing multiple rows with three columns
        </p><p>
          This means the search string matches a category. The result
          set contains category entries:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <code class="literal">source_category_name</code>: The help category
              name.
            </p></li><li><p>
              <code class="literal">name</code>: The category or topic name
            </p></li><li><p>
              <code class="literal">is_it_category</code>: <code class="literal">Y</code> if
              the name represents a help category, <code class="literal">N</code>
              if it does not. If it does not, the
              <code class="literal">name</code> value when specified as the
              argument to the <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a>
              statement should yield a single-row result set containing
              a description for the named item.
            </p></li></ul></div><p>
          Example: <code class="literal">HELP 'functions'</code>
        </p><p>
          Yields:
        </p><pre class="programlisting">+----------------------+-------------------------+----------------+
| source_category_name | name                    | is_it_category |
+----------------------+-------------------------+----------------+
| Functions            | CREATE FUNCTION         | N              |
| Functions            | DROP FUNCTION           | N              |
| Functions            | Bit Functions           | Y              |
| Functions            | Comparison operators    | Y              |
| Functions            | Control flow functions  | Y              |
| Functions            | Date and Time Functions | Y              |
| Functions            | Encryption Functions    | Y              |
| Functions            | Information Functions   | Y              |
| Functions            | Logical operators       | Y              |
| Functions            | Miscellaneous Functions | Y              |
| Functions            | Numeric Functions       | Y              |
| Functions            | String Functions        | Y              |
+----------------------+-------------------------+----------------+
</pre></li></ul></div><p>
      If you intend to use the <a href="sql-syntax.html#help" title="12.3.3. HELP Syntax"><code class="literal">HELP</code></a>
      statement while other tables are locked with
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, you must also lock the
      required
      <code class="literal">mysql.help_<em class="replaceable"><code>xxx</code></em></code>
      tables.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="use"></a>12.3.4. <code class="literal">USE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2097084"></a><pre class="programlisting">USE <em class="replaceable"><code>db_name</code></em>
</pre><p>
      The <code class="literal">USE <em class="replaceable"><code>db_name</code></em></code>
      statement tells MySQL to use the
      <em class="replaceable"><code>db_name</code></em> database as the default
      (current) database for subsequent statements. The database remains
      the default until the end of the session or another
      <a href="sql-syntax.html#use" title="12.3.4. USE Syntax"><code class="literal">USE</code></a> statement is issued:
    </p><pre class="programlisting">USE db1;
SELECT COUNT(*) FROM mytable;   # selects from db1.mytable
USE db2;
SELECT COUNT(*) FROM mytable;   # selects from db2.mytable
</pre><p>
      Making a particular database the default by means of the
      <a href="sql-syntax.html#use" title="12.3.4. USE Syntax"><code class="literal">USE</code></a> statement does not preclude you
      from accessing tables in other databases. The following example
      accesses the <code class="literal">author</code> table from the
      <code class="literal">db1</code> database and the <code class="literal">editor</code>
      table from the <code class="literal">db2</code> database:
    </p><pre class="programlisting">USE db1;
SELECT author_name,editor_name FROM author,db2.editor
  WHERE author.editor_id = db2.editor.editor_id;
</pre><a class="indexterm" name="id2097199"></a><a class="indexterm" name="id2097208"></a><p>
      The <a href="sql-syntax.html#use" title="12.3.4. USE Syntax"><code class="literal">USE</code></a> statement is provided for
      compatibility with Sybase.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-transactions"></a>12.4. MySQL Transactional and Locking Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#commit">12.4.1. <code class="literal">START TRANSACTION</code>,
      <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#cannot-roll-back">12.4.2. Statements That Cannot Be Rolled Back</a></span></dt><dt><span class="section"><a href="sql-syntax.html#implicit-commit">12.4.3. Statements That Cause an Implicit Commit</a></span></dt><dt><span class="section"><a href="sql-syntax.html#savepoint">12.4.4. <code class="literal">SAVEPOINT</code> and
      <code class="literal">ROLLBACK TO
      SAVEPOINT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#lock-tables">12.4.5. <code class="literal">LOCK TABLES</code> and
      <code class="literal">UNLOCK
      TABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-transaction">12.4.6. <code class="literal">SET TRANSACTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#xa">12.4.7. XA Transactions</a></span></dt></dl></div><p>
    MySQL supports local transactions (within a given client session)
    through statements such as
    <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">SET autocommit</code></a>,
    <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START TRANSACTION</code></a>,
    <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>, and
    <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>. See
    <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax">Section 12.4.1, “<code class="literal">START TRANSACTION</code>,
      <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax”</a>. Beginning with MySQL 5.0, XA transaction
    support is available, which enables MySQL to participate in
    distributed transactions as well. See <a href="sql-syntax.html#xa" title="12.4.7. XA Transactions">Section 12.4.7, “XA Transactions”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="commit"></a>12.4.1. <code class="literal">START TRANSACTION</code>,
      <code class="literal">COMMIT</code>, and
      <code class="literal">ROLLBACK</code> Syntax</h3></div></div></div><a class="indexterm" name="id2097308"></a><a class="indexterm" name="id2097317"></a><a class="indexterm" name="id2097326"></a><a class="indexterm" name="id2097335"></a><pre class="programlisting">START TRANSACTION [WITH CONSISTENT SNAPSHOT] | BEGIN [WORK]
COMMIT [WORK] [AND [NO] CHAIN] [[NO] RELEASE]
ROLLBACK [WORK] [AND [NO] CHAIN] [[NO] RELEASE]
SET autocommit = {0 | 1}
</pre><p>
      The <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a> or
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a> statement
      begins a new transaction. <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>
      commits the current transaction, making its changes permanent.
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a> rolls
      back the current transaction, canceling its changes. The
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">SET autocommit</code></a>
      statement disables or enables the default autocommit mode for the
      current session.
    </p><p>
      Beginning with MySQL 5.0.3, the optional <code class="literal">WORK</code>
      keyword is supported for <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> and
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>, as are
      the <code class="literal">CHAIN</code> and <code class="literal">RELEASE</code>
      clauses. <code class="literal">CHAIN</code> and <code class="literal">RELEASE</code>
      can be used for additional control over transaction completion.
      The value of the <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a>
      system variable determines the default completion behavior. See
      <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Within stored programs (stored procedures and functions, and
        triggers), the parser treats
        <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN [WORK]</code></a>
        as the beginning of a
        <a href="sql-syntax.html#begin-end" title="12.8.1. BEGIN ... END Compound Statement Syntax"><code class="literal">BEGIN ...
        END</code></a> block. Begin a transaction in this context with
        <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
        TRANSACTION</code></a> instead.
      </p></div><p>
      The <code class="literal">AND CHAIN</code> clause causes a new transaction
      to begin as soon as the current one ends, and the new transaction
      has the same isolation level as the just-terminated transaction.
      The <code class="literal">RELEASE</code> clause causes the server to
      disconnect the current client session after terminating the
      current transaction. Including the <code class="literal">NO</code> keyword
      suppresses <code class="literal">CHAIN</code> or <code class="literal">RELEASE</code>
      completion, which can be useful if the
      <a href="server-administration.html#sysvar_completion_type"><code class="literal">completion_type</code></a> system variable
      is set to cause chaining or release completion by default.
    </p><p>
      By default, MySQL runs with autocommit mode enabled. This means
      that as soon as you execute a statement that updates (modifies) a
      table, MySQL stores the update on disk to make it permanent. To
      disable autocommit mode, use the following statement:
    </p><pre class="programlisting">SET autocommit=0;
</pre><p>
      After disabling autocommit mode by setting the
      <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit</code></a> variable to zero,
      changes to transaction-safe tables (such as those for
      <code class="literal">InnoDB</code>, <code class="literal">BDB</code>, or
      <code class="literal">NDBCLUSTER</code>) are not made permanent
      immediately. You must use <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> to
      store your changes to disk or
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a> to
      ignore the changes.
    </p><p>
      To disable autocommit mode for a single series of statements, use
      the <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a> statement:
    </p><pre class="programlisting">START TRANSACTION;
SELECT @A:=SUM(salary) FROM table1 WHERE type=1;
UPDATE table2 SET summary=@A WHERE type=1;
COMMIT;
</pre><p>
      With <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a>, autocommit remains disabled until you end
      the transaction with <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> or
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>. The
      autocommit mode then reverts to its previous state.
    </p><p>
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a> and
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN WORK</code></a> are
      supported as aliases of
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a> for initiating a transaction.
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a> is standard SQL syntax and is the
      recommended way to start an ad-hoc transaction.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Many APIs used for writing MySQL client applications (such as
        JDBC) provide their own methods for starting transactions that
        can (and sometimes should) be used instead of sending a
        <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
        TRANSACTION</code></a> statement from the client. See
        <a href="connectors-apis.html" title="Chapter 20. Connectors and APIs">Chapter 20, <i>Connectors and APIs</i></a>, or the documentation for your
        API, for more information.
      </p></div><p>
      The <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a>
      statement differs from the use of the <code class="literal">BEGIN</code>
      keyword that starts a <code class="literal">BEGIN ... END</code> compound
      statement. The latter does not begin a transaction. See
      <a href="sql-syntax.html#begin-end" title="12.8.1. BEGIN ... END Compound Statement Syntax">Section 12.8.1, “<code class="literal">BEGIN ... END</code> Compound Statement Syntax”</a>.
    </p><p>
      You can also begin a transaction like this:
    </p><pre class="programlisting">START TRANSACTION WITH CONSISTENT SNAPSHOT;
</pre><p>
      The <code class="literal">WITH CONSISTENT SNAPSHOT</code> clause starts a
      consistent read for storage engines that are capable of it. This
      applies only to <code class="literal">InnoDB</code>. The effect is the same
      as issuing a <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
      TRANSACTION</code></a> followed by a
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> from any
      <code class="literal">InnoDB</code> table. See
      <a href="storage-engines.html#innodb-consistent-read" title="13.2.8.2. Consistent Nonlocking Reads">Section 13.2.8.2, “Consistent Nonlocking Reads”</a>. The <code class="literal">WITH
      CONSISTENT SNAPSHOT</code> clause does not change the current
      transaction isolation level, so it provides a consistent snapshot
      only if the current isolation level is one that allows consistent
      read (<a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a> or
      <a href="sql-syntax.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a>).
    </p><p>
      Beginning a transaction causes any pending transaction to be
      committed. See <a href="sql-syntax.html#implicit-commit" title="12.4.3. Statements That Cause an Implicit Commit">Section 12.4.3, “Statements That Cause an Implicit Commit”</a>, for more
      information.
    </p><p>
      Beginning a transaction also causes table locks acquired with
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> to be released, as
      though you had executed
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
      TABLES</code></a>. Beginning a transaction does not release a
      global read lock acquired with
      <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
      LOCK</code></a>.
    </p><p>
      For best results, transactions should be performed using only
      tables managed by a single transaction-safe storage engine.
      Otherwise, the following problems can occur:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          If you use tables from more than one transaction-safe storage
          engine (such as <code class="literal">InnoDB</code> and
          <code class="literal">BDB</code>), and the transaction isolation level
          is not <a href="sql-syntax.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a>, it is
          possible that when one transaction commits, another ongoing
          transaction that uses the same tables will see only some of
          the changes made by the first transaction. That is, the
          atomicity of transactions is not guaranteed with mixed engines
          and inconsistencies can result. (If mixed-engine transactions
          are infrequent, you can use
          <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax"><code class="literal">SET
          TRANSACTION ISOLATION LEVEL</code></a> to set the isolation
          level to <a href="sql-syntax.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a> on a
          per-transaction basis as necessary.)
        </p></li><li><p>
          If you use tables that are not transaction-safe within a
          transaction, changes to those tables are stored at once,
          regardless of the status of autocommit mode.
        </p></li><li><p>
          If you issue a
          <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
          statement after updating a nontransactional table within a
          transaction, an
          <a href="error-handling.html#error_er_warning_not_complete_rollback"><code class="literal">ER_WARNING_NOT_COMPLETE_ROLLBACK</code></a>
          warning occurs. Changes to transaction-safe tables are rolled
          back, but not changes to nontransaction-safe tables.
        </p></li></ul></div><p>
      Each transaction is stored in the binary log in one chunk, upon
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>. Transactions that are
      rolled back are not logged.
      (<span class="bold"><strong>Exception</strong></span>: Modifications to
      nontransactional tables cannot be rolled back. If a transaction
      that is rolled back includes modifications to nontransactional
      tables, the entire transaction is logged with a
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
      statement at the end to ensure that modifications to the
      nontransactional tables are replicated.) See
      <a href="server-administration.html#binary-log" title="5.2.3. The Binary Log">Section 5.2.3, “The Binary Log”</a>.
    </p><p>
      You can change the isolation level for transactions with
      <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax"><code class="literal">SET TRANSACTION
      ISOLATION LEVEL</code></a>. See <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax">Section 12.4.6, “<code class="literal">SET TRANSACTION</code> Syntax”</a>.
    </p><p>
      Rolling back can be a slow operation that may occur implicitly
      without the user having explicitly asked for it (for example, when
      an error occurs). Because of this, <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
      PROCESSLIST</code></a> displays <code class="literal">Rolling back</code> in
      the <code class="literal">State</code> column for the session, not only for
      explicit rollbacks performed with the
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
      statement but also for implicit rollbacks.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Beginning with MySQL 5.0.84, <code class="literal">BEGIN</code>,
        <code class="literal">COMMIT</code>, and <code class="literal">ROLLBACK</code> are
        no longer affected by
        <a href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> or
        <a href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a> rules. (<a href="http://bugs.mysql.com/43263" target="_top">Bug#43263</a>)
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cannot-roll-back"></a>12.4.2. Statements That Cannot Be Rolled Back</h3></div></div></div><p>
      Some statements cannot be rolled back. In general, these include
      data definition language (DDL) statements, such as those that
      create or drop databases, those that create, drop, or alter tables
      or stored routines.
    </p><p>
      You should design your transactions not to include such
      statements. If you issue a statement early in a transaction that
      cannot be rolled back, and then another statement later fails, the
      full effect of the transaction cannot be rolled back in such cases
      by issuing a
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
      statement.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="implicit-commit"></a>12.4.3. Statements That Cause an Implicit Commit</h3></div></div></div><p>
      The statements listed in this section (and any synonyms for them)
      implicitly end a transaction, as if you had done a
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a> before executing the
      statement.
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <span class="bold"><strong>Data definition language (DDL)
          statements that define or modify database objects.</strong></span>
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
          <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>,
          <a href="sql-syntax.html#drop-index" title="12.1.15. DROP INDEX Syntax"><code class="literal">DROP INDEX</code></a>,
          <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>,
          <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME TABLE</code></a>.
        </p><p>
          <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>, and
          <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> do not commit a
          transaction if the <code class="literal">TEMPORARY</code> keyword is
          used. (This does not apply to other operations on temporary
          tables such as <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE INDEX</code></a>,
          which do cause a commit.) However, although no implicit commit
          occurs, neither can the statement be rolled back. Therefore,
          use of such statements will violate transaction atomicity: For
          example, if you use
          <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TEMPORARY
          TABLE</code></a> and then roll back the transaction, the table
          remains in existence.
        </p><p>
          The <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement in
          <code class="literal">InnoDB</code> is processed as a single
          transaction. This means that a
          <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
          from the user does not undo <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
          TABLE</code></a> statements the user made during that
          transaction.
        </p><p>
          Beginning with MySQL 5.0.8, <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
          TABLE</code></a>, <a href="sql-syntax.html#create-database" title="12.1.6. CREATE DATABASE Syntax"><code class="literal">CREATE
          DATABASE</code></a> <a href="sql-syntax.html#drop-database" title="12.1.13. DROP DATABASE Syntax"><code class="literal">DROP
          DATABASE</code></a>, and
          <a href="sql-syntax.html#truncate" title="12.2.10. TRUNCATE Syntax"><code class="literal">TRUNCATE
          TABLE</code></a> cause an implicit commit.
        </p><p>
          Beginning with MySQL 5.0.13, <a href="sql-syntax.html#alter-procedure" title="12.1.3. ALTER PROCEDURE Syntax"><code class="literal">ALTER
          PROCEDURE</code></a>, <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax"><code class="literal">CREATE
          PROCEDURE</code></a>, and <a href="sql-syntax.html#drop-procedure" title="12.1.16. DROP PROCEDURE and
      DROP FUNCTION Syntax"><code class="literal">DROP
          PROCEDURE</code></a> cause an implicit commit.
        </p><p>
          Also beginning with MySQL 5.0.13, <a href="sql-syntax.html#alter-function" title="12.1.2. ALTER FUNCTION Syntax"><code class="literal">ALTER
          FUNCTION</code></a>, <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE
          FUNCTION</code></a> and <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP
          FUNCTION</code></a> cause an implicit commit when used with
          stored functions, but not with UDFs.
          (<a href="sql-syntax.html#alter-function" title="12.1.2. ALTER FUNCTION Syntax"><code class="literal">ALTER FUNCTION</code></a> can only be
          used with stored functions.)
        </p><p>
          Beginning with MySQL 5.0.15, <a href="sql-syntax.html#alter-view" title="12.1.5. ALTER VIEW Syntax"><code class="literal">ALTER
          VIEW</code></a>, <a href="sql-syntax.html#create-trigger" title="12.1.11. CREATE TRIGGER Syntax"><code class="literal">CREATE TRIGGER</code></a>,
          <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE VIEW</code></a>,
          <a href="sql-syntax.html#drop-trigger" title="12.1.18. DROP TRIGGER Syntax"><code class="literal">DROP TRIGGER</code></a>, and
          <a href="sql-syntax.html#drop-view" title="12.1.19. DROP VIEW Syntax"><code class="literal">DROP VIEW</code></a> cause an implicit
          commit.
        </p></li><li><p>
          <span class="bold"><strong>Statements that implicitly use or modify
          tables in the <code class="literal">mysql</code> database.</strong></span>
          Beginning with MySQL 5.0.15, <a href="sql-syntax.html#create-user" title="12.5.1.1. CREATE USER Syntax"><code class="literal">CREATE
          USER</code></a>, <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a>, and
          <a href="sql-syntax.html#rename-user" title="12.5.1.4. RENAME USER Syntax"><code class="literal">RENAME USER</code></a> cause an implicit
          commit.
        </p></li><li><p>
          <span class="bold"><strong>Transaction-control and locking
          statements.</strong></span>
          <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a>,
          <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, <code class="literal">SET
          autocommit = 1</code> (if the value is not already 1),
          <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
          TRANSACTION</code></a>,
          <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
          TABLES</code></a>.
        </p><p>
          <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
          TABLES</code></a> commits a transaction only if any tables
          currently have been locked with <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
          TABLES</code></a>. This does not occur for
          <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
          TABLES</code></a> following
          <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
          LOCK</code></a> because the latter statement does not acquire
          table-level locks.
        </p><p>
          Transactions cannot be nested. This is a consequence of the
          implicit commit performed for any current transaction when you
          issue a <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
          TRANSACTION</code></a> statement or one of its synonyms.
        </p><p>
          Statements that cause an implicit commit cannot be used in an
          XA transaction while the transaction is in an
          <code class="literal">ACTIVE</code> state.
        </p><p>
          The <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">BEGIN</code></a>
          statement differs from the use of the <code class="literal">BEGIN</code>
          keyword that starts a <code class="literal">BEGIN ... END</code>
          compound statement. The latter does not cause an implicit
          commit. See <a href="sql-syntax.html#begin-end" title="12.8.1. BEGIN ... END Compound Statement Syntax">Section 12.8.1, “<code class="literal">BEGIN ... END</code> Compound Statement Syntax”</a>.
        </p></li><li><p>
          <span class="bold"><strong>Data loading statements.</strong></span>
          <code class="literal">LOAD MASTER DATA</code>,
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
          INFILE</code></a>. Before MySQL 5.0.26,
          <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
          INFILE</code></a> caused an implicit commit for all storage
          engines. As of MySQL 5.0.26, it causes an implicit commit only
          for tables using the <code class="literal">NDB</code> storage
          engine. For more information, see <a href="http://bugs.mysql.com/11151" target="_top">Bug#11151</a>.
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="savepoint"></a>12.4.4. <code class="literal">SAVEPOINT</code> and
      <code class="literal">ROLLBACK TO
      SAVEPOINT</code> Syntax</h3></div></div></div><a class="indexterm" name="id2098599"></a><a class="indexterm" name="id2098608"></a><a class="indexterm" name="id2098617"></a><pre class="programlisting">SAVEPOINT <em class="replaceable"><code>identifier</code></em>
ROLLBACK [WORK] TO [SAVEPOINT] <em class="replaceable"><code>identifier</code></em>
RELEASE SAVEPOINT <em class="replaceable"><code>identifier</code></em>
</pre><p>
      <code class="literal">InnoDB</code> supports the SQL statements
      <a href="sql-syntax.html#savepoint" title="12.4.4. SAVEPOINT and
      ROLLBACK TO
      SAVEPOINT Syntax"><code class="literal">SAVEPOINT</code></a> and
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK TO
      SAVEPOINT</code></a>. Starting from MySQL 5.0.3,
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">RELEASE
      SAVEPOINT</code></a> and the optional <code class="literal">WORK</code>
      keyword for
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a> are
      supported as well.
    </p><p>
      The <a href="sql-syntax.html#savepoint" title="12.4.4. SAVEPOINT and
      ROLLBACK TO
      SAVEPOINT Syntax"><code class="literal">SAVEPOINT</code></a> statement sets a
      named transaction savepoint with a name of
      <em class="replaceable"><code>identifier</code></em>. If the current transaction
      has a savepoint with the same name, the old savepoint is deleted
      and a new one is set.
    </p><p>
      The <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK TO
      SAVEPOINT</code></a> statement rolls back a transaction to the
      named savepoint without terminating the transaction. (The
      <a href="sql-syntax.html#savepoint" title="12.4.4. SAVEPOINT and
      ROLLBACK TO
      SAVEPOINT Syntax"><code class="literal">SAVEPOINT</code></a> keyword is optional as of
      MySQL 5.0.3.) Modifications that the current transaction made to
      rows after the savepoint was set are undone in the rollback, but
      <code class="literal">InnoDB</code> does <span class="emphasis"><em>not</em></span> release
      the row locks that were stored in memory after the savepoint. (For
      a new inserted row, the lock information is carried by the
      transaction ID stored in the row; the lock is not separately
      stored in memory. In this case, the row lock is released in the
      undo.) Savepoints that were set at a later time than the named
      savepoint are deleted.
    </p><p>
      If the <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK TO
      SAVEPOINT</code></a> statement returns the following error, it
      means that no savepoint with the specified name exists:
    </p><pre class="programlisting">ERROR 1181: Got error 153 during ROLLBACK
</pre><p>
      The <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">RELEASE
      SAVEPOINT</code></a> statement removes the named savepoint from the
      set of savepoints of the current transaction. No commit or
      rollback occurs. It is an error if the savepoint does not exist.
    </p><p>
      All savepoints of the current transaction are deleted if you
      execute a <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>, or a
      <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a> that
      does not name a savepoint.
    </p><p>
      Beginning with MySQL 5.0.17, a new savepoint level is created when
      a stored function is invoked or a trigger is activated. The
      savepoints on previous levels become unavailable and thus do not
      conflict with savepoints on the new level. When the function or
      trigger terminates, any savepoints it created are released and the
      previous savepoint level is restored.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="lock-tables"></a>12.4.5. <code class="literal">LOCK TABLES</code> and
      <code class="literal">UNLOCK
      TABLES</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#lock-tables-and-transactions">12.4.5.1. Interaction of Table Locking and Transactions</a></span></dt><dt><span class="section"><a href="sql-syntax.html#lock-tables-and-triggers">12.4.5.2. <code class="literal">LOCK TABLES</code> and Triggers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#lock-tables-notes">12.4.5.3. Other Table-Locking Notes</a></span></dt></dl></div><a class="indexterm" name="id2098837"></a><a class="indexterm" name="id2098846"></a><pre class="programlisting">LOCK TABLES
    <em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] <em class="replaceable"><code>lock_type</code></em>
    [, <em class="replaceable"><code>tbl_name</code></em> [[AS] <em class="replaceable"><code>alias</code></em>] <em class="replaceable"><code>lock_type</code></em>] ...

<em class="replaceable"><code>lock_type</code></em>:
    READ [LOCAL]
  | [LOW_PRIORITY] WRITE

UNLOCK TABLES
</pre><p>
      MySQL enables client sessions to acquire table locks explicitly
      for the purpose of cooperating with other sessions for access to
      tables, or to prevent other sessions from modifying tables during
      periods when a session requires exclusive access to them. A
      session can acquire or release locks only for itself. One session
      cannot acquire locks for another session or release locks held by
      another session.
    </p><p>
      Locks may be used to emulate transactions or to get more speed
      when updating tables. This is explained in more detail later in
      this section.
    </p><p>
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> explicitly acquires
      table locks for the current client session. Table locks can be
      acquired for base tables or (as of MySQL 5.0.6) views. You must
      have the <a href="server-administration.html#priv_lock-tables"><code class="literal">LOCK TABLES</code></a> privilege, and
      the <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for each
      object to be locked.
    </p><p>
      For view locking, <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> adds
      all base tables used in the view to the set of tables to be locked
      and locks them automatically. If you lock a table explicitly with
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, any tables used in
      triggers are also locked implicitly, as described in
      <a href="sql-syntax.html#lock-tables-and-triggers" title="12.4.5.2. LOCK TABLES and Triggers">Section 12.4.5.2, “<code class="literal">LOCK TABLES</code> and Triggers”</a>.
    </p><p>
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
      TABLES</code></a> explicitly releases any table locks held by the
      current session.
    </p><p>
      Another use for
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
      TABLES</code></a> is to release the global read lock acquired with
      the <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH READ
      LOCK</code></a> statement, which enables you to lock all tables in
      all databases. See <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax">Section 12.5.6.2, “<code class="literal">FLUSH</code> Syntax”</a>. (This is a very
      convenient way to get backups if you have a file system such as
      Veritas that can take snapshots in time.)
    </p><p>
      The following discussion applies only to
      non-<code class="literal">TEMPORARY</code> tables. <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
      TABLES</code></a> is allowed (but ignored) for a
      <code class="literal">TEMPORARY</code> table. The table can be accessed
      freely by the session within which it was created, regardless of
      what other locking may be in effect. No lock is necessary because
      no other session can see the table.
    </p><p>
      The following general rules apply to acquisition and release of
      locks by a given session:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Table locks are acquired with <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
          TABLES</code></a>.
        </p></li><li><p>
          If the <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> statement
          must wait due to locks held by other sessions on any of the
          tables, it blocks until all locks can be acquired.
        </p></li><li><p>
          Table locks are released explicitly with
          <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
          TABLES</code></a>.
        </p></li><li><p>
          Table locks are released implicitly under these conditions:
        </p><div class="itemizedlist"><ul type="circle"><li><p>
              <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> releases any
              table locks currently held by the session before acquiring
              new locks.
            </p></li><li><p>
              Beginning a transaction (for example, with
              <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
              TRANSACTION</code></a>) implicitly performs an
              <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
              TABLES</code></a>. (Additional information about the
              interaction between table locking and transactions is
              given in <a href="sql-syntax.html#lock-tables-and-transactions" title="12.4.5.1. Interaction of Table Locking and Transactions">Section 12.4.5.1, “Interaction of Table Locking and Transactions”</a>.)
            </p></li><li><p>
              If a client connection drops, the server releases table
              locks held by the client. If the client reconnects, the
              locks will no longer be in effect. In addition, if the
              client had an active transaction, the server rolls back
              the transaction upon disconnect, and if reconnect occurs,
              the new session begins with autocommit enabled. For this
              reason, clients may wish to disable auto-reconnect. With
              auto-reconnect in effect, the client is not notified if
              reconnect occurs but any table locks or current
              transaction will have been lost. With auto-reconnect
              disabled, if the connection drops, an error occurs for the
              next statement issued. The client can detect the error and
              take appropriate action such as reacquiring the locks or
              redoing the transaction. See
              <a href="connectors-apis.html#auto-reconnect" title="20.9.11. Controlling Automatic Reconnection Behavior">Section 20.9.11, “Controlling Automatic Reconnection Behavior”</a>.
            </p></li></ul></div></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        If you use <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on a
        locked table, it may become unlocked. See
        <a href="error-handling.html#alter-table-problems" title="B.1.7.1. Problems with ALTER TABLE">Section B.1.7.1, “Problems with <code class="literal">ALTER TABLE</code>”</a>.
      </p></div><p>
      A table lock protects only against inappropriate reads or writes
      by other clients. The client holding the lock, even a read lock,
      can perform table-level operations such as
      <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>. Truncate operations are
      not transaction-safe, so an error occurs if the client attempts
      one during an active transaction or while holding a table lock.
    </p><p>
      A session that requires locks must acquire all the locks that it
      needs in a single <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>
      statement. While the locks thus obtained are held, the session can
      access only the locked tables. For example, in the following
      sequence of statements, an error occurs for the attempt to access
      <code class="literal">t2</code> because it was not locked in the
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> statement:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLES t1 READ;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM t1;</code></strong>
+----------+
| COUNT(*) |
+----------+
|        3 |
+----------+
mysql&gt; <strong class="userinput"><code>SELECT COUNT(*) FROM t2;</code></strong>
ERROR 1100 (HY000): Table 't2' was not locked with LOCK TABLES
</pre><p>
      Tables in the <code class="literal">INFORMATION_SCHEMA</code> database are
      an exception. They can be accessed without being locked explicitly
      even while a session holds table locks obtained with
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>.
    </p><p>
      You cannot refer to a locked table multiple times in a single
      query using the same name. Use aliases instead, and obtain a
      separate lock for the table and each alias:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t WRITE, t AS t1 READ;</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t SELECT * FROM t;</code></strong>
ERROR 1100: Table 't' was not locked with LOCK TABLES
mysql&gt; <strong class="userinput"><code>INSERT INTO t SELECT * FROM t AS t1;</code></strong>
</pre><p>
      The error occurs for the first
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> because there are two
      references to the same name for a locked table. The second
      <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> succeeds because the
      references to the table use different names.
    </p><p>
      If your statements refer to a table by means of an alias, you must
      lock the table using that same alias. It does not work to lock the
      table without specifying the alias:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t READ;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * FROM t AS myalias;</code></strong>
ERROR 1100: Table 'myalias' was not locked with LOCK TABLES
</pre><p>
      Conversely, if you lock a table using an alias, you must refer to
      it in your statements using that alias:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOCK TABLE t AS myalias READ;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT * FROM t;</code></strong>
ERROR 1100: Table 't' was not locked with LOCK TABLES
mysql&gt; <strong class="userinput"><code>SELECT * FROM t AS myalias;</code></strong>
</pre><p>
      If a session obtains a <code class="literal">READ</code> lock on a table,
      that session (and all other sessions) can only read from the
      table. If a session obtains a <code class="literal">WRITE</code> lock on a
      table, only the session holding the lock can write to the table
      (that session can also read from the table); other sessions are
      blocked from reading or writing the locked table until the lock
      has been released.
    </p><p>
      The difference between <code class="literal">READ</code> and <code class="literal">READ
      LOCAL</code> is that <code class="literal">READ LOCAL</code> allows
      nonconflicting <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements
      (concurrent inserts) to execute while the lock is held. However,
      <code class="literal">READ LOCAL</code> cannot be used if you are going to
      manipulate the database using processes external to the server
      while you hold the lock. For <code class="literal">InnoDB</code> tables,
      <code class="literal">READ LOCAL</code> is the same as
      <code class="literal">READ</code> as of MySQL 5.0.13. (Before that,
      <code class="literal">READ LOCAL</code> essentially does nothing: It does
      not lock the table at all, so for <code class="literal">InnoDB</code>
      tables, the use of <code class="literal">READ LOCAL</code> is deprecated
      because a plain consistent-read
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> does the same thing, and no
      locks are needed.)
    </p><p>
      <code class="literal">WRITE</code> locks normally have higher priority than
      <code class="literal">READ</code> locks to ensure that updates are processed
      as soon as possible. This means that if one session obtains a
      <code class="literal">READ</code> lock and then another session requests a
      <code class="literal">WRITE</code> lock, subsequent <code class="literal">READ</code>
      lock requests wait until the session that requested the
      <code class="literal">WRITE</code> lock has obtained the lock and released
      it. A request for a <code class="literal">LOW_PRIORITY WRITE</code> lock, by
      contrast, allows subsequent <code class="literal">READ</code> lock requests
      by other sessions to be satisfied first if they occur while the
      <code class="literal">LOW_PRIORITY WRITE</code> request is waiting. You
      should use <code class="literal">LOW_PRIORITY WRITE</code> locks only if you
      are sure that eventually there will be a time when no sessions
      have a <code class="literal">READ</code> lock. For <code class="literal">InnoDB</code>
      tables in transactional mode (autocommit = 0), a waiting
      <code class="literal">LOW_PRIORITY WRITE</code> lock acts like a regular
      <code class="literal">WRITE</code> lock and causes subsequent
      <code class="literal">READ</code> lock requests to wait.
    </p><p>
      <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> acquires locks as
      follows:
    </p><div class="orderedlist"><ol type="1"><li><p>
          Sort all tables to be locked in an internally defined order.
          From the user standpoint, this order is undefined.
        </p></li><li><p>
          If a table is to be locked with a read and a write lock, put
          the write lock request before the read lock request.
        </p></li><li><p>
          Lock one table at a time until the session gets all locks.
        </p></li></ol></div><p>
      This policy ensures that table locking is deadlock free. There
      are, however, other things you need to be aware of about this
      policy: If you are using a <code class="literal">LOW_PRIORITY WRITE</code>
      lock for a table, it means only that MySQL waits for this
      particular lock until there are no other sessions that want a
      <code class="literal">READ</code> lock. When the session has gotten the
      <code class="literal">WRITE</code> lock and is waiting to get the lock for
      the next table in the lock table list, all other sessions wait for
      the <code class="literal">WRITE</code> lock to be released. If this becomes
      a serious problem with your application, you should consider
      converting some of your tables to transaction-safe tables.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="lock-tables-and-transactions"></a>12.4.5.1. Interaction of Table Locking and Transactions</h4></div></div></div><p>
        <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> and
        <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
        TABLES</code></a> interact with the use of transactions as
        follows:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> is not
            transaction-safe and implicitly commits any active
            transaction before attempting to lock the tables.
          </p></li><li><p>
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> implicitly commits any active transaction,
            but only if <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> has
            been used to acquire table locks. For example, in the
            following set of statements,
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> releases the global read lock but does not
            commit the transaction because no table locks are in effect:
          </p><pre class="programlisting">FLUSH TABLES WITH READ LOCK;
START TRANSACTION;
SELECT ... ;
UNLOCK TABLES;
</pre></li><li><p>
            Beginning a transaction (for example, with
            <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
            TRANSACTION</code></a>) implicitly commits any current
            transaction and releases existing locks.
          </p></li><li><p>
            Other statements that implicitly cause transactions to be
            committed do not release existing locks. For a list of such
            statements, see <a href="sql-syntax.html#implicit-commit" title="12.4.3. Statements That Cause an Implicit Commit">Section 12.4.3, “Statements That Cause an Implicit Commit”</a>.
          </p></li><li><p>
            The correct way to use <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
            TABLES</code></a> and
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> with transactional tables, such as
            <code class="literal">InnoDB</code> tables, is to begin a transaction
            with <code class="literal">SET autocommit = 0</code> (not
            <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
            TRANSACTION</code></a>) followed by <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
            TABLES</code></a>, and to not call
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> until you commit the transaction
            explicitly. For example, if you need to write to table
            <code class="literal">t1</code> and read from table
            <code class="literal">t2</code>, you can do this:
          </p><pre class="programlisting">SET autocommit=0;
LOCK TABLES t1 WRITE, t2 READ, ...;
<em class="replaceable"><code>... do something with tables t1 and t2 here ...</code></em>
COMMIT;
UNLOCK TABLES;
</pre><p>
            When you call <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>,
            <code class="literal">InnoDB</code> internally takes its own table
            lock, and MySQL takes its own table lock.
            <code class="literal">InnoDB</code> releases its internal table lock
            at the next commit, but for MySQL to release its table lock,
            you have to call
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a>. You should not have
            <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit = 1</code></a>, because
            then <code class="literal">InnoDB</code> releases its internal table
            lock immediately after the call of <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
            TABLES</code></a>, and deadlocks can very easily happen.
            <code class="literal">InnoDB</code> does not acquire the internal
            table lock at all if <a href="server-administration.html#sysvar_autocommit"><code class="literal">autocommit =
            1</code></a>, to help old applications avoid unnecessary
            deadlocks.
          </p></li><li><p>
            <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">ROLLBACK</code></a>
            does not release table locks.
          </p></li><li><p>
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a> acquires a global read lock and not
            table locks, so it is not subject to the same behavior as
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> and
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> with respect to table locking and implicit
            commits. See <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax">Section 12.5.6.2, “<code class="literal">FLUSH</code> Syntax”</a>.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="lock-tables-and-triggers"></a>12.4.5.2. <code class="literal">LOCK TABLES</code> and Triggers</h4></div></div></div><p>
        If you lock a table explicitly with <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
        TABLES</code></a>, any tables used in triggers are also locked
        implicitly:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The locks are taken as the same time as those acquired
            explicitly with the <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
            TABLES</code></a> statement.
          </p></li><li><p>
            The lock on a table used in a trigger depends on whether the
            table is used only for reading. If so, a read lock suffices.
            Otherwise, a write lock is used.
          </p></li><li><p>
            If a table is locked explicitly for reading with
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, but needs to be
            locked for writing because it might be modified within a
            trigger, a write lock is taken rather than a read lock.
            (That is, an implicit write lock needed due to the table's
            appearance within a trigger causes an explicit read lock
            request for the table to be converted to a write lock
            request.)
          </p></li></ul></div><p>
        Suppose that you lock two tables, <code class="literal">t1</code> and
        <code class="literal">t2</code>, using this statement:
      </p><pre class="programlisting">LOCK TABLES t1 WRITE, t2 READ;
</pre><p>
        If <code class="literal">t1</code> or <code class="literal">t2</code> have any
        triggers, tables used within the triggers will also be locked.
        Suppose that <code class="literal">t1</code> has a trigger defined like
        this:
      </p><pre class="programlisting">CREATE TRIGGER t1_a_ins AFTER INSERT ON t1 FOR EACH ROW
BEGIN
  UPDATE t4 SET count = count+1
      WHERE id = NEW.id AND EXISTS (SELECT a FROM t3);
  INSERT INTO t2 VALUES(1, 2);
END;
</pre><p>
        The result of the <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>
        statement is that <code class="literal">t1</code> and
        <code class="literal">t2</code> are locked because they appear in the
        statement, and <code class="literal">t3</code> and <code class="literal">t4</code>
        are locked because they are used within the trigger:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">t1</code> is locked for writing per the
            <code class="literal">WRITE</code> lock request.
          </p></li><li><p>
            <code class="literal">t2</code> is locked for writing, even though the
            request is for a <code class="literal">READ</code> lock. This occurs
            because <code class="literal">t2</code> is inserted into within the
            trigger, so the <code class="literal">READ</code> request is converted
            to a <code class="literal">WRITE</code> request.
          </p></li><li><p>
            <code class="literal">t3</code> is locked for reading because it is
            only read from within the trigger.
          </p></li><li><p>
            <code class="literal">t4</code> is locked for writing because it might
            be updated within the trigger.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="lock-tables-notes"></a>12.4.5.3. Other Table-Locking Notes</h4></div></div></div><p>
        You can safely use <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a> to
        terminate a session that is waiting for a table lock. See
        <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax">Section 12.5.6.3, “<code class="literal">KILL</code> Syntax”</a>.
      </p><p>
        You should <span class="emphasis"><em>not</em></span> lock any tables that you are
        using with <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a>. An
        <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> in this case
        results in an error because the insert must be handled by a
        separate thread, not by the session which holds the lock.
      </p><p>
        Normally, you do not need to lock tables, because all single
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements are atomic; no
        other session can interfere with any other currently executing
        SQL statement. However, there are a few cases when locking
        tables may provide an advantage:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If you are going to run many operations on a set of
            <code class="literal">MyISAM</code> tables, it is much faster to lock
            the tables you are going to use. Locking
            <code class="literal">MyISAM</code> tables speeds up inserting,
            updating, or deleting on them because MySQL does not flush
            the key cache for the locked tables until
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> is called. Normally, the key cache is
            flushed after each SQL statement.
          </p><p>
            The downside to locking the tables is that no session can
            update a <code class="literal">READ</code>-locked table (including the
            one holding the lock) and no session can access a
            <code class="literal">WRITE</code>-locked table other than the one
            holding the lock.
          </p></li><li><p>
            If you are using tables for a nontransactional storage
            engine, you must use <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK
            TABLES</code></a> if you want to ensure that no other session
            modifies the tables between a
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and an
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>. The example shown
            here requires <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> to
            execute safely:
          </p><pre class="programlisting">LOCK TABLES trans READ, customer WRITE;
SELECT SUM(value) FROM trans WHERE customer_id=<em class="replaceable"><code>some_id</code></em>;
UPDATE customer
  SET total_value=<em class="replaceable"><code>sum_from_previous_statement</code></em>
  WHERE customer_id=<em class="replaceable"><code>some_id</code></em>;
UNLOCK TABLES;
</pre><p>
            Without <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>, it is
            possible that another session might insert a new row in the
            <code class="literal">trans</code> table between execution of the
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> and
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statements.
          </p></li></ul></div><p>
        You can avoid using <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>
        in many cases by using relative updates (<code class="literal">UPDATE
        customer SET
        <em class="replaceable"><code>value</code></em>=<em class="replaceable"><code>value</code></em>+<em class="replaceable"><code>new_value</code></em></code>)
        or the <a href="functions.html#function_last-insert-id"><code class="literal">LAST_INSERT_ID()</code></a> function.
        See <a href="introduction.html#ansi-diff-transactions" title="1.7.5.2. Transactions and Atomic Operations">Section 1.7.5.2, “Transactions and Atomic Operations”</a>.
      </p><p>
        You can also avoid locking tables in some cases by using the
        user-level advisory lock functions
        <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> and
        <a href="functions.html#function_release-lock"><code class="literal">RELEASE_LOCK()</code></a>. These locks are
        saved in a hash table in the server and implemented with
        <code class="literal">pthread_mutex_lock()</code> and
        <code class="literal">pthread_mutex_unlock()</code> for high speed. See
        <a href="functions.html#miscellaneous-functions" title="11.10.4. Miscellaneous Functions">Section 11.10.4, “Miscellaneous Functions”</a>.
      </p><p>
        See <a href="optimization.html#internal-locking" title="7.3.1. Internal Locking Methods">Section 7.3.1, “Internal Locking Methods”</a>, for more information on
        locking policy.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="set-transaction"></a>12.4.6. <code class="literal">SET TRANSACTION</code> Syntax</h3></div></div></div><a class="indexterm" name="id2100459"></a><a class="indexterm" name="id2100468"></a><a class="indexterm" name="id2100477"></a><pre class="programlisting">SET [GLOBAL | SESSION] TRANSACTION ISOLATION LEVEL
  {
       READ UNCOMMITTED
     | READ COMMITTED
     | REPEATABLE READ
     | SERIALIZABLE
   }
</pre><p>
      This statement sets the transaction isolation level globally, for
      the current session, or for the next transaction:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          With the <code class="literal">GLOBAL</code> keyword, the statement sets
          the default transaction level globally for all subsequent
          sessions. Existing sessions are unaffected.
        </p></li><li><p>
          With the <code class="literal">SESSION</code> keyword, the statement
          sets the default transaction level for all subsequent
          transactions performed within the current session.
        </p></li><li><p>
          Without any <code class="literal">SESSION</code> or
          <code class="literal">GLOBAL</code> keyword, the statement sets the
          isolation level for the next (not started) transaction
          performed within the current session.
        </p></li></ul></div><p>
      A change to the global default isolation level requires the
      <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege. Any session is
      free to change its session isolation level (even in the middle of
      a transaction), or the isolation level for its next transaction.
    </p><p>
      To set the global default isolation level at server startup, use
      the
      <a href="server-administration.html#option_mysqld_transaction-isolation"><code class="option">--transaction-isolation=<em class="replaceable"><code>level</code></em></code></a>
      option to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> on the command line or in an
      option file. Values of <em class="replaceable"><code>level</code></em> for this
      option use dashes rather than spaces, so the allowable values are
      <a href="sql-syntax.html#isolevel_read-uncommitted"><code class="literal">READ-UNCOMMITTED</code></a>,
      <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ-COMMITTED</code></a>,
      <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE-READ</code></a>, or
      <a href="sql-syntax.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a>. For example, to
      set the default isolation level to
      <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a>, use these
      lines in the <code class="literal">[mysqld]</code> section of an option
      file:
    </p><pre class="programlisting">[mysqld]
transaction-isolation = REPEATABLE-READ
</pre><p>
      To determine the global and session transaction isolation levels
      at runtime, check the value of the
      <a href="server-administration.html#sysvar_tx_isolation"><code class="literal">tx_isolation</code></a> system variable:
    </p><pre class="programlisting">SELECT @@GLOBAL.tx_isolation, @@tx_isolation;
</pre><p>
      <code class="literal">InnoDB</code> supports each of the translation
      isolation levels described here using different locking
      strategies. The default level is
      <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a>. For additional
      information about <code class="literal">InnoDB</code> record-level locks and
      how it uses them to execute various types of statements, see
      <a href="storage-engines.html#innodb-record-level-locks" title="13.2.8.4. InnoDB Record, Gap, and Next-Key Locks">Section 13.2.8.4, “<code class="literal">InnoDB</code> Record, Gap, and Next-Key Locks”</a>, and
      <a href="storage-engines.html#innodb-locks-set" title="13.2.8.6. Locks Set by Different SQL Statements in InnoDB">Section 13.2.8.6, “Locks Set by Different SQL Statements in <code class="literal">InnoDB</code>”</a>.
    </p><p>
      The following list describes how MySQL supports the different
      transaction levels:
    </p><div class="itemizedlist"><ul type="disc"><li><p><a name="isolevel_read-uncommitted"></a>
          <a class="indexterm" name="id2100721"></a>

          <a class="indexterm" name="id2100733"></a>

          <a href="sql-syntax.html#isolevel_read-uncommitted"><code class="literal">READ UNCOMMITTED</code></a>
        </p><p>
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements are performed
          in a nonlocking fashion, but a possible earlier version of a
          row might be used. Thus, using this isolation level, such
          reads are not consistent. This is also called a “<span class="quote">dirty
          read.</span>” Otherwise, this isolation level works like
          <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a>.
        </p></li><li><p><a name="isolevel_read-committed"></a>
          <a class="indexterm" name="id2100784"></a>

          <a class="indexterm" name="id2100797"></a>

          <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ COMMITTED</code></a>
        </p><p>
          A somewhat Oracle-like isolation level with respect to
          consistent (nonlocking) reads: Each consistent read, even
          within the same transaction, sets and reads its own fresh
          snapshot. See <a href="storage-engines.html#innodb-consistent-read" title="13.2.8.2. Consistent Nonlocking Reads">Section 13.2.8.2, “Consistent Nonlocking Reads”</a>.
        </p><p>
          For locking reads (<a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> with
          <code class="literal">FOR UPDATE</code> or <code class="literal">LOCK IN SHARE
          MODE</code>), <code class="literal">InnoDB</code> locks only index
          records, not the gaps before them, and thus allows the free
          insertion of new records next to locked records. For
          <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> and
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements, locking
          depends on whether the statement uses a unique index with a
          unique search condition (such as <code class="literal">WHERE id =
          100</code>), or a range-type search condition (such as
          <code class="literal">WHERE id &gt; 100</code>). For a unique index with
          a unique search condition, <code class="literal">InnoDB</code> locks
          only the index record found, not the gap before it. For
          range-type searches, <code class="literal">InnoDB</code> locks the index
          range scanned, using gap locks or next-key (gap plus
          index-record) locks to block insertions by other sessions into
          the gaps covered by the range. This is necessary because
          “<span class="quote">phantom rows</span>” must be blocked for MySQL
          replication and recovery to work.
        </p></li><li><p><a name="isolevel_repeatable-read"></a>
          <a class="indexterm" name="id2100911"></a>

          <a class="indexterm" name="id2100924"></a>

          <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a>
        </p><p>
          This is the default isolation level for
          <code class="literal">InnoDB</code>. For consistent reads, there is an
          important difference from the <a href="sql-syntax.html#isolevel_read-committed"><code class="literal">READ
          COMMITTED</code></a> isolation level: All consistent reads
          within the same transaction read the snapshot established by
          the first read. This convention means that if you issue
          several plain (nonlocking)
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statements within the
          same transaction, these <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
          statements are consistent also with respect to each other. See
          <a href="storage-engines.html#innodb-consistent-read" title="13.2.8.2. Consistent Nonlocking Reads">Section 13.2.8.2, “Consistent Nonlocking Reads”</a>.
        </p><p>
          For locking reads (<a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> with
          <code class="literal">FOR UPDATE</code> or <code class="literal">LOCK IN SHARE
          MODE</code>), <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
          <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> statements, locking
          depends on whether the statement uses a unique index with a
          unique search condition, or a range-type search condition. For
          a unique index with a unique search condition,
          <code class="literal">InnoDB</code> locks only the index record found,
          not the gap before it. For other search conditions,
          <code class="literal">InnoDB</code> locks the index range scanned, using
          gap locks or next-key (gap plus index-record) locks to block
          insertions by other sessions into the gaps covered by the
          range.
        </p></li><li><p><a name="isolevel_serializable"></a>
          <a class="indexterm" name="id2101044"></a>

          <a class="indexterm" name="id2101056"></a>

          <a href="sql-syntax.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a>
        </p><p>
          This level is like <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE
          READ</code></a>, but <code class="literal">InnoDB</code> implicitly
          converts all plain <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
          statements to <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT
          ... LOCK IN SHARE MODE</code></a> if autocommit is disabled. If
          autocommit is enabled, the
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> is its own transaction.
          It therefore is known to be read only and can be serialized if
          performed as a consistent (nonlocking) read and need not block
          for other transactions. (This means that to force a plain
          <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> to block if other
          transactions have modified the selected rows, you should
          disable autocommit.)
        </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xa"></a>12.4.7. XA Transactions</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#xa-statements">12.4.7.1. XA Transaction SQL Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#xa-states">12.4.7.2. XA Transaction States</a></span></dt></dl></div><a class="indexterm" name="id2101141"></a><p>
      MySQL 5.0.3 and up provides server-side support for XA
      transactions. Currently, this support is available for the
      <code class="literal">InnoDB</code> storage engine. The MySQL XA
      implementation is based on the X/Open CAE document
      <em class="citetitle">Distributed Transaction Processing: The XA
      Specification</em>. This document is published by The Open
      Group and available at
      <a href="http://www.opengroup.org/public/pubs/catalog/c193.htm" target="_top">http://www.opengroup.org/public/pubs/catalog/c193.htm</a>.
      Limitations of the current XA implementation are described in
      <a href="restrictions.html#xa-restrictions" title="D.5. Restrictions on XA Transactions">Section D.5, “Restrictions on XA Transactions”</a>.
    </p><p>
      On the client side, there are no special requirements. The XA
      interface to a MySQL server consists of SQL statements that begin
      with the <code class="literal">XA</code> keyword. MySQL client programs must
      be able to send SQL statements and to understand the semantics of
      the XA statement interface. They do not need be linked against a
      recent client library. Older client libraries also will work.
    </p><p>
      Currently, among the MySQL Connectors, MySQL Connector/J 5.0.0
      supports XA directly (by means of a class interface that handles
      the Xan SQL statement interface for you).
    </p><p>
      XA supports distributed transactions; that is, the ability to
      allow multiple separate transactional resources to participate in
      a global transaction. Transactional resources often are RDBMSs but
      may be other kinds of resources.
    </p><p class="mnmas"><b>MySQL Enterprise</b>
        For expert advice on XA Distributed Transaction Support
        subscribe to the MySQL Enterprise Monitor. For more information,
        see <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><p>
      A global transaction involves several actions that are
      transactional in themselves, but that all must either complete
      successfully as a group, or all be rolled back as a group. In
      essence, this extends ACID properties “<span class="quote">up a level</span>” so
      that multiple ACID transactions can be executed in concert as
      components of a global operation that also has ACID properties.
      (However, for a distributed transaction, you must use the
      <a href="sql-syntax.html#isolevel_serializable"><code class="literal">SERIALIZABLE</code></a> isolation level to
      achieve ACID properties. It is enough to use
      <a href="sql-syntax.html#isolevel_repeatable-read"><code class="literal">REPEATABLE READ</code></a> for a
      nondistributed transaction, but not for a distributed
      transaction.)
    </p><p>
      Some examples of distributed transactions:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          An application may act as an integration tool that combines a
          messaging service with an RDBMS. The application makes sure
          that transactions dealing with message sending, retrieval, and
          processing that also involve a transactional database all
          happen in a global transaction. You can think of this as
          “<span class="quote">transactional email.</span>”
        </p></li><li><p>
          An application performs actions that involve different
          database servers, such as a MySQL server and an Oracle server
          (or multiple MySQL servers), where actions that involve
          multiple servers must happen as part of a global transaction,
          rather than as separate transactions local to each server.
        </p></li><li><p>
          A bank keeps account information in an RDBMS and distributes
          and receives money via automated teller machines (ATMs). It is
          necessary to ensure that ATM actions are correctly reflected
          in the accounts, but this cannot be done with the RDBMS alone.
          A global transaction manager integrates the ATM and database
          resources to ensure overall consistency of financial
          transactions.
        </p></li></ul></div><p>
      Applications that use global transactions involve one or more
      Resource Managers and a Transaction Manager:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          A Resource Manager (RM) provides access to transactional
          resources. A database server is one kind of resource manager.
          It must be possible to either commit or roll back transactions
          managed by the RM.
        </p></li><li><p>
          A Transaction Manager (TM) coordinates the transactions that
          are part of a global transaction. It communicates with the RMs
          that handle each of these transactions. The individual
          transactions within a global transaction are
          “<span class="quote">branches</span>” of the global transaction. Global
          transactions and their branches are identified by a naming
          scheme described later.
        </p></li></ul></div><p>
      The MySQL implementation of XA MySQL enables a MySQL server to act
      as a Resource Manager that handles XA transactions within a global
      transaction. A client program that connects to the MySQL server
      acts as the Transaction Manager.
    </p><p>
      To carry out a global transaction, it is necessary to know which
      components are involved, and bring each component to a point when
      it can be committed or rolled back. Depending on what each
      component reports about its ability to succeed, they must all
      commit or roll back as an atomic group. That is, either all
      components must commit, or all components musts roll back. To
      manage a global transaction, it is necessary to take into account
      that any component or the connecting network might fail.
    </p><p>
      The process for executing a global transaction uses two-phase
      commit (2PC). This takes place after the actions performed by the
      branches of the global transaction have been executed.
    </p><div class="orderedlist"><ol type="1"><li><p>
          In the first phase, all branches are prepared. That is, they
          are told by the TM to get ready to commit. Typically, this
          means each RM that manages a branch records the actions for
          the branch in stable storage. The branches indicate whether
          they are able to do this, and these results are used for the
          second phase.
        </p></li><li><p>
          In the second phase, the TM tells the RMs whether to commit or
          roll back. If all branches indicated when they were prepared
          that they will be able to commit, all branches are told to
          commit. If any branch indicated when it was prepared that it
          will not be able to commit, all branches are told to roll
          back.
        </p></li></ol></div><p>
      In some cases, a global transaction might use one-phase commit
      (1PC). For example, when a Transaction Manager finds that a global
      transaction consists of only one transactional resource (that is,
      a single branch), that resource can be told to prepare and commit
      at the same time.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xa-statements"></a>12.4.7.1. XA Transaction SQL Syntax</h4></div></div></div><a class="indexterm" name="id2101376"></a><a class="indexterm" name="id2101385"></a><a class="indexterm" name="id2101398"></a><a class="indexterm" name="id2101407"></a><a class="indexterm" name="id2101419"></a><a class="indexterm" name="id2101428"></a><a class="indexterm" name="id2101440"></a><a class="indexterm" name="id2101449"></a><a class="indexterm" name="id2101462"></a><a class="indexterm" name="id2101471"></a><a class="indexterm" name="id2101483"></a><a class="indexterm" name="id2101492"></a><a class="indexterm" name="id2101504"></a><a class="indexterm" name="id2101517"></a><p>
        To perform XA transactions in MySQL, use the following
        statements:
      </p><pre class="programlisting">XA {START|BEGIN} <em class="replaceable"><code>xid</code></em> [JOIN|RESUME]

XA END <em class="replaceable"><code>xid</code></em> [SUSPEND [FOR MIGRATE]]

XA PREPARE <em class="replaceable"><code>xid</code></em>

XA COMMIT <em class="replaceable"><code>xid</code></em> [ONE PHASE]

XA ROLLBACK <em class="replaceable"><code>xid</code></em>

XA RECOVER
</pre><p>
        For <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        START</code></a>, the <code class="literal">JOIN</code> and
        <code class="literal">RESUME</code> clauses are not supported.
      </p><p>
        For <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        END</code></a> the <code class="literal">SUSPEND [FOR MIGRATE]</code>
        clause is not supported.
      </p><p>
        Each XA statement begins with the <code class="literal">XA</code> keyword,
        and most of them require an <em class="replaceable"><code>xid</code></em>
        value. An <em class="replaceable"><code>xid</code></em> is an XA transaction
        identifier. It indicates which transaction the statement applies
        to. <em class="replaceable"><code>xid</code></em> values are supplied by the
        client, or generated by the MySQL server. An
        <em class="replaceable"><code>xid</code></em> value has from one to three
        parts:
      </p><pre class="programlisting"><em class="replaceable"><code>xid</code></em>: <em class="replaceable"><code>gtrid</code></em> [, <em class="replaceable"><code>bqual</code></em> [, <em class="replaceable"><code>formatID</code></em> ]]
</pre><p>
        <em class="replaceable"><code>gtrid</code></em> is a global transaction
        identifier, <em class="replaceable"><code>bqual</code></em> is a branch
        qualifier, and <em class="replaceable"><code>formatID</code></em> is a number
        that identifies the format used by the
        <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> values. As indicated by the
        syntax, <em class="replaceable"><code>bqual</code></em> and
        <em class="replaceable"><code>formatID</code></em> are optional. The default
        <em class="replaceable"><code>bqual</code></em> value is <code class="literal">''</code>
        if not given. The default <em class="replaceable"><code>formatID</code></em>
        value is 1 if not given.
      </p><p>
        <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> must be string literals, each
        up to 64 bytes (not characters) long.
        <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> can be specified in several
        ways. You can use a quoted string (<code class="literal">'ab'</code>), hex
        string (<code class="literal">0x6162</code>, <code class="literal">X'ab'</code>), or
        bit value
        (<code class="literal">b'<em class="replaceable"><code>nnnn</code></em>'</code>).
      </p><p>
        <em class="replaceable"><code>formatID</code></em> is an unsigned integer.
      </p><p>
        The <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> values are interpreted in bytes
        by the MySQL server's underlying XA support routines. However,
        while an SQL statement containing an XA statement is being
        parsed, the server works with some specific character set. To be
        safe, write <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> as hex strings.
      </p><p>
        <em class="replaceable"><code>xid</code></em> values typically are generated by
        the Transaction Manager. Values generated by one TM must be
        different from values generated by other TMs. A given TM must be
        able to recognize its own <em class="replaceable"><code>xid</code></em> values
        in a list of values returned by the
        <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        RECOVER</code></a> statement.
      </p><p>
        <code class="literal">XA START <em class="replaceable"><code>xid</code></em></code>
        starts an XA transaction with the given
        <em class="replaceable"><code>xid</code></em> value. Each XA transaction must
        have a unique <em class="replaceable"><code>xid</code></em> value, so the value
        must not currently be used by another XA transaction. Uniqueness
        is assessed using the <em class="replaceable"><code>gtrid</code></em> and
        <em class="replaceable"><code>bqual</code></em> values. All following XA
        statements for the XA transaction must be specified using the
        same <em class="replaceable"><code>xid</code></em> value as that given in the
        <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        START</code></a> statement. If you use any of those statements
        but specify an <em class="replaceable"><code>xid</code></em> value that does
        not correspond to some existing XA transaction, an error occurs.
      </p><p>
        One or more XA transactions can be part of the same global
        transaction. All XA transactions within a given global
        transaction must use the same <em class="replaceable"><code>gtrid</code></em>
        value in the <em class="replaceable"><code>xid</code></em> value. For this
        reason, <em class="replaceable"><code>gtrid</code></em> values must be globally
        unique so that there is no ambiguity about which global
        transaction a given XA transaction is part of. The
        <em class="replaceable"><code>bqual</code></em> part of the
        <em class="replaceable"><code>xid</code></em> value must be different for each
        XA transaction within a global transaction. (The requirement
        that <em class="replaceable"><code>bqual</code></em> values be different is a
        limitation of the current MySQL XA implementation. It is not
        part of the XA specification.)
      </p><p>
        The <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        RECOVER</code></a> statement returns information for those XA
        transactions on the MySQL server that are in the
        <code class="literal">PREPARED</code> state. (See
        <a href="sql-syntax.html#xa-states" title="12.4.7.2. XA Transaction States">Section 12.4.7.2, “XA Transaction States”</a>.) The output includes a row for each
        such XA transaction on the server, regardless of which client
        started it.
      </p><p>
        <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        RECOVER</code></a> output rows look like this (for an example
        <em class="replaceable"><code>xid</code></em> value consisting of the parts
        <code class="literal">'abc'</code>, <code class="literal">'def'</code>, and
        <code class="literal">7</code>):
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>XA RECOVER;</code></strong>
+----------+--------------+--------------+--------+
| formatID | gtrid_length | bqual_length | data   |
+----------+--------------+--------------+--------+
|        7 |            3 |            3 | abcdef |
+----------+--------------+--------------+--------+
</pre><p>
        The output columns have the following meanings:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">formatID</code> is the
            <em class="replaceable"><code>formatID</code></em> part of the transaction
            <em class="replaceable"><code>xid</code></em>
          </p></li><li><p>
            <code class="literal">gtrid_length</code> is the length in bytes of
            the <em class="replaceable"><code>gtrid</code></em> part of the
            <em class="replaceable"><code>xid</code></em>
          </p></li><li><p>
            <code class="literal">bqual_length</code> is the length in bytes of
            the <em class="replaceable"><code>bqual</code></em> part of the
            <em class="replaceable"><code>xid</code></em>
          </p></li><li><p>
            <code class="literal">data</code> is the concatenation of the
            <em class="replaceable"><code>gtrid</code></em> and
            <em class="replaceable"><code>bqual</code></em> parts of the
            <em class="replaceable"><code>xid</code></em>
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="xa-states"></a>12.4.7.2. XA Transaction States</h4></div></div></div><p>
        An XA transaction progresses through the following states:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Use <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
            START</code></a> to start an XA transaction and put it in the
            <code class="literal">ACTIVE</code> state.
          </p></li><li><p>
            For an <code class="literal">ACTIVE</code> XA transaction, issue the
            SQL statements that make up the transaction, and then issue
            an <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
            END</code></a> statement.
            <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
            END</code></a> puts the transaction in the
            <code class="literal">IDLE</code> state.
          </p></li><li><p>
            For an <code class="literal">IDLE</code> XA transaction, you can issue
            either an <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
            PREPARE</code></a> statement or an <code class="literal">XA COMMIT ... ONE
            PHASE</code> statement:
          </p><div class="itemizedlist"><ul type="disc"><li><p>
                <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
                PREPARE</code></a> puts the transaction in the
                <code class="literal">PREPARED</code> state. An
                <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
                RECOVER</code></a> statement at this point will include
                the transaction's <em class="replaceable"><code>xid</code></em> value
                in its output, because
                <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
                RECOVER</code></a> lists all XA transactions that are in
                the <code class="literal">PREPARED</code> state.
              </p></li><li><p>
                <code class="literal">XA COMMIT ... ONE PHASE</code> prepares and
                commits the transaction. The
                <em class="replaceable"><code>xid</code></em> value will not be listed
                by <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
                RECOVER</code></a> because the transaction terminates.
              </p></li></ul></div></li><li><p>
            For a <code class="literal">PREPARED</code> XA transaction, you can
            issue an <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
            COMMIT</code></a> statement to commit and terminate the
            transaction, or
            <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
            ROLLBACK</code></a> to roll back and terminate the
            transaction.
          </p></li></ol></div><p>
        Here is a simple XA transaction that inserts a row into a table
        as part of a global transaction:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>XA START 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO mytable (i) VALUES(10);</code></strong>
Query OK, 1 row affected (0.04 sec)

mysql&gt; <strong class="userinput"><code>XA END 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>XA PREPARE 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>XA COMMIT 'xatest';</code></strong>
Query OK, 0 rows affected (0.00 sec)
</pre><p>
        Within the context of a given client connection, XA transactions
        and local (non-XA) transactions are mutually exclusive. For
        example, if <a href="sql-syntax.html#xa-statements" title="12.4.7.1. XA Transaction SQL Syntax"><code class="literal">XA
        START</code></a> has been issued to begin an XA transaction, a
        local transaction cannot be started until the XA transaction has
        been committed or rolled back. Conversely, if a local
        transaction has been started with
        <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">START
        TRANSACTION</code></a>, no XA statements can be used until the
        transaction has been committed or rolled back.
      </p><p>
        Note that if an XA transaction is in the
        <code class="literal">ACTIVE</code> state, you cannot issue any statements
        that cause an implicit commit. That would violate the XA
        contract because you could not roll back the XA transaction. You
        will receive the following error if you try to execute such a
        statement:
      </p><pre class="programlisting">ERROR 1399 (XAE07): XAER_RMFAIL: The command cannot be executed
when global transaction is in the ACTIVE state
</pre><p>
        Statements to which the preceding remark applies are listed at
        <a href="sql-syntax.html#implicit-commit" title="12.4.3. Statements That Cause an Implicit Commit">Section 12.4.3, “Statements That Cause an Implicit Commit”</a>.
      </p><p class="mnmas-kb"><b>MySQL Enterprise</b>
          MySQL Enterprise subscribers will find more information on
          this subject in the Knowledge Base article,
          <a href="https://kb.mysql.com/view.php?id=5199" target="_top"> Can I Undo
          a Set of SQL Statements?</a> To subscribe to MySQL
          Enterprise see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-server-administration"></a>12.5. Database Administration Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#account-management-sql">12.5.1. Account Management Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#table-maintenance-sql">12.5.2. Table Maintenance Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#plugin-sql">12.5.3. User-Defined Function Statements</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-option">12.5.4. <code class="literal">SET</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show">12.5.5. <code class="literal">SHOW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#other-administrative-sql">12.5.6. Other Administrative Statements</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="account-management-sql"></a>12.5.1. Account Management Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#create-user">12.5.1.1. <code class="literal">CREATE USER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-user">12.5.1.2. <code class="literal">DROP USER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#grant">12.5.1.3. <code class="literal">GRANT</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#rename-user">12.5.1.4. <code class="literal">RENAME USER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#revoke">12.5.1.5. <code class="literal">REVOKE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-password">12.5.1.6. <code class="literal">SET PASSWORD</code> Syntax</a></span></dt></dl></div><p>
      MySQL account information is stored in the tables of the
      <code class="literal">mysql</code> database. This database and the access
      control system are discussed extensively in
      <a href="server-administration.html" title="Chapter 5. MySQL Server Administration">Chapter 5, <i>MySQL Server Administration</i></a>, which you should consult
      for additional details.
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
        Some releases of MySQL introduce changes to the structure of the
        grant tables to add new privileges or features. Whenever you
        update to a new version of MySQL, you should update your grant
        tables to make sure that they have the current structure so that
        you can take advantage of any new capabilities. See
        <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p></div><p class="mnmas"><b>MySQL Enterprise</b>
        In a production environment it is always prudent to examine any
        changes to users' accounts. The MySQL Enterprise Monitor
        provides notification whenever users' privileges are altered.
        For more information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="create-user"></a>12.5.1.1. <code class="literal">CREATE USER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2102432"></a><a class="indexterm" name="id2102441"></a><a class="indexterm" name="id2102453"></a><pre class="programlisting">CREATE USER <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']
    [, <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']] ...
</pre><p>
        The <a href="sql-syntax.html#create-user" title="12.5.1.1. CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statement was
        added in MySQL 5.0.2. This statement creates new MySQL accounts.
        To use it, you must have the global <a href="server-administration.html#priv_create-user"><code class="literal">CREATE
        USER</code></a> privilege or the
        <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privilege for the
        <code class="literal">mysql</code> database. For each account,
        <a href="sql-syntax.html#create-user" title="12.5.1.1. CREATE USER Syntax"><code class="literal">CREATE USER</code></a> creates a new record
        in the <code class="literal">mysql.user</code> table that has no
        privileges. An error occurs if the account already exists. Each
        account is named using the same format as for the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the user name part of the account name, a host name part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        The account can be given a password with the optional
        <code class="literal">IDENTIFIED BY</code> clause. The
        <em class="replaceable"><code>user</code></em> value and the password are given
        the same way as for the <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>
        statement. In particular, to specify the password in plain text,
        omit the <code class="literal">PASSWORD</code> keyword. To specify the
        password as the hashed value as returned by the
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function, include the
        <code class="literal">PASSWORD</code> keyword. See
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          This statement may be recorded in a history file such as
          <code class="filename">~/.mysql_history</code>, which means that
          plaintext passwords may be read by anyone having read access
          to such files.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="drop-user"></a>12.5.1.2. <code class="literal">DROP USER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2102652"></a><a class="indexterm" name="id2102661"></a><a class="indexterm" name="id2102673"></a><a class="indexterm" name="id2102686"></a><a class="indexterm" name="id2102698"></a><a class="indexterm" name="id2102710"></a><a class="indexterm" name="id2102723"></a><a class="indexterm" name="id2102735"></a><a class="indexterm" name="id2102748"></a><pre class="programlisting">DROP USER <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...
</pre><p>
        The <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a> statement removes
        one or more MySQL accounts. To use it, you must have the global
        <a href="server-administration.html#priv_create-user"><code class="literal">CREATE USER</code></a> privilege or the
        <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a> privilege for the
        <code class="literal">mysql</code> database. Each account is named using
        the same format as for the <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>
        statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the user name part of the account name, a host name part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a> as present in MySQL
        5.0.0 removes only accounts that have no privileges. In MySQL
        5.0.2, it was modified to remove account privileges as well.
        This means that the procedure for removing an account depends on
        your version of MySQL.
      </p><p>
        As of MySQL 5.0.2, you can remove an account and its privileges
        as follows:
      </p><pre class="programlisting">DROP USER <em class="replaceable"><code>user</code></em>;
</pre><p>
        The statement removes privilege rows for the account from all
        grant tables.
      </p><p>
        Before MySQL 5.0.2, <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a>
        serves only to remove account rows from the
        <code class="literal">user</code> table for accounts that have no
        privileges. To remove a MySQL account completely (including all
        of its privileges), you should use the following procedure,
        performing these steps in the order shown:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Use <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> to determine
            what privileges the account has. See
            <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax">Section 12.5.5.17, “<code class="literal">SHOW GRANTS</code> Syntax”</a>.
          </p></li><li><p>
            Use <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> to revoke the
            privileges displayed by <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW
            GRANTS</code></a>. This removes rows for the account from all
            the grant tables except the <code class="literal">user</code> table,
            and revokes any global privileges listed in the
            <code class="literal">user</code> table. See <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
          </p></li><li><p>
            Delete the account by using <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP
            USER</code></a> to remove the <code class="literal">user</code> table
            row.
          </p></li></ol></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a> does not
          automatically close any open user sessions. Rather, in the
          event that a user with an open session is dropped, the
          statement does not take effect until that user's session is
          closed. Once the session is closed, the user is dropped, and
          that user's next attempt to log in will fail. <span class="emphasis"><em>This
          is by design</em></span>.
        </p></div><p>
        <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a> does not automatically
        delete or invalidate any database objects that the user created.
        This applies to tables, views, stored routines, and triggers.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="grant"></a>12.5.1.3. <code class="literal">GRANT</code> Syntax</h4></div></div></div><a class="indexterm" name="id2103033"></a><a class="indexterm" name="id2103042"></a><a class="indexterm" name="id2103054"></a><a class="indexterm" name="id2103063"></a><pre class="programlisting">GRANT
    <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
      [, <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]] ...
    ON [<em class="replaceable"><code>object_type</code></em>] <em class="replaceable"><code>priv_level</code></em>
    TO <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']
        [, <em class="replaceable"><code>user</code></em> [IDENTIFIED BY [PASSWORD] '<em class="replaceable"><code>password</code></em>']] ...
    [REQUIRE {NONE | <em class="replaceable"><code>ssl_option</code></em> [[AND] <em class="replaceable"><code>ssl_option</code></em>] ...}]
    [WITH <em class="replaceable"><code>with_option</code></em> [<em class="replaceable"><code>with_option</code></em>] ...]

<em class="replaceable"><code>object_type</code></em>:
    TABLE
  | FUNCTION
  | PROCEDURE

<em class="replaceable"><code>priv_level</code></em>:
    *
  | *.*
  | <em class="replaceable"><code>db_name</code></em>.*
  | <em class="replaceable"><code>db_name.tbl_name</code></em>
  | <em class="replaceable"><code>tbl_name</code></em>
  | <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>routine_name</code></em>

<em class="replaceable"><code>with_option</code></em>:
    GRANT OPTION
  | MAX_QUERIES_PER_HOUR <em class="replaceable"><code>count</code></em>
  | MAX_UPDATES_PER_HOUR <em class="replaceable"><code>count</code></em>
  | MAX_CONNECTIONS_PER_HOUR <em class="replaceable"><code>count</code></em>
  | MAX_USER_CONNECTIONS <em class="replaceable"><code>count</code></em>

<em class="replaceable"><code>ssl_option</code></em>:
    SSL
  | X509
  | CIPHER '<em class="replaceable"><code>cipher</code></em>'
  | ISSUER '<em class="replaceable"><code>issuer</code></em>'
  | SUBJECT '<em class="replaceable"><code>subject</code></em>'
</pre><p>
        The <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement enables
        system administrators to create MySQL user accounts and to grant
        rights to accounts. To use <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>,
        you must have the <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>
        privilege, and you must have the privileges that you are
        granting. The <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statement is
        related and enables administrators to remove account privileges.
        To determine what privileges an account has, use
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a>. See
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax">Section 12.5.1.5, “<code class="literal">REVOKE</code> Syntax”</a>, and <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax">Section 12.5.5.17, “<code class="literal">SHOW GRANTS</code> Syntax”</a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For automated notification of users with inappropriate
          privileges, subscribe to the MySQL Enterprise Monitor. For
          more information, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p><p>
        The following table summarizes the allowable
        <em class="replaceable"><code>priv_type</code></em> privilege types that can be
        specified for the <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statements. For additional
        information about these privileges, see
        <a href="server-administration.html#privileges-provided" title="5.4.1. Privileges Provided by MySQL">Section 5.4.1, “Privileges Provided by MySQL”</a>.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Privilege</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td class="priv"><code class="literal">ALL [PRIVILEGES]</code></td><td>Grant all privileges at specified access level except
                <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a></td></tr><tr><td><a href="server-administration.html#priv_alter"><code class="literal">ALTER</code></a></td><td>Enable use of <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a></td></tr><tr><td><a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a></td><td>Enable stored routines to be altered or dropped</td></tr><tr><td><a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a></td><td>Enable database and table creation</td></tr><tr><td><a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a></td><td>Enable stored routine creation</td></tr><tr><td><a href="server-administration.html#priv_create-temporary-tables"><code class="literal">CREATE TEMPORARY TABLES</code></a></td><td>Enable use of <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
                TEMPORARY TABLE</code></a></td></tr><tr><td><a href="server-administration.html#priv_create-user"><code class="literal">CREATE USER</code></a></td><td>Enable use of <a href="sql-syntax.html#create-user" title="12.5.1.1. CREATE USER Syntax"><code class="literal">CREATE USER</code></a>,
                <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a>,
                <a href="sql-syntax.html#rename-user" title="12.5.1.4. RENAME USER Syntax"><code class="literal">RENAME USER</code></a>, and
                <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE ALL
                PRIVILEGES</code></a></td></tr><tr><td><a href="server-administration.html#priv_create-view"><code class="literal">CREATE VIEW</code></a></td><td>Enable views to be created or altered</td></tr><tr><td><a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a></td><td>Enable use of <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a></td></tr><tr><td><a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a></td><td>Enable databases, tables, and views to be dropped</td></tr><tr><td><a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a></td><td>Enable the user to execute stored routines</td></tr><tr><td><a href="server-administration.html#priv_file"><code class="literal">FILE</code></a></td><td>Enable the user to cause the server to read or write files</td></tr><tr><td><a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a></td><td>Enable privileges to be granted to or removed from other accounts</td></tr><tr><td><a href="server-administration.html#priv_index"><code class="literal">INDEX</code></a></td><td>Enable indexes to be created or dropped</td></tr><tr><td><a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a></td><td>Enable use of <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a></td></tr><tr><td><a href="server-administration.html#priv_lock-tables"><code class="literal">LOCK TABLES</code></a></td><td>Enable use of <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> on tables for
                which you have the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>
                privilege</td></tr><tr><td><a href="server-administration.html#priv_process"><code class="literal">PROCESS</code></a></td><td>Enable the user to see all processes with <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
                PROCESSLIST</code></a></td></tr><tr><td><a href="server-administration.html#priv_references"><code class="literal">REFERENCES</code></a></td><td>Not implemented</td></tr><tr><td><a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a></td><td>Enable use of <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a> operations</td></tr><tr><td><a href="server-administration.html#priv_replication-client"><code class="literal">REPLICATION CLIENT</code></a></td><td>Enable the user to ask where master or slave servers are</td></tr><tr><td><a href="server-administration.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a></td><td>Enable replication slaves to read binary log events from the master</td></tr><tr><td><a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a></td><td>Enable use of <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a></td></tr><tr><td><a href="server-administration.html#priv_show-databases"><code class="literal">SHOW DATABASES</code></a></td><td>Enable <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a> to show all
                databases</td></tr><tr><td><a href="server-administration.html#priv_show-view"><code class="literal">SHOW VIEW</code></a></td><td>Enable use of <a href="sql-syntax.html#show-create-view" title="12.5.5.10. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a></td></tr><tr><td><a href="server-administration.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a></td><td>Enable use of <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin shutdown</strong></span></a></td></tr><tr><td><a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a></td><td>Enable use of <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>,
                <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a>,
                <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY LOGS</code></a>, and
                <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET
                GLOBAL</code></a> statements, the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin
                debug</strong></span></a> command; allows you to connect (once)
                even if <a href="server-administration.html#sysvar_max_connections"><code class="literal">max_connections</code></a>
                is reached</td></tr><tr><td><a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a></td><td>Enable use of <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a></td></tr><tr><td><a href="server-administration.html#priv_usage"><code class="literal">USAGE</code></a></td><td>Synonym for “<span class="quote">no privileges</span>”</td></tr></tbody></table></div><p>
        The <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a> privilege is not
        operational until MySQL 5.0.3. <a href="server-administration.html#priv_create-view"><code class="literal">CREATE
        VIEW</code></a> and <a href="server-administration.html#priv_show-view"><code class="literal">SHOW VIEW</code></a> were
        added in MySQL 5.0.1. <a href="server-administration.html#priv_create-user"><code class="literal">CREATE
        USER</code></a>, <a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a>,
        and <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a> were added in
        MySQL 5.0.3.
      </p><p>
        In <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statements, the
        <a href="server-administration.html#priv_all"><code class="literal">ALL [PRIVILEGES]</code></a>
        privilege is named by itself and cannot be specified along with
        other privileges. It stands for all privileges available for the
        level at which privileges are to be granted except for the
        <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a> privilege.
      </p><p>
        <a href="server-administration.html#priv_usage"><code class="literal">USAGE</code></a> can be specified when you
        want to create a user that has no privileges, or to modify the
        <code class="literal">REQUIRE</code> or <code class="literal">WITH</code> clauses
        for an account without changing its existing privileges.
      </p><p>
        MySQL account information is stored in the tables of the
        <code class="literal">mysql</code> database. This database and the access
        control system are discussed extensively in
        <a href="server-administration.html" title="Chapter 5. MySQL Server Administration">Chapter 5, <i>MySQL Server Administration</i></a>, which you should
        consult for additional details.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          Some releases of MySQL introduce changes to the structure of
          the grant tables to add new privileges or features. Whenever
          you update to a new version of MySQL, you should update your
          grant tables to make sure that they have the current structure
          so that you can take advantage of any new capabilities. See
          <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
        </p></div><p>
        If the grant tables hold privilege rows that contain mixed-case
        database or table names and the
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> system
        variable is set to a nonzero value,
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> cannot be used to revoke
        these privileges. It will be necessary to manipulate the grant
        tables directly. (<a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> will not
        create such rows when
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> is set,
        but such rows might have been created prior to setting the
        variable.)
      </p><p>
        Privileges can be granted at several levels, depending on the
        syntax used for the <code class="literal">ON</code> clause. For
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a>, the same
        <code class="literal">ON</code> syntax specifies which privileges to take
        away. The examples shown here include no <code class="literal">IDENTIFIED BY
        '<em class="replaceable"><code>password</code></em>'</code> clause for
        brevity, but you should include one if the account does not
        already exist to avoid creating an account with no password.
      </p><p>
        <span class="bold"><strong>Global privileges</strong></span>
      </p><p>
        Global privileges are administrative or apply to all databases
        on a given server. To assign global privileges, use <code class="literal">ON
        *.*</code> syntax:
      </p><pre class="programlisting">GRANT ALL ON *.* TO 'someuser'@'somehost';
GRANT SELECT, INSERT ON *.* TO 'someuser'@'somehost';
</pre><p>
        Before MySQL 5.0.23, privileges also are assigned at the global
        level if you use <code class="literal">ON *</code> syntax and you have
        <span class="emphasis"><em>not</em></span> selected a default database. As of
        5.0.23, <code class="literal">ON *</code> requires a default database and
        produces an error is there is none.
      </p><p>
        The <a href="server-administration.html#priv_create-user"><code class="literal">CREATE USER</code></a>,
        <a href="server-administration.html#priv_file"><code class="literal">FILE</code></a>,
        <a href="server-administration.html#priv_process"><code class="literal">PROCESS</code></a>,
        <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a>,
        <a href="server-administration.html#priv_replication-client"><code class="literal">REPLICATION CLIENT</code></a>,
        <a href="server-administration.html#priv_replication-slave"><code class="literal">REPLICATION SLAVE</code></a>,
        <a href="server-administration.html#priv_show-databases"><code class="literal">SHOW DATABASES</code></a>,
        <a href="server-administration.html#priv_shutdown"><code class="literal">SHUTDOWN</code></a>, and
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privileges are
        administrative and can only be granted globally.
      </p><p>
        Other privileges can be granted globally or at more specific
        levels.
      </p><p>
        Global privileges are stored in the
        <code class="literal">mysql.user</code> table.
      </p><p>
        <span class="bold"><strong>Database privileges</strong></span>
      </p><p>
        Database privileges apply to all objects in a given database. To
        assign database-level privileges, use <code class="literal">ON
        <em class="replaceable"><code>db_name</code></em>.*</code> syntax:
      </p><pre class="programlisting">GRANT ALL ON mydb.* TO 'someuser'@'somehost';
GRANT SELECT, INSERT ON mydb.* TO 'someuser'@'somehost';
</pre><p>
        Privileges also are assigned at the database level (for the
        default database) if you use <code class="literal">ON *</code> syntax and
        you have selected a default database.
      </p><p>
        The <code class="literal">CREATE</code>, <code class="literal">DROP</code>, and
        <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a> privileges can be
        specified at the database level. Table or routine privileges
        also can be specified at the database level, in which case they
        apply to all tables or routines in the database.
      </p><p>
        Database privileges are stored in the
        <code class="literal">mysql.db</code> and <code class="literal">mysql.host</code>
        tables. <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> affect the
        <code class="literal">db</code> table, but not the <code class="literal">host</code>
        table, which is rarely used.
      </p><p>
        <span class="bold"><strong>Table privileges</strong></span>
      </p><p>
        Table privileges apply to all columns in a given table. To
        assign table-level privileges, use <code class="literal">ON
        <em class="replaceable"><code>db_name.tbl_name</code></em></code> syntax:
      </p><pre class="programlisting">GRANT ALL ON mydb.mytbl TO 'someuser'@'somehost';
GRANT SELECT, INSERT ON mydb.mytbl TO 'someuser'@'somehost';
</pre><p>
        If you specify <em class="replaceable"><code>tbl_name</code></em> rather than
        <em class="replaceable"><code>db_name.tbl_name</code></em>, the statement
        applies to <em class="replaceable"><code>tbl_name</code></em> in the default
        database. An error occurs if there is no default database.
      </p><p>
        The allowable <em class="replaceable"><code>priv_type</code></em> values for a
        table are <a href="server-administration.html#priv_alter"><code class="literal">ALTER</code></a>,
        <a href="server-administration.html#priv_create-view"><code class="literal">CREATE VIEW</code></a>,
        <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a>,
        <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a>,
        <a href="server-administration.html#priv_drop"><code class="literal">DROP</code></a>, <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT
        OPTION</code></a>, <a href="server-administration.html#priv_index"><code class="literal">INDEX</code></a>,
        <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a>,
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>, <a href="server-administration.html#priv_show-view"><code class="literal">SHOW
        VIEW</code></a>, and <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a>.
      </p><p>
        Table privileges are stored in the
        <code class="literal">mysql.tables_priv</code> table.
      </p><p>
        <span class="bold"><strong>Column privileges</strong></span>
      </p><p>
        Column privileges apply to single columns in a given table. Each
        privilege to be granted at the column level must be followed by
        the column or columns, enclosed within parentheses.
      </p><pre class="programlisting">GRANT SELECT (col1), INSERT (col1,col2) ON mydb.mytbl TO 'someuser'@'somehost';
</pre><p>
        The allowable <em class="replaceable"><code>priv_type</code></em> values for a
        column (that is, when you use a
        <em class="replaceable"><code>column_list</code></em> clause) are
        <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a>,
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>, and
        <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a>.
      </p><p>
        Column privileges are stored in the
        <code class="literal">mysql.columns_priv</code> table.
      </p><p>
        <span class="bold"><strong>Routine privileges</strong></span>
      </p><p>
        The <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a>,
        <a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a>,
        <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a>, and
        <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a> privileges apply to
        stored routines (procedures and functions). They can be granted
        at the global and database levels. Except for
        <a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a>, these privileges
        can be granted at the routine level for individual routines.
      </p><pre class="programlisting">GRANT CREATE ROUTINE ON mydb.* TO 'someuser'@'somehost';
GRANT EXECUTE ON PROCEDURE mydb.myproc TO 'someuser'@'somehost';
</pre><p>
        The allowable <em class="replaceable"><code>priv_type</code></em> values at the
        routine level are <a href="server-administration.html#priv_alter-routine"><code class="literal">ALTER ROUTINE</code></a>,
        <a href="server-administration.html#priv_execute"><code class="literal">EXECUTE</code></a>, and
        <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>.
        <a href="server-administration.html#priv_create-routine"><code class="literal">CREATE ROUTINE</code></a> is not a
        routine-level privilege because you must have this privilege to
        create a routine in the first place.
      </p><p>
        Routine-level privileges are stored in the
        <code class="literal">mysql.procs_priv</code> table.
      </p><p>
        For the global, database, table, and routine levels,
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT ALL</code></a>
        assigns only the privileges that exist at the level you are
        granting. For example, <code class="literal">GRANT ALL ON
        <em class="replaceable"><code>db_name</code></em>.*</code> is a
        database-level statement, so it does not grant any global-only
        privileges such as <a href="server-administration.html#priv_file"><code class="literal">FILE</code></a>.
      </p><p>
        The <em class="replaceable"><code>object_type</code></em> clause was added in
        MySQL 5.0.6. If present, it should be specified as
        <code class="literal">TABLE</code>, <code class="literal">FUNCTION</code>, or
        <code class="literal">PROCEDURE</code> when the following object is a
        table, a stored function, or a stored procedure.
      </p><p>
        The privileges for a database, table, column, or routine are
        formed additively as the logical <a href="functions.html#operator_or"><code class="literal">OR</code></a>
        of the privileges at each of the privilege levels. For example,
        if a user has a global <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>
        privilege, the privilege cannot be denied by an absence of the
        privilege at the database, table, or column level. Details of
        the privilege-checking procedure are presented in
        <a href="server-administration.html#request-access" title="5.4.5. Access Control, Stage 2: Request Verification">Section 5.4.5, “Access Control, Stage 2: Request Verification”</a>.
      </p><p>
        MySQL enables you to grant privileges even on database objects
        that do not exist. In such cases, the privileges to be granted
        must include the <a href="server-administration.html#priv_create"><code class="literal">CREATE</code></a>
        privilege. <span class="emphasis"><em>This behavior is by design</em></span>, and
        is intended to enable the database administrator to prepare user
        accounts and privileges for database objects that are to be
        created at a later time.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          <span class="emphasis"><em>MySQL does not automatically revoke any privileges
          when you drop a database or table</em></span>. However, if you
          drop a routine, any routine-level privileges granted for that
          routine are revoked.
        </p></div><p>
        The <em class="replaceable"><code>user</code></em> value indicates which MySQL
        account to grant the privileges to. To accommodate granting
        rights to users from arbitrary hosts, MySQL supports specifying
        the <em class="replaceable"><code>user</code></em> value in the form
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>.
        If a <em class="replaceable"><code>user_name</code></em> or
        <em class="replaceable"><code>host_name</code></em> value is legal as an
        unquoted identifier, you need not quote it. However, quotes are
        necessary to specify a <em class="replaceable"><code>user_name</code></em>
        string containing special characters (such as
        “<span class="quote"><code class="literal">-</code></span>”), or a
        <em class="replaceable"><code>host_name</code></em> string containing special
        characters or wildcard characters (such as
        “<span class="quote"><code class="literal">%</code></span>”); for example,
        <code class="literal">'test-user'@'%.com'</code>. Quote the user name and
        host name separately.
      </p><p>
        You can specify wildcards in the host name. For example,
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@'%.example.com'</code>
        applies to <em class="replaceable"><code>user_name</code></em> for any host in
        the <code class="literal">example.com</code> domain, and
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@'192.168.1.%'</code>
        applies to <em class="replaceable"><code>user_name</code></em> for any host in
        the <code class="literal">192.168.1</code> class C subnet.
      </p><p>
        The simple form <em class="replaceable"><code>user_name</code></em> is a
        synonym for
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@'%'</code>.
      </p><p>
        <span class="emphasis"><em>MySQL does not support wildcards in user
        names</em></span>. To refer to an anonymous user, specify an
        account with an empty user name with the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement:
      </p><pre class="programlisting">GRANT ALL ON test.* TO ''@'localhost' ...
</pre><p>
        In this case, any user who connects from the local host with the
        correct password for the anonymous user will be allowed access,
        with the privileges associated with the anonymous-user account.
      </p><p>
        For additional information about user and host values in account
        names, see <a href="server-administration.html#account-names" title="5.4.3. Specifying Account Names">Section 5.4.3, “Specifying Account Names”</a>.
      </p><p>
        To specify quoted values, quote database, table, column, and
        routine names as identifiers, using backticks
        (“<span class="quote"><code class="literal">`</code></span>”). Quote user names and host
        names as identifiers or as strings, using either backticks
        (“<span class="quote"><code class="literal">`</code></span>”), single quotes
        (“<span class="quote"><code class="literal">'</code></span>”), or double quotes
        (“<span class="quote"><code class="literal">"</code></span>”). Quote passwords as
        strings, using single quotes.
      </p><p>
        The “<span class="quote"><code class="literal">_</code></span>” and
        “<span class="quote"><code class="literal">%</code></span>” wildcards are allowed when
        specifying database names in
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statements that grant
        privileges at the global or database levels. This means, for
        example, that if you want to use a
        “<span class="quote"><code class="literal">_</code></span>” character as part of a
        database name, you should specify it as
        “<span class="quote"><code class="literal">\_</code></span>” in the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement, to prevent the
        user from being able to access additional databases matching the
        wildcard pattern; for example, <code class="literal">GRANT ... ON
        `foo\_bar`.* TO ...</code>.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If you allow anonymous users to connect to the MySQL server,
          you should also grant privileges to all local users as
          <code class="literal"><em class="replaceable"><code>user_name</code></em>@localhost</code>.
          Otherwise, the anonymous user account for
          <code class="literal">localhost</code> in the
          <code class="literal">mysql.user</code> table (created during MySQL
          installation) is used when named users try to log in to the
          MySQL server from the local machine. For details, see
          <a href="server-administration.html#connection-access" title="5.4.4. Access Control, Stage 1: Connection Verification">Section 5.4.4, “Access Control, Stage 1: Connection Verification”</a>.
        </p></div><p>
        You can determine whether the preceding warning applies to you
        by executing the following query, which lists any anonymous
        users:
      </p><pre class="programlisting">SELECT Host, User FROM mysql.user WHERE User='';
</pre><p>
        To avoid the problem just described, delete the local anonymous
        user account using this statement:
      </p><pre class="programlisting">DROP USER ''@'localhost';
</pre><p>
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> supports host names up to
        60 characters long. Database, table, column, and routine names
        can be up to 64 characters. User names can be up to 16
        characters.
      </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          <span class="emphasis"><em>The allowable length for user names cannot be
          changed by altering the <code class="literal">mysql.user</code> table.
          Attempting to do so results in unpredictable behavior which
          may even make it impossible for users to log in to the MySQL
          server</em></span>. You should never alter any of the tables in
          the <code class="literal">mysql</code> database in any manner whatsoever
          except by means of the procedure described in
          <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
        </p></div><a class="indexterm" name="id2105115"></a><p>
        If the <a href="server-administration.html#sqlmode_no_auto_create_user"><code class="literal">NO_AUTO_CREATE_USER</code></a> SQL
        mode is not enabled and the account named in a
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement does not exist in
        the <code class="literal">mysql.user</code> table,
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> creates it. If you specify
        no <code class="literal">IDENTIFIED BY</code> clause or provide an empty
        password, the user has no password. <span class="emphasis"><em>This is very
        insecure.</em></span>
      </p><p>
        If <a href="server-administration.html#sqlmode_no_auto_create_user"><code class="literal">NO_AUTO_CREATE_USER</code></a> is
        enabled and the account does not exist,
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> fails and does not create
        the account unless the <code class="literal">IDENTIFIED BY</code> clause
        is given to provide a nonempty password.
      </p><p>
        When the <code class="literal">IDENTIFIED BY</code> clause is present and
        you have global grant privileges, the password becomes the new
        password for the account, even if the account exists and already
        has a password.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          The MySQL Enterprise Monitor specifically guards against user
          accounts with no passwords. To find out more, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p><p>
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> does not remove
        <code class="literal">mysql.user</code> table entries; you must do that
        using <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a> or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>.
      </p><p>
        Passwords can also be set with the <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET
        PASSWORD</code></a> statement. See
        <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax">Section 12.5.1.6, “<code class="literal">SET PASSWORD</code> Syntax”</a>.
      </p><p>
        In the <code class="literal">IDENTIFIED BY</code> clause, the password
        should be given as the literal password value. It is unnecessary
        to use the <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> function as
        it is for the <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a>
        statement. For example:
      </p><pre class="programlisting">GRANT ... IDENTIFIED BY 'mypass';
</pre><p>
        If you do not want to send the password in clear text and you
        know the hashed value that
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> would return for the
        password, you can specify the hashed value preceded by the
        keyword <code class="literal">PASSWORD</code>:
      </p><pre class="programlisting">GRANT ...
IDENTIFIED BY PASSWORD '*6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4';
</pre><p>
        The <code class="literal">WITH</code> clause is used for several purposes:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            To enable a user to grant privileges to other users
          </p></li><li><p>
            To specify resource-use limitations on a user
          </p></li><li><p>
            To specify whether and how a user must use secure
            connections to the server
          </p></li></ul></div><p>
        The <code class="literal">WITH GRANT OPTION</code> clause gives the user
        the ability to give to other users any privileges the user has
        at the specified privilege level. You should be careful to whom
        you give the <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>
        privilege, because two users with different privileges may be
        able to combine privileges!
      </p><p>
        You cannot grant another user a privilege which you yourself do
        not have; the <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>
        privilege enables you to assign only those privileges which you
        yourself possess.
      </p><p>
        Be aware that when you grant a user the
        <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a> privilege at a
        particular privilege level, any privileges the user possesses
        (or may be given in the future) at that level can also be
        granted by that user to other users. Suppose that you grant a
        user the <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privilege on a
        database. If you then grant the
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege on the database
        and specify <code class="literal">WITH GRANT OPTION</code>, that user can
        give to other users not only the
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege, but also
        <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a>. If you then grant the
        <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a> privilege to the user on
        the database, the user can grant
        <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a>,
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>, and
        <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a>.
      </p><p>
        For a nonadministrative user, you should not grant the
        <a href="server-administration.html#priv_alter"><code class="literal">ALTER</code></a> privilege globally or for
        the <code class="literal">mysql</code> database. If you do that, the user
        can try to subvert the privilege system by renaming tables!
      </p><p>
        For additional information about security risks associated with
        particular privileges, see
        <a href="server-administration.html#privileges-provided" title="5.4.1. Privileges Provided by MySQL">Section 5.4.1, “Privileges Provided by MySQL”</a>.
      </p><p>
        The <code class="literal">MAX_QUERIES_PER_HOUR
        <em class="replaceable"><code>count</code></em></code>,
        <code class="literal">MAX_UPDATES_PER_HOUR
        <em class="replaceable"><code>count</code></em></code>, and
        <code class="literal">MAX_CONNECTIONS_PER_HOUR
        <em class="replaceable"><code>count</code></em></code> options limit the
        number of queries, updates, and logins a user can perform during
        any given one-hour period. (Queries for which results are served
        from the query cache do not count against the
        <code class="literal">MAX_QUERIES_PER_HOUR</code> limit.) If
        <em class="replaceable"><code>count</code></em> is <code class="literal">0</code> (the
        default), this means that there is no limitation for that user.
      </p><p>
        The <code class="literal">MAX_USER_CONNECTIONS
        <em class="replaceable"><code>count</code></em></code> option, implemented
        in MySQL 5.0.3, limits the maximum number of simultaneous
        connections that the account can make. If
        <em class="replaceable"><code>count</code></em> is <code class="literal">0</code> (the
        default), the
        <a href="server-administration.html#sysvar_max_user_connections"><code class="literal">max_user_connections</code></a> system
        variable determines the number of simultaneous connections for
        the account.
      </p><p>
        To specify any of these resource-limit options for an existing
        user without affecting existing privileges, use <code class="literal">GRANT
        USAGE ON *.* ... WITH MAX_...</code>.
      </p><p>
        For more information on restricting resources, see
        <a href="server-administration.html#user-resources" title="5.5.4. Limiting Account Resources">Section 5.5.4, “Limiting Account Resources”</a>.
      </p><a class="indexterm" name="id2105597"></a><a class="indexterm" name="id2105606"></a><p>
        MySQL can check X509 certificate attributes in addition to the
        usual authentication that is based on the user name and
        password. To specify SSL-related options for a MySQL account,
        use the <code class="literal">REQUIRE</code> clause of the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement. (For background
        information on the use of SSL with MySQL, see
        <a href="server-administration.html#secure-connections" title="5.5.7. Using SSL for Secure Connections">Section 5.5.7, “Using SSL for Secure Connections”</a>.)
      </p><p>
        There are a number of different possibilities for limiting
        connection types for a given account:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">REQUIRE NONE</code> indicates that the account
            has no SSL or X509 requirements. This is the default if no
            SSL-related <code class="literal">REQUIRE</code> options are
            specified. Unencrypted connections are allowed if the user
            name and password are valid. However, encrypted connections
            can also be used, at the client's option, if the client has
            the proper certificate and key files. That is, the client
            need not specify any SSL command options, in which case the
            connection will be unencrypted. To use an encrypted
            connection, the client must specify either the
            <a href="server-administration.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> option, or all
            three of the <a href="server-administration.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>,
            <a href="server-administration.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>, and
            <a href="server-administration.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options.
          </p></li><li><p>
            The <code class="literal">REQUIRE SSL</code> option tells the server
            to allow only SSL-encrypted connections for the account.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret' REQUIRE SSL;
</pre><p>
            To connect, the client must specify the
            <a href="server-administration.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a> option, and may
            additionally specify the
            <a href="server-administration.html#option_general_ssl-key"><code class="option">--ssl-key</code></a> and
            <a href="server-administration.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options.
          </p></li><li><p>
            <code class="literal">REQUIRE X509</code> means that the client must
            have a valid certificate but that the exact certificate,
            issuer, and subject do not matter. The only requirement is
            that it should be possible to verify its signature with one
            of the CA certificates.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret' REQUIRE X509;
</pre><p>
            To connect, the client must specify the
            <a href="server-administration.html#option_general_ssl-ca"><code class="option">--ssl-ca</code></a>,
            <a href="server-administration.html#option_general_ssl-key"><code class="option">--ssl-key</code></a>, and
            <a href="server-administration.html#option_general_ssl-cert"><code class="option">--ssl-cert</code></a> options. This is
            also true for <code class="literal">ISSUER</code> and
            <code class="literal">SUBJECT</code> because those
            <code class="literal">REQUIRE</code> options imply
            <code class="literal">X509</code>.
          </p></li><li><p>
            <code class="literal">REQUIRE ISSUER
            '<em class="replaceable"><code>issuer</code></em>'</code> places the
            restriction on connection attempts that the client must
            present a valid X509 certificate issued by CA
            <code class="literal">'<em class="replaceable"><code>issuer</code></em>'</code>. If
            the client presents a certificate that is valid but has a
            different issuer, the server rejects the connection. Use of
            X509 certificates always implies encryption, so the
            <code class="literal">SSL</code> option is unnecessary in this case.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE ISSUER '/C=FI/ST=Some-State/L=Helsinki/
    O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com';
</pre><p>
            Note that the
            <code class="literal">'<em class="replaceable"><code>issuer</code></em>'</code> value
            should be entered as a single string.
          </p></li><li><p>
            <code class="literal">REQUIRE SUBJECT
            '<em class="replaceable"><code>subject</code></em>'</code> places the
            restriction on connection attempts that the client must
            present a valid X509 certificate containing the subject
            <em class="replaceable"><code>subject</code></em>. If the client presents a
            certificate that is valid but has a different subject, the
            server rejects the connection.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE SUBJECT '/C=EE/ST=Some-State/L=Tallinn/
    O=MySQL demo client certificate/
    CN=Tonu Samuel/Email=tonu@example.com';
</pre><p>
            Note that the
            <code class="literal">'<em class="replaceable"><code>subject</code></em>'</code>
            value should be entered as a single string.
          </p></li><li><p>
            <code class="literal">REQUIRE CIPHER
            '<em class="replaceable"><code>cipher</code></em>'</code> is needed to
            ensure that ciphers and key lengths of sufficient strength
            are used. SSL itself can be weak if old algorithms using
            short encryption keys are used. Using this option, you can
            ask that a specific cipher method is used to allow a
            connection.
          </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE CIPHER 'EDH-RSA-DES-CBC3-SHA';
</pre></li></ul></div><p>
        The <code class="literal">SUBJECT</code>, <code class="literal">ISSUER</code>, and
        <code class="literal">CIPHER</code> options can be combined in the
        <code class="literal">REQUIRE</code> clause like this:
      </p><pre class="programlisting">GRANT ALL PRIVILEGES ON test.* TO 'root'@'localhost'
  IDENTIFIED BY 'goodsecret'
  REQUIRE SUBJECT '/C=EE/ST=Some-State/L=Tallinn/
    O=MySQL demo client certificate/
    CN=Tonu Samuel/Email=tonu@example.com'
  AND ISSUER '/C=FI/ST=Some-State/L=Helsinki/
    O=MySQL Finland AB/CN=Tonu Samuel/Email=tonu@example.com'
  AND CIPHER 'EDH-RSA-DES-CBC3-SHA';
</pre><p>
        The order of the options does not matter, but no option can be
        specified twice. The <code class="literal">AND</code> keyword is optional
        between <code class="literal">REQUIRE</code> options.
      </p><p>
        If you are using table, column, or routine privileges for even
        one user, the server examines table, column, and routine
        privileges for all users and this slows down MySQL a bit.
        Similarly, if you limit the number of queries, updates, or
        connections for any users, the server must monitor these values.
      </p><a class="indexterm" name="id2106001"></a><p>
        The biggest differences between the standard SQL and MySQL
        versions of <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> are:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            In MySQL, privileges are associated with the combination of
            a host name and user name and not with only a user name.
          </p></li><li><p>
            Standard SQL does not have global or database-level
            privileges, nor does it support all the privilege types that
            MySQL supports.
          </p></li><li><p>
            MySQL does not support the standard SQL
            <code class="literal">UNDER</code> privilege, and does not support the
            <a href="http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#priv_trigger" target="_top"><code class="literal">TRIGGER</code></a> privilege until MySQL
            5.1.6.
          </p></li><li><p>
            Standard SQL privileges are structured in a hierarchical
            manner. If you remove a user, all privileges the user has
            been granted are revoked. This is also true in MySQL 5.0.2
            and up if you use <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a>.
            Before 5.0.2, the granted privileges are not automatically
            revoked; you must revoke them yourself. See
            <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax">Section 12.5.1.2, “<code class="literal">DROP USER</code> Syntax”</a>.
          </p></li><li><p>
            In standard SQL, when you drop a table, all privileges for
            the table are revoked. In standard SQL, when you revoke a
            privilege, all privileges that were granted based on that
            privilege are also revoked. In MySQL, privileges can be
            dropped only with explicit
            <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statements or by
            manipulating values stored in the MySQL grant tables.
          </p></li><li><p>
            In MySQL, it is possible to have the
            <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privilege for only
            some of the columns in a table. In this case, you can still
            execute <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> statements on
            the table, provided that you omit those columns for which
            you do not have the <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a>
            privilege. The omitted columns are set to their implicit
            default values if strict SQL mode is not enabled. In strict
            mode, the statement is rejected if any of the omitted
            columns have no default value. (Standard SQL requires you to
            have the <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privilege on
            all columns.) <a href="server-administration.html#server-sql-mode" title="5.1.7. Server SQL Modes">Section 5.1.7, “Server SQL Modes”</a>, discusses
            strict mode. <a href="data-types.html#data-type-defaults" title="10.1.4. Data Type Default Values">Section 10.1.4, “Data Type Default Values”</a>, discusses
            implicit default values.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="rename-user"></a>12.5.1.4. <code class="literal">RENAME USER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2106164"></a><a class="indexterm" name="id2106173"></a><a class="indexterm" name="id2106186"></a><pre class="programlisting">RENAME USER <em class="replaceable"><code>old_user</code></em> TO <em class="replaceable"><code>new_user</code></em>
    [, <em class="replaceable"><code>old_user</code></em> TO <em class="replaceable"><code>new_user</code></em>] ...
</pre><p>
        The <a href="sql-syntax.html#rename-user" title="12.5.1.4. RENAME USER Syntax"><code class="literal">RENAME USER</code></a> statement renames
        existing MySQL accounts. To use it, you must have the global
        <a href="server-administration.html#priv_create-user"><code class="literal">CREATE USER</code></a> privilege or the
        <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a> privilege for the
        <code class="literal">mysql</code> database. An error occurs if any old
        account does not exist or any new account exists. Each account
        is named using the same format as for the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the user name part of the account name, a host name part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><p>
        <a href="sql-syntax.html#rename-user" title="12.5.1.4. RENAME USER Syntax"><code class="literal">RENAME USER</code></a> does not
        automatically migrate any database objects that the user
        created, nor does it migrate any privileges that the user had
        prior to the renaming. This applies to tables, views, stored
        routines, and triggers.
      </p><p>
        The <a href="sql-syntax.html#rename-user" title="12.5.1.4. RENAME USER Syntax"><code class="literal">RENAME USER</code></a> statement was
        added in MySQL 5.0.2.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="revoke"></a>12.5.1.5. <code class="literal">REVOKE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2106339"></a><a class="indexterm" name="id2106348"></a><a class="indexterm" name="id2106360"></a><a class="indexterm" name="id2106369"></a><pre class="programlisting">REVOKE
    <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]
      [, <em class="replaceable"><code>priv_type</code></em> [(<em class="replaceable"><code>column_list</code></em>)]] ...
    ON [<em class="replaceable"><code>object_type</code></em>] <em class="replaceable"><code>priv_level</code></em>
    FROM <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...

REVOKE ALL PRIVILEGES, GRANT OPTION
    FROM <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...
</pre><p>
        The <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> statement enables
        system administrators to revoke privileges from MySQL accounts.
        Each account is named using the same format as for the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the user name part of the account name, a host name part of
        <code class="literal">'%'</code> is used. For details on the levels at
        which privileges exist, the allowable
        <em class="replaceable"><code>priv_type</code></em> and
        <em class="replaceable"><code>priv_level</code></em> values, and the syntax for
        specifying users and passwords, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>
      </p><p>
        To use the first <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> syntax,
        you must have the <a href="server-administration.html#priv_grant-option"><code class="literal">GRANT OPTION</code></a>
        privilege, and you must have the privileges that you are
        revoking.
      </p><p>
        To revoke all privileges, use the second syntax, which drops all
        global, database, table, column, and routine privileges for the
        named user or users:
      </p><pre class="programlisting">REVOKE ALL PRIVILEGES, GRANT OPTION FROM <em class="replaceable"><code>user</code></em> [, <em class="replaceable"><code>user</code></em>] ...
</pre><p>
        To use this <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> syntax, you
        must have the global <a href="server-administration.html#priv_create-user"><code class="literal">CREATE USER</code></a>
        privilege or the <a href="server-administration.html#priv_update"><code class="literal">UPDATE</code></a> privilege
        for the <code class="literal">mysql</code> database.
      </p><p>
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> removes privileges, but
        does not drop <code class="literal">mysql.user</code> table entries. To
        remove a user account entirely, use <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP
        USER</code></a> (see <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax">Section 12.5.1.2, “<code class="literal">DROP USER</code> Syntax”</a>) or
        <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>.
      </p><p>
        If the grant tables hold privilege rows that contain mixed-case
        database or table names and the
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> system
        variable is set to a nonzero value,
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> cannot be used to revoke
        these privileges. It will be necessary to manipulate the grant
        tables directly. (<a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> will not
        create such rows when
        <a href="server-administration.html#sysvar_lower_case_table_names"><code class="literal">lower_case_table_names</code></a> is set,
        but such rows might have been created prior to setting the
        variable.)
      </p><p>
        To verify an account's privileges after a
        <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> operation, use
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a>. See
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax">Section 12.5.5.17, “<code class="literal">SHOW GRANTS</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-password"></a>12.5.1.6. <code class="literal">SET PASSWORD</code> Syntax</h4></div></div></div><a class="indexterm" name="id2106672"></a><a class="indexterm" name="id2106681"></a><a class="indexterm" name="id2106693"></a><pre class="programlisting">SET PASSWORD [FOR <em class="replaceable"><code>user</code></em>] =
    {
        PASSWORD('<em class="replaceable"><code>some password</code></em>')
      | OLD_PASSWORD('<em class="replaceable"><code>some password</code></em>')
      | '<em class="replaceable"><code>encrypted password</code></em>'
    }
</pre><p>
        The <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> statement
        assigns a password to an existing MySQL user account.
      </p><p>
        If the password is specified using the
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a> or
        <a href="functions.html#function_old-password"><code class="literal">OLD_PASSWORD()</code></a> function, the
        literal text of the password should be given. If the password is
        specified without using either function, the password should be
        the already-encrypted password value as returned by
        <a href="functions.html#function_password"><code class="literal">PASSWORD()</code></a>.
      </p><p>
        With no <code class="literal">FOR</code> clause, this statement sets the
        password for the current user. Any client that has connected to
        the server using a nonanonymous account can change the password
        for that account.
      </p><p>
        With a <code class="literal">FOR</code> clause, this statement sets the
        password for a specific account on the current server host. Only
        clients that have the <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>
        privilege for the <code class="literal">mysql</code> database can do this.
        The <em class="replaceable"><code>user</code></em> value should be given in
        <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code>
        format, where <em class="replaceable"><code>user_name</code></em> and
        <em class="replaceable"><code>host_name</code></em> are exactly as they are
        listed in the <code class="literal">User</code> and
        <code class="literal">Host</code> columns of the
        <code class="literal">mysql.user</code> table entry. For example, if you
        had an entry with <code class="literal">User</code> and
        <code class="literal">Host</code> column values of
        <code class="literal">'bob'</code> and <code class="literal">'%.loc.gov'</code>, you
        would write the statement like this:
      </p><pre class="programlisting">SET PASSWORD FOR 'bob'@'%.loc.gov' = PASSWORD('<em class="replaceable"><code>newpass</code></em>');
</pre><p>
        That is equivalent to the following statements:
      </p><pre class="programlisting">UPDATE mysql.user SET Password=PASSWORD('<em class="replaceable"><code>newpass</code></em>')
  WHERE User='bob' AND Host='%.loc.gov';
FLUSH PRIVILEGES;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          If you are connecting to a MySQL 4.1 or later server using a
          pre-4.1 client program, do not use the preceding
          <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> or
          <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement without
          reading <a href="server-administration.html#password-hashing" title="5.5.6.3. Password Hashing in MySQL">Section 5.5.6.3, “Password Hashing in MySQL”</a>, first. The
          password format changed in MySQL 4.1, and under certain
          circumstances it is possible that if you change your password,
          you might not be able to connect to the server afterward.
        </p></div><p>
        You can see which account the server authenticated you as by
        executing <code class="literal">SELECT CURRENT_USER()</code>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For automated notification of users without passwords,
          subscribe to the MySQL Enterprise Monitor. For more
          information, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="table-maintenance-sql"></a>12.5.2. Table Maintenance Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#analyze-table">12.5.2.1. <code class="literal">ANALYZE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#backup-table">12.5.2.2. <code class="literal">BACKUP TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#check-table">12.5.2.3. <code class="literal">CHECK TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#checksum-table">12.5.2.4. <code class="literal">CHECKSUM TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#optimize-table">12.5.2.5. <code class="literal">OPTIMIZE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#repair-table">12.5.2.6. <code class="literal">REPAIR TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#restore-table">12.5.2.7. <code class="literal">RESTORE TABLE</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="analyze-table"></a>12.5.2.1. <code class="literal">ANALYZE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2106994"></a><pre class="programlisting">ANALYZE [NO_WRITE_TO_BINLOG | LOCAL] TABLE
    <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
</pre><p>
        <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a> analyzes and stores
        the key distribution for a table. During the analysis, the table
        is locked with a read lock for <code class="literal">MyISAM</code> and
        <code class="literal">BDB</code>. For <code class="literal">InnoDB</code> the table
        is locked with a write lock. This statement works with
        <code class="literal">MyISAM</code>, <code class="literal">BDB</code>, and
        <code class="literal">InnoDB</code> tables. For <code class="literal">MyISAM</code>
        tables, this statement is equivalent to using <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk
        --analyze</strong></span></a>.
      </p><p>
        For more information on how the analysis works within
        <code class="literal">InnoDB</code>, see
        <a href="storage-engines.html#innodb-restrictions" title="13.2.14. Restrictions on InnoDB Tables">Section 13.2.14, “Restrictions on <code class="literal">InnoDB</code> Tables”</a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          For expert advice on optimizing tables subscribe to the MySQL
          Enterprise Monitor. For more information, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p><p>
        MySQL uses the stored key distribution to decide the order in
        which tables should be joined when you perform a join on
        something other than a constant. In addition, key distributions
        can be used when deciding which indexes to use for a specific
        table within a query.
      </p><p>
        This statement requires <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>
        and <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privileges for the
        table.
      </p><p>
        <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a> returns a result
        set with the following columns.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">analyze</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td><code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>An informational message</td></tr></tbody></table></div><p>
        You can check the stored key distribution with the
        <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> statement. See
        <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax">Section 12.5.5.18, “<code class="literal">SHOW INDEX</code> Syntax”</a>.
      </p><p>
        If the table has not changed since the last
        <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a> statement, the
        table is not analyzed again.
      </p><p>
        By default, <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>
        statements are written to the binary log so that they will be
        replicated to replication slaves. Logging can be suppressed with
        the optional <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or
        its alias <code class="literal">LOCAL</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="backup-table"></a>12.5.2.2. <code class="literal">BACKUP TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2107349"></a><a class="indexterm" name="id2107358"></a><pre class="programlisting">BACKUP TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... TO '<em class="replaceable"><code>/path/to/backup/directory</code></em>'
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          This statement is deprecated. We are working on a better
          replacement for it that will provide online backup
          capabilities. In the meantime, the
          <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a> script can be used instead.
        </p></div><p>
        <a href="sql-syntax.html#backup-table" title="12.5.2.2. BACKUP TABLE Syntax"><code class="literal">BACKUP TABLE</code></a> copies to the backup
        directory the minimum number of table files needed to restore
        the table, after flushing any buffered changes to disk. The
        statement works only for <code class="literal">MyISAM</code> tables. It
        copies the <code class="filename">.frm</code> definition and
        <code class="filename">.MYD</code> data files. The
        <code class="filename">.MYI</code> index file can be rebuilt from those
        two files. The directory should be specified as a full path
        name. To restore the table, use <a href="sql-syntax.html#restore-table" title="12.5.2.7. RESTORE TABLE Syntax"><code class="literal">RESTORE
        TABLE</code></a>.
      </p><p>
        During the backup, a read lock is held for each table, one at
        time, as they are being backed up. If you want to back up
        several tables as a snapshot (preventing any of them from being
        changed during the backup operation), issue a
        <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> statement first, to
        obtain a read lock for all tables in the group.
      </p><p>
        <a href="sql-syntax.html#backup-table" title="12.5.2.2. BACKUP TABLE Syntax"><code class="literal">BACKUP TABLE</code></a> returns a result set
        with the following columns.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">backup</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td><code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>An informational message</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="check-table"></a>12.5.2.3. <code class="literal">CHECK TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2107624"></a><pre class="programlisting">CHECK TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... [<em class="replaceable"><code>option</code></em>] ...

<em class="replaceable"><code>option</code></em> = {FOR UPGRADE | QUICK | FAST | MEDIUM | EXTENDED | CHANGED}
</pre><p>
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> checks a table or
        tables for errors. <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>
        works for <code class="literal">MyISAM</code>, <code class="literal">InnoDB</code>,
        and (as of MySQL 5.0.16) <code class="literal">ARCHIVE</code> tables. For
        <code class="literal">MyISAM</code> tables, the key statistics are updated
        as well.
      </p><p>
        As of MySQL 5.0.2, <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>
        can also check views for problems, such as tables that are
        referenced in the view definition that no longer exist.
      </p><p>
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> returns a result set
        with the following columns.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">check</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div><p>
        Note that the statement might produce many rows of information
        for each checked table. The last row has a
        <code class="literal">Msg_type</code> value of <code class="literal">status</code>
        and the <code class="literal">Msg_text</code> normally should be
        <code class="literal">OK</code>. If you don't get <code class="literal">OK</code>,
        or <code class="literal">Table is already up to date</code> you should
        normally run a repair of the table. See
        <a href="backup-and-recovery.html#table-maintenance" title="6.4. Table Maintenance and Crash Recovery">Section 6.4, “Table Maintenance and Crash Recovery”</a>. <code class="literal">Table is already
        up to date</code> means that the storage engine for the table
        indicated that there was no need to check the table.
      </p><p>
        The <code class="literal">FOR UPGRADE</code> option checks whether the
        named tables are compatible with the current version of MySQL.
        This option was added in MySQL 5.0.19. With <code class="literal">FOR
        UPGRADE</code>, the server checks each table to determine
        whether there have been any incompatible changes in any of the
        table's data types or indexes since the table was created. If
        not, the check succeeds. Otherwise, if there is a possible
        incompatibility, the server runs a full check on the table
        (which might take some time). If the full check succeeds, the
        server marks the table's <code class="filename">.frm</code> file with the
        current MySQL version number. Marking the
        <code class="filename">.frm</code> file ensures that further checks for
        the table with the same version of the server will be fast.
      </p><p>
        Incompatibilities might occur because the storage format for a
        data type has changed or because its sort order has changed. Our
        aim is to avoid these changes, but occasionally they are
        necessary to correct problems that would be worse than an
        incompatibility between releases.
      </p><p>
        Currently, <code class="literal">FOR UPGRADE</code> discovers these
        incompatibilities:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            The indexing order for end-space in
            <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns for
            <code class="literal">InnoDB</code> and <code class="literal">MyISAM</code>
            tables changed between MySQL 4.1 and 5.0.
          </p></li><li><p>
            The storage method of the new
            <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> data type changed
            between MySQL 5.0.3 and 5.0.5.
          </p></li><li><p>
            As of MySQL 5.0.62, if your table was created by a different
            version of the MySQL server than the one you are currently
            running, <code class="literal">FOR UPGRADE</code> indicates that the
            table has an <code class="filename">.frm</code> file with an
            incompatible version. In this case, the result set returned
            by <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> contains a
            line with a <code class="literal">Msg_type</code> value of
            <code class="literal">error</code> and a <code class="literal">Msg_text</code>
            value of <code class="literal">Table upgrade required. Please do "REPAIR
            TABLE `<em class="replaceable"><code>tbl_name</code></em>`" to fix
            it!</code>
          </p></li><li><p>
            Changes are sometimes made to character sets or collations
            that require table indexes to be rebuilt. For details about
            these changes and when <code class="literal">FOR UPGRADE</code>
            detects them, see <a href="installing.html#checking-index-changes" title="2.18.3. Checking Whether Table Indexes Must Be Rebuilt">Section 2.18.3, “Checking Whether Table Indexes Must Be Rebuilt”</a>.
          </p></li></ul></div><p>
        The other check options that can be given are shown in the
        following table. These options are passed to the storage engine,
        which may use them or not. <code class="literal">MyISAM</code> uses them;
        they are ignored for <code class="literal">InnoDB</code> tables and views.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Type</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><code class="literal">QUICK</code></td><td>Do not scan the rows to check for incorrect links.</td></tr><tr><td><code class="literal">FAST</code></td><td>Check only tables that have not been closed properly.</td></tr><tr><td><code class="literal">CHANGED</code></td><td>Check only tables that have been changed since the last check or that
                have not been closed properly.</td></tr><tr><td><code class="literal">MEDIUM</code></td><td>Scan rows to verify that deleted links are valid. This also calculates a
                key checksum for the rows and verifies this with a
                calculated checksum for the keys.</td></tr><tr><td><code class="literal">EXTENDED</code></td><td>Do a full key lookup for all keys for each row. This ensures that the
                table is 100% consistent, but takes a long time.</td></tr></tbody></table></div><p>
        If none of the options <code class="literal">QUICK</code>,
        <code class="literal">MEDIUM</code>, or <code class="literal">EXTENDED</code> are
        specified, the default check type for dynamic-format
        <code class="literal">MyISAM</code> tables is <code class="literal">MEDIUM</code>.
        This has the same result as running <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk
        --medium-check <em class="replaceable"><code>tbl_name</code></em></strong></span></a> on
        the table. The default check type also is
        <code class="literal">MEDIUM</code> for static-format
        <code class="literal">MyISAM</code> tables, unless
        <code class="literal">CHANGED</code> or <code class="literal">FAST</code> is
        specified. In that case, the default is
        <code class="literal">QUICK</code>. The row scan is skipped for
        <code class="literal">CHANGED</code> and <code class="literal">FAST</code> because
        the rows are very seldom corrupted.
      </p><p>
        You can combine check options, as in the following example that
        does a quick check on the table to determine whether it was
        closed properly:
      </p><pre class="programlisting">CHECK TABLE test_table FAST QUICK;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          In some cases, <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a>
          changes the table. This happens if the table is marked as
          “<span class="quote">corrupted</span>” or “<span class="quote">not closed properly</span>”
          but <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> does not find
          any problems in the table. In this case,
          <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> marks the table as
          okay.
        </p></div><p>
        If a table is corrupted, it is most likely that the problem is
        in the indexes and not in the data part. All of the preceding
        check types check the indexes thoroughly and should thus find
        most errors.
      </p><p>
        If you just want to check a table that you assume is okay, you
        should use no check options or the <code class="literal">QUICK</code>
        option. The latter should be used when you are in a hurry and
        can take the very small risk that <code class="literal">QUICK</code> does
        not find an error in the data file. (In most cases, under normal
        usage, MySQL should find any error in the data file. If this
        happens, the table is marked as “<span class="quote">corrupted</span>” and
        cannot be used until it is repaired.)
      </p><p>
        <code class="literal">FAST</code> and <code class="literal">CHANGED</code> are
        mostly intended to be used from a script (for example, to be
        executed from <span><strong class="command">cron</strong></span>) if you want to check
        tables from time to time. In most cases, <code class="literal">FAST</code>
        is to be preferred over <code class="literal">CHANGED</code>. (The only
        case when it is not preferred is when you suspect that you have
        found a bug in the <code class="literal">MyISAM</code> code.)
      </p><p>
        <code class="literal">EXTENDED</code> is to be used only after you have
        run a normal check but still get strange errors from a table
        when MySQL tries to update a row or find a row by key. This is
        very unlikely if a normal check has succeeded.
      </p><p>
        Use of <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE
        ... EXTENDED</code></a> might influence the execution plan
        generated by the query optimizer.
      </p><p>
        Some problems reported by <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK
        TABLE</code></a> cannot be corrected automatically:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Found row where the auto_increment column has the
            value 0</code>.
          </p><p>
            This means that you have a row in the table where the
            <code class="literal">AUTO_INCREMENT</code> index column contains the
            value 0. (It is possible to create a row where the
            <code class="literal">AUTO_INCREMENT</code> column is 0 by explicitly
            setting the column to 0 with an
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement.)
          </p><p>
            This is not an error in itself, but could cause trouble if
            you decide to dump the table and restore it or do an
            <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a> on the table. In
            this case, the <code class="literal">AUTO_INCREMENT</code> column
            changes value according to the rules of
            <code class="literal">AUTO_INCREMENT</code> columns, which could cause
            problems such as a duplicate-key error.
          </p><p>
            To get rid of the warning, simply execute an
            <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> statement to set the
            column to some value other than 0.
          </p></li><li><p>
            If <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE</code></a> finds a
            problem for an <code class="literal">InnoDB</code> table, the server
            shuts down to prevent error propagation. Details of the
            error will be written to the error log.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="checksum-table"></a>12.5.2.4. <code class="literal">CHECKSUM TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2108553"></a><pre class="programlisting">CHECKSUM TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... [ QUICK | EXTENDED ]
</pre><p>
        <a href="sql-syntax.html#checksum-table" title="12.5.2.4. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM TABLE</code></a> reports a table
        checksum.
      </p><p>
        With <code class="literal">QUICK</code>, the live table checksum is
        reported if it is available, or <code class="literal">NULL</code>
        otherwise. This is very fast. A live checksum is enabled by
        specifying the <code class="literal">CHECKSUM=1</code> table option when
        you create the table; currently, this is supported only for
        <code class="literal">MyISAM</code> tables. See
        <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax">Section 12.1.10, “<code class="literal">CREATE TABLE</code> Syntax”</a>.
      </p><p>
        With <code class="literal">EXTENDED</code>, the entire table is read row
        by row and the checksum is calculated. This can be very slow for
        large tables.
      </p><p>
        If neither <code class="literal">QUICK</code> nor
        <code class="literal">EXTENDED</code> is specified, MySQL returns a live
        checksum if the table storage engine supports it and scans the
        table otherwise.
      </p><p>
        For a nonexistent table, <a href="sql-syntax.html#checksum-table" title="12.5.2.4. CHECKSUM TABLE Syntax"><code class="literal">CHECKSUM
        TABLE</code></a> returns <code class="literal">NULL</code> and, as of MySQL
        5.0.3, generates a warning.
      </p><p>
        The checksum value depends on the table row format. If the row
        format changes, the checksum also changes. For example, the
        storage format for <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>
        changed between MySQL 4.1 and 5.0, so if a 4.1 table is upgraded
        to MySQL 5.0, the checksum value may change.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          If the checksums for two tables are different, then the tables
          are different in some way. However, the fact that two tables
          produce the same checksum does <span class="emphasis"><em>not</em></span> mean
          that the tables are identical.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="optimize-table"></a>12.5.2.5. <code class="literal">OPTIMIZE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2108725"></a><a class="indexterm" name="id2108734"></a><a class="indexterm" name="id2108746"></a><pre class="programlisting">OPTIMIZE [NO_WRITE_TO_BINLOG | LOCAL] TABLE
    <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
</pre><p>
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> should be used if
        you have deleted a large part of a table or if you have made
        many changes to a table with variable-length rows (tables that
        have <a href="data-types.html#char" title="10.4.1. The CHAR and
        VARCHAR Types"><code class="literal">VARCHAR</code></a>,
        <a href="data-types.html#binary-varbinary" title="10.4.2. The BINARY and
        VARBINARY Types"><code class="literal">VARBINARY</code></a>,
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>, or
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">TEXT</code></a> columns). Deleted rows are
        maintained in a linked list and subsequent
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> operations reuse old row
        positions. You can use <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE
        TABLE</code></a> to reclaim the unused space and to defragment
        the data file.
      </p><p>
        This statement requires <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>
        and <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privileges for the
        table.
      </p><p>
        In most setups, you need not run <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE
        TABLE</code></a> at all. Even if you do a lot of updates to
        variable-length rows, it is not likely that you need to do this
        more than once a week or month and only on certain tables.
      </p><p>
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> works
        <span class="emphasis"><em>only</em></span> for <code class="literal">MyISAM</code>,
        <code class="literal">InnoDB</code>, and (as of MySQL 5.0.16)
        <code class="literal">ARCHIVE</code> tables. It does
        <span class="emphasis"><em>not</em></span> work for tables created using any other
        storage engine.
      </p><p>
        For <code class="literal">MyISAM</code> tables,
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> works as follows:
      </p><div class="orderedlist"><ol type="1"><li><p>
            If the table has deleted or split rows, repair the table.
          </p></li><li><p>
            If the index pages are not sorted, sort them.
          </p></li><li><p>
            If the table's statistics are not up to date (and the repair
            could not be accomplished by sorting the index), update
            them.
          </p></li></ol></div><p>
        For <code class="literal">BDB</code> tables, <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE
        TABLE</code></a> currently is mapped to
        <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>. See
        <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax">Section 12.5.2.1, “<code class="literal">ANALYZE TABLE</code> Syntax”</a>.
      </p><p>
        For <code class="literal">InnoDB</code> tables,
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> is mapped to
        <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>, which rebuilds the
        table to update index statistics and free unused space in the
        clustered index.
      </p><p>
        You can make <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> work
        on other storage engines by starting <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
        with the <code class="option">--skip-new</code> or
        <a href="server-administration.html#option_mysqld_safe-mode"><code class="option">--safe-mode</code></a> option. In this case,
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> is just mapped to
        <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>.
      </p><p>
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> returns a result
        set with the following columns.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">optimize</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td>One of <code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>The message</td></tr></tbody></table></div><p>
        Note that MySQL locks the table during the time
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> is running.
      </p><p>
        By default, <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>
        statements are written to the binary log so that they will be
        replicated to replication slaves. Logging can be suppressed with
        the optional <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or
        its alias <code class="literal">LOCAL</code>.
      </p><p>
        <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> does not sort
        R-tree indexes, such as spatial indexes on
        <code class="literal">POINT</code> columns. (<a href="http://bugs.mysql.com/23578" target="_top">Bug#23578</a>)
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="repair-table"></a>12.5.2.6. <code class="literal">REPAIR TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2109260"></a><pre class="programlisting">REPAIR [NO_WRITE_TO_BINLOG | LOCAL] TABLE
    <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ...
    [QUICK] [EXTENDED] [USE_FRM]
</pre><p>
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> repairs a possibly
        corrupted table. By default, it has the same effect as
        <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk --recover
        <em class="replaceable"><code>tbl_name</code></em></strong></span></a>.
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> works for
        <code class="literal">MyISAM</code> and for <code class="literal">ARCHIVE</code>
        tables. See <a href="storage-engines.html#myisam-storage-engine" title="13.1. The MyISAM Storage Engine">Section 13.1, “The <code class="literal">MyISAM</code> Storage Engine”</a>, and
        <a href="storage-engines.html#archive-storage-engine" title="13.8. The ARCHIVE Storage Engine">Section 13.8, “The <code class="literal">ARCHIVE</code> Storage Engine”</a>.
      </p><p>
        This statement requires <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>
        and <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privileges for the
        table.
      </p><p>
        Normally, you should never have to run this statement. However,
        if disaster strikes, <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>
        is very likely to get back all your data from a
        <code class="literal">MyISAM</code> table. If your tables become corrupted
        often, you should try to find the reason for it, to eliminate
        the need to use <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>. See
        <a href="error-handling.html#crashing" title="B.1.4.2. What to Do If MySQL Keeps Crashing">Section B.1.4.2, “What to Do If MySQL Keeps Crashing”</a>, and
        <a href="storage-engines.html#myisam-table-problems" title="13.1.4. MyISAM Table Problems">Section 13.1.4, “<code class="literal">MyISAM</code> Table Problems”</a>.
      </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          It is best to make a backup of a table before performing a
          table repair operation; under some circumstances the operation
          might cause data loss. Possible causes include but are not
          limited to file system errors.
        </p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
          If the server dies during a <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR
          TABLE</code></a> operation, it is essential after restarting it
          that you immediately execute another
          <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> statement for the
          table before performing any other operations on it. In the
          worst case, you might have a new clean index file without
          information about the data file, and then the next operation
          you perform could overwrite the data file. This is an unlikely
          but possible scenario that underscores the value of making a
          backup first.
        </p></div><p>
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> returns a result set
        with the following columns.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">repair</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td><code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>An informational message</td></tr></tbody></table></div><p>
        The <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> statement might
        produce many rows of information for each repaired table. The
        last row has a <code class="literal">Msg_type</code> value of
        <code class="literal">status</code> and <code class="literal">Msg_test</code>
        normally should be <code class="literal">OK</code>. If you do not get
        <code class="literal">OK</code> for a <code class="literal">MyISAM</code> table, you
        should try repairing it with <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk
        --safe-recover</strong></span></a>. (<a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR
        TABLE</code></a> does not implement all the options of
        <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a>.) With <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk
        --safe-recover</strong></span></a>, you can also use options that
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> does not support,
        such as <a href="programs.html#option_myisamchk_max-record-length"><code class="option">--max-record-length</code></a>.
      </p><p>
        If you use the <code class="literal">QUICK</code> option,
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> tries to repair only
        the index tree. This type of repair is like that done by
        <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk --recover --quick</strong></span></a>.
      </p><p>
        If you use the <code class="literal">EXTENDED</code> option, MySQL creates
        the index row by row instead of creating one index at a time
        with sorting. This type of repair is like that done by
        <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk --safe-recover</strong></span></a>.
      </p><p>
        The <code class="literal">USE_FRM</code> option is available for use if
        the <code class="filename">.MYI</code> index file is missing or if its
        header is corrupted. This option tells MySQL not to trust the
        information in the <code class="filename">.MYI</code> file header and to
        re-create it using information from the
        <code class="filename">.frm</code> file. This kind of repair cannot be
        done with <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk</strong></span></a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Use the <code class="literal">USE_FRM</code> option
          <span class="emphasis"><em>only</em></span> if you cannot use regular
          <code class="literal">REPAIR</code> modes! Telling the server to ignore
          the <code class="filename">.MYI</code> file makes important table
          metadata stored in the <code class="filename">.MYI</code> unavailable
          to the repair process, which can have deleterious
          consequences:
        </p><div class="itemizedlist"><ul type="disc"><li><p>
              The current <code class="literal">AUTO_INCREMENT</code> value is
              lost.
            </p></li><li><p>
              The link to deleted records in the table is lost, which
              means that free space for deleted records will remain
              unoccupied thereafter.
            </p></li><li><p>
              The <code class="filename">.MYI</code> header indicates whether the
              table is compressed. If the server ignores this
              information, it cannot tell that a table is compressed and
              repair can cause change or loss of table contents. This
              means that <code class="literal">USE_FRM</code> should not be used
              with compressed tables. That should not be necessary,
              anyway: Compressed tables are read only, so they should
              not become corrupt.
            </p></li></ul></div></div><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Caution</h3><p>
          As of MySQL 5.0.62, if you use <code class="literal">USE_FRM</code> for
          a table that was created by a different version of the MySQL
          server than the one you are currently running,
          <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> will not attempt
          to repair the table. In this case, the result set returned by
          <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> contains a line
          with a <code class="literal">Msg_type</code> value of
          <code class="literal">error</code> and a <code class="literal">Msg_text</code>
          value of <code class="literal">Failed repairing incompatible .FRM
          file</code>.
        </p><p>
          Prior to MySQL 5.0.62, <span class="emphasis"><em>do not use</em></span>
          <code class="literal">USE_FRM</code> if your table was created by a
          different version of the MySQL server. Doing so risks the loss
          of all rows in the table. It is particularly dangerous to use
          <code class="literal">USE_FRM</code> after the server returns this
          message:
        </p><pre class="programlisting">Table upgrade required. Please do
"REPAIR TABLE `<em class="replaceable"><code>tbl_name</code></em>`" to fix it!
</pre></div><p>
        If <code class="literal">USE_FRM</code> is <span class="emphasis"><em>not</em></span> used,
        <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> checks the table to
        see whether an upgrade is required. If so, it performs the
        upgrade, following the same rules as
        <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax"><code class="literal">CHECK TABLE ... FOR
        UPGRADE</code></a>. See <a href="sql-syntax.html#check-table" title="12.5.2.3. CHECK TABLE Syntax">Section 12.5.2.3, “<code class="literal">CHECK TABLE</code> Syntax”</a>, for more
        information. As of MySQL 5.0.62, <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR
        TABLE</code></a> without <code class="literal">USE_FRM</code> upgrades the
        <code class="filename">.frm</code> file to the current version.
      </p><p>
        By default, <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a>
        statements are written to the binary log so that they will be
        replicated to replication slaves. Logging can be suppressed with
        the optional <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or
        its alias <code class="literal">LOCAL</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="restore-table"></a>12.5.2.7. <code class="literal">RESTORE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2109994"></a><pre class="programlisting">RESTORE TABLE <em class="replaceable"><code>tbl_name</code></em> [, <em class="replaceable"><code>tbl_name</code></em>] ... FROM '<em class="replaceable"><code>/path/to/backup/directory</code></em>'
</pre><p>
        <a href="sql-syntax.html#restore-table" title="12.5.2.7. RESTORE TABLE Syntax"><code class="literal">RESTORE TABLE</code></a> restores the table
        or tables from a backup that was made with
        <a href="sql-syntax.html#backup-table" title="12.5.2.2. BACKUP TABLE Syntax"><code class="literal">BACKUP TABLE</code></a>. The directory
        should be specified as a full path name.
      </p><p>
        Existing tables are not overwritten; if you try to restore over
        an existing table, an error occurs. Just as for
        <a href="sql-syntax.html#backup-table" title="12.5.2.2. BACKUP TABLE Syntax"><code class="literal">BACKUP TABLE</code></a>,
        <a href="sql-syntax.html#restore-table" title="12.5.2.7. RESTORE TABLE Syntax"><code class="literal">RESTORE TABLE</code></a> currently works
        only for <code class="literal">MyISAM</code> tables. Restored tables are
        not replicated from master to slave.
      </p><p>
        The backup for each table consists of its
        <code class="filename">.frm</code> format file and
        <code class="filename">.MYD</code> data file. The restore operation
        restores those files, and then uses them to rebuild the
        <code class="filename">.MYI</code> index file. Restoring takes longer
        than backing up due to the need to rebuild the indexes. The more
        indexes the table has, the longer it takes.
      </p><p>
        <a href="sql-syntax.html#restore-table" title="12.5.2.7. RESTORE TABLE Syntax"><code class="literal">RESTORE TABLE</code></a> returns a result
        set with the following columns.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Column</strong></span></td><td><span class="bold"><strong>Value</strong></span></td></tr><tr><td><code class="literal">Table</code></td><td>The table name</td></tr><tr><td><code class="literal">Op</code></td><td>Always <code class="literal">restore</code></td></tr><tr><td><code class="literal">Msg_type</code></td><td><code class="literal">status</code>, <code class="literal">error</code>,
                <code class="literal">info</code>, or <code class="literal">warning</code></td></tr><tr><td><code class="literal">Msg_text</code></td><td>An informational message</td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="plugin-sql"></a>12.5.3. User-Defined Function Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#create-function-udf">12.5.3.1. <code class="literal">CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#drop-function-udf">12.5.3.2. <code class="literal">DROP FUNCTION</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="create-function-udf"></a>12.5.3.1. <code class="literal">CREATE FUNCTION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2110267"></a><a class="indexterm" name="id2110276"></a><a class="indexterm" name="id2110289"></a><a class="indexterm" name="id2110301"></a><a class="indexterm" name="id2110310"></a><a class="indexterm" name="id2110319"></a><pre class="programlisting">CREATE [AGGREGATE] FUNCTION <em class="replaceable"><code>function_name</code></em> RETURNS {STRING|INTEGER|REAL|DECIMAL}
    SONAME <em class="replaceable"><code>shared_library_name</code></em>
</pre><p>
        A user-defined function (UDF) is a way to extend MySQL with a
        new function that works like a native (built-in) MySQL function
        such as <a href="functions.html#function_abs"><code class="literal">ABS()</code></a> or
        <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a>.
      </p><p>
        <em class="replaceable"><code>function_name</code></em> is the name that should
        be used in SQL statements to invoke the function. The
        <code class="literal">RETURNS</code> clause indicates the type of the
        function's return value. As of MySQL 5.0.3,
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> is a legal value after
        <code class="literal">RETURNS</code>, but currently
        <a href="data-types.html#numeric-types" title="10.2. Numeric Types"><code class="literal">DECIMAL</code></a> functions return string
        values and should be written like <code class="literal">STRING</code>
        functions.
      </p><p>
        <em class="replaceable"><code>shared_library_name</code></em> is the basename
        of the shared object file that contains the code that implements
        the function. As of MySQL 5.0.67, the file must be located in
        the plugin directory. This directory is given by the value of
        the <a href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> system variable.
        If the value of <a href="server-administration.html#sysvar_plugin_dir"><code class="literal">plugin_dir</code></a> is
        empty, the behavior that is used before 5.0.67 applies: The file
        must be located in a directory that is searched by your system's
        dynamic linker.
      </p><p>
        To create a function, you must have the
        <a href="server-administration.html#priv_insert"><code class="literal">INSERT</code></a> privilege for the
        <code class="literal">mysql</code> database. This is necessary because
        <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> adds a row to the
        <code class="literal">mysql.func</code> system table that records the
        function's name, type, and shared library name. If you do not
        have this table, you should run the
        <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> command to create it. See
        <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>.
      </p><p>
        An active function is one that has been loaded with
        <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> and not removed
        with <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a>. All active
        functions are reloaded each time the server starts, unless you
        start <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with the
        <a href="server-administration.html#option_mysqld_skip-grant-tables"><code class="option">--skip-grant-tables</code></a> option. In
        this case, UDF initialization is skipped and UDFs are
        unavailable.
      </p><p>
        For instructions on writing user-defined functions, see
        <a href="extending-mysql.html#adding-udf" title="21.2.2. Adding a New User-Defined Function">Section 21.2.2, “Adding a New User-Defined Function”</a>. For the UDF mechanism to work,
        functions must be written in C or C++ (or another language that
        can use C calling conventions), your operating system must
        support dynamic loading and you must have compiled
        <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> dynamically (not statically).
      </p><p>
        An <code class="literal">AGGREGATE</code> function works exactly like a
        native MySQL aggregate (summary) function such as
        <code class="literal">SUM</code> or
        <a href="functions.html#function_count"><code class="literal">COUNT()</code></a>. For
        <code class="literal">AGGREGATE</code> to work, your
        <code class="literal">mysql.func</code> table must contain a
        <code class="literal">type</code> column. If your
        <code class="literal">mysql.func</code> table does not have this column,
        you should run the <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade"><span><strong class="command">mysql_upgrade</strong></span></a> program to
        create it (see <a href="programs.html#mysql-upgrade" title="4.4.9. mysql_upgrade — Check Tables for MySQL Upgrade">Section 4.4.9, “<span><strong class="command">mysql_upgrade</strong></span> — Check Tables for MySQL Upgrade”</a>).
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To upgrade the shared library associated with a UDF, issue a
          <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> statement,
          upgrade the shared library, and then issue a
          <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statement. If
          you upgrade the shared library first and then use
          <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a>, the server may
          crash.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="drop-function-udf"></a>12.5.3.2. <code class="literal">DROP FUNCTION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2110656"></a><a class="indexterm" name="id2110664"></a><a class="indexterm" name="id2110677"></a><a class="indexterm" name="id2110689"></a><a class="indexterm" name="id2110698"></a><a class="indexterm" name="id2110707"></a><pre class="programlisting">DROP FUNCTION <em class="replaceable"><code>function_name</code></em>
</pre><p>
        This statement drops the user-defined function (UDF) named
        <em class="replaceable"><code>function_name</code></em>.
      </p><p>
        To drop a function, you must have the
        <a href="server-administration.html#priv_delete"><code class="literal">DELETE</code></a> privilege for the
        <code class="literal">mysql</code> database. This is because
        <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> removes a row from
        the <code class="literal">mysql.func</code> system table that records the
        function's name, type, and shared library name.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          To upgrade the shared library associated with a UDF, issue a
          <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> statement,
          upgrade the shared library, and then issue a
          <a href="sql-syntax.html#create-function" title="12.1.7. CREATE FUNCTION Syntax"><code class="literal">CREATE FUNCTION</code></a> statement. If
          you upgrade the shared library first and then use
          <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a>, the server may
          crash.
        </p></div><p>
        <a href="sql-syntax.html#drop-function" title="12.1.14. DROP FUNCTION Syntax"><code class="literal">DROP FUNCTION</code></a> is also used to
        drop stored functions (see <a href="sql-syntax.html#drop-procedure" title="12.1.16. DROP PROCEDURE and
      DROP FUNCTION Syntax">Section 12.1.16, “<code class="literal">DROP PROCEDURE</code> and
      <code class="literal">DROP FUNCTION</code> Syntax”</a>).
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="set-option"></a>12.5.4. <code class="literal">SET</code> Syntax</h3></div></div></div><a class="indexterm" name="id2110855"></a><a class="indexterm" name="id2110863"></a><pre class="programlisting">SET <em class="replaceable"><code>variable_assignment</code></em> [, <em class="replaceable"><code>variable_assignment</code></em>] ...

<em class="replaceable"><code>variable_assignment</code></em>:
      <em class="replaceable"><code>user_var_name</code></em> = <em class="replaceable"><code>expr</code></em>
    | [GLOBAL | SESSION] <em class="replaceable"><code>system_var_name</code></em> = <em class="replaceable"><code>expr</code></em>
    | [@@global. | @@session. | @@]<em class="replaceable"><code>system_var_name</code></em> = <em class="replaceable"><code>expr</code></em>
</pre><p>
      The <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
      statement assigns values to different types of variables that
      affect the operation of the server or your client. Older versions
      of MySQL employed <code class="literal">SET OPTION</code>, but this syntax
      is deprecated in favor of
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> without
      <code class="literal">OPTION</code>.
    </p><p>
      This section describes use of
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> for
      assigning values to system variables or user variables. For
      general information about these types of variables, see
      <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>,
      <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>, and
      <a href="language-structure.html#user-variables" title="8.4. User-Defined Variables">Section 8.4, “User-Defined Variables”</a>. System variables also can be set
      at server startup, as described in
      <a href="server-administration.html#using-system-variables" title="5.1.5. Using System Variables">Section 5.1.5, “Using System Variables”</a>.
    </p><p>
      Some variants of
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> syntax
      are used in other contexts:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <code class="literal">SET CHARACTER SET</code> and <code class="literal">SET
          NAMES</code> assign values to character set and collation
          variables associated with the connection to the server.
          <code class="literal">SET ONESHOT</code> is used for replication. These
          variants are described later in this section.
        </p></li><li><p>
          <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax"><code class="literal">SET PASSWORD</code></a> assigns account
          passwords. See <a href="sql-syntax.html#set-password" title="12.5.1.6. SET PASSWORD Syntax">Section 12.5.1.6, “<code class="literal">SET PASSWORD</code> Syntax”</a>.
        </p></li><li><p>
          <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax"><code class="literal">SET
          TRANSACTION ISOLATION LEVEL</code></a> sets the isolation level
          for transaction processing. See
          <a href="sql-syntax.html#set-transaction" title="12.4.6. SET TRANSACTION Syntax">Section 12.4.6, “<code class="literal">SET TRANSACTION</code> Syntax”</a>.
        </p></li><li><p>
          <code class="literal">SET</code> is used within stored routines to
          assign values to local routine variables. See
          <a href="sql-syntax.html#set-statement" title="12.8.3.2. Variable SET Statement">Section 12.8.3.2, “Variable <code class="literal">SET</code> Statement”</a>.
        </p></li></ul></div><p>
      The following discussion shows the different
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> syntaxes
      that you can use to set variables. The examples use the
      <code class="literal">=</code> assignment operator, but the
      <code class="literal">:=</code> operator also is allowable.
    </p><p>
      A user variable is written as
      <code class="literal">@<em class="replaceable"><code>var_name</code></em></code> and can be
      set as follows:
    </p><pre class="programlisting">SET @<em class="replaceable"><code>var_name</code></em> = <em class="replaceable"><code>expr</code></em>;
</pre><p>
      Many system variables are dynamic and can be changed while the
      server runs by using the
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
      statement. For a list, see
      <a href="server-administration.html#dynamic-system-variables" title="5.1.5.2. Dynamic System Variables">Section 5.1.5.2, “Dynamic System Variables”</a>. To change a system
      variable with
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>, refer
      to it as <em class="replaceable"><code>var_name</code></em>, optionally preceded
      by a modifier:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          To indicate explicitly that a variable is a global variable,
          precede its name by <code class="literal">GLOBAL</code> or
          <code class="literal">@@global.</code>. The
          <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege is required to
          set global variables.
        </p></li><li><p>
          To indicate explicitly that a variable is a session variable,
          precede its name by <code class="literal">SESSION</code>,
          <code class="literal">@@session.</code>, or <code class="literal">@@</code>.
          Setting a session variable requires no special privilege, but
          a client can change only its own session variables, not those
          of any other client.
        </p></li><li><p>
          <code class="literal">LOCAL</code> and <code class="literal">@@local.</code> are
          synonyms for <code class="literal">SESSION</code> and
          <code class="literal">@@session.</code>.
        </p></li><li><p>
          If no modifier is present,
          <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
          changes the session variable.
        </p></li></ul></div><p class="mnmas"><b>MySQL Enterprise</b>
        The MySQL Enterprise Monitor makes extensive use of system
        variables to determine the state of your server. For more
        information, see
        <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
      </p><p>
      A <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
      statement can contain multiple variable assignments, separated by
      commas. If you set several system variables, the most recent
      <code class="literal">GLOBAL</code> or <code class="literal">SESSION</code> modifier
      in the statement is used for following variables that have no
      modifier specified.
    </p><p>
      Examples:
    </p><pre class="programlisting">SET sort_buffer_size=10000;
SET @@local.sort_buffer_size=10000;
SET GLOBAL sort_buffer_size=1000000, SESSION sort_buffer_size=1000000;
SET @@sort_buffer_size=1000000;
SET @@global.sort_buffer_size=1000000, @@local.sort_buffer_size=1000000;
</pre><p>
      The <code class="literal">@@<em class="replaceable"><code>var_name</code></em></code>
      syntax for system variables is supported for compatibility with
      some other database systems.
    </p><p>
      If you change a session system variable, the value remains in
      effect until your session ends or until you change the variable to
      a different value. The change is not visible to other clients.
    </p><p>
      If you change a global system variable, the value is remembered
      and used for new connections until the server restarts. (To make a
      global system variable setting permanent, you should set it in an
      option file.) The change is visible to any client that accesses
      that global variable. However, the change affects the
      corresponding session variable only for clients that connect after
      the change. The global variable change does not affect the session
      variable for any client that is currently connected (not even that
      of the client that issues the
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET GLOBAL</code></a>
      statement).
    </p><p>
      To prevent incorrect usage, MySQL produces an error if you use
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET GLOBAL</code></a>
      with a variable that can only be used with
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET SESSION</code></a>
      or if you do not specify <code class="literal">GLOBAL</code> (or
      <code class="literal">@@global.</code>) when setting a global variable.
    </p><p>
      To set a <code class="literal">SESSION</code> variable to the
      <code class="literal">GLOBAL</code> value or a <code class="literal">GLOBAL</code>
      value to the compiled-in MySQL default value, use the
      <code class="literal">DEFAULT</code> keyword. For example, the following two
      statements are identical in setting the session value of
      <a href="server-administration.html#sysvar_max_join_size"><code class="literal">max_join_size</code></a> to the global
      value:
    </p><pre class="programlisting">SET max_join_size=DEFAULT;
SET @@session.max_join_size=@@global.max_join_size;
</pre><p>
      Not all system variables can be set to <code class="literal">DEFAULT</code>.
      In such cases, use of <code class="literal">DEFAULT</code> results in an
      error.
    </p><p>
      You can refer to the values of specific global or sesson system
      variables in expressions by using one of the
      <code class="literal">@@</code>-modifiers. For example, you can retrieve
      values in a <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement like
      this:
    </p><pre class="programlisting">SELECT @@global.sql_mode, @@session.sql_mode, @@sql_mode;
</pre><p>
      When you refer to a system variable in an expression as
      <code class="literal">@@<em class="replaceable"><code>var_name</code></em></code> (that is,
      when you do not specify <code class="literal">@@global.</code> or
      <code class="literal">@@session.</code>), MySQL returns the session value if
      it exists and the global value otherwise. (This differs from
      <code class="literal">SET @@<em class="replaceable"><code>var_name</code></em> =
      <em class="replaceable"><code>value</code></em></code>, which always refers to
      the session value.)
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Some variables displayed by <code class="literal">SHOW VARIABLES</code>
        may not be available using <code class="literal">SELECT
        @@<em class="replaceable"><code>var_name</code></em></code> syntax; an
        <code class="literal">Unknown system variable</code> occurs. As a
        workaround in such cases, you can use <code class="literal">SHOW VARIABLES
        LIKE '<em class="replaceable"><code>var_name</code></em>'</code>.
      </p></div><p>
      Suffixes for specifying a value multiplier can be used when
      setting a variable at server startup, but not to set the value
      with <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> at
      runtime. On the other hand, with
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> you can
      assign a variable's value using an expression, which is not true
      when you set a variable at server startup. For example, the first
      of the following lines is legal at server startup, but the second
      is not:
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql --max_allowed_packet=16M</code></strong>
shell&gt; <strong class="userinput"><code>mysql --max_allowed_packet=16*1024*1024</code></strong>
</pre><p>
      Conversely, the second of the following lines is legal at runtime,
      but the first is not:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET GLOBAL max_allowed_packet=16M;</code></strong>
mysql&gt; <strong class="userinput"><code>SET GLOBAL max_allowed_packet=16*1024*1024;</code></strong>
</pre><p>
      To display system variables names and values, use the
      <a href="sql-syntax.html#show-variables" title="12.5.5.36. SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a> statement. (See
      <a href="sql-syntax.html#show-variables" title="12.5.5.36. SHOW VARIABLES Syntax">Section 12.5.5.36, “<code class="literal">SHOW VARIABLES</code> Syntax”</a>.)
    </p><p>
      The following list describes
      <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a> options
      that have nonstandard syntax (that is, options that are not set
      with <code class="literal"><em class="replaceable"><code>name</code></em> =
      <em class="replaceable"><code>value</code></em></code> syntax).
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          <a class="indexterm" name="id2111660"></a>

          <code class="literal">CHARACTER SET
          {<em class="replaceable"><code>charset_name</code></em> | DEFAULT}</code>
        </p><p>
          This maps all strings from and to the client with the given
          mapping. You can add new mappings by editing
          <code class="filename">sql/convert.cc</code> in the MySQL source
          distribution. <code class="literal">SET CHARACTER SET</code> sets three
          session system variables:
          <a href="server-administration.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a> and
          <a href="server-administration.html#sysvar_character_set_results"><code class="literal">character_set_results</code></a> are set
          to the given character set, and
          <a href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> to
          the value of
          <a href="server-administration.html#sysvar_character_set_database"><code class="literal">character_set_database</code></a>. See
          <a href="internationalization-localization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.
        </p><p>
          The default mapping can be restored by using the value
          <code class="literal">DEFAULT</code>. The default depends on the server
          configuration.
        </p><p>
          <code class="literal">ucs2</code> cannot be used as a client character
          set, which means that it does not work for <code class="literal">SET
          CHARACTER SET</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2111766"></a>

          <code class="literal">NAMES {'<em class="replaceable"><code>charset_name</code></em>'
          [COLLATE '<em class="replaceable"><code>collation_name</code></em>'] |
          DEFAULT}</code>
        </p><p>
          <code class="literal">SET NAMES</code> sets the three session system
          variables
          <a href="server-administration.html#sysvar_character_set_client"><code class="literal">character_set_client</code></a>,
          <a href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a>, and
          <a href="server-administration.html#sysvar_character_set_results"><code class="literal">character_set_results</code></a> to the
          given character set. Setting
          <a href="server-administration.html#sysvar_character_set_connection"><code class="literal">character_set_connection</code></a> to
          <code class="literal">charset_name</code> also sets
          <a href="server-administration.html#sysvar_collation_connection"><code class="literal">collation_connection</code></a> to the
          default collation for <code class="literal">charset_name</code>. The
          optional <code class="literal">COLLATE</code> clause may be used to
          specify a collation explicitly. See
          <a href="internationalization-localization.html#charset-connection" title="9.1.4. Connection Character Sets and Collations">Section 9.1.4, “Connection Character Sets and Collations”</a>.
        </p><p>
          The default mapping can be restored by using a value of
          <code class="literal">DEFAULT</code>. The default depends on the server
          configuration.
        </p><p>
          <code class="literal">ucs2</code> cannot be used as a client character
          set, which means that it does not work for <code class="literal">SET
          NAMES</code>.
        </p></li><li><p>
          <a class="indexterm" name="id2111894"></a>

          <code class="literal">ONE_SHOT</code>
        </p><p>
          This option is a modifier, not a variable. It can be used to
          influence the effect of variables that set the character set,
          the collation, and the time zone. <code class="literal">ONE_SHOT</code>
          is primarily used for replication purposes:
          <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> uses <code class="literal">SET
          ONE_SHOT</code> to modify temporarily the values of
          character set, collation, and time zone variables to reflect
          at rollforward what they were originally.
          <code class="literal">ONE_SHOT</code> is for internal use only and is
          deprecated for MySQL 5.0 and up.
        </p><p>
          You cannot use <code class="literal">ONE_SHOT</code> with other than the
          allowed set of variables; if you try, you get an error like
          this:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET ONE_SHOT max_allowed_packet = 1;</code></strong>
ERROR 1382 (HY000): The 'SET ONE_SHOT' syntax is reserved for purposes
internal to the MySQL server
</pre><p>
          If <code class="literal">ONE_SHOT</code> is used with the allowed
          variables, it changes the variables as requested, but only for
          the next
          non-<a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
          statement. After that, the server resets all character set,
          collation, and time zone-related system variables to their
          previous values. Example:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET ONE_SHOT character_set_connection = latin5;</code></strong>

mysql&gt; <strong class="userinput"><code>SET ONE_SHOT collation_connection = latin5_turkish_ci;</code></strong>

mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE '%_connection';</code></strong>
+--------------------------+-------------------+
| Variable_name            | Value             |
+--------------------------+-------------------+
| character_set_connection | latin5            |
| collation_connection     | latin5_turkish_ci |
+--------------------------+-------------------+

mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE '%_connection';</code></strong>
+--------------------------+-------------------+
| Variable_name            | Value             |
+--------------------------+-------------------+
| character_set_connection | latin1            |
| collation_connection     | latin1_swedish_ci |
+--------------------------+-------------------+
</pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="show"></a>12.5.5. <code class="literal">SHOW</code> Syntax</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#show-binary-logs">12.5.5.1. <code class="literal">SHOW BINARY LOGS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-binlog-events">12.5.5.2. <code class="literal">SHOW BINLOG EVENTS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-character-set">12.5.5.3. <code class="literal">SHOW CHARACTER SET</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-collation">12.5.5.4. <code class="literal">SHOW COLLATION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-columns">12.5.5.5. <code class="literal">SHOW COLUMNS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-database">12.5.5.6. <code class="literal">SHOW CREATE DATABASE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-function">12.5.5.7. <code class="literal">SHOW CREATE FUNCTION</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-procedure">12.5.5.8. <code class="literal">SHOW CREATE PROCEDURE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-table">12.5.5.9. <code class="literal">SHOW CREATE TABLE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-create-view">12.5.5.10. <code class="literal">SHOW CREATE VIEW</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-databases">12.5.5.11. <code class="literal">SHOW DATABASES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-engine">12.5.5.12. <code class="literal">SHOW ENGINE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-engines">12.5.5.13. <code class="literal">SHOW ENGINES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-errors">12.5.5.14. <code class="literal">SHOW ERRORS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-function-code">12.5.5.15. <code class="literal">SHOW FUNCTION CODE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-function-status">12.5.5.16. <code class="literal">SHOW FUNCTION STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-grants">12.5.5.17. <code class="literal">SHOW GRANTS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-index">12.5.5.18. <code class="literal">SHOW INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-innodb-status">12.5.5.19. <code class="literal">SHOW INNODB STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-logs">12.5.5.20. <code class="literal">SHOW LOGS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-master-status">12.5.5.21. <code class="literal">SHOW MASTER STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-mutex-status">12.5.5.22. <code class="literal">SHOW MUTEX STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-open-tables">12.5.5.23. <code class="literal">SHOW OPEN TABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-privileges">12.5.5.24. <code class="literal">SHOW PRIVILEGES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-procedure-code">12.5.5.25. <code class="literal">SHOW PROCEDURE CODE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-procedure-status">12.5.5.26. <code class="literal">SHOW PROCEDURE STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-processlist">12.5.5.27. <code class="literal">SHOW PROCESSLIST</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-profile">12.5.5.28. <code class="literal">SHOW PROFILE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-profiles">12.5.5.29. <code class="literal">SHOW PROFILES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-slave-hosts">12.5.5.30. <code class="literal">SHOW SLAVE HOSTS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-slave-status">12.5.5.31. <code class="literal">SHOW SLAVE STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-status">12.5.5.32. <code class="literal">SHOW STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-table-status">12.5.5.33. <code class="literal">SHOW TABLE STATUS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-tables">12.5.5.34. <code class="literal">SHOW TABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-triggers">12.5.5.35. <code class="literal">SHOW TRIGGERS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-variables">12.5.5.36. <code class="literal">SHOW VARIABLES</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#show-warnings">12.5.5.37. <code class="literal">SHOW WARNINGS</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2112041"></a><a class="indexterm" name="id2112062"></a><a class="indexterm" name="id2112074"></a><a class="indexterm" name="id2112083"></a><a class="indexterm" name="id2112092"></a><a class="indexterm" name="id2112101"></a><a class="indexterm" name="id2112110"></a><a class="indexterm" name="id2112119"></a><a class="indexterm" name="id2112128"></a><a class="indexterm" name="id2112137"></a><a class="indexterm" name="id2112146"></a><a class="indexterm" name="id2112154"></a><a class="indexterm" name="id2112163"></a><a class="indexterm" name="id2112172"></a><a class="indexterm" name="id2112181"></a><a class="indexterm" name="id2112190"></a><a class="indexterm" name="id2112199"></a><a class="indexterm" name="id2112208"></a><a class="indexterm" name="id2112217"></a><a class="indexterm" name="id2112226"></a><a class="indexterm" name="id2112235"></a><a class="indexterm" name="id2112244"></a><a class="indexterm" name="id2112253"></a><a class="indexterm" name="id2112262"></a><a class="indexterm" name="id2112271"></a><a class="indexterm" name="id2112280"></a><a class="indexterm" name="id2112288"></a><a class="indexterm" name="id2112297"></a><a class="indexterm" name="id2112306"></a><a class="indexterm" name="id2112315"></a><a class="indexterm" name="id2112324"></a><a class="indexterm" name="id2112333"></a><a class="indexterm" name="id2112342"></a><a class="indexterm" name="id2112351"></a><a class="indexterm" name="id2112360"></a><a class="indexterm" name="id2112369"></a><a class="indexterm" name="id2112378"></a><a class="indexterm" name="id2112387"></a><p>
      <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a> has many forms that provide
      information about databases, tables, columns, or status
      information about the server. This section describes those
      following:
    </p><pre class="programlisting">SHOW CHARACTER SET [<em class="replaceable"><code>like_or_where</code></em>]
SHOW COLLATION [<em class="replaceable"><code>like_or_where</code></em>]
SHOW [FULL] COLUMNS FROM <em class="replaceable"><code>tbl_name</code></em> [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW CREATE DATABASE <em class="replaceable"><code>db_name</code></em>
SHOW CREATE FUNCTION <em class="replaceable"><code>func_name</code></em>
SHOW CREATE PROCEDURE <em class="replaceable"><code>proc_name</code></em>
SHOW CREATE TABLE <em class="replaceable"><code>tbl_name</code></em>
SHOW DATABASES [<em class="replaceable"><code>like_or_where</code></em>]
SHOW ENGINE <em class="replaceable"><code>engine_name</code></em> {LOGS | STATUS }
SHOW [STORAGE] ENGINES
SHOW ERRORS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
SHOW FUNCTION CODE <em class="replaceable"><code>func_name</code></em>
SHOW FUNCTION STATUS [<em class="replaceable"><code>like_or_where</code></em>]
SHOW GRANTS FOR <em class="replaceable"><code>user</code></em>
SHOW INDEX FROM <em class="replaceable"><code>tbl_name</code></em> [FROM <em class="replaceable"><code>db_name</code></em>]
SHOW INNODB STATUS
SHOW PROCEDURE CODE <em class="replaceable"><code>proc_name</code></em>
SHOW PROCEDURE STATUS [<em class="replaceable"><code>like_or_where</code></em>]
SHOW [BDB] LOGS
SHOW MUTEX STATUS
SHOW OPEN TABLES [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW PRIVILEGES
SHOW [FULL] PROCESSLIST
SHOW PROFILE [<em class="replaceable"><code>types</code></em>] [FOR QUERY <em class="replaceable"><code>n</code></em>] [OFFSET <em class="replaceable"><code>n</code></em>] [LIMIT <em class="replaceable"><code>n</code></em>]
SHOW PROFILES
SHOW [GLOBAL | SESSION] STATUS [<em class="replaceable"><code>like_or_where</code></em>]
SHOW TABLE STATUS [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW TABLES [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW TRIGGERS [FROM <em class="replaceable"><code>db_name</code></em>] [<em class="replaceable"><code>like_or_where</code></em>]
SHOW [GLOBAL | SESSION] VARIABLES [<em class="replaceable"><code>like_or_where</code></em>]
SHOW WARNINGS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]

<em class="replaceable"><code>like_or_where</code></em>:
    LIKE '<em class="replaceable"><code>pattern</code></em>'
  | WHERE <em class="replaceable"><code>expr</code></em>
</pre><a class="indexterm" name="id2112582"></a><a class="indexterm" name="id2112591"></a><a class="indexterm" name="id2112600"></a><a class="indexterm" name="id2112609"></a><a class="indexterm" name="id2112618"></a><p>
      If the syntax for a given <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a>
      statement includes a <a href="functions.html#operator_like"><code class="literal">LIKE
      '<em class="replaceable"><code>pattern</code></em>'</code></a> part,
      <code class="literal">'<em class="replaceable"><code>pattern</code></em>'</code> is a
      string that can contain the SQL
      “<span class="quote"><code class="literal">%</code></span>” and
      “<span class="quote"><code class="literal">_</code></span>” wildcard characters. The
      pattern is useful for restricting statement output to matching
      values.
    </p><p>
      Several <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a> statements also accept
      a <code class="literal">WHERE</code> clause that provides more flexibility
      in specifying which rows to display. See
      <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
    </p><p>
      Many MySQL APIs (such as PHP) allow you to treat the result
      returned from a <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a> statement as
      you would a result set from a
      <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>; see
      <a href="connectors-apis.html" title="Chapter 20. Connectors and APIs">Chapter 20, <i>Connectors and APIs</i></a>, or your API documentation for
      more information. In addition, you can work in SQL with results
      from queries on tables in the
      <code class="literal">INFORMATION_SCHEMA</code> database, which you cannot
      easily do with results from <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a>
      statements. See <a href="information-schema.html" title="Chapter 19. INFORMATION_SCHEMA Tables">Chapter 19, <i><code class="literal">INFORMATION_SCHEMA</code> Tables</i></a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-binary-logs"></a>12.5.5.1. <code class="literal">SHOW BINARY LOGS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2112752"></a><a class="indexterm" name="id2112760"></a><pre class="programlisting">SHOW BINARY LOGS
SHOW MASTER LOGS
</pre><p>
        Lists the binary log files on the server. This statement is used
        as part of the procedure described in
        <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax">Section 12.6.1.1, “<code class="literal">PURGE BINARY LOGS</code> Syntax”</a>, that shows how to determine
        which logs can be purged.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW BINARY LOGS;</code></strong>
+---------------+-----------+
| Log_name      | File_size |
+---------------+-----------+
| binlog.000015 |    724935 |
| binlog.000016 |    733481 |
+---------------+-----------+
</pre><p>
        <a href="sql-syntax.html#show-binary-logs" title="12.5.5.1. SHOW BINARY LOGS Syntax"><code class="literal">SHOW MASTER
        LOGS</code></a> is equivalent to <a href="sql-syntax.html#show-binary-logs" title="12.5.5.1. SHOW BINARY LOGS Syntax"><code class="literal">SHOW BINARY
        LOGS</code></a>. The <code class="literal">File_size</code> column is
        displayed as of MySQL 5.0.7.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-binlog-events"></a>12.5.5.2. <code class="literal">SHOW BINLOG EVENTS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2112859"></a><pre class="programlisting">SHOW BINLOG EVENTS
   [IN '<em class="replaceable"><code>log_name</code></em>'] [FROM <em class="replaceable"><code>pos</code></em>] [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
</pre><p>
        Shows the events in the binary log. If you do not specify
        <code class="literal">'<em class="replaceable"><code>log_name</code></em>'</code>, the
        first binary log is displayed.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. See
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Issuing a <a href="sql-syntax.html#show-binlog-events" title="12.5.5.2. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a>
          with no <code class="literal">LIMIT</code> clause could start a very
          time- and resource-consuming process because the server
          returns to the client the complete contents of the binary log
          (which includes all statements executed by the server that
          modify data). As an alternative to <a href="sql-syntax.html#show-binlog-events" title="12.5.5.2. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW
          BINLOG EVENTS</code></a>, use the
          <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> utility to save the binary log
          to a text file for later examination and analysis. See
          <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files">Section 4.6.7, “<span><strong class="command">mysqlbinlog</strong></span> — Utility for Processing Binary Log Files”</a>.
        </p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Events relating to the setting of variables are not included
          in the output from <a href="sql-syntax.html#show-binlog-events" title="12.5.5.2. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG
          EVENTS</code></a>. To get complete coverage of events within a
          binary log, use
          <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><code class="literal">mysqlbinlog</code></a>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-character-set"></a>12.5.5.3. <code class="literal">SHOW CHARACTER SET</code> Syntax</h4></div></div></div><a class="indexterm" name="id2113026"></a><pre class="programlisting">SHOW CHARACTER SET
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        The <a href="sql-syntax.html#show-character-set" title="12.5.5.3. SHOW CHARACTER SET Syntax"><code class="literal">SHOW CHARACTER SET</code></a> statement
        shows all available character sets. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which character set names to match. The <code class="literal">WHERE</code>
        clause can be given to select rows using more general
        conditions, as discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>. For
        example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CHARACTER SET LIKE 'latin%';</code></strong>
+---------+-----------------------------+-------------------+--------+
| Charset | Description                 | Default collation | Maxlen |
+---------+-----------------------------+-------------------+--------+
| latin1  | cp1252 West European        | latin1_swedish_ci |      1 |
| latin2  | ISO 8859-2 Central European | latin2_general_ci |      1 |
| latin5  | ISO 8859-9 Turkish          | latin5_turkish_ci |      1 |
| latin7  | ISO 8859-13 Baltic          | latin7_general_ci |      1 |
+---------+-----------------------------+-------------------+--------+
</pre><p>
        The <code class="literal">Maxlen</code> column shows the maximum number of
        bytes required to store one character.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-collation"></a>12.5.5.4. <code class="literal">SHOW COLLATION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2113142"></a><pre class="programlisting">SHOW COLLATION
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        This statement lists collations supported by the server. By
        default, the output from <a href="sql-syntax.html#show-collation" title="12.5.5.4. SHOW COLLATION Syntax"><code class="literal">SHOW
        COLLATION</code></a> includes all available collations. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which collation names to match. The <code class="literal">WHERE</code>
        clause can be given to select rows using more general
        conditions, as discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>. For
        example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION LIKE 'latin1%';</code></strong>
+-------------------+---------+----+---------+----------+---------+
| Collation         | Charset | Id | Default | Compiled | Sortlen |
+-------------------+---------+----+---------+----------+---------+
| latin1_german1_ci | latin1  |  5 |         |          |       0 |
| latin1_swedish_ci | latin1  |  8 | Yes     | Yes      |       0 |
| latin1_danish_ci  | latin1  | 15 |         |          |       0 |
| latin1_german2_ci | latin1  | 31 |         | Yes      |       2 |
| latin1_bin        | latin1  | 47 |         | Yes      |       0 |
| latin1_general_ci | latin1  | 48 |         |          |       0 |
| latin1_general_cs | latin1  | 49 |         |          |       0 |
| latin1_spanish_ci | latin1  | 94 |         |          |       0 |
+-------------------+---------+----+---------+----------+---------+
</pre><p>
        The <code class="literal">Collation</code> and <code class="literal">Charset</code>
        columns indicate the names of the collation and the character
        set with which it is associated. <code class="literal">Id</code> is the
        collation ID. <code class="literal">Default</code> indicates whether the
        collation is the default for its character set.
        <code class="literal">Compiled</code> indicates whether the character set
        is compiled into the server. <code class="literal">Sortlen</code> is
        related to the amount of memory required to sort strings
        expressed in the character set.
      </p><p>
        To see the default collation for each character set, use the
        following statement. <code class="literal">Default</code> is a reserved
        word, so to use it as an identifier, it must be quoted as such:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION WHERE `Default` = 'Yes';</code></strong>
+---------------------+----------+----+---------+----------+---------+
| Collation           | Charset  | Id | Default | Compiled | Sortlen |
+---------------------+----------+----+---------+----------+---------+
| big5_chinese_ci     | big5     |  1 | Yes     | Yes      |       1 |
| dec8_swedish_ci     | dec8     |  3 | Yes     | Yes      |       1 |
| cp850_general_ci    | cp850    |  4 | Yes     | Yes      |       1 |
| hp8_english_ci      | hp8      |  6 | Yes     | Yes      |       1 |
| koi8r_general_ci    | koi8r    |  7 | Yes     | Yes      |       1 |
| latin1_swedish_ci   | latin1   |  8 | Yes     | Yes      |       1 |
...
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-columns"></a>12.5.5.5. <code class="literal">SHOW COLUMNS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2113320"></a><a class="indexterm" name="id2113340"></a><pre class="programlisting">SHOW [FULL] COLUMNS {FROM | IN} <em class="replaceable"><code>tbl_name</code></em> [{FROM | IN} <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a> displays information
        about the columns in a given table. It also works for views as
        of MySQL 5.0.1. The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if
        present, indicates which column names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLUMNS FROM City;</code></strong>
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| Id         | int(11)  | NO   | PRI | NULL    | auto_increment |
| Name       | char(35) | NO   |     |         |                |
| Country    | char(3)  | NO   | UNI |         |                |
| District   | char(20) | YES  | MUL |         |                |
| Population | int(11)  | NO   |     | 0       |                |
+------------+----------+------+-----+---------+----------------+
5 rows in set (0.00 sec)
</pre><p>
        If the data types differ from what you expect them to be based
        on a <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement, note
        that MySQL sometimes changes data types when you create or alter
        a table. The conditions under which this occurs are described in
        <a href="sql-syntax.html#silent-column-changes" title="12.1.10.1. Silent Column Specification Changes">Section 12.1.10.1, “Silent Column Specification Changes”</a>.
      </p><p>
        The <code class="literal">FULL</code> keyword causes the output to include
        the column collation and comments, as well as the privileges you
        have for each column.
      </p><p>
        You can use <em class="replaceable"><code>db_name.tbl_name</code></em> as an
        alternative to the <code class="literal"><em class="replaceable"><code>tbl_name</code></em>
        FROM <em class="replaceable"><code>db_name</code></em></code> syntax. In
        other words, these two statements are equivalent:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLUMNS FROM mytable FROM mydb;</code></strong>
mysql&gt; <strong class="userinput"><code>SHOW COLUMNS FROM mydb.mytable;</code></strong>
</pre><p>
        <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a> displays the
        following values for each table column:
      </p><p>
        <code class="literal">Field</code> indicates the column name.
      </p><p>
        <code class="literal">Type</code> indicates the column data type.
      </p><p>
        <code class="literal">Collation</code> indicates the collation for
        nonbinary string columns, or <code class="literal">NULL</code> for other
        columns. This value is displayed only if you use the
        <code class="literal">FULL</code> keyword.
      </p><p>
        The <code class="literal">Null</code> field contains
        <code class="literal">YES</code> if <code class="literal">NULL</code> values can be
        stored in the column. If not, the column contains
        <code class="literal">NO</code> as of MySQL 5.0.3, and
        <code class="literal">''</code> before that.
      </p><p>
        The <code class="literal">Key</code> field indicates whether the column is
        indexed:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            If <code class="literal">Key</code> is empty, the column either is not
            indexed or is indexed only as a secondary column in a
            multiple-column, nonunique index.
          </p></li><li><p>
            If <code class="literal">Key</code> is <code class="literal">PRI</code>, the
            column is a <code class="literal">PRIMARY KEY</code> or is one of the
            columns in a multiple-column <code class="literal">PRIMARY KEY</code>.
          </p></li><li><p>
            If <code class="literal">Key</code> is <code class="literal">UNI</code>, the
            column is the first column of a unique-valued index that
            cannot contain <code class="literal">NULL</code> values.
          </p></li><li><p>
            If <code class="literal">Key</code> is <code class="literal">MUL</code>,
            multiple occurrences of a given value are allowed within the
            column. The column is the first column of a nonunique index
            or a unique-valued index that can contain
            <code class="literal">NULL</code> values.
          </p></li></ul></div><p>
        If more than one of the <code class="literal">Key</code> values applies to
        a given column of a table, <code class="literal">Key</code> displays the
        one with the highest priority, in the order
        <code class="literal">PRI</code>, <code class="literal">UNI</code>,
        <code class="literal">MUL</code>.
      </p><p>
        A <code class="literal">UNIQUE</code> index may be displayed as
        <code class="literal">PRI</code> if it cannot contain
        <code class="literal">NULL</code> values and there is no <code class="literal">PRIMARY
        KEY</code> in the table. A <code class="literal">UNIQUE</code> index
        may display as <code class="literal">MUL</code> if several columns form a
        composite <code class="literal">UNIQUE</code> index; although the
        combination of the columns is unique, each column can still hold
        multiple occurrences of a given value.
      </p><p>
        Before MySQL 5.0.11, if the column allows
        <code class="literal">NULL</code> values, the <code class="literal">Key</code> value
        can be <code class="literal">MUL</code> even when a single-column
        <code class="literal">UNIQUE</code> index is used. The rationale was that
        multiple rows in a <code class="literal">UNIQUE</code> index can hold a
        <code class="literal">NULL</code> value if the column is not declared
        <code class="literal">NOT NULL</code>. As of MySQL 5.0.11, the display is
        <code class="literal">UNI</code> rather than <code class="literal">MUL</code>
        regardless of whether the column allows <code class="literal">NULL</code>;
        you can see from the <code class="literal">Null</code> field whether or
        not the column can contain <code class="literal">NULL</code>.
      </p><p>
        The <code class="literal">Default</code> field indicates the default value
        that is assigned to the column.
      </p><p>
        The <code class="literal">Extra</code> field contains any additional
        information that is available about a given column. The value is
        <code class="literal">auto_increment</code> for columns that have the
        <code class="literal">AUTO_INCREMENT</code> attribute and empty otherwise.
      </p><p>
        <code class="literal">Privileges</code> indicates the privileges you have
        for the column. This value is displayed only if you use the
        <code class="literal">FULL</code> keyword.
      </p><p>
        <code class="literal">Comment</code> indicates any comment the column has.
        This value is displayed only if you use the
        <code class="literal">FULL</code> keyword.
      </p><a class="indexterm" name="id2113915"></a><p>
        <code class="literal">SHOW FIELDS</code> is a synonym for
        <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW COLUMNS</code></a>. You can also list a
        table's columns with the <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow
        <em class="replaceable"><code>db_name</code></em>
        <em class="replaceable"><code>tbl_name</code></em></strong></span></a> command.
      </p><p>
        The <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax"><code class="literal">DESCRIBE</code></a> statement provides
        information similar to <a href="sql-syntax.html#show-columns" title="12.5.5.5. SHOW COLUMNS Syntax"><code class="literal">SHOW
        COLUMNS</code></a>. See <a href="sql-syntax.html#describe" title="12.3.1. DESCRIBE Syntax">Section 12.3.1, “<code class="literal">DESCRIBE</code> Syntax”</a>.
      </p><p>
        The <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a>,
        <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE STATUS</code></a>, and
        <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> statements also
        provide information about tables. See <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax">Section 12.5.5, “<code class="literal">SHOW</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-database"></a>12.5.5.6. <code class="literal">SHOW CREATE DATABASE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114022"></a><a class="indexterm" name="id2114031"></a><pre class="programlisting">SHOW CREATE {DATABASE | SCHEMA} <em class="replaceable"><code>db_name</code></em>
</pre><p>
        Shows the <a href="sql-syntax.html#create-database" title="12.1.6. CREATE DATABASE Syntax"><code class="literal">CREATE DATABASE</code></a>
        statement that creates the given database.
        <a href="sql-syntax.html#show-create-database" title="12.5.5.6. SHOW CREATE DATABASE Syntax"><code class="literal">SHOW
        CREATE SCHEMA</code></a> is a synonym for
        <a href="sql-syntax.html#show-create-database" title="12.5.5.6. SHOW CREATE DATABASE Syntax"><code class="literal">SHOW CREATE DATABASE</code></a> as of MySQL
        5.0.2.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE DATABASE test\G</code></strong>
*************************** 1. row ***************************
       Database: test
Create Database: CREATE DATABASE `test`
                 /*!40100 DEFAULT CHARACTER SET latin1 */

mysql&gt; <strong class="userinput"><code>SHOW CREATE SCHEMA test\G</code></strong>
*************************** 1. row ***************************
       Database: test
Create Database: CREATE DATABASE `test`
                 /*!40100 DEFAULT CHARACTER SET latin1 */
</pre><p>
        <a href="sql-syntax.html#show-create-database" title="12.5.5.6. SHOW CREATE DATABASE Syntax"><code class="literal">SHOW CREATE DATABASE</code></a> quotes table
        and column names according to the value of the
        <a href="server-administration.html#sysvar_sql_quote_show_create"><code class="literal">sql_quote_show_create</code></a> option.
        See <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-function"></a>12.5.5.7. <code class="literal">SHOW CREATE FUNCTION</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114166"></a><pre class="programlisting">SHOW CREATE FUNCTION <em class="replaceable"><code>func_name</code></em>
</pre><p>
        This statement is similar to <a href="sql-syntax.html#show-create-procedure" title="12.5.5.8. SHOW CREATE PROCEDURE Syntax"><code class="literal">SHOW CREATE
        PROCEDURE</code></a> but for stored functions. See
        <a href="sql-syntax.html#show-create-procedure" title="12.5.5.8. SHOW CREATE PROCEDURE Syntax">Section 12.5.5.8, “<code class="literal">SHOW CREATE PROCEDURE</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-procedure"></a>12.5.5.8. <code class="literal">SHOW CREATE PROCEDURE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114236"></a><pre class="programlisting">SHOW CREATE PROCEDURE <em class="replaceable"><code>proc_name</code></em>
</pre><p>
        This statement is a MySQL extension. It returns the exact string
        that can be used to re-create the named stored procedure. A
        similar statement, <a href="sql-syntax.html#show-create-function" title="12.5.5.7. SHOW CREATE FUNCTION Syntax"><code class="literal">SHOW CREATE
        FUNCTION</code></a>, displays information about stored functions
        (see <a href="sql-syntax.html#show-create-function" title="12.5.5.7. SHOW CREATE FUNCTION Syntax">Section 12.5.5.7, “<code class="literal">SHOW CREATE FUNCTION</code> Syntax”</a>).
      </p><p>
        Both statements require that you be the owner of the routine or
        have <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> access to the
        <code class="literal">mysql.proc</code> table. If you do not have
        privileges for the routine itself, the value displayed for the
        <code class="literal">Create Procedure</code> or <code class="literal">Create
        Function</code> field will be <code class="literal">NULL</code>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE PROCEDURE test.simpleproc\G</code></strong>
*************************** 1. row ***************************
       Procedure: simpleproc
        sql_mode:
Create Procedure: CREATE PROCEDURE `simpleproc`(OUT param1 INT)
                  BEGIN
                  SELECT COUNT(*) INTO param1 FROM t;
                  END

mysql&gt; <strong class="userinput"><code>SHOW CREATE FUNCTION test.hello\G</code></strong>
*************************** 1. row ***************************
       Function: hello
       sql_mode:
Create Function: CREATE FUNCTION `hello`(s CHAR(20))
                 RETURNS CHAR(50)
                 RETURN CONCAT('Hello, ',s,'!')
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-table"></a>12.5.5.9. <code class="literal">SHOW CREATE TABLE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114373"></a><pre class="programlisting">SHOW CREATE TABLE <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
        Shows the <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> statement
        that creates the given table. The statement requires the
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the table.
        As of MySQL 5.0.1, this statement also works with views.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t\G</code></strong>
*************************** 1. row ***************************
       Table: t
Create Table: CREATE TABLE t (
  id INT(11) default NULL auto_increment,
  s char(60) default NULL,
  PRIMARY KEY (id)
) ENGINE=MyISAM

</pre><p>
        <a href="sql-syntax.html#show-create-table" title="12.5.5.9. SHOW CREATE TABLE Syntax"><code class="literal">SHOW CREATE TABLE</code></a> quotes table
        and column names according to the value of the
        <a href="server-administration.html#sysvar_sql_quote_show_create"><code class="literal">sql_quote_show_create</code></a> option.
        See <a href="server-administration.html#server-session-variables" title="5.1.4. Session System Variables">Section 5.1.4, “Session System Variables”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-create-view"></a>12.5.5.10. <code class="literal">SHOW CREATE VIEW</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114501"></a><pre class="programlisting">SHOW CREATE VIEW <em class="replaceable"><code>view_name</code></em>
</pre><p>
        This statement shows a <a href="sql-syntax.html#create-view" title="12.1.12. CREATE VIEW Syntax"><code class="literal">CREATE
        VIEW</code></a> statement that creates the given view.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE VIEW v;</code></strong>
+------+----------------------------------------------------+
| View | Create View                                        |
+------+----------------------------------------------------+
| v    | CREATE VIEW `test`.`v` AS select 1 AS `a`,2 AS `b` |
+------+----------------------------------------------------+
</pre><p>
        This statement was added in MySQL 5.0.1.
      </p><p>
        Prior to MySQL 5.0.11, the output columns from this statement
        were shown as <code class="literal">Table</code> and <code class="literal">Create
        Table</code>.
      </p><p>
        Use of <a href="sql-syntax.html#show-create-view" title="12.5.5.10. SHOW CREATE VIEW Syntax"><code class="literal">SHOW CREATE VIEW</code></a> requires
        the <a href="server-administration.html#priv_show-view"><code class="literal">SHOW VIEW</code></a> privilege and the
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the view in
        question.
      </p><p>
        You can also obtain information about view objects from
        <code class="literal">INFORMATION_SCHEMA</code>, which contains a
        <a href="information-schema.html#views-table" title="19.15. The INFORMATION_SCHEMA VIEWS Table"><code class="literal">VIEWS</code></a> table. See
        <a href="information-schema.html#views-table" title="19.15. The INFORMATION_SCHEMA VIEWS Table">Section 19.15, “The <code class="literal">INFORMATION_SCHEMA VIEWS</code> Table”</a>.
      </p><p>
        MySQL lets you use different
        <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> settings to tell the
        server the type of SQL syntax to support. For example, you might
        use the <a href="server-administration.html#sqlmode_ansi"><code class="literal">ANSI</code></a> SQL mode to
        ensure MySQL correctly interprets the standard SQL concatenation
        operator, the double bar (<code class="literal">||</code>), in your
        queries. If you then create a view that concatenates items, you
        might worry that changing the
        <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> setting to a value
        different from <a href="server-administration.html#sqlmode_ansi"><code class="literal">ANSI</code></a> could
        cause the view to become invalid. But this is not the case. No
        matter how you write out a view definition, MySQL always stores
        it the same way, in a canonical form. Here is an example that
        shows how the server changes a double bar concatenation operator
        to a <a href="functions.html#function_concat"><code class="literal">CONCAT()</code></a> function:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET sql_mode = 'ANSI';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE VIEW test.v AS SELECT 'a' || 'b' as col1;</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SHOW CREATE VIEW test.v\G</code></strong>
*************************** 1. row ***************************
                View: v
         Create View: CREATE VIEW "v" AS select concat('a','b') AS "col1"
...
1 row in set (0.00 sec)
</pre><p>
        The advantage of storing a view definition in canonical form is
        that changes made later to the value of
        <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a> will not affect the
        results from the view. However an additional consequence is that
        comments prior to <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> are
        stripped from the definition by the server.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-databases"></a>12.5.5.11. <code class="literal">SHOW DATABASES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114742"></a><a class="indexterm" name="id2114751"></a><pre class="programlisting">SHOW {DATABASES | SCHEMAS}
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a> lists the
        databases on the MySQL server host.
        <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW
        SCHEMAS</code></a> is a synonym for <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW
        DATABASES</code></a> as of MySQL 5.0.2. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which database names to match. The <code class="literal">WHERE</code>
        clause can be given to select rows using more general
        conditions, as discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        You see only those databases for which you have some kind of
        privilege, unless you have the global <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW
        DATABASES</code></a> privilege. You can also get this list using
        the <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow</strong></span></a> command.
      </p><p>
        If the server was started with the
        <a href="server-administration.html#option_mysqld_skip-show-database"><code class="option">--skip-show-database</code></a> option, you
        cannot use this statement at all unless you have the
        <a href="server-administration.html#priv_show-databases"><code class="literal">SHOW DATABASES</code></a> privilege.
      </p><p>
        MySQL implements databases as directories in the data directory,
        so this statement simply lists directories in that location.
        However, the output may include names of directories that do not
        correspond to actual databases.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-engine"></a>12.5.5.12. <code class="literal">SHOW ENGINE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2114897"></a><a class="indexterm" name="id2114906"></a><a class="indexterm" name="id2114915"></a><a class="indexterm" name="id2114924"></a><pre class="programlisting">SHOW ENGINE <em class="replaceable"><code>engine_name</code></em> {LOGS | STATUS }
</pre><p>
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE</code></a> displays log or
        status information about a storage engine. The following
        statements currently are supported:
      </p><pre class="programlisting">SHOW ENGINE BDB LOGS
SHOW ENGINE INNODB STATUS
SHOW ENGINE NDB STATUS
SHOW ENGINE NDBCLUSTER STATUS
</pre><p>
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE BDB
        LOGS</code></a> displays status information about existing
        <code class="literal">BDB</code> log files. It returns the following
        fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">File</code>
          </p><p>
            The full path to the log file.
          </p></li><li><p>
            <code class="literal">Type</code>
          </p><p>
            The log file type (<code class="literal">BDB</code> for Berkeley DB
            log files).
          </p></li><li><p>
            <code class="literal">Status</code>
          </p><p>
            The status of the log file (<code class="literal">FREE</code> if the
            file can be removed, or <code class="literal">IN USE</code> if the
            file is needed by the transaction subsystem)
          </p></li></ul></div><p>
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE INNODB
        STATUS</code></a> displays extensive information from the
        standard <code class="literal">InnoDB</code> Monitor about the state of
        the <code class="literal">InnoDB</code> storage engine. For information
        about the standard monitor and other <code class="literal">InnoDB</code>
        Monitors that provide information about
        <code class="literal">InnoDB</code> processing, see
        <a href="storage-engines.html#innodb-monitors" title="13.2.13.2. SHOW ENGINE INNODB
        STATUS and the InnoDB Monitors">Section 13.2.13.2, “<code class="literal">SHOW ENGINE INNODB
        STATUS</code> and the <code class="literal">InnoDB</code> Monitors”</a>.
      </p><p>
        Older (and now deprecated) synonyms for
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE BDB
        LOGS</code></a> and
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE INNODB
        STATUS</code></a> are <code class="literal">SHOW [BDB] LOGS</code> and
        <a href="sql-syntax.html#show-innodb-status" title="12.5.5.19. SHOW INNODB STATUS Syntax"><code class="literal">SHOW INNODB STATUS</code></a>, respectively.
      </p><p>
        If the server has the <code class="literal">NDBCLUSTER</code>
        storage engine enabled,
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE NDB
        STATUS</code></a> can be used to display cluster status
        information. Sample output from this statement is shown here:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW ENGINE NDB STATUS;</code></strong>
+-----------------------+---------+------+--------+
| free_list             | created | free | sizeof |
+-----------------------+---------+------+--------+
| NdbTransaction        |       5 |    0 |    208 |
| NdbOperation          |       4 |    4 |    660 |
| NdbIndexScanOperation |       1 |    1 |    736 |
| NdbIndexOperation     |       0 |    0 |   1060 |
| NdbRecAttr            |     645 |  645 |     72 |
| NdbApiSignal          |      16 |   16 |    136 |
| NdbLabel              |       0 |    0 |    196 |
| NdbBranch             |       0 |    0 |     24 |
| NdbSubroutine         |       0 |    0 |     68 |
| NdbCall               |       0 |    0 |     16 |
| NdbBlob               |       2 |    2 |    204 |
| NdbReceiver           |       2 |    0 |     68 |
+-----------------------+---------+------+--------+
12 rows in set (0.00 sec)
</pre><p>
        The most useful of the rows from the output of this statement
        are described in the following list:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">NdbTransaction</code>: The number and size of
            <code class="literal">NdbTransaction</code> objects that have been
            created. An <code class="literal">NdbTransaction</code> is created
            each time a table schema operation (such as
            <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> or
            <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>) is performed on
            an <code class="literal">NDB</code> table.
          </p></li><li><p>
            <code class="literal">NdbOperation</code>: The number and size of
            <code class="literal">NdbOperation</code> objects that have been
            created.
          </p></li><li><p>
            <code class="literal">NdbIndexScanOperation</code>: The number and
            size of <code class="literal">NdbIndexScanOperation</code> objects
            that have been created.
          </p></li><li><p>
            <code class="literal">NdbIndexOperation</code>: The number and size of
            <code class="literal">NdbIndexOperation</code> objects that have been
            created.
          </p></li><li><p>
            <code class="literal">NdbRecAttr</code>: The number and size of
            <code class="literal">NdbRecAttr</code> objects that have been
            created. In general, one of these is created each time a
            data manipulation statement is performed by an SQL node.
          </p></li><li><p>
            <code class="literal">NdbBlob</code>: The number and size of
            <code class="literal">NdbBlob</code> objects that have been created.
            An <code class="literal">NdbBlob</code> is created for each new
            operation involving a <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a>
            column in an <code class="literal">NDB</code> table.
          </p></li><li><p>
            <code class="literal">NdbReceiver</code>: The number and size of any
            <code class="literal">NdbReceiver</code> object that have been
            created. The number in the <code class="literal">created</code> column
            is the same as the number of data nodes in the cluster to
            which the MySQL server has connected.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE NDB
          STATUS</code></a> returns an empty result if no operations
          involving <code class="literal">NDB</code> tables have been
          performed by the MySQL client accessing the SQL node on which
          this statement is run.
        </p></div><p>
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE
        NDBCLUSTER STATUS</code></a> is a synonym for
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE NDB
        STATUS</code></a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          The <code class="literal">SHOW ENGINE
          <em class="replaceable"><code>engine_name</code></em> STATUS</code>
          statement provides valuable information about the state of
          your server. For expert interpretation of this information,
          subscribe to the MySQL Enterprise Monitor. For more
          information, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-engines"></a>12.5.5.13. <code class="literal">SHOW ENGINES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2115467"></a><a class="indexterm" name="id2115476"></a><a class="indexterm" name="id2115485"></a><pre class="programlisting">SHOW [STORAGE] ENGINES
</pre><p>
        <a href="sql-syntax.html#show-engines" title="12.5.5.13. SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a> displays status
        information about the server's storage engines. This is
        particularly useful for checking whether a storage engine is
        supported, or to see what the default engine is. <code class="literal">SHOW
        TABLE TYPES</code> is a deprecated synonym.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW ENGINES\G</code></strong>
*************************** 1. row ***************************
 Engine: MyISAM
Support: DEFAULT
Comment: Default engine as of MySQL 3.23 with great performance
*************************** 2. row ***************************
 Engine: MEMORY
Support: YES
Comment: Hash based, stored in memory, useful for temporary tables
*************************** 3. row ***************************
 Engine: HEAP
Support: YES
Comment: Alias for MEMORY
*************************** 4. row ***************************
 Engine: MERGE
Support: YES
Comment: Collection of identical MyISAM tables
*************************** 5. row ***************************
 Engine: MRG_MYISAM
Support: YES
Comment: Alias for MERGE
*************************** 6. row ***************************
 Engine: ISAM
Support: NO
Comment: Obsolete storage engine, now replaced by MyISAM
*************************** 7. row ***************************
 Engine: MRG_ISAM
Support: NO
Comment: Obsolete storage engine, now replaced by MERGE
*************************** 8. row ***************************
 Engine: InnoDB
Support: YES
Comment: Supports transactions, row-level locking, and foreign keys
*************************** 9. row ***************************
 Engine: INNOBASE
Support: YES
Comment: Alias for INNODB
*************************** 10. row ***************************
 Engine: BDB
Support: YES
Comment: Supports transactions and page-level locking
*************************** 11. row ***************************
 Engine: BERKELEYDB
Support: YES
Comment: Alias for BDB
*************************** 12. row ***************************
 Engine: NDBCLUSTER
Support: NO
Comment: Clustered, fault-tolerant, memory-based tables
*************************** 13. row ***************************
 Engine: NDB
Support: NO
Comment: Alias for NDBCLUSTER
*************************** 14. row ***************************
 Engine: EXAMPLE
Support: NO
Comment: Example storage engine
*************************** 15. row ***************************
 Engine: ARCHIVE
Support: YES
Comment: Archive storage engine
*************************** 16. row ***************************
 Engine: CSV
Support: NO
Comment: CSV storage engine
*************************** 17. row ***************************
 Engine: FEDERATED
Support: YES
Comment: Federated MySQL storage engine
*************************** 18. row ***************************
 Engine: BLACKHOLE
Support: YES
Comment: /dev/null storage engine (anything you write to it disappears)
</pre><p>
        The output from <a href="sql-syntax.html#show-engines" title="12.5.5.13. SHOW ENGINES Syntax"><code class="literal">SHOW ENGINES</code></a> may
        vary according to the MySQL version used and other factors. The
        values shown in the <code class="literal">Support</code> column indicate
        the server's level of support for the storage engine, as shown
        in the following table.
      </p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><span class="bold"><strong>Value</strong></span></td><td><span class="bold"><strong>Meaning</strong></span></td></tr><tr><td><code class="literal">YES</code></td><td>The engine is supported and is active</td></tr><tr><td><code class="literal">DEFAULT</code></td><td>Like <code class="literal">YES</code>, plus this is the default engine</td></tr><tr><td><code class="literal">NO</code></td><td>The engine is not supported</td></tr><tr><td><code class="literal">DISABLED</code></td><td>The engine is supported but has been disabled</td></tr></tbody></table></div><p>
        A value of <code class="literal">NO</code> means that the server was
        compiled without support for the engine, so it cannot be
        activated at runtime.
      </p><p>
        A value of <code class="literal">DISABLED</code> occurs either because the
        server was started with an option that disables the engine, or
        because not all options required to enable it were given. In the
        latter case, the error log file should contain a reason
        indicating why the option is disabled. See
        <a href="server-administration.html#error-log" title="5.2.1. The Error Log">Section 5.2.1, “The Error Log”</a>.
      </p><p>
        You might also see <code class="literal">DISABLED</code> for a storage
        engine if the server was compiled to support it, but was started
        with a
        <code class="option">--skip-<em class="replaceable"><code>engine_name</code></em></code>
        option. For example,
        <a href="server-administration.html#option_mysqld_skip-innodb"><code class="option">--skip-innodb</code></a> disables the
        <code class="literal">InnoDB</code> engine. For the
        <code class="literal">NDBCLUSTER</code> storage engine,
        <code class="literal">DISABLED</code> means the server was compiled with
        support for MySQL Cluster, but was not started with the
        <a href="mysql-cluster.html#option_mysqld_ndbcluster"><code class="option">--ndbcluster</code></a> option.
      </p><p>
        All MySQL servers support <code class="literal">MyISAM</code> tables,
        because <code class="literal">MyISAM</code> is the default storage engine.
        It is not possible to disable <code class="literal">MyISAM</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-errors"></a>12.5.5.14. <code class="literal">SHOW ERRORS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2115806"></a><pre class="programlisting">SHOW ERRORS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
SHOW COUNT(*) ERRORS
</pre><p>
        This statement is similar to <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax"><code class="literal">SHOW
        WARNINGS</code></a>, except that instead of displaying errors,
        warnings, and notes, it displays only errors.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. See
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
      </p><p>
        The <code class="literal">SHOW COUNT(*) ERRORS</code> statement displays
        the number of errors. You can also retrieve this number from the
        <a href="server-administration.html#sysvar_error_count"><code class="literal">error_count</code></a> variable:
      </p><pre class="programlisting">SHOW COUNT(*) ERRORS;
SELECT @@error_count;
</pre><p>
        For more information, see <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax">Section 12.5.5.37, “<code class="literal">SHOW WARNINGS</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-function-code"></a>12.5.5.15. <code class="literal">SHOW FUNCTION CODE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2115930"></a><pre class="programlisting">SHOW FUNCTION CODE <em class="replaceable"><code>func_name</code></em>
</pre><p>
        This statement is similar to <a href="sql-syntax.html#show-procedure-code" title="12.5.5.25. SHOW PROCEDURE CODE Syntax"><code class="literal">SHOW PROCEDURE
        CODE</code></a> but for stored functions. See
        <a href="sql-syntax.html#show-procedure-code" title="12.5.5.25. SHOW PROCEDURE CODE Syntax">Section 12.5.5.25, “<code class="literal">SHOW PROCEDURE CODE</code> Syntax”</a>. <a href="sql-syntax.html#show-function-code" title="12.5.5.15. SHOW FUNCTION CODE Syntax"><code class="literal">SHOW
        FUNCTION CODE</code></a> was added in MySQL 5.0.17.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-function-status"></a>12.5.5.16. <code class="literal">SHOW FUNCTION STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2116008"></a><pre class="programlisting">SHOW FUNCTION STATUS
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        This statement is similar to <a href="sql-syntax.html#show-procedure-status" title="12.5.5.26. SHOW PROCEDURE STATUS Syntax"><code class="literal">SHOW PROCEDURE
        STATUS</code></a> but for stored functions. See
        <a href="sql-syntax.html#show-procedure-status" title="12.5.5.26. SHOW PROCEDURE STATUS Syntax">Section 12.5.5.26, “<code class="literal">SHOW PROCEDURE STATUS</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-grants"></a>12.5.5.17. <code class="literal">SHOW GRANTS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2116082"></a><a class="indexterm" name="id2116095"></a><a class="indexterm" name="id2116104"></a><pre class="programlisting">SHOW GRANTS [FOR <em class="replaceable"><code>user</code></em>]
</pre><p>
        This statement lists the <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a>
        statement or statements that must be issued to duplicate the
        privileges that are granted to a MySQL user account. The account
        is named using the same format as for the
        <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> statement; for example,
        <code class="literal">'jeffrey'@'localhost'</code>. If you specify only
        the user name part of the account name, a host name part of
        <code class="literal">'%'</code> is used. For additional information about
        specifying account names, see <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW GRANTS FOR 'root'@'localhost';</code></strong>
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
+---------------------------------------------------------------------+
</pre><p>
        To list the privileges granted to the account that you are using
        to connect to the server, you can use any of the following
        statements:
      </p><pre class="programlisting">SHOW GRANTS;
SHOW GRANTS FOR CURRENT_USER;
SHOW GRANTS FOR CURRENT_USER();
</pre><p>
        As of MySQL 5.0.24, if <code class="literal">SHOW GRANTS FOR
        CURRENT_USER</code> (or any of the equivalent syntaxes) is
        used in <code class="literal">DEFINER</code> context, such as within a
        stored procedure that is defined with <code class="literal">SQL SECURITY
        DEFINER</code>), the grants displayed are those of the
        definer and not the invoker.
      </p><p>
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> displays only the
        privileges granted explicitly to the named account. Other
        privileges might be available to the account, but they are not
        displayed. For example, if an anonymous account exists, the
        named account might be able to use its privileges, but
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> will not display
        them.
      </p><p>
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> requires the
        <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the
        <code class="literal">mysql</code> database.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-index"></a>12.5.5.18. <code class="literal">SHOW INDEX</code> Syntax</h4></div></div></div><a class="indexterm" name="id2116288"></a><a class="indexterm" name="id2116308"></a><a class="indexterm" name="id2116317"></a><pre class="programlisting">SHOW {INDEX | INDEXES | KEYS}
    {FROM | IN} <em class="replaceable"><code>tbl_name</code></em>
    [{FROM | IN} <em class="replaceable"><code>db_name</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> returns table index
        information. The format resembles that of the
        <code class="literal">SQLStatistics</code> call in ODBC.
      </p><p>
        <a href="sql-syntax.html#show-index" title="12.5.5.18. SHOW INDEX Syntax"><code class="literal">SHOW INDEX</code></a> returns the following
        fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Table</code>
          </p><p>
            The name of the table.
          </p></li><li><p>
            <code class="literal">Non_unique</code>
          </p><p>
            0 if the index cannot contain duplicates, 1 if it can.
          </p></li><li><p>
            <code class="literal">Key_name</code>
          </p><p>
            The name of the index.
          </p></li><li><p>
            <code class="literal">Seq_in_index</code>
          </p><p>
            The column sequence number in the index, starting with 1.
          </p></li><li><p>
            <code class="literal">Column_name</code>
          </p><p>
            The column name.
          </p></li><li><p>
            <a class="indexterm" name="id2116479"></a>

            <code class="literal">Collation</code>
          </p><p>
            How the column is sorted in the index. In MySQL, this can
            have values “<span class="quote"><code class="literal">A</code></span>” (Ascending)
            or <code class="literal">NULL</code> (Not sorted).
          </p></li><li><p>
            <a class="indexterm" name="id2116524"></a>

            <code class="literal">Cardinality</code>
          </p><p>
            An estimate of the number of unique values in the index.
            This is updated by running <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE
            TABLE</code></a> or <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk -a</strong></span></a>.
            <code class="literal">Cardinality</code> is counted based on
            statistics stored as integers, so the value is not
            necessarily exact even for small tables. The higher the
            cardinality, the greater the chance that MySQL uses the
            index when doing joins.
          </p></li><li><p>
            <code class="literal">Sub_part</code>
          </p><p>
            The number of indexed characters if the column is only
            partly indexed, <code class="literal">NULL</code> if the entire column
            is indexed.
          </p></li><li><p>
            <code class="literal">Packed</code>
          </p><p>
            Indicates how the key is packed. <code class="literal">NULL</code> if
            it is not.
          </p></li><li><p>
            <code class="literal">Null</code>
          </p><p>
            Contains <code class="literal">YES</code> if the column may contain
            <code class="literal">NULL</code> values and <code class="literal">''</code> if
            not.
          </p></li><li><p>
            <code class="literal">Index_type</code>
          </p><p>
            The index method used (<code class="literal">BTREE</code>,
            <code class="literal">FULLTEXT</code>, <code class="literal">HASH</code>,
            <code class="literal">RTREE</code>).
          </p></li><li><p>
            <code class="literal">Comment</code>
          </p><p>
            Various remarks.
          </p></li></ul></div><p>
        The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which event names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        You can use
        <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em>
        as an alternative to the
        <code class="literal"><em class="replaceable"><code>tbl_name</code></em> FROM
        <em class="replaceable"><code>db_name</code></em></code> syntax. These two
        statements are equivalent:
      </p><pre class="programlisting">SHOW INDEX FROM mytable FROM mydb;
SHOW INDEX FROM mydb.mytable;
</pre><p>
        You can also list a table's indexes with the <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow
        -k <em class="replaceable"><code>db_name</code></em>
        <em class="replaceable"><code>tbl_name</code></em></strong></span></a> command.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-innodb-status"></a>12.5.5.19. <code class="literal">SHOW INNODB STATUS</code> Syntax</h4></div></div></div><pre class="programlisting">SHOW INNODB STATUS
</pre><p>
        In MySQL 5.0, this is a deprecated synonym for
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE INNODB
        STATUS</code></a>. See <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax">Section 12.5.5.12, “<code class="literal">SHOW ENGINE</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-logs"></a>12.5.5.20. <code class="literal">SHOW LOGS</code> Syntax</h4></div></div></div><pre class="programlisting">SHOW [BDB] LOGS
</pre><p>
        In MySQL 5.0, this is a deprecated synonym for
        <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW ENGINE BDB
        LOGS</code></a>. See <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax">Section 12.5.5.12, “<code class="literal">SHOW ENGINE</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-master-status"></a>12.5.5.21. <code class="literal">SHOW MASTER STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2116922"></a><pre class="programlisting">SHOW MASTER STATUS
</pre><p>
        This statement provides status information about the binary log
        files of the master. It requires either the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> or
        <a href="server-administration.html#priv_replication-client"><code class="literal">REPLICATION CLIENT</code></a> privilege.
      </p><p>
        Example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW MASTER STATUS;</code></strong>
+---------------+----------+--------------+------------------+
| File          | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+---------------+----------+--------------+------------------+
| mysql-bin.003 | 73       | test         | manual,mysql     |
+---------------+----------+--------------+------------------+
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-mutex-status"></a>12.5.5.22. <code class="literal">SHOW MUTEX STATUS</code> Syntax</h4></div></div></div><pre class="programlisting">SHOW MUTEX STATUS
</pre><p>
        <code class="literal">SHOW MUTEX STATUS</code> displays
        <code class="literal">InnoDB</code> mutex statistics. From MySQL 5.0.3 to
        5.0.32, the statement displays the following output fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Mutex</code>
          </p><p>
            The mutex name. The name indicates the mutex purpose. For
            example, the <code class="literal">log_sys</code> mutex is used by the
            <code class="literal">InnoDB</code> logging subsystem and indicates
            how intensive logging activity is. The
            <code class="literal">buf_pool</code> mutex protects the
            <code class="literal">InnoDB</code> buffer pool.
          </p></li><li><p>
            <code class="literal">Module</code>
          </p><p>
            The source file where the mutex is implemented.
          </p></li><li><p>
            <code class="literal">Count</code> indicates how many times the mutex
            was requested.
          </p></li><li><p>
            <code class="literal">Spin_waits</code> indicates how many times the
            spinlock had to run.
          </p></li><li><p>
            <code class="literal">Spin_rounds</code> indicates the number of
            spinlock rounds. (<code class="literal">spin_rounds</code> divided by
            <code class="literal">spin_waits</code> provides the average round
            count.)
          </p></li><li><p>
            <code class="literal">OS_waits</code> indicates the number of
            operating system waits. This occurs when the spinlock did
            not work (the mutex was not locked during the spinlock and
            it was necessary to yield to the operating system and wait).
          </p></li><li><p>
            <code class="literal">OS_yields</code> indicates the number of times
            that a thread trying to lock a mutex gave up its timeslice
            and yielded to the operating system (on the presumption that
            allowing other threads to run will free the mutex so that it
            can be locked).
          </p></li><li><p>
            <code class="literal">OS_waits_time</code> indicates the amount of
            time (in ms) spent in operating system waits, if the
            <a href="server-administration.html#sysvar_timed_mutexes"><code class="literal">timed_mutexes</code></a> system
            variable is 1 (<code class="literal">ON</code>). If
            <a href="server-administration.html#sysvar_timed_mutexes"><code class="literal">timed_mutexes</code></a> is 0
            (<code class="literal">OFF</code>), timing is disabled, so
            <code class="literal">OS_waits_time</code> is 0.
            <a href="server-administration.html#sysvar_timed_mutexes"><code class="literal">timed_mutexes</code></a> is off by
            default.
          </p></li></ul></div><p>
        From MySQL 5.0.33 on, the statement uses the same output format
        as that just described, but only if
        <code class="literal">UNIV_DEBUG</code> was defined at MySQL compilation
        time (for example, in <code class="filename">include/univ.h</code> in the
        <code class="literal">InnoDB</code> part of the MySQL source tree). If
        <code class="literal">UNIV_DEBUG</code> was not defined, the statement
        displays the following fields. In the latter case (without
        <code class="literal">UNIV_DEBUG</code>), the information on which the
        statement output is based is insufficient to distinguish regular
        mutexes and mutexes that protect rw-locks (which allow multiple
        readers or a single writer). Consequently, the output may appear
        to contain multiple rows for the same mutex.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">File</code>
          </p><p>
            The source file where the mutex is implemented.
          </p></li><li><p>
            <code class="literal">Line</code>
          </p><p>
            The line number in the source file where the mutex is
            created. This may change depending on your version of MySQL.
          </p></li><li><p>
            <code class="literal">OS_waits</code>
          </p><p>
            Same as <code class="literal">OS_waits_time</code>.
          </p></li></ul></div><p>
        Information from this statement can be used to diagnose system
        problems. For example, large values of
        <code class="literal">spin_waits</code> and <code class="literal">spin_rounds</code>
        may indicate scalability problems.
      </p><p>
        <code class="literal">SHOW MUTEX STATUS</code> was added in MySQL 5.0.3.
        In MySQL 5.1, <code class="literal">SHOW MUTEX STATUS</code> is
        renamed to <a href="sql-syntax.html#show-engine" title="12.5.5.12. SHOW ENGINE Syntax"><code class="literal">SHOW
        ENGINE INNODB MUTEX</code></a>. The latter statement displays
        similar information but in a somewhat different output format.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-open-tables"></a>12.5.5.23. <code class="literal">SHOW OPEN TABLES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2117400"></a><a class="indexterm" name="id2117420"></a><pre class="programlisting">SHOW OPEN TABLES [{FROM | IN} <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-open-tables" title="12.5.5.23. SHOW OPEN TABLES Syntax"><code class="literal">SHOW OPEN TABLES</code></a> lists the
        non-<code class="literal">TEMPORARY</code> tables that are currently open
        in the table cache. See <a href="optimization.html#table-cache" title="7.4.7. How MySQL Opens and Closes Tables">Section 7.4.7, “How MySQL Opens and Closes Tables”</a>. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        The <code class="literal">FROM</code> and
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clauses may be used as of
        MySQL 5.0.12. The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if
        present, indicates which table names to match. The
        <code class="literal">FROM</code> clause, if present, restricts the tables
        shown to those present in the <em class="replaceable"><code>db_name</code></em>
        database.
      </p><p>
        <a href="sql-syntax.html#show-open-tables" title="12.5.5.23. SHOW OPEN TABLES Syntax"><code class="literal">SHOW OPEN TABLES</code></a> returns the
        following columns:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Database</code>
          </p><p>
            The database containing the table.
          </p></li><li><p>
            <code class="literal">Table</code>
          </p><p>
            The table name.
          </p></li><li><p>
            <code class="literal">In_use</code>
          </p><p>
            The number of table locks or lock requests there are for the
            table. For example, if one client acquires a lock for a
            table using <code class="literal">LOCK TABLE t1 WRITE</code>,
            <code class="literal">In_use</code> will be 1. If another client
            issues <code class="literal">LOCK TABLE t1 WRITE</code> while the
            table remains locked, the client will block waiting for the
            lock, but the lock request causes <code class="literal">In_use</code>
            to be 2. If the count is zero, the table is open but not
            currently being used. <code class="literal">In_use</code> is also
            increased by the
            <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER ...
            OPEN</code></a> statement and decreased by
            <a href="sql-syntax.html#handler" title="12.2.4. HANDLER Syntax"><code class="literal">HANDLER ...
            CLOSE</code></a>.
          </p></li><li><p>
            <code class="literal">Name_locked</code>
          </p><p>
            Whether the table name is locked. Name locking is used for
            operations such as dropping or renaming tables.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-privileges"></a>12.5.5.24. <code class="literal">SHOW PRIVILEGES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2117676"></a><pre class="programlisting">SHOW PRIVILEGES
</pre><p>
        <a href="sql-syntax.html#show-privileges" title="12.5.5.24. SHOW PRIVILEGES Syntax"><code class="literal">SHOW PRIVILEGES</code></a> shows the list of
        system privileges that the MySQL server supports. The exact list
        of privileges depends on the version of your server.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW PRIVILEGES\G</code></strong>
*************************** 1. row ***************************
Privilege: Alter
Context: Tables
Comment: To alter the table
*************************** 2. row ***************************
Privilege: Alter routine
Context: Functions,Procedures
Comment: To alter or drop stored functions/procedures
*************************** 3. row ***************************
Privilege: Create
Context: Databases,Tables,Indexes
Comment: To create new databases and tables
*************************** 4. row ***************************
Privilege: Create routine
Context: Functions,Procedures
Comment: To use CREATE FUNCTION/PROCEDURE
*************************** 5. row ***************************
Privilege: Create temporary tables
Context: Databases
Comment: To use CREATE TEMPORARY TABLE
...
</pre><p>
        Privileges belonging to a specific user are displayed by the
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax"><code class="literal">SHOW GRANTS</code></a> statement. See
        <a href="sql-syntax.html#show-grants" title="12.5.5.17. SHOW GRANTS Syntax">Section 12.5.5.17, “<code class="literal">SHOW GRANTS</code> Syntax”</a>, for more information.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-procedure-code"></a>12.5.5.25. <code class="literal">SHOW PROCEDURE CODE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2117777"></a><pre class="programlisting">SHOW PROCEDURE CODE <em class="replaceable"><code>proc_name</code></em>
</pre><p>
        This statement is a MySQL extension that is available only for
        servers that have been built with debugging support. It displays
        a representation of the internal implementation of the named
        stored procedure. A similar statement, <a href="sql-syntax.html#show-function-code" title="12.5.5.15. SHOW FUNCTION CODE Syntax"><code class="literal">SHOW
        FUNCTION CODE</code></a>, displays information about stored
        functions (see <a href="sql-syntax.html#show-function-code" title="12.5.5.15. SHOW FUNCTION CODE Syntax">Section 12.5.5.15, “<code class="literal">SHOW FUNCTION CODE</code> Syntax”</a>).
      </p><p>
        Both statements require that you be the owner of the routine or
        have <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> access to the
        <code class="literal">mysql.proc</code> table.
      </p><p>
        If the named routine is available, each statement produces a
        result set. Each row in the result set corresponds to one
        “<span class="quote">instruction</span>” in the routine. The first column is
        <code class="literal">Pos</code>, which is an ordinal number beginning
        with 0. The second column is <code class="literal">Instruction</code>,
        which contains an SQL statement (usually changed from the
        original source), or a directive which has meaning only to the
        stored-routine handler.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DELIMITER //</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE PROCEDURE p1 ()</code></strong>
    -&gt; <strong class="userinput"><code>BEGIN</code></strong>
    -&gt;   <strong class="userinput"><code>DECLARE fanta INT DEFAULT 55;</code></strong>
    -&gt;   <strong class="userinput"><code>DROP TABLE t2;</code></strong>
    -&gt;   <strong class="userinput"><code>LOOP</code></strong>
    -&gt;     <strong class="userinput"><code>INSERT INTO t3 VALUES (fanta);</code></strong>
    -&gt;     <strong class="userinput"><code>END LOOP;</code></strong>
    -&gt;   <strong class="userinput"><code>END//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW PROCEDURE CODE p1//</code></strong>
+-----+----------------------------------------+
| Pos | Instruction                            |
+-----+----------------------------------------+
|   0 | set fanta@0 55                         |
|   1 | stmt 9 "DROP TABLE t2"                 |
|   2 | stmt 5 "INSERT INTO t3 VALUES (fanta)" |
|   3 | jump 2                                 |
+-----+----------------------------------------+
4 rows in set (0.00 sec)
</pre><p>
        In this example, the nonexecutable <code class="literal">BEGIN</code> and
        <code class="literal">END</code> statements have disappeared, and for the
        <code class="literal">DECLARE
        <em class="replaceable"><code>variable_name</code></em></code> statement,
        only the executable part appears (the part where the default is
        assigned). For each statement that is taken from source, there
        is a code word <code class="literal">stmt</code> followed by a type (9
        means <code class="literal">DROP</code>, 5 means
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, and so on). The final row
        contains an instruction <code class="literal">jump 2</code>, meaning
        <code class="literal">GOTO instruction #2</code>.
      </p><p>
        <a href="sql-syntax.html#show-procedure-code" title="12.5.5.25. SHOW PROCEDURE CODE Syntax"><code class="literal">SHOW PROCEDURE CODE</code></a> was added in
        MySQL 5.0.17.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-procedure-status"></a>12.5.5.26. <code class="literal">SHOW PROCEDURE STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2118032"></a><pre class="programlisting">SHOW PROCEDURE STATUS
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        This statement is a MySQL extension. It returns characteristics
        of a stored procedure, such as the database, name, type,
        creator, creation and modification dates, and character set
        information. A similar statement, <a href="sql-syntax.html#show-function-status" title="12.5.5.16. SHOW FUNCTION STATUS Syntax"><code class="literal">SHOW
        FUNCTION STATUS</code></a>, displays information about stored
        functions (see <a href="sql-syntax.html#show-function-status" title="12.5.5.16. SHOW FUNCTION STATUS Syntax">Section 12.5.5.16, “<code class="literal">SHOW FUNCTION STATUS</code> Syntax”</a>).
      </p><p>
        The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which procedure or function names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW PROCEDURE STATUS LIKE 'sp1'\G</code></strong>
*************************** 1. row ***************************
           Db: test
         Name: sp1
         Type: PROCEDURE
      Definer: testuser@localhost
     Modified: 2004-08-03 15:29:37
      Created: 2004-08-03 15:29:37
Security_type: DEFINER
      Comment:
</pre><p>
        You can also get information about stored routines from the
        <a href="information-schema.html#routines-table" title="19.14. The INFORMATION_SCHEMA ROUTINES Table"><code class="literal">ROUTINES</code></a> table in
        <code class="literal">INFORMATION_SCHEMA</code>. See
        <a href="information-schema.html#routines-table" title="19.14. The INFORMATION_SCHEMA ROUTINES Table">Section 19.14, “The <code class="literal">INFORMATION_SCHEMA ROUTINES</code> Table”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-processlist"></a>12.5.5.27. <code class="literal">SHOW PROCESSLIST</code> Syntax</h4></div></div></div><a class="indexterm" name="id2118171"></a><a class="indexterm" name="id2118180"></a><a class="indexterm" name="id2118189"></a><a class="indexterm" name="id2118198"></a><a class="indexterm" name="id2118210"></a><pre class="programlisting">SHOW [FULL] PROCESSLIST
</pre><p>
        <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> shows you which
        threads are running. You can also get this information using the
        <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin processlist</strong></span></a> command. If you have
        the <a href="server-administration.html#priv_process"><code class="literal">PROCESS</code></a> privilege, you can
        see all threads. Otherwise, you can see only your own threads
        (that is, threads associated with the MySQL account that you are
        using). If you do not use the <code class="literal">FULL</code> keyword,
        only the first 100 characters of each statement are shown in the
        <code class="literal">Info</code> field.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          Subscribers to MySQL Enterprise Monitor receive instant
          notification and expert advice on resolution when there are
          too many concurrent processes. For more information, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p><p>
        This statement is very useful if you get the “<span class="quote">too many
        connections</span>” error message and want to find out what is
        going on. MySQL reserves one extra connection to be used by
        accounts that have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
        privilege, to ensure that administrators should always be able
        to connect and check the system (assuming that you are not
        giving this privilege to all your users).
      </p><p>
        Threads can be killed with the
        <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a> statement. See
        <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax">Section 12.5.6.3, “<code class="literal">KILL</code> Syntax”</a>.
      </p><p>
        Here is an example of what <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW
        PROCESSLIST</code></a> output looks like:
      </p><pre class="programlisting">mysql&gt; SHOW FULL PROCESSLIST\G
*************************** 1. row ***************************
Id: 1
User: system user
Host:
db: NULL
Command: Connect
Time: 1030455
State: Waiting for master to send event
Info: NULL
*************************** 2. row ***************************
Id: 2
User: system user
Host:
db: NULL
Command: Connect
Time: 1004
State: Has read all relay log; waiting for the slave
       I/O thread to update it
Info: NULL
*************************** 3. row ***************************
Id: 3112
User: replikator
Host: artemis:2204
db: NULL
Command: Binlog Dump
Time: 2144
State: Has sent all binlog to slave; waiting for binlog to be updated
Info: NULL
*************************** 4. row ***************************
Id: 3113
User: replikator
Host: iconnect2:45781
db: NULL
Command: Binlog Dump
Time: 2086
State: Has sent all binlog to slave; waiting for binlog to be updated
Info: NULL
*************************** 5. row ***************************
Id: 3123
User: stefan
Host: localhost
db: apollon
Command: Query
Time: 0
State: NULL
Info: SHOW FULL PROCESSLIST
5 rows in set (0.00 sec)
</pre><p>
        The columns have the following meaning:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Id</code>
          </p><p>
            The connection identifier.
          </p></li><li><p>
            <code class="literal">User</code>
          </p><p>
            The MySQL user who issued the statement. If this is
            <code class="literal">system user</code>, it refers to a nonclient
            thread spawned by the server to handle tasks internally.
            This could be the I/O or SQL thread used on replication
            slaves or a delayed-row handler. <code class="literal">unauthenticated
            user</code> refers to a thread that has become associated
            with a client connection but for which authentication of the
            client user has not yet been done. For <code class="literal">system
            user</code>, there is no host specified in the
            <code class="literal">Host</code> column.
          </p></li><li><p>
            <code class="literal">Host</code>
          </p><p>
            The host name of the client issuing the statement (except
            for <code class="literal">system user</code> where there is no host).
            <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> reports the
            host name for TCP/IP connections in
            <code class="literal"><em class="replaceable"><code>host_name</code></em>:<em class="replaceable"><code>client_port</code></em></code>
            format to make it easier to determine which client is doing
            what.
          </p></li><li><p>
            <code class="literal">db</code>
          </p><p>
            The default database, if one is selected, otherwise
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Command</code>
          </p><p>
            The type of command the thread is executing. Descriptions
            for thread commands can be found at
            <a href="optimization.html#thread-information" title="7.5.6. Examining Thread Information">Section 7.5.6, “Examining Thread Information”</a>. The value of this
            column corresponds to the
            <code class="literal">COM_<em class="replaceable"><code>xxx</code></em></code>
            commands of the client/server protocol. See
            <a href="server-administration.html#server-status-variables" title="5.1.6. Server Status Variables">Section 5.1.6, “Server Status Variables”</a>
          </p></li><li><p>
            <code class="literal">Time</code>
          </p><p>
            The time in seconds that the thread has been in its current
            state.
          </p></li><li><p>
            <code class="literal">State</code>
          </p><p>
            An action, event, or state that indicates what the thread is
            doing. Descriptions for <code class="literal">State</code> values can
            be found at <a href="optimization.html#thread-information" title="7.5.6. Examining Thread Information">Section 7.5.6, “Examining Thread Information”</a>.
          </p><p>
            Most states correspond to very quick operations. If a thread
            stays in a given state for many seconds, there might be a
            problem that needs to be investigated.
          </p><p>
            For the <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>
            statement, the value of <code class="literal">State</code> is
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Info</code>
          </p><p>
            The statement that the thread is executing, or
            <code class="literal">NULL</code> if it is not executing any
            statement. The statement might be the one sent to the
            server, or an innermost statement if the statement executes
            other statements. For example, if a <code class="literal">CALL
            p1()</code> statement executes a stored procedure
            <code class="literal">p1()</code>, and the procedure is executing a
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement, the
            <code class="literal">Info</code> value shows the
            <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-profile"></a>12.5.5.28. <code class="literal">SHOW PROFILE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2118685"></a><pre class="programlisting">SHOW PROFILES
</pre><p>
        The <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> statement
        display profiling information that indicates resource usage for
        statements executed during the course of the current session. It
        is used together with <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW
        PROFILES</code></a>; see <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax">Section 12.5.5.29, “<code class="literal">SHOW PROFILES</code> Syntax”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-profiles"></a>12.5.5.29. <code class="literal">SHOW PROFILES</code> Syntax</h4></div></div></div><p class="cs">This section does not apply to MySQL Enterprise Server users.</p><a class="indexterm" name="id2118768"></a><a class="indexterm" name="id2118777"></a><pre class="programlisting">SHOW PROFILE [<em class="replaceable"><code>type</code></em> [, <em class="replaceable"><code>type</code></em>] ... ]
    [FOR QUERY <em class="replaceable"><code>n</code></em>]
    [LIMIT <em class="replaceable"><code>row_count</code></em> [OFFSET <em class="replaceable"><code>offset</code></em>]]

<em class="replaceable"><code>type</code></em>:
    ALL
  | BLOCK IO
  | CONTEXT SWITCHES
  | CPU
  | IPC
  | MEMORY
  | PAGE FAULTS
  | SOURCE
  | SWAPS
</pre><p>
        The <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW PROFILES</code></a> and
        <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> statements display
        profiling information that indicates resource usage for
        statements executed during the course of the current session.
      </p><p>
        Profiling is controlled by the
        <a href="server-administration.html#sysvar_profiling"><code class="literal">profiling</code></a> session variable,
        which has a default value of 0 (<code class="literal">OFF</code>).
        Profiling is enabled by setting
        <a href="server-administration.html#sysvar_profiling"><code class="literal">profiling</code></a> to 1 or
        <code class="literal">ON</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET profiling = 1;</code></strong>
</pre><p>
        <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW PROFILES</code></a> displays a list of
        the most recent statements sent to the master. The size of the
        list is controlled by the
        <a href="server-administration.html#sysvar_profiling_history_size"><code class="literal">profiling_history_size</code></a> session
        variable, which has a default value of 15. The maximum value is
        100. Setting the value to 0 has the practical effect of
        disabling profiling.
      </p><p>
        All statements are profiled except <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW
        PROFILES</code></a> and <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW
        PROFILE</code></a>, so you will find neither of those statements
        in the profile list. Malformed statements are profiled. For
        example, <code class="literal">SHOW PROFILING</code> is an illegal
        statement, and a syntax error occurs if you try to execute it,
        but it will show up in the profiling list.
      </p><p>
        <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> displays detailed
        information about a single statement. Without the <code class="literal">FOR
        QUERY <em class="replaceable"><code>n</code></em></code> clause, the output
        pertains to the most recently executed statement. If
        <code class="literal">FOR QUERY <em class="replaceable"><code>n</code></em></code> is
        included, <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> displays
        information for statement <em class="replaceable"><code>n</code></em>. The
        values of <em class="replaceable"><code>n</code></em> correspond to the
        <code class="literal">Query_ID</code> values displayed by
        <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW PROFILES</code></a>.
      </p><p>
        The <code class="literal">LIMIT
        <em class="replaceable"><code>row_count</code></em></code> clause may be
        given to limit the output to
        <em class="replaceable"><code>row_count</code></em> rows. If
        <code class="literal">LIMIT</code> is given, <code class="literal">OFFSET
        <em class="replaceable"><code>offset</code></em></code> may be added to
        begin the output <em class="replaceable"><code>offset</code></em> rows into the
        full set of rows.
      </p><p>
        By default, <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> displays
        <code class="literal">Status</code> and <code class="literal">Duration</code>
        columns. The <code class="literal">Status</code> values are like the
        <code class="literal">State</code> values displayed by
        <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a>, althought there
        might be some minor differences in interpretion for the two
        statements for some status values (see
        <a href="optimization.html#thread-information" title="7.5.6. Examining Thread Information">Section 7.5.6, “Examining Thread Information”</a>).
      </p><p>
        Optional <em class="replaceable"><code>type</code></em> values may be specified
        to display specific additional types of information:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">ALL</code> displays all information
          </p></li><li><p>
            <code class="literal">BLOCK IO</code> displays counts for block input
            and output operations
          </p></li><li><p>
            <code class="literal">CONTEXT SWITCHES</code> displays counts for
            voluntary and involuntary context switches
          </p></li><li><p>
            <code class="literal">CPU</code> displays user and system CPU usage
            times
          </p></li><li><p>
            <code class="literal">IPC</code> displays counts for messages sent and
            received
          </p></li><li><p>
            <code class="literal">MEMORY</code> is not currently implemented
          </p></li><li><p>
            <code class="literal">PAGE FAULTS</code> displays counts for major and
            minor page faults
          </p></li><li><p>
            <code class="literal">SOURCE</code> displays the names of functions
            from the source code, together with the name and line number
            of the file in which the function occurs
          </p></li><li><p>
            <code class="literal">SWAPS</code> displays swap counts
          </p></li></ul></div><p>
        Profiling is enabled per session. When a session ends, its
        profiling information is lost.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @@profiling;</code></strong>
+-------------+
| @@profiling |
+-------------+
|           0 |
+-------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET profiling = 1;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>DROP TABLE IF EXISTS t1;</code></strong>
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE T1 (id INT);</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SHOW PROFILES;</code></strong>
+----------+----------+--------------------------+
| Query_ID | Duration | Query                    |
+----------+----------+--------------------------+
|        0 | 0.000088 | SET PROFILING = 1        |
|        1 | 0.000136 | DROP TABLE IF EXISTS t1  |
|        2 | 0.011947 | CREATE TABLE t1 (id INT) |
+----------+----------+--------------------------+
3 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW PROFILE;</code></strong>
+----------------------+----------+
| Status               | Duration |
+----------------------+----------+
| checking permissions | 0.000040 |
| creating table       | 0.000056 |
| After create         | 0.011363 |
| query end            | 0.000375 |
| freeing items        | 0.000089 |
| logging slow query   | 0.000019 |
| cleaning up          | 0.000005 |
+----------------------+----------+
7 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW PROFILE FOR QUERY 1;</code></strong>
+--------------------+----------+
| Status             | Duration |
+--------------------+----------+
| query end          | 0.000107 |
| freeing items      | 0.000008 |
| logging slow query | 0.000015 |
| cleaning up        | 0.000006 |
+--------------------+----------+
4 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW PROFILE CPU FOR QUERY 2;</code></strong>
+----------------------+----------+----------+------------+
| Status               | Duration | CPU_user | CPU_system |
+----------------------+----------+----------+------------+
| checking permissions | 0.000040 | 0.000038 |   0.000002 |
| creating table       | 0.000056 | 0.000028 |   0.000028 |
| After create         | 0.011363 | 0.000217 |   0.001571 |
| query end            | 0.000375 | 0.000013 |   0.000028 |
| freeing items        | 0.000089 | 0.000010 |   0.000014 |
| logging slow query   | 0.000019 | 0.000009 |   0.000010 |
| cleaning up          | 0.000005 | 0.000003 |   0.000002 |
+----------------------+----------+----------+------------+
7 rows in set (0.00 sec)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Profiling is only partially functional on some architectures.
          For values that depend on the <code class="literal">getrusage()</code>
          system call, <code class="literal">NULL</code> is returned on systems
          such as Windows that do not support the call. In addition,
          profiling is per process and not per thread. This means that
          activity on threads within the server other than your own may
          affect the timing information that you see.
        </p></div><p>
        <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW PROFILES</code></a> and
        <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW PROFILE</code></a> were added in MySQL
        5.0.37.
      </p><p>
        You can also get profiling information from the
        <a href="information-schema.html#profiling-table" title="19.17. The INFORMATION_SCHEMA PROFILING Table"><code class="literal">PROFILING</code></a> table in
        <code class="literal">INFORMATION_SCHEMA</code>. See
        <a href="information-schema.html#profiling-table" title="19.17. The INFORMATION_SCHEMA PROFILING Table">Section 19.17, “The <code class="literal">INFORMATION_SCHEMA PROFILING</code> Table”</a>. For example, the following
        queries produce the same result:
      </p><pre class="programlisting">SHOW PROFILE FOR QUERY 2;

SELECT STATE, FORMAT(DURATION, 6) AS DURATION
FROM INFORMATION_SCHEMA.PROFILING
WHERE QUERY_ID = 2 ORDER BY SEQ;
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          Please note that the <a href="sql-syntax.html#show-profile" title="12.5.5.28. SHOW PROFILE Syntax"><code class="literal">SHOW
          PROFILE</code></a> and <a href="sql-syntax.html#show-profiles" title="12.5.5.29. SHOW PROFILES Syntax"><code class="literal">SHOW
          PROFILES</code></a> functionality is part of the MySQL 5.0
          Community Server only.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-slave-hosts"></a>12.5.5.30. <code class="literal">SHOW SLAVE HOSTS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2119407"></a><pre class="programlisting">SHOW SLAVE HOSTS
</pre><p>
        Displays a list of replication slaves currently registered with
        the master. Only slaves started with the
        <a href="replication.html#option_mysqld_report-host"><code class="option">--report-host=<em class="replaceable"><code>host_name</code></em></code></a>
        option are visible in this list.
      </p><p>
        The list is displayed on any server (not just the master
        server). The output looks like this:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SLAVE HOSTS</code></strong>;
+------------+-----------+------+-----------+
| Server_id  | Host      | Port | Master_id |
+------------+-----------+------+-----------+
|  192168010 | iconnect2 | 3306 | 192168011 |
| 1921680101 | athena    | 3306 | 192168011 |
+------------+-----------+------+-----------+
</pre><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Server_id</code>: The unique server ID of the
            slave server, as configured in the server's option file, or
            on the command line with
            <a href="replication.html#option_mysqld_server-id"><code class="option">--server-id=<em class="replaceable"><code>value</code></em></code></a>.
          </p></li><li><p>
            <code class="literal">Host</code>: The host name of the slave server,
            as configured in the server's option file, or on the command
            line with
            <a href="replication.html#option_mysqld_report-host"><code class="option">--report-host=<em class="replaceable"><code>host_name</code></em></code></a>.
            Note that this can differ from the machine name as
            configured in the operating system.
          </p></li><li><p>
            <code class="literal">Port</code>: The port the slave server is
            listening on.
          </p></li><li><p>
            <code class="literal">Master_id</code>: The unique server ID of the
            master server that the slave server is replicating from.
          </p></li></ul></div><p>
        Some MySQL versions report another variable,
        <code class="literal">Rpl_recovery_rank</code>. This variable was never
        used, and was eventually removed.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-slave-status"></a>12.5.5.31. <code class="literal">SHOW SLAVE STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2119578"></a><pre class="programlisting">SHOW SLAVE STATUS
</pre><p>
        This statement provides status information on essential
        parameters of the slave threads. It requires either the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> or
        <a href="server-administration.html#priv_replication-client"><code class="literal">REPLICATION CLIENT</code></a> privilege.
      </p><p>
        If you issue this statement using the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>
        client, you can use a <code class="literal">\G</code> statement terminator
        rather than a semicolon to obtain a more readable vertical
        layout:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SLAVE STATUS\G</code></strong>
*************************** 1. row ***************************
       Slave_IO_State: Waiting for master to send event
          Master_Host: localhost
          Master_User: root
          Master_Port: 3306
        Connect_Retry: 3
      Master_Log_File: gbichot-bin.005
  Read_Master_Log_Pos: 79
       Relay_Log_File: gbichot-relay-bin.005
        Relay_Log_Pos: 548
Relay_Master_Log_File: gbichot-bin.005
     Slave_IO_Running: Yes
    Slave_SQL_Running: Yes
      Replicate_Do_DB:
  Replicate_Ignore_DB:
           Last_Errno: 0
           Last_Error:
         Skip_Counter: 0
  Exec_Master_Log_Pos: 79
      Relay_Log_Space: 552
      Until_Condition: None
       Until_Log_File:
        Until_Log_Pos: 0
   Master_SSL_Allowed: No
   Master_SSL_CA_File:
   Master_SSL_CA_Path:
      Master_SSL_Cert:
    Master_SSL_Cipher:
       Master_SSL_Key:
Seconds_Behind_Master: 8
</pre><p>
        <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> returns the
        following fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Slave_IO_State</code>
          </p><p>
            A copy of the <code class="literal">State</code> field of the output
            of <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> for the
            slave I/O thread. This tells you what the thread is doing:
            trying to connect to the master, waiting for events from the
            master, reconnecting to the master, and so on. Possible
            states are listed in
            <a href="replication.html#replication-implementation-details" title="16.4.1. Replication Implementation Details">Section 16.4.1, “Replication Implementation Details”</a>. It is
            necessary to check this field for older versions of MySQL
            (prior to 5.0.12) because in these versions the thread could
            be running while unsuccessfully trying to connect to the
            master; only this field makes you aware of the connection
            problem. The state of the SQL thread is not copied because
            it is simpler. If it is running, there is no problem; if it
            is not, you can find the error in the
            <code class="literal">Last_Error</code> field (described below).
          </p></li><li><p>
            <code class="literal">Master_Host</code>
          </p><p>
            The current master host.
          </p></li><li><p>
            <code class="literal">Master_User</code>
          </p><p>
            The current user used to connect to the master.
          </p></li><li><p>
            <code class="literal">Master_Port</code>
          </p><p>
            The current master port.
          </p></li><li><p>
            <code class="literal">Connect_Retry</code>
          </p><p>
            The number of seconds between connect retries (default 60).
            This may be set with the <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
            TO</code></a> statement or
            <a href="replication.html#option_mysqld_master-connect-retry"><code class="option">--master-connect-retry</code></a>
            option.
          </p></li><li><p>
            <code class="literal">Master_Log_File</code>
          </p><p>
            The name of the master binary log file from which the I/O
            thread is currently reading.
          </p></li><li><p>
            <code class="literal">Read_Master_Log_Pos</code>
          </p><p>
            The position up to which the I/O thread has read in the
            current master binary log.
          </p></li><li><p>
            <code class="literal">Relay_Log_File</code>
          </p><p>
            The name of the relay log file from which the SQL thread is
            currently reading and executing.
          </p></li><li><p>
            <code class="literal">Relay_Log_Pos</code>
          </p><p>
            The position up to which the SQL thread has read and
            executed in the current relay log.
          </p></li><li><p>
            <code class="literal">Relay_Master_Log_File</code>
          </p><p>
            The name of the master binary log file containing the most
            recent event executed by the SQL thread.
          </p></li><li><p>
            <code class="literal">Slave_IO_Running</code>
          </p><p>
            Whether the I/O thread is started and has connected
            successfully to the master. Internally, the state of this
            thread is represented by one of 3 values; these are shown
            with their meanings in the following list:
          </p><div class="itemizedlist"><ul type="circle"><li><p><b><code class="literal">MYSQL_SLAVE_NOT_RUN</code>. </b>
                  The slave I/O thread is not running.
                </p></li><li><p><b><code class="literal">MYSQL_SLAVE_RUN_NOT_CONNECT</code>. </b>
                  The slave I/O thread is running, but is not connected
                  to a replication master.
                </p></li><li><p><b><code class="literal">MYSQL_SLAVE_RUN_CONNECT</code>. </b>
                  The slave I/O thread is running, and is connected to a
                  replication master.
                </p></li></ul></div><p>
            Different values are displayed for
            <code class="literal">Slave_IO_running</code> depending on the slave
            I/O thread's actual state and the version of MySQL used
            on the replication slave, as shown in the following table.
          </p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>MySQL Version</th><th><code class="literal">MYSQL_SLAVE_NOT_RUN</code></th><th><code class="literal">MYSQL_SLAVE_RUN_NOT_CONNECT</code></th><th><code class="literal">MYSQL_SLAVE_RUN_CONNECT</code></th></tr></thead><tbody><tr><td>4.1 (4.1.13 and earlier); 5.0 (5.0.11 and earlier)</td><td><code class="literal">No</code></td><td><code class="literal">Yes</code></td><td><code class="literal">Yes</code></td></tr><tr><td>4.1 (4.1.14 and later); 5.0 (5.0.12 and later)</td><td><code class="literal">No</code></td><td><code class="literal">No</code></td><td><code class="literal">Yes</code></td></tr><tr><td>5.1, 5.4 (all)</td><td><code class="literal">No</code></td><td><code class="literal">No</code></td><td><code class="literal">Yes</code></td></tr><tr><td>6.0 (6.0.10 and earlier)</td><td><code class="literal">No</code></td><td><code class="literal">No</code></td><td><code class="literal">Yes</code></td></tr><tr><td>6.0 (6.0.11 and later)</td><td><code class="literal">No</code></td><td><code class="literal">Connecting</code></td><td><code class="literal">Yes</code></td></tr></tbody></table></div></li><li><p>
            <code class="literal">Slave_SQL_Running</code>
          </p><p>
            Whether the SQL thread is started.
          </p></li><li><p>
            <code class="literal">Replicate_Do_DB</code>,
            <code class="literal">Replicate_Ignore_DB</code>
          </p><p>
            The lists of databases that were specified with the
            <a href="replication.html#option_mysqld_replicate-do-db"><code class="option">--replicate-do-db</code></a> and
            <a href="replication.html#option_mysqld_replicate-ignore-db"><code class="option">--replicate-ignore-db</code></a>
            options, if any.
          </p></li><li><p>
            <code class="literal">Replicate_Do_Table</code>,
            <code class="literal">Replicate_Ignore_Table</code>,
            <code class="literal">Replicate_Wild_Do_Table</code>,
            <code class="literal">Replicate_Wild_Ignore_Table</code>
          </p><p>
            The lists of tables that were specified with the
            <a href="replication.html#option_mysqld_replicate-do-table"><code class="option">--replicate-do-table</code></a>,
            <a href="replication.html#option_mysqld_replicate-ignore-table"><code class="option">--replicate-ignore-table</code></a>,
            <a href="replication.html#option_mysqld_replicate-wild-do-table"><code class="option">--replicate-wild-do-table</code></a>,
            and
            <a href="replication.html#option_mysqld_replicate-wild-ignore-table"><code class="option">--replicate-wild-ignore-table</code></a>
            options, if any.
          </p></li><li><p>
            <code class="literal">Last_Errno</code>, <code class="literal">Last_Error</code>
          </p><p>
            The error number and error message returned by the most
            recently executed statement. An error number of 0 and
            message of the empty string mean “<span class="quote">no error.</span>” If
            the <code class="literal">Last_Error</code> value is not empty, it
            also appears as a message in the slave's error log. For
            example:
          </p><pre class="programlisting">Last_Errno: 1051
Last_Error: error 'Unknown table 'z'' on query 'drop table z'
</pre><p>
            The message indicates that the table <code class="literal">z</code>
            existed on the master and was dropped there, but it did not
            exist on the slave, so <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP
            TABLE</code></a> failed on the slave. (This might occur, for
            example, if you forget to copy the table to the slave when
            setting up replication.)
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
              When the slave SQL thread receives an error, it reports
              the error first, then stops the SQL thread. This means
              that there is a small window of time during which
              <code class="literal">SHOW SLAVE STATUS</code> shows a nonzero value
              for <code class="literal">Last_Errno</code> even though
              <code class="literal">Slave_SQL_Running</code> still displays
              <code class="literal">Yes</code>.
            </p></div></li><li><p>
            <code class="literal">Skip_Counter</code>
          </p><p>
            The most recently used value for
            <code class="literal">SQL_SLAVE_SKIP_COUNTER</code>.
          </p></li><li><p>
            <code class="literal">Exec_Master_Log_Pos</code>
          </p><p>
            The position of the last event executed by the SQL thread
            from the master's binary log
            (<code class="literal">Relay_Master_Log_File</code>).
            (<code class="literal">Relay_Master_Log_File</code>,
            <code class="literal">Exec_Master_Log_Pos</code>) in the master's
            binary log corresponds to
            (<code class="literal">Relay_Log_File</code>,
            <code class="literal">Relay_Log_Pos</code>) in the relay log.
          </p></li><li><p>
            <code class="literal">Relay_Log_Space</code>
          </p><p>
            The total combined size of all existing relay logs.
          </p></li><li><p>
            <code class="literal">Until_Condition</code>,
            <code class="literal">Until_Log_File</code>,
            <code class="literal">Until_Log_Pos</code>
          </p><p>
            The values specified in the <code class="literal">UNTIL</code> clause
            of the <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement.
          </p><p>
            <code class="literal">Until_Condition</code> has these values:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">None</code> if no <code class="literal">UNTIL</code>
                clause was specified
              </p></li><li><p>
                <code class="literal">Master</code> if the slave is reading until
                a given position in the master's binary logs
              </p></li><li><p>
                <code class="literal">Relay</code> if the slave is reading until a
                given position in its relay logs
              </p></li></ul></div><p>
            <code class="literal">Until_Log_File</code> and
            <code class="literal">Until_Log_Pos</code> indicate the log file name
            and position values that define the point at which the SQL
            thread stops executing.
          </p></li><li><p>
            <code class="literal">Master_SSL_Allowed</code>,
            <code class="literal">Master_SSL_CA_File</code>,
            <code class="literal">Master_SSL_CA_Path</code>,
            <code class="literal">Master_SSL_Cert</code>,
            <code class="literal">Master_SSL_Cipher</code>,
            <code class="literal">Master_SSL_Key</code>
          </p><p>
            These fields show the SSL parameters used by the slave to
            connect to the master, if any.
          </p><p>
            <code class="literal">Master_SSL_Allowed</code> has these values:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <code class="literal">Yes</code> if an SSL connection to the
                master is permitted
              </p></li><li><p>
                <code class="literal">No</code> if an SSL connection to the master
                is not permitted
              </p></li><li><p>
                <code class="literal">Ignored</code> if an SSL connection is
                permitted but the slave server does not have SSL support
                enabled
              </p></li></ul></div><p>
            The values of the other SSL-related fields correspond to the
            values of the <code class="literal">MASTER_SSL_CA</code>,
            <code class="literal">MASTER_SSL_CAPATH</code>,
            <code class="literal">MASTER_SSL_CERT</code>,
            <code class="literal">MASTER_SSL_CIPHER</code>, and
            <code class="literal">MASTER_SSL_KEY</code> options to the
            <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> statement.
            See <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax">Section 12.6.2.1, “<code class="literal">CHANGE MASTER TO</code> Syntax”</a>.
          </p></li><li><p>
            <code class="literal">Seconds_Behind_Master</code>
          </p><p>
            This field is an indication of how “<span class="quote">late</span>” the
            slave is:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                When the slave SQL thread is actively running
                (processing updates), this field is the number of
                seconds that have elapsed since the timestamp of the
                most recent event on the master executed by that thread.
              </p></li><li><p>
                When the SQL thread has caught up to the slave I/O
                thread and goes idle waiting for more events from the
                I/O thread, this field is zero.
              </p></li></ul></div><p>
            In essence, this field measures the time difference in
            seconds between the slave SQL thread and the slave I/O
            thread.
          </p><p>
            If the network connection between master and slave is fast,
            the slave I/O thread is very close to the master, so this
            field is a good approximation of how late the slave SQL
            thread is compared to the master. If the network is slow,
            this is <span class="emphasis"><em>not</em></span> a good approximation; the
            slave SQL thread may quite often be caught up with the
            slow-reading slave I/O thread, so
            <code class="literal">Seconds_Behind_Master</code> often shows a value
            of 0, even if the I/O thread is late compared to the master.
            In other words, <span class="emphasis"><em>this column is useful only for
            fast networks</em></span>.
          </p><p>
            This time difference computation works even though the
            master and slave do not have identical clocks (the clock
            difference is computed when the slave I/O thread starts, and
            assumed to remain constant from then on).
            <code class="literal">Seconds_Behind_Master</code> is
            <code class="literal">NULL</code> (which means “<span class="quote">unknown</span>”)
            if the slave SQL thread is not running, or if the slave I/O
            thread is not running or not connected to master. For
            example if the slave I/O thread is sleeping for the number
            of seconds given by the <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
            TO</code></a> statement or
            <a href="replication.html#option_mysqld_master-connect-retry"><code class="option">--master-connect-retry</code></a> option
            (default 60) before reconnecting, <code class="literal">NULL</code> is
            shown, as the slave cannot know what the master is doing,
            and so cannot say reliably how late it is.
          </p><p>
            This field has one limitation. The timestamp is preserved
            through replication, which means that, if a master M1 is
            itself a slave of M0, any event from M1's binlog which
            originates in replicating an event from M0's binlog has the
            timestamp of that event. This enables MySQL to replicate
            <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">TIMESTAMP</code></a> successfully.
            However, the problem for
            <code class="literal">Seconds_Behind_Master</code> is that if M1 also
            receives direct updates from clients, the value randomly
            deviates, because sometimes the last M1's event is from M0
            and sometimes it is the most recent timestamp from a direct
            update.
          </p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-status"></a>12.5.5.32. <code class="literal">SHOW STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2120878"></a><a class="indexterm" name="id2120887"></a><pre class="programlisting">SHOW [GLOBAL | SESSION] STATUS
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><a class="indexterm" name="id2120930"></a><p>
        <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a> provides server
        status information. This information also can be obtained using
        the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin extended-status</strong></span></a> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which variable names to match. The <code class="literal">WHERE</code>
        clause can be given to select rows using more general
        conditions, as discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
        This statement does not require any privilege. It requires only
        the ability to connect to the server.
      </p><p>
        Partial output is shown here. The list of names and values may
        be different for your server. The meaning of each variable is
        given in <a href="server-administration.html#server-status-variables" title="5.1.6. Server Status Variables">Section 5.1.6, “Server Status Variables”</a>.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS;</code></strong>
+--------------------------+------------+
| Variable_name            | Value      |
+--------------------------+------------+
| Aborted_clients          | 0          |
| Aborted_connects         | 0          |
| Bytes_received           | 155372598  |
| Bytes_sent               | 1176560426 |
| Connections              | 30023      |
| Created_tmp_disk_tables  | 0          |
| Created_tmp_tables       | 8340       |
| Created_tmp_files        | 60         |
...
| Open_tables              | 1          |
| Open_files               | 2          |
| Open_streams             | 0          |
| Opened_tables            | 44600      |
| Questions                | 2026873    |
...
| Table_locks_immediate    | 1920382    |
| Table_locks_waited       | 0          |
| Threads_cached           | 0          |
| Threads_created          | 30022      |
| Threads_connected        | 1          |
| Threads_running          | 1          |
| Uptime                   | 80380      |
+--------------------------+------------+
</pre><p>
        With a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, the statement
        displays only rows for those variables with names that match the
        pattern:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'Key%';</code></strong>
+--------------------+----------+
| Variable_name      | Value    |
+--------------------+----------+
| Key_blocks_used    | 14955    |
| Key_read_requests  | 96854827 |
| Key_reads          | 162040   |
| Key_write_requests | 7589728  |
| Key_writes         | 3813196  |
+--------------------+----------+
</pre><p>
        The <code class="literal">GLOBAL</code> and <code class="literal">SESSION</code>
        options are new in MySQL 5.0.2. With the
        <code class="literal">GLOBAL</code> modifier, <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW
        STATUS</code></a> displays the status values for all connections
        to MySQL. With <code class="literal">SESSION</code>, it displays the
        status values for the current connection. If no modifier is
        present, the default is <code class="literal">SESSION</code>.
        <code class="literal">LOCAL</code> is a synonym for
        <code class="literal">SESSION</code>.
      </p><p>
        Some status variables have only a global value. For these, you
        get the same value for both <code class="literal">GLOBAL</code> and
        <code class="literal">SESSION</code>. The scope for each status variable
        is listed at <a href="server-administration.html#server-status-variables" title="5.1.6. Server Status Variables">Section 5.1.6, “Server Status Variables”</a>.
      </p><p class="mnmas"><b>MySQL Enterprise</b>
          Status variables provide valuable clues to the state of your
          servers. For expert interpretation of the information provided
          by status variables, subscribe to the MySQL Enterprise
          Monitor. For more information, see
          <a href="http://www.mysql.com/products/enterprise/advisors.html" target="_top">http://www.mysql.com/products/enterprise/advisors.html</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Before MySQL 5.0.2, <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW STATUS</code></a>
          returned global status values. Because the default as of 5.0.2
          is to return session values, this is incompatible with
          previous versions. To issue a <a href="sql-syntax.html#show-status" title="12.5.5.32. SHOW STATUS Syntax"><code class="literal">SHOW
          STATUS</code></a> statement that will retrieve global status
          values for all versions of MySQL, write it like this:
        </p></div><pre class="programlisting">SHOW /*!50002 GLOBAL */ STATUS;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-table-status"></a>12.5.5.33. <code class="literal">SHOW TABLE STATUS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2121184"></a><a class="indexterm" name="id2121197"></a><a class="indexterm" name="id2121209"></a><pre class="programlisting">SHOW TABLE STATUS [{FROM | IN} <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE STATUS</code></a> works likes
        <a href="sql-syntax.html#show-tables" title="12.5.5.34. SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a>, but provides a lot
        of information about each non-<code class="literal">TEMPORARY</code>
        table. You can also get this list using the <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow
        --status <em class="replaceable"><code>db_name</code></em></strong></span></a> command.
        The <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present,
        indicates which table names to match. The
        <code class="literal">WHERE</code> clause can be given to select rows
        using more general conditions, as discussed in
        <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        As of MySQL 5.0.1, this statement also displays information
        about views.
      </p><p>
        <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW TABLE STATUS</code></a> returns the
        following fields:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Name</code>
          </p><p>
            The name of the table.
          </p></li><li><p>
            <code class="literal">Engine</code>
          </p><p>
            The storage engine for the table. See
            <a href="storage-engines.html" title="Chapter 13. Storage Engines">Chapter 13, <i>Storage Engines</i></a>.
          </p></li><li><p>
            <code class="literal">Version</code>
          </p><p>
            The version number of the table's <code class="filename">.frm</code>
            file.
          </p></li><li><p>
            <code class="literal">Row_format</code>
          </p><p>
            The row storage format (<code class="literal">Fixed</code>,
            <code class="literal">Dynamic</code>, <code class="literal">Compressed</code>,
            <code class="literal">Redundant</code>, <code class="literal">Compact</code>).
            Starting with MySQL/InnoDB 5.0.3, the format of
            <code class="literal">InnoDB</code> tables is reported as
            <code class="literal">Redundant</code> or <code class="literal">Compact</code>.
            Prior to 5.0.3, <code class="literal">InnoDB</code> tables are always
            in the <code class="literal">Redundant</code> format.
          </p></li><li><p>
            <code class="literal">Rows</code>
          </p><p>
            The number of rows. Some storage engines, such as
            <code class="literal">MyISAM</code>, store the exact count. For other
            storage engines, such as <code class="literal">InnoDB</code>, this
            value is an approximation, and may vary from the actual
            value by as much as 40 to 50%. In such cases, use
            <code class="literal">SELECT COUNT(*)</code> to obtain an accurate
            count.
          </p><p>
            The <code class="literal">Rows</code> value is <code class="literal">NULL</code>
            for tables in the <code class="literal">INFORMATION_SCHEMA</code>
            database.
          </p></li><li><p>
            <code class="literal">Avg_row_length</code>
          </p><p>
            The average row length.
          </p></li><li><p>
            <code class="literal">Data_length</code>
          </p><p>
            The length of the data file.
          </p></li><li><p>
            <code class="literal">Max_data_length</code>
          </p><p>
            The maximum length of the data file. This is the total
            number of bytes of data that can be stored in the table,
            given the data pointer size used.
          </p></li><li><p>
            <code class="literal">Index_length</code>
          </p><p>
            The length of the index file.
          </p></li><li><p>
            <code class="literal">Data_free</code>
          </p><p>
            The number of allocated but unused bytes.
          </p></li><li><p>
            <code class="literal">Auto_increment</code>
          </p><p>
            The next <code class="literal">AUTO_INCREMENT</code> value.
          </p></li><li><p>
            <code class="literal">Create_time</code>
          </p><p>
            When the table was created.
          </p></li><li><p>
            <code class="literal">Update_time</code>
          </p><p>
            When the data file was last updated. For some storage
            engines, this value is <code class="literal">NULL</code>. For example,
            <code class="literal">InnoDB</code> stores multiple tables in its
            tablespace and the data file timestamp does not apply. For
            <code class="literal">MyISAM</code>, the data file timestamp is used;
            however, on Windows the timestamp is not updated by updates
            so the value is inaccurate.
          </p></li><li><p>
            <code class="literal">Check_time</code>
          </p><p>
            When the table was last checked. Not all storage engines
            update this time, in which case the value is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <code class="literal">Collation</code>
          </p><p>
            The table's character set and collation.
          </p></li><li><p>
            <code class="literal">Checksum</code>
          </p><p>
            The live checksum value (if any).
          </p></li><li><p>
            <code class="literal">Create_options</code>
          </p><p>
            Extra options used with <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE
            TABLE</code></a>. The original options supplied when
            <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> is called are
            retained and the options reported here may differ from the
            active table settings and options.
          </p></li><li><p>
            <code class="literal">Comment</code>
          </p><p>
            The comment used when creating the table (or information as
            to why MySQL could not access the table information).
          </p></li></ul></div><p>
        In the table comment, <code class="literal">InnoDB</code> tables report
        the free space of the tablespace to which the table belongs. For
        a table located in the shared tablespace, this is the free space
        of the shared tablespace. If you are using multiple tablespaces
        and the table has its own tablespace, the free space is for only
        that table. Free space means the number of completely free 1MB
        extents minus a safety margin. Even if free space displays as 0,
        it may be possible to insert rows as long as new extents need
        not be allocated.
      </p><p>
        For <code class="literal">MEMORY</code> tables, the
        <code class="literal">Data_length</code>,
        <code class="literal">Max_data_length</code>, and
        <code class="literal">Index_length</code> values approximate the actual
        amount of allocated memory. The allocation algorithm reserves
        memory in large amounts to reduce the number of allocation
        operations.
      </p><p>
        Beginning with MySQL 5.0.3, for
        <code class="literal">NDBCLUSTER</code> tables, the output of
        this statement shows appropriate values for the
        <code class="literal">Avg_row_length</code> and
        <code class="literal">Data_length</code> columns, with the exception that
        <a href="data-types.html#blob" title="10.4.3. The BLOB and
        TEXT Types"><code class="literal">BLOB</code></a> columns are not taken into
        account. In addition, the number of replicas is now shown in the
        <code class="literal">Comment</code> column (as
        <code class="literal">number_of_replicas</code>).
      </p><p>
        For views, all the fields displayed by <a href="sql-syntax.html#show-table-status" title="12.5.5.33. SHOW TABLE STATUS Syntax"><code class="literal">SHOW
        TABLE STATUS</code></a> are <code class="literal">NULL</code> except that
        <code class="literal">Name</code> indicates the view name and
        <code class="literal">Comment</code> says <code class="literal">view</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-tables"></a>12.5.5.34. <code class="literal">SHOW TABLES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2121925"></a><a class="indexterm" name="id2121945"></a><pre class="programlisting">SHOW [FULL] TABLES [{FROM | IN} <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-tables" title="12.5.5.34. SHOW TABLES Syntax"><code class="literal">SHOW TABLES</code></a> lists the
        non-<code class="literal">TEMPORARY</code> tables in a given database. You
        can also get this list using the <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow
        <em class="replaceable"><code>db_name</code></em></strong></span></a> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which table names to match. The <code class="literal">WHERE</code> clause
        can be given to select rows using more general conditions, as
        discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        Before MySQL 5.0.1, the output from <a href="sql-syntax.html#show-tables" title="12.5.5.34. SHOW TABLES Syntax"><code class="literal">SHOW
        TABLES</code></a> contains a single column of table names.
        Beginning with MySQL 5.0.1, this statement also lists any views
        in the database. As of MySQL 5.0.2, the <code class="literal">FULL</code>
        modifier is supported such that <code class="literal">SHOW FULL
        TABLES</code> displays a second output column. Values for the
        second column are <code class="literal">BASE TABLE</code> for a table and
        <code class="literal">VIEW</code> for a view.
      </p><p>
        If you have no privileges for a base table or view, it does not
        show up in the output from <a href="sql-syntax.html#show-tables" title="12.5.5.34. SHOW TABLES Syntax"><code class="literal">SHOW
        TABLES</code></a> or <a href="programs.html#mysqlshow" title="4.5.6. mysqlshow — Display Database, Table, and Column Information"><span><strong class="command">mysqlshow db_name</strong></span></a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-triggers"></a>12.5.5.35. <code class="literal">SHOW TRIGGERS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2122108"></a><a class="indexterm" name="id2122117"></a><a class="indexterm" name="id2122126"></a><pre class="programlisting">SHOW TRIGGERS [{FROM | IN} <em class="replaceable"><code>db_name</code></em>]
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><p>
        <a href="sql-syntax.html#show-triggers" title="12.5.5.35. SHOW TRIGGERS Syntax"><code class="literal">SHOW TRIGGERS</code></a> lists the triggers
        currently defined for tables in a database (the default database
        unless a <code class="literal">FROM</code> clause is given). This
        statement requires the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a>
        privilege. It was implemented in MySQL 5.0.10. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which table names to match and causes the statement to display
        triggers for those tables. The <code class="literal">WHERE</code> clause
        can be given to select rows using more general conditions, as
        discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
      </p><p>
        For the trigger <code class="literal">ins_sum</code> as defined in
        <a href="stored-programs-views.html#triggers" title="18.3. Using Triggers">Section 18.3, “Using Triggers”</a>, the output of this statement is as
        shown here:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TRIGGERS LIKE 'acc%'\G</code></strong>
*************************** 1. row ***************************
  Trigger: ins_sum
    Event: INSERT
    Table: account
Statement: SET @sum = @sum + NEW.amount
   Timing: BEFORE
  Created: NULL
 sql_mode:
  Definer: myname@localhost
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          When using a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause with
          <a href="sql-syntax.html#show-triggers" title="12.5.5.35. SHOW TRIGGERS Syntax"><code class="literal">SHOW TRIGGERS</code></a>, the expression
          to be matched (<em class="replaceable"><code>expr</code></em>) is compared
          with the name of the table on which the trigger is declared,
          and not with the name of the trigger:
        </p></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW TRIGGERS LIKE 'ins%';</code></strong>
Empty set (0.01 sec)
</pre><p>
        A brief explanation of the columns in the output of this
        statement is shown here:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">Trigger</code>
          </p><p>
            The name of the trigger.
          </p></li><li><p>
            <code class="literal">Event</code>
          </p><p>
            The event that causes trigger activation: one of
            <code class="literal">'INSERT'</code>, <code class="literal">'UPDATE'</code>, or
            <code class="literal">'DELETE'</code>.
          </p></li><li><p>
            <code class="literal">Table</code>
          </p><p>
            The table for which the trigger is defined.
          </p></li><li><p>
            <code class="literal">Statement</code>
          </p><p>
            The statement to be executed when the trigger is activated.
            This is the same as the text shown in the
            <code class="literal">ACTION_STATEMENT</code> column of
            <a href="information-schema.html#triggers-table" title="19.16. The INFORMATION_SCHEMA TRIGGERS Table"><code class="literal">INFORMATION_SCHEMA.TRIGGERS</code></a>.
          </p></li><li><p>
            <code class="literal">Timing</code>
          </p><p>
            One of the two values <code class="literal">'BEFORE'</code> or
            <code class="literal">'AFTER'</code>.
          </p></li><li><p>
            <code class="literal">Created</code>
          </p><p>
            Currently, the value of this column is always
            <code class="literal">NULL</code>.
          </p></li><li><p>
            <a href="server-administration.html#sysvar_sql_mode"><code class="literal">sql_mode</code></a>
          </p><p>
            The SQL mode in effect when the trigger executes. This
            column was added in MySQL 5.0.11.
          </p></li><li><p>
            <code class="literal">Definer</code>
          </p><p>
            The account that created the trigger. This column was added
            in MySQL 5.0.17.
          </p></li></ul></div><p>
        You must have the <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege
        to execute <a href="sql-syntax.html#show-triggers" title="12.5.5.35. SHOW TRIGGERS Syntax"><code class="literal">SHOW TRIGGERS</code></a>.
      </p><p>
        See also <a href="information-schema.html#triggers-table" title="19.16. The INFORMATION_SCHEMA TRIGGERS Table">Section 19.16, “The <code class="literal">INFORMATION_SCHEMA TRIGGERS</code> Table”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-variables"></a>12.5.5.36. <code class="literal">SHOW VARIABLES</code> Syntax</h4></div></div></div><a class="indexterm" name="id2122512"></a><a class="indexterm" name="id2122521"></a><a class="indexterm" name="id2122530"></a><a class="indexterm" name="id2122542"></a><pre class="programlisting">SHOW [GLOBAL | SESSION] VARIABLES
    [LIKE '<em class="replaceable"><code>pattern</code></em>' | WHERE <em class="replaceable"><code>expr</code></em>]
</pre><a class="indexterm" name="id2122585"></a><p>
        <a href="sql-syntax.html#show-variables" title="12.5.5.36. SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a> shows the values
        of MySQL system variables. This information also can be obtained
        using the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin variables</strong></span></a> command. The
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, if present, indicates
        which variable names to match. The <code class="literal">WHERE</code>
        clause can be given to select rows using more general
        conditions, as discussed in <a href="information-schema.html#extended-show" title="19.19. Extensions to SHOW Statements">Section 19.19, “Extensions to <code class="literal">SHOW</code> Statements”</a>.
        This statement does not require any privilege. It requires only
        the ability to connect to the server.
      </p><p>
        With the <code class="literal">GLOBAL</code> modifier,
        <a href="sql-syntax.html#show-variables" title="12.5.5.36. SHOW VARIABLES Syntax"><code class="literal">SHOW VARIABLES</code></a> displays the
        values that are used for new connections to MySQL. With
        <code class="literal">SESSION</code>, it displays the values that are in
        effect for the current connection. If no modifier is present,
        the default is <code class="literal">SESSION</code>.
        <code class="literal">LOCAL</code> is a synonym for
        <code class="literal">SESSION</code>.
      </p><p>
        If the default system variable values are unsuitable, you can
        set them using command options when <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a>
        starts, and most can be changed at runtime with the
        <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
        statement. See <a href="server-administration.html#using-system-variables" title="5.1.5. Using System Variables">Section 5.1.5, “Using System Variables”</a>, and
        <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax">Section 12.5.4, “<code class="literal">SET</code> Syntax”</a>.
      </p><p>
        Partial output is shown here. The list of names and values may
        be different for your server.
        <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>, describes the meaning
        of each variable, and <a href="optimization.html#server-parameters" title="7.5.3. Tuning Server Parameters">Section 7.5.3, “Tuning Server Parameters”</a>,
        provides information about tuning them.
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES;</code></strong>
+---------------------------------+-------------------------------------+
| Variable_name                   | Value                               |
+---------------------------------+-------------------------------------+
| auto_increment_increment        | 1                                   |
| auto_increment_offset           | 1                                   |
| automatic_sp_privileges         | ON                                  |
| back_log                        | 50                                  |
| basedir                         | /                                   |
| bdb_cache_size                  | 8388600                             |
| bdb_home                        | /var/lib/mysql/                     |
| bdb_log_buffer_size             | 32768                               |
...
| max_connections                 | 100                                 |
| max_connect_errors              | 10                                  |
| max_delayed_threads             | 20                                  |
| max_error_count                 | 64                                  |
| max_heap_table_size             | 16777216                            |
| max_join_size                   | 4294967295                          |
| max_relay_log_size              | 0                                   |
| max_sort_length                 | 1024                                |
...
| time_zone                       | SYSTEM                              |
| timed_mutexes                   | OFF                                 |
| tmp_table_size                  | 33554432                            |
| tmpdir                          |                                     |
| transaction_alloc_block_size    | 8192                                |
| transaction_prealloc_size       | 4096                                |
| tx_isolation                    | REPEATABLE-READ                     |
| updatable_views_with_limit      | YES                                 |
| version                         | 5.0.19-Max                          |
| version_comment                 | MySQL Community Edition - Max (GPL) |
| version_compile_machine         | i686                                |
| version_compile_os              | pc-linux-gnu                        |
| wait_timeout                    | 28800                               |
+---------------------------------+-------------------------------------+
</pre><p>
        With a <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause, the statement
        displays only rows for those variables with names that match the
        pattern. To obtain the row for a specific variable, use a
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause as shown:
      </p><pre class="programlisting">SHOW VARIABLES LIKE 'max_join_size';
SHOW SESSION VARIABLES LIKE 'max_join_size';
</pre><p>
        To get a list of variables whose name match a pattern, use the
        “<span class="quote"><code class="literal">%</code></span>” wildcard character in a
        <a href="functions.html#operator_like"><code class="literal">LIKE</code></a> clause:
      </p><pre class="programlisting">SHOW VARIABLES LIKE '%size%';
SHOW GLOBAL VARIABLES LIKE '%size%';
</pre><p>
        Wildcard characters can be used in any position within the
        pattern to be matched. Strictly speaking, because
        “<span class="quote"><code class="literal">_</code></span>” is a wildcard that matches
        any single character, you should escape it as
        “<span class="quote"><code class="literal">\_</code></span>” to match it literally. In
        practice, this is rarely necessary.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="show-warnings"></a>12.5.5.37. <code class="literal">SHOW WARNINGS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2122853"></a><pre class="programlisting">SHOW WARNINGS [LIMIT [<em class="replaceable"><code>offset</code></em>,] <em class="replaceable"><code>row_count</code></em>]
SHOW COUNT(*) WARNINGS
</pre><p>
        <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a> shows the error,
        warning, and note messages that resulted from the last statement
        that generated messages in the current session. It shows nothing
        if the last statement used a table and generated no messages.
        (That is, a statement that uses a table but generates no
        messages clears the message list.) Statements that do not use
        tables and do not generate messages have no effect on the
        message list.
      </p><p>
        Warnings are generated for DML statements such as
        <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>,
        <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>, and
        <a href="sql-syntax.html#load-data" title="12.2.6. LOAD DATA INFILE
      Syntax"><code class="literal">LOAD DATA
        INFILE</code></a> as well as DDL statements such as
        <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and
        <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>.
      </p><p>
        A related statement, <a href="sql-syntax.html#show-errors" title="12.5.5.14. SHOW ERRORS Syntax"><code class="literal">SHOW ERRORS</code></a>,
        shows only the errors. See <a href="sql-syntax.html#show-errors" title="12.5.5.14. SHOW ERRORS Syntax">Section 12.5.5.14, “<code class="literal">SHOW ERRORS</code> Syntax”</a>.
      </p><p>
        The <code class="literal">SHOW COUNT(*) WARNINGS</code> statement displays
        the total number of errors, warnings, and notes. You can also
        retrieve this number from the
        <a href="server-administration.html#sysvar_warning_count"><code class="literal">warning_count</code></a> variable:
      </p><pre class="programlisting">SHOW COUNT(*) WARNINGS;
SELECT @@warning_count;
</pre><p>
        The value of <a href="server-administration.html#sysvar_warning_count"><code class="literal">warning_count</code></a>
        might be greater than the number of messages displayed by
        <a href="sql-syntax.html#show-warnings" title="12.5.5.37. SHOW WARNINGS Syntax"><code class="literal">SHOW WARNINGS</code></a> if the
        <a href="server-administration.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> system variable
        is set so low that not all messages are stored. An example shown
        later in this section demonstrates how this can happen.
      </p><p>
        The <code class="literal">LIMIT</code> clause has the same syntax as for
        the <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement. See
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
      </p><p>
        The MySQL server sends back the total number of errors,
        warnings, and notes resulting from the last statement. If you
        are using the C API, this value can be obtained by calling
        <a href="connectors-apis.html#mysql-warning-count" title="20.9.3.72. mysql_warning_count()"><code class="literal">mysql_warning_count()</code></a>. See
        <a href="connectors-apis.html#mysql-warning-count" title="20.9.3.72. mysql_warning_count()">Section 20.9.3.72, “<code class="literal">mysql_warning_count()</code>”</a>.
      </p><p>
        The following <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>
        statement results in a note:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DROP TABLE IF EXISTS no_such_table;</code></strong>
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+-------+------+-------------------------------+
| Level | Code | Message                       |
+-------+------+-------------------------------+
| Note  | 1051 | Unknown table 'no_such_table' |
+-------+------+-------------------------------+
</pre><p>
        Here is a simple example that shows a syntax warning for
        <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a> and conversion
        warnings for <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (a TINYINT NOT NULL, b CHAR(4)) TYPE=MyISAM;</code></strong>
Query OK, 0 rows affected, 1 warning (0.00 sec)
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1287
Message: 'TYPE=storage_engine' is deprecated, use
         'ENGINE=storage_engine' instead
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES(10,'mysql'),(NULL,'test'),</code></strong>
    -&gt; <strong class="userinput"><code>(300,'Open Source');</code></strong>
Query OK, 3 rows affected, 4 warnings (0.01 sec)
Records: 3  Duplicates: 0  Warnings: 4

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1265
Message: Data truncated for column 'b' at row 1
*************************** 2. row ***************************
  Level: Warning
   Code: 1263
Message: Data truncated, NULL supplied to NOT NULL column 'a' at row 2
*************************** 3. row ***************************
  Level: Warning
   Code: 1264
Message: Data truncated, out of range for column 'a' at row 3
*************************** 4. row ***************************
  Level: Warning
   Code: 1265
Message: Data truncated for column 'b' at row 3
4 rows in set (0.00 sec)
</pre><p>
        The maximum number of error, warning, and note messages to store
        is controlled by the
        <a href="server-administration.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> system
        variable. By default, its value is 64. To change the number of
        messages you want stored, change the value of
        <a href="server-administration.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a>. In the
        following example, the <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER
        TABLE</code></a> statement produces three warning messages, but
        only one is stored because
        <a href="server-administration.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> has been set to
        1:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'max_error_count';</code></strong>
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| max_error_count | 64    |
+-----------------+-------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET max_error_count=1;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t1 MODIFY b CHAR;</code></strong>
Query OK, 3 rows affected, 3 warnings (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 3

mysql&gt; <strong class="userinput"><code>SELECT @@warning_count;</code></strong>
+-----------------+
| @@warning_count |
+-----------------+
|               3 |
+-----------------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Warning | 1263 | Data truncated for column 'b' at row 1 |
+---------+------+----------------------------------------+
1 row in set (0.00 sec)
</pre><p>
        To disable warnings, set
        <a href="server-administration.html#sysvar_max_error_count"><code class="literal">max_error_count</code></a> to 0. In this
        case, <a href="server-administration.html#sysvar_warning_count"><code class="literal">warning_count</code></a> still
        indicates how many warnings have occurred, but none of the
        messages are stored.
      </p><p>
        As of MySQL 5.0.3, you can set the
        <a href="server-administration.html#sysvar_sql_notes"><code class="literal">sql_notes</code></a> session variable to 0
        to cause <code class="literal">Note</code>-level warnings not to be
        recorded.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="other-administrative-sql"></a>12.5.6. Other Administrative Statements</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#cache-index">12.5.6.1. <code class="literal">CACHE INDEX</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#flush">12.5.6.2. <code class="literal">FLUSH</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#kill">12.5.6.3. <code class="literal">KILL</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-index">12.5.6.4. <code class="literal">LOAD INDEX INTO
        CACHE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#reset">12.5.6.5. <code class="literal">RESET</code> Syntax</a></span></dt></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="cache-index"></a>12.5.6.1. <code class="literal">CACHE INDEX</code> Syntax</h4></div></div></div><a class="indexterm" name="id2123291"></a><a class="indexterm" name="id2123300"></a><a class="indexterm" name="id2123312"></a><pre class="programlisting">CACHE INDEX
  <em class="replaceable"><code>tbl_index_list</code></em> [, <em class="replaceable"><code>tbl_index_list</code></em>] ...
  IN <em class="replaceable"><code>key_cache_name</code></em>

<em class="replaceable"><code>tbl_index_list</code></em>:
  <em class="replaceable"><code>tbl_name</code></em> [[INDEX|KEY] (<em class="replaceable"><code>index_name</code></em>[, <em class="replaceable"><code>index_name</code></em>] ...)]
</pre><p>
        The <a href="sql-syntax.html#cache-index" title="12.5.6.1. CACHE INDEX Syntax"><code class="literal">CACHE INDEX</code></a> statement assigns
        table indexes to a specific key cache. It is used only for
        <code class="literal">MyISAM</code> tables.
      </p><p>
        The following statement assigns indexes from the tables
        <code class="literal">t1</code>, <code class="literal">t2</code>, and
        <code class="literal">t3</code> to the key cache named
        <code class="literal">hot_cache</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CACHE INDEX t1, t2, t3 IN hot_cache;</code></strong>
+---------+--------------------+----------+----------+
| Table   | Op                 | Msg_type | Msg_text |
+---------+--------------------+----------+----------+
| test.t1 | assign_to_keycache | status   | OK       |
| test.t2 | assign_to_keycache | status   | OK       |
| test.t3 | assign_to_keycache | status   | OK       |
+---------+--------------------+----------+----------+
</pre><p>
        The syntax of <a href="sql-syntax.html#cache-index" title="12.5.6.1. CACHE INDEX Syntax"><code class="literal">CACHE INDEX</code></a> enables
        you to specify that only particular indexes from a table should
        be assigned to the cache. The current implementation assigns all
        the table's indexes to the cache, so there is no reason to
        specify anything other than the table name.
      </p><p>
        The key cache referred to in a <a href="sql-syntax.html#cache-index" title="12.5.6.1. CACHE INDEX Syntax"><code class="literal">CACHE
        INDEX</code></a> statement can be created by setting its size
        with a parameter setting statement or in the server parameter
        settings. For example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET GLOBAL keycache1.key_buffer_size=128*1024;</code></strong>
</pre><p>
        Key cache parameters can be accessed as members of a structured
        system variable. See
        <a href="server-administration.html#structured-system-variables" title="5.1.5.1. Structured System Variables">Section 5.1.5.1, “Structured System Variables”</a>.
      </p><p>
        A key cache must exist before you can assign indexes to it:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CACHE INDEX t1 IN non_existent_cache;</code></strong>
ERROR 1284 (HY000): Unknown key cache 'non_existent_cache'
</pre><p>
        By default, table indexes are assigned to the main (default) key
        cache created at the server startup. When a key cache is
        destroyed, all indexes assigned to it become assigned to the
        default key cache again.
      </p><p>
        Index assignment affects the server globally: If one client
        assigns an index to a given cache, this cache is used for all
        queries involving the index, no matter which client issues the
        queries.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="flush"></a>12.5.6.2. <code class="literal">FLUSH</code> Syntax</h4></div></div></div><a class="indexterm" name="id2123525"></a><a class="indexterm" name="id2123534"></a><a class="indexterm" name="id2123543"></a><a class="indexterm" name="id2123555"></a><pre class="programlisting">FLUSH [NO_WRITE_TO_BINLOG | LOCAL]
    <em class="replaceable"><code>flush_option</code></em> [, <em class="replaceable"><code>flush_option</code></em>] ...
</pre><p>
        The <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a> statement clears or
        reloads various internal caches used by MySQL. To execute
        <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a>, you must have the
        <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a> privilege.
      </p><p>
        The <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax"><code class="literal">RESET</code></a> statement is similar to
        <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a>. See
        <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax">Section 12.5.6.5, “<code class="literal">RESET</code> Syntax”</a>.
      </p><p>
        <em class="replaceable"><code>flush_option</code></em> can be any of the
        following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">DES_KEY_FILE</code>
          </p><p>
            Reloads the DES keys from the file that was specified with
            the <a href="server-administration.html#option_mysqld_des-key-file"><code class="option">--des-key-file</code></a> option at
            server startup time.
          </p></li><li><p>
            <code class="literal">HOSTS</code>
          </p><p>
            Empties the host cache tables. You should flush the host
            tables if some of your hosts change IP number or if you get
            the error message <code class="literal">Host
            '<em class="replaceable"><code>host_name</code></em>' is blocked</code>.
            When more than
            <a href="server-administration.html#sysvar_max_connect_errors"><code class="literal">max_connect_errors</code></a> errors
            occur successively for a given host while connecting to the
            MySQL server, MySQL assumes that something is wrong and
            blocks the host from further connection requests. Flushing
            the host tables enables further connection attempts from the
            host. See <a href="error-handling.html#blocked-host" title="B.1.2.6. Host 'host_name' is
          blocked">Section B.1.2.6, “<code class="literal">Host '<em class="replaceable"><code>host_name</code></em>' is
          blocked</code>”</a>. You can start
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> with
            <a href="server-administration.html#sysvar_max_connect_errors"><code class="option">--max_connect_errors=999999999</code></a>
            to avoid this error message.
          </p></li><li><p>
            <code class="literal">LOGS</code>
          </p><p>
            Closes and reopens all log files. If binary logging is
            enabled, the sequence number of the binary log file is
            incremented by one relative to the previous file. On Unix,
            this is the same thing as sending a
            <code class="literal">SIGHUP</code> signal to the
            <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> server (except on some Mac OS X
            10.3 versions where <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> ignores
            <code class="literal">SIGHUP</code> and <code class="literal">SIGQUIT</code>).
          </p><p>
            If the server is writing error output to a named file (for
            example, if it was started with the
            <a href="server-administration.html#option_mysqld_log-error"><code class="option">--log-error</code></a> option),
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>
            causes it to rename the current error log file with a suffix
            of <code class="literal">-old</code> and create a new empty log file.
            No renaming occurs if the server is not writing to a named
            file (for example, if it is writing errors to the console).
          </p></li><li><p>
            <code class="literal">MASTER</code> (<span class="emphasis"><em>DEPRECATED</em></span>).
            Deletes all binary logs, resets the binary log index file
            and creates a new binary log.
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            MASTER</code></a> is deprecated in favor of
            <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a>, and is
            supported for backward compatibility only. See
            <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax">Section 12.6.1.2, “<code class="literal">RESET MASTER</code> Syntax”</a>.
          </p></li><li><p>
            <code class="literal">PRIVILEGES</code>
          </p><p>
            Reloads the privileges from the grant tables in the
            <code class="literal">mysql</code> database. On Unix, this also occurs
            if the server receives a <code class="literal">SIGHUP</code> signal.
          </p><p>
            The server caches information in memory as a result of
            <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax"><code class="literal">GRANT</code></a> and
            <a href="sql-syntax.html#create-user" title="12.5.1.1. CREATE USER Syntax"><code class="literal">CREATE USER</code></a> statements. This
            memory is not released by the corresponding
            <a href="sql-syntax.html#revoke" title="12.5.1.5. REVOKE Syntax"><code class="literal">REVOKE</code></a> and
            <a href="sql-syntax.html#drop-user" title="12.5.1.2. DROP USER Syntax"><code class="literal">DROP USER</code></a> statements, so for
            a server that executes many instances of the statements that
            cause caching, there will be an increase in memory use. This
            cached memory can be freed with
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            PRIVILEGES</code></a>.
          </p></li><li><p>
            <code class="literal">QUERY CACHE</code>
          </p><p>
            Defragment the query cache to better utilize its memory.
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH QUERY
            CACHE</code></a> does not remove any queries from the cache,
            unlike <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a> or <code class="literal">RESET QUERY CACHE</code>.
          </p></li><li><p>
            <code class="literal">SLAVE</code> (<span class="emphasis"><em>DEPRECATED</em></span>).
            Resets all replication slave parameters, including relay log
            files and replication position in the master's binary logs.
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH SLAVE</code></a>
            is deprecated in favor of <a href="sql-syntax.html#reset-slave" title="12.6.2.5. RESET SLAVE Syntax"><code class="literal">RESET
            SLAVE</code></a>, and is supported for backward compatibility
            only. See <a href="sql-syntax.html#reset-slave" title="12.6.2.5. RESET SLAVE Syntax">Section 12.6.2.5, “<code class="literal">RESET SLAVE</code> Syntax”</a>.
          </p></li><li><p>
            <code class="literal">STATUS</code>
          </p><p>
            This option adds the current thread's session status
            variable values to the global values and resets the session
            values to zero. It also resets the counters for key caches
            (default and named) to zero and sets
            <a href="server-administration.html#statvar_Max_used_connections"><code class="literal">Max_used_connections</code></a> to
            the current number of open connections. This is something
            you should use only when debugging a query. See
            <a href="introduction.html#bug-reports" title="1.6. How to Report Bugs or Problems">Section 1.6, “How to Report Bugs or Problems”</a>.
          </p></li><li><p>
            <code class="literal">{TABLE | TABLES}
            [<em class="replaceable"><code>tbl_name</code></em> [,
            <em class="replaceable"><code>tbl_name</code></em>] ...]</code>
          </p><p>
            When no tables are named, closes all open tables, forces all
            tables in use to be closed, and flushes the query cache.
            With one or more table names, flushes only the given tables.
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            TABLES</code></a> also removes all query results from the
            query cache, like the <code class="literal">RESET QUERY CACHE</code>
            statement. No error occurs if a named table does not exist.
          </p></li><li><p>
            <code class="literal">TABLES WITH READ LOCK</code>
          </p><p>
            Closes all open tables and locks all tables for all
            databases with a read lock until you explicitly release the
            lock by executing
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a>. This is very convenient way to get backups
            if you have a file system such as Veritas that can take
            snapshots in time.
          </p><p>
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
            READ LOCK</code></a> acquires a global read lock and not
            table locks, so it is not subject to the same behavior as
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> and
            <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
            TABLES</code></a> with respect to table locking and implicit
            commits:
          </p><div class="itemizedlist"><ul type="circle"><li><p>
                <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
                TABLES</code></a> implicitly commits any active
                transaction only if any tables currently have been
                locked with <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a>.
                The commit does not occur for
                <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
                TABLES</code></a> following
                <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
                READ LOCK</code></a> because the latter statement does
                not acquire table locks.
              </p></li><li><p>
                Beginning a transaction causes table locks acquired with
                <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">LOCK TABLES</code></a> to be
                released, as though you had executed
                <a href="sql-syntax.html#lock-tables" title="12.4.5. LOCK TABLES and
      UNLOCK
      TABLES Syntax"><code class="literal">UNLOCK
                TABLES</code></a>. Beginning a transaction does not
                release a global read lock acquired with
                <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
                READ LOCK</code></a>.
              </p></li></ul></div></li><li><p>
            <code class="literal">USER_RESOURCES</code>
          </p><p>
            Resets all per-hour user resources to zero. This enables
            clients that have reached their hourly connection, query, or
            update limits to resume activity immediately.
            <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH
            USER_RESOURCES</code></a> does not apply to the limit on
            maximum simultaneous connections. See
            <a href="sql-syntax.html#grant" title="12.5.1.3. GRANT Syntax">Section 12.5.1.3, “<code class="literal">GRANT</code> Syntax”</a>.
          </p></li></ul></div><p>
        By default, <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a> statements are
        written to the binary log so that they will be replicated to
        replication slaves. Logging can be suppressed with the optional
        <code class="literal">NO_WRITE_TO_BINLOG</code> keyword or its alias
        <code class="literal">LOCAL</code>.
      </p><p>
        See also <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax">Section 12.5.6.5, “<code class="literal">RESET</code> Syntax”</a>, for information about how the
        <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax"><code class="literal">RESET</code></a> statement is used with
        replication.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH LOGS</code></a>,
          <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH MASTER</code></a>,
          <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH SLAVE</code></a>,
          and <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH TABLES WITH
          READ LOCK</code></a> are not written to the binary log in any
          case because they would cause problems if replicated to a
          slave.
        </p></div><p>
        The <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin</strong></span></a> utility provides a
        command-line interface to some flush operations, via the
        <code class="literal">flush-hosts</code>, <code class="literal">flush-logs</code>,
        <code class="literal">flush-privileges</code>,
        <code class="literal">flush-status</code>, and
        <code class="literal">flush-tables</code> commands.
      </p><p>
        Using <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a> statements within
        stored functions or triggers is not supported in MySQL
        5.0. However, you may use
        <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a> in stored procedures, so
        long as these are not called from stored functions or triggers.
        See <a href="restrictions.html#stored-program-restrictions" title="D.1. Restrictions on Stored Routines and Triggers">Section D.1, “Restrictions on Stored Routines and Triggers”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="kill"></a>12.5.6.3. <code class="literal">KILL</code> Syntax</h4></div></div></div><a class="indexterm" name="id2124382"></a><a class="indexterm" name="id2124391"></a><pre class="programlisting">KILL [CONNECTION | QUERY] <em class="replaceable"><code>thread_id</code></em>
</pre><p>
        Each connection to <a href="programs.html#mysqld" title="4.3.1. mysqld — The MySQL Server"><span><strong class="command">mysqld</strong></span></a> runs in a separate
        thread. You can see which threads are running with the
        <a href="sql-syntax.html#show-processlist" title="12.5.5.27. SHOW PROCESSLIST Syntax"><code class="literal">SHOW PROCESSLIST</code></a> statement and
        kill a thread with the <code class="literal">KILL
        <em class="replaceable"><code>thread_id</code></em></code> statement.
      </p><p>
        In MySQL 5.0.0, <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a> allows the
        optional <code class="literal">CONNECTION</code> or
        <code class="literal">QUERY</code> modifier:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL
            CONNECTION</code></a> is the same as
            <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a> with no modifier: It
            terminates the connection associated with the given
            <em class="replaceable"><code>thread_id</code></em>.
          </p></li><li><p>
            <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL QUERY</code></a>
            terminates the statement that the connection is currently
            executing, but leaves the connection itself intact.
          </p></li></ul></div><p>
        If you have the <a href="server-administration.html#priv_process"><code class="literal">PROCESS</code></a>
        privilege, you can see all threads. If you have the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege, you can kill all
        threads and statements. Otherwise, you can see and kill only
        your own threads and statements.
      </p><p>
        You can also use the <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin processlist</strong></span></a>
        and <a href="programs.html#mysqladmin" title="4.5.2. mysqladmin — Client for Administering a MySQL Server"><span><strong class="command">mysqladmin kill</strong></span></a> commands to examine and
        kill threads.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          You cannot use <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a> with the
          Embedded MySQL Server library, because the embedded server
          merely runs inside the threads of the host application. It
          does not create any connection threads of its own.
        </p></div><p>
        When you use <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL</code></a>, a
        thread-specific kill flag is set for the thread. In most cases,
        it might take some time for the thread to die, because the kill
        flag is checked only at specific intervals:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            In <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>, <code class="literal">ORDER
            BY</code> and <code class="literal">GROUP BY</code> loops, the flag
            is checked after reading a block of rows. If the kill flag
            is set, the statement is aborted.
          </p></li><li><p>
            During <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>, the kill
            flag is checked before each block of rows are read from the
            original table. If the kill flag was set, the statement is
            aborted and the temporary table is deleted.
          </p></li><li><p>
            During <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a> or
            <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a> operations, the kill
            flag is checked after each block read and after each updated
            or deleted row. If the kill flag is set, the statement is
            aborted. Note that if you are not using transactions, the
            changes are not rolled back.
          </p></li><li><p>
            <a href="functions.html#function_get-lock"><code class="literal">GET_LOCK()</code></a> aborts and returns
            <code class="literal">NULL</code>.
          </p></li><li><p>
            An <a href="sql-syntax.html#insert-delayed" title="12.2.5.2. INSERT DELAYED Syntax"><code class="literal">INSERT DELAYED</code></a> thread
            quickly flushes (inserts) all rows it has in memory and then
            terminates.
          </p></li><li><p>
            If the thread is in the table lock handler (state:
            <code class="literal">Locked</code>), the table lock is quickly
            aborted.
          </p></li><li><p>
            If the thread is waiting for free disk space in a write
            call, the write is aborted with a “<span class="quote">disk full</span>”
            error message.
          </p></li><li><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
              Killing a <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> or
              <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a> operation on
              a <code class="literal">MyISAM</code> table results in a table that
              is corrupted and unusable. Any reads or writes to such a
              table fail until you optimize or repair it again (without
              interruption).
            </p></div></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="load-index"></a>12.5.6.4. <code class="literal">LOAD INDEX INTO
        CACHE</code> Syntax</h4></div></div></div><pre class="programlisting">LOAD INDEX INTO CACHE
  <em class="replaceable"><code>tbl_index_list</code></em> [, <em class="replaceable"><code>tbl_index_list</code></em>] ...

<em class="replaceable"><code>tbl_index_list</code></em>:
  <em class="replaceable"><code>tbl_name</code></em>
    [[INDEX|KEY] (<em class="replaceable"><code>index_name</code></em>[, <em class="replaceable"><code>index_name</code></em>] ...)]
    [IGNORE LEAVES]
</pre><p>
        The <a href="sql-syntax.html#load-index" title="12.5.6.4. LOAD INDEX INTO
        CACHE Syntax"><code class="literal">LOAD INDEX INTO
        CACHE</code></a> statement preloads a table index into the key
        cache to which it has been assigned by an explicit
        <a href="sql-syntax.html#cache-index" title="12.5.6.1. CACHE INDEX Syntax"><code class="literal">CACHE INDEX</code></a> statement, or into
        the default key cache otherwise.
        <a href="sql-syntax.html#load-index" title="12.5.6.4. LOAD INDEX INTO
        CACHE Syntax"><code class="literal">LOAD INDEX INTO
        CACHE</code></a> is used only for <code class="literal">MyISAM</code>
        tables.
      </p><p>
        The <code class="literal">IGNORE LEAVES</code> modifier causes only blocks
        for the nonleaf nodes of the index to be preloaded.
      </p><p>
        The following statement preloads nodes (index blocks) of indexes
        for the tables <code class="literal">t1</code> and <code class="literal">t2</code>:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>LOAD INDEX INTO CACHE t1, t2 IGNORE LEAVES;</code></strong>
+---------+--------------+----------+----------+
| Table   | Op           | Msg_type | Msg_text |
+---------+--------------+----------+----------+
| test.t1 | preload_keys | status   | OK       |
| test.t2 | preload_keys | status   | OK       |
+---------+--------------+----------+----------+
</pre><p>
        This statement preloads all index blocks from
        <code class="literal">t1</code>. It preloads only blocks for the nonleaf
        nodes from <code class="literal">t2</code>.
      </p><p>
        The syntax of <a href="sql-syntax.html#load-index" title="12.5.6.4. LOAD INDEX INTO
        CACHE Syntax"><code class="literal">LOAD
        INDEX INTO CACHE</code></a> enables you to specify that only
        particular indexes from a table should be preloaded. The current
        implementation preloads all the table's indexes into the cache,
        so there is no reason to specify anything other than the table
        name.
      </p><p>
        <a href="sql-syntax.html#load-index" title="12.5.6.4. LOAD INDEX INTO
        CACHE Syntax"><code class="literal">LOAD INDEX INTO
        CACHE</code></a> fails unless all indexes in a table have the
        same block size. You can determine index block sizes for a table
        by using <a href="programs.html#myisamchk" title="4.6.3. myisamchk — MyISAM Table-Maintenance Utility"><span><strong class="command">myisamchk -dv</strong></span></a> and checking the
        <code class="literal">Blocksize</code> column.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="reset"></a>12.5.6.5. <code class="literal">RESET</code> Syntax</h4></div></div></div><pre class="programlisting">RESET <em class="replaceable"><code>reset_option</code></em> [, <em class="replaceable"><code>reset_option</code></em>] ...
</pre><p>
        The <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax"><code class="literal">RESET</code></a> statement is used to
        clear the state of various server operations. You must have the
        <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a> privilege to execute
        <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax"><code class="literal">RESET</code></a>.
      </p><p>
        <a href="sql-syntax.html#reset" title="12.5.6.5. RESET Syntax"><code class="literal">RESET</code></a> acts as a stronger version
        of the <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax"><code class="literal">FLUSH</code></a> statement. See
        <a href="sql-syntax.html#flush" title="12.5.6.2. FLUSH Syntax">Section 12.5.6.2, “<code class="literal">FLUSH</code> Syntax”</a>.
      </p><p>
        <em class="replaceable"><code>reset_option</code></em> can be any of the
        following:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <code class="literal">MASTER</code>
          </p><p>
            Deletes all binary logs listed in the index file, resets the
            binary log index file to be empty, and creates a new binary
            log file.
          </p></li><li><p>
            <code class="literal">QUERY CACHE</code>
          </p><p>
            Removes all query results from the query cache.
          </p></li><li><p>
            <code class="literal">SLAVE</code>
          </p><p>
            Makes the slave forget its replication position in the
            master binary logs. Also resets the relay log by deleting
            any existing relay log files and beginning a new one.
          </p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-replication"></a>12.6. Replication Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#replication-master-sql">12.6.1. SQL Statements for Controlling Master Servers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#replication-slave-sql">12.6.2. SQL Statements for Controlling Slave Servers</a></span></dt></dl></div><p>
    This section describes SQL statements related to replication. One
    group of statements is used for controlling master servers. The
    other is used for controlling slave servers.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="replication-master-sql"></a>12.6.1. SQL Statements for Controlling Master Servers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#purge-binary-logs">12.6.1.1. <code class="literal">PURGE BINARY LOGS</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#reset-master">12.6.1.2. <code class="literal">RESET MASTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-sql-log-bin">12.6.1.3. <code class="literal">SET sql_log_bin</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2125125"></a><a class="indexterm" name="id2125137"></a><a class="indexterm" name="id2125150"></a><p>
      Replication can be controlled through the SQL interface. This
      section discusses statements for managing master replication
      servers. <a href="sql-syntax.html#replication-slave-sql" title="12.6.2. SQL Statements for Controlling Slave Servers">Section 12.6.2, “SQL Statements for Controlling Slave Servers”</a>, discusses
      statements for managing slave servers.
    </p><p>
      The following <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a> statements are
      used with master servers in replication:

      </p><div class="itemizedlist"><ul type="disc"><li><p>
            <a href="sql-syntax.html#show-binary-logs" title="12.5.5.1. SHOW BINARY LOGS Syntax"><code class="literal">SHOW BINARY LOGS</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#show-binlog-events" title="12.5.5.2. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#show-master-status" title="12.5.5.21. SHOW MASTER STATUS Syntax"><code class="literal">SHOW MASTER STATUS</code></a>
          </p></li><li><p>
            <a href="sql-syntax.html#show-slave-hosts" title="12.5.5.30. SHOW SLAVE HOSTS Syntax"><code class="literal">SHOW SLAVE HOSTS</code></a>
          </p></li></ul></div><p>

      For information about these statements, see
      <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax">Section 12.5.5, “<code class="literal">SHOW</code> Syntax”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="purge-binary-logs"></a>12.6.1.1. <code class="literal">PURGE BINARY LOGS</code> Syntax</h4></div></div></div><a class="indexterm" name="id2125254"></a><a class="indexterm" name="id2125263"></a><pre class="programlisting">PURGE { BINARY | MASTER } LOGS
    { TO '<em class="replaceable"><code>log_name</code></em>' | BEFORE <em class="replaceable"><code>datetime_expr</code></em> }
</pre><p>
        The binary log is a set of files that contain information about
        data modifications made by the MySQL server. The log consists of
        a set of binary log files, plus an index file.
      </p><p>
        The <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY LOGS</code></a> statement
        deletes all the binary log files listed in the log index file
        prior to the specified log file name or date. The log files also
        are removed from the list recorded in the index file, so that
        the given log file becomes the first.
      </p><p>
        This statement has no effect if the
        <a href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a> option has not been
        enabled.
      </p><p>
        Examples:
      </p><pre class="programlisting">PURGE BINARY LOGS TO 'mysql-bin.010';
PURGE BINARY LOGS BEFORE '2008-04-02 22:46:26';
</pre><p>
        The <code class="literal">BEFORE</code> variant's
        <em class="replaceable"><code>datetime_expr</code></em> argument should
        evaluate to a <a href="data-types.html#datetime" title="10.3.1. The DATETIME,
        DATE, and
        TIMESTAMP Types"><code class="literal">DATETIME</code></a> value (a
        value in <code class="literal">'YYYY-MM-DD hh:mm:ss'</code> format).
        <code class="literal">BINARY</code> and <code class="literal">MASTER</code> are
        synonyms.
      </p><p>
        This statement is safe to run while slaves are replicating. You
        do not need to stop them. If you have an active slave that
        currently is reading one of the logs you are trying to delete,
        this statement does nothing and fails with an error. However, if
        a slave is dormant and you happen to purge one of the logs it
        has yet to read, the slave will be unable to replicate after it
        comes up.
      </p><p>
        To safely purge logs, follow this procedure:
      </p><div class="orderedlist"><ol type="1"><li><p>
            On each slave server, use <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE
            STATUS</code></a> to check which log it is reading.
          </p></li><li><p>
            Obtain a listing of the binary logs on the master server
            with <a href="sql-syntax.html#show-binary-logs" title="12.5.5.1. SHOW BINARY LOGS Syntax"><code class="literal">SHOW BINARY LOGS</code></a>.
          </p></li><li><p>
            Determine the earliest log among all the slaves. This is the
            target log. If all the slaves are up to date, this is the
            last log on the list.
          </p></li><li><p>
            Make a backup of all the logs you are about to delete. (This
            step is optional, but always advisable.)
          </p></li><li><p>
            Purge all logs up to but not including the target log.
          </p></li></ol></div><p>
        You can also set the
        <a href="server-administration.html#sysvar_expire_logs_days"><code class="literal">expire_logs_days</code></a> system
        variable to expire binary log files automatically after a given
        number of days (see <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>).
        If you are using replication, you should set the variable no
        lower than the maximum number of days your slaves might lag
        behind the master.
      </p><p>
        Prior to MySQL 5.0.60, <code class="literal">PURGE BINARY LOGS TO</code>
        and <code class="literal">PURGE BINARY LOGS BEFORE</code> did not behave
        in the same way (and neither one behaved correctly) when binary
        log files listed in the <code class="filename">.index</code> file had
        been removed from the system by some other means (such as using
        rm on Linux). Beginning with MySQL 5.0.60, both variants of the
        statement fail with an error in such cases. (<a href="http://bugs.mysql.com/18199" target="_top">Bug#18199</a>, <a href="http://bugs.mysql.com/18453" target="_top">Bug#18453</a>) You can handle such errors by editing the
        <code class="filename">.index</code> file (which is a simple text file)
        manually and insuring that it lists only the binary log files
        that are actually present, then running again the
        <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY LOGS</code></a> statement that
        failed.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="reset-master"></a>12.6.1.2. <code class="literal">RESET MASTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2125543"></a><pre class="programlisting">RESET MASTER
</pre><p>
        Deletes all binary logs listed in the index file, resets the
        binary log index file to be empty, and creates a new binary log
        file. It is intended to be used only when the master is started
        for the first time.
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>
          The effects of this statement differ from those of
          <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY LOGS</code></a> in 2 key
          ways:
        </p><div class="orderedlist"><ol type="1"><li><p>
              <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> removes
              <span class="emphasis"><em>all</em></span> binary logs that are listed in
              the index file, leaving only a single, empty binary log
              file named master-bin.000001, whereas the numbering is not
              reset by <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY LOGS</code></a>.
            </p></li><li><p>
              <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> is
              <span class="emphasis"><em>not</em></span> intended to be used while any
              replication slaves are running. The behavior of
              <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> when used
              while slaves are running is undefined (and thus
              unsupported), whereas <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax"><code class="literal">PURGE BINARY
              LOGS</code></a> may be safely used while replication slaves
              are running.
            </p></li></ol></div><p>
          See also <a href="sql-syntax.html#purge-binary-logs" title="12.6.1.1. PURGE BINARY LOGS Syntax">Section 12.6.1.1, “<code class="literal">PURGE BINARY LOGS</code> Syntax”</a>.
        </p></div><p>
        <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> can prove useful
        when you first set up the master and the slave, so that you can
        verify the setup as follows:
      </p><div class="orderedlist"><ol type="1"><li><p>
            Start the master and slave, and start replication (see
            <a href="replication.html#replication-howto" title="16.1.1. How to Set Up Replication">Section 16.1.1, “How to Set Up Replication”</a>)
          </p></li><li><p>
            Execute a few test queries on the master
          </p></li><li><p>
            Check that the queries were replicated to the slave
          </p></li><li><p>
            When replication is running correctly, issue
            <a href="sql-syntax.html#stop-slave" title="12.6.2.8. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> on the slave,
            followed by <a href="sql-syntax.html#reset-slave" title="12.6.2.5. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a>;
            verify that any unwanted data no longer exists on the slave
          </p></li><li><p>
            Issue <a href="sql-syntax.html#reset-master" title="12.6.1.2. RESET MASTER Syntax"><code class="literal">RESET MASTER</code></a> on the
            master to clean up the test queries
          </p></li></ol></div><p>
        After verifying the setup and getting rid of any unwanted and
        logs generated by testing, you can start the slave and begin
        replicating.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-sql-log-bin"></a>12.6.1.3. <code class="literal">SET sql_log_bin</code> Syntax</h4></div></div></div><a class="indexterm" name="id2125778"></a><pre class="programlisting">SET sql_log_bin = {0|1}
</pre><p>
        Disables or enables binary logging for the current connection
        (<a href="server-administration.html#sysvar_sql_log_bin"><code class="literal">sql_log_bin</code></a> is a session
        variable) if the client has the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege. The statement is
        refused with an error if the client does not have that
        privilege.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="replication-slave-sql"></a>12.6.2. SQL Statements for Controlling Slave Servers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#change-master-to">12.6.2.1. <code class="literal">CHANGE MASTER TO</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-data-from-master">12.6.2.2. <code class="literal">LOAD DATA FROM MASTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#load-table-from-master">12.6.2.3. <code class="literal">LOAD TABLE <em class="replaceable"><code>tbl_name</code></em> FROM
        MASTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#master-pos-wait">12.6.2.4. <code class="literal">MASTER_POS_WAIT()</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#reset-slave">12.6.2.5. <code class="literal">RESET SLAVE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-global-sql-slave-skip-counter">12.6.2.6. <code class="literal">SET GLOBAL SQL_SLAVE_SKIP_COUNTER</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#start-slave">12.6.2.7. <code class="literal">START SLAVE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#stop-slave">12.6.2.8. <code class="literal">STOP SLAVE</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2125848"></a><a class="indexterm" name="id2125860"></a><a class="indexterm" name="id2125872"></a><p>
      Replication can be controlled through the SQL interface. This
      section discusses statements for managing slave replication
      servers. <a href="sql-syntax.html#replication-master-sql" title="12.6.1. SQL Statements for Controlling Master Servers">Section 12.6.1, “SQL Statements for Controlling Master Servers”</a>, discusses
      statements for managing master servers.
    </p><p>
      <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> is also used with
      replication slaves. For information about this statement, see
      <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax">Section 12.5.5.31, “<code class="literal">SHOW SLAVE STATUS</code> Syntax”</a>.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="change-master-to"></a>12.6.2.1. <code class="literal">CHANGE MASTER TO</code> Syntax</h4></div></div></div><a class="indexterm" name="id2125920"></a><pre class="programlisting">CHANGE MASTER TO <em class="replaceable"><code>master_def</code></em> [, <em class="replaceable"><code>master_def</code></em>] ...

<em class="replaceable"><code>master_def</code></em>:
    MASTER_HOST = '<em class="replaceable"><code>host_name</code></em>'
  | MASTER_USER = '<em class="replaceable"><code>user_name</code></em>'
  | MASTER_PASSWORD = '<em class="replaceable"><code>password</code></em>'
  | MASTER_PORT = <em class="replaceable"><code>port_num</code></em>
  | MASTER_CONNECT_RETRY = <em class="replaceable"><code>interval</code></em>
  | MASTER_LOG_FILE = '<em class="replaceable"><code>master_log_name</code></em>'
  | MASTER_LOG_POS = <em class="replaceable"><code>master_log_pos</code></em>
  | RELAY_LOG_FILE = '<em class="replaceable"><code>relay_log_name</code></em>'
  | RELAY_LOG_POS = <em class="replaceable"><code>relay_log_pos</code></em>
  | MASTER_SSL = {0|1}
  | MASTER_SSL_CA = '<em class="replaceable"><code>ca_file_name</code></em>'
  | MASTER_SSL_CAPATH = '<em class="replaceable"><code>ca_directory_name</code></em>'
  | MASTER_SSL_CERT = '<em class="replaceable"><code>cert_file_name</code></em>'
  | MASTER_SSL_KEY = '<em class="replaceable"><code>key_file_name</code></em>'
  | MASTER_SSL_CIPHER = '<em class="replaceable"><code>cipher_list</code></em>'
</pre><p>
        <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> changes the
        parameters that the slave server uses for connecting to and
        communicating with the master server. It also updates the
        contents of the <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> files.
      </p><p>
        <code class="literal">MASTER_USER</code>,
        <code class="literal">MASTER_PASSWORD</code>,
        <code class="literal">MASTER_SSL</code>, <code class="literal">MASTER_SSL_CA</code>,
        <code class="literal">MASTER_SSL_CAPATH</code>,
        <code class="literal">MASTER_SSL_CERT</code>,
        <code class="literal">MASTER_SSL_KEY</code>, and
        <code class="literal">MASTER_SSL_CIPHER</code> provide information to the
        slave about how to connect to its master.
      </p><p>
        <code class="literal">MASTER_CONNECT_RETRY</code> specifies how many
        seconds to wait between connect retries. The default is 60. The
        <span class="emphasis"><em>number</em></span> of reconnection attempts is limited
        by the <a href="replication.html#option_mysqld_master-retry-count"><code class="option">--master-retry-count</code></a>
        server option; for more information, see
        <a href="replication.html#replication-options" title="16.1.2. Replication and Binary Logging Options and Variables">Section 16.1.2, “Replication and Binary Logging Options and Variables”</a>.
      </p><p>
        The SSL options (<code class="literal">MASTER_SSL</code>,
        <code class="literal">MASTER_SSL_CA</code>,
        <code class="literal">MASTER_SSL_CAPATH</code>,
        <code class="literal">MASTER_SSL_CERT</code>,
        <code class="literal">MASTER_SSL_KEY</code>, and
        <code class="literal">MASTER_SSL_CIPHER</code>) can be changed even on
        slaves that are compiled without SSL support. They are saved to
        the <code class="filename">master.info</code> file, but are ignored
        unless you use a server that has SSL support enabled.
      </p><p>
        If you don't specify a given parameter, it keeps its old value,
        except as indicated in the following discussion. For example, if
        the password to connect to your MySQL master has changed, you
        just need to issue these statements to tell the slave about the
        new password:
      </p><pre class="programlisting">STOP SLAVE; -- if replication was running
CHANGE MASTER TO MASTER_PASSWORD='new3cret';
START SLAVE; -- if you want to restart replication
</pre><p>
        There is no need to specify the parameters that do not change
        (host, port, user, and so forth).
      </p><p>
        <code class="literal">MASTER_HOST</code> and
        <code class="literal">MASTER_PORT</code> are the host name (or IP address)
        of the master host and its TCP/IP port.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Replication cannot use Unix socket files. You must be able to
          connect to the master MySQL server using TCP/IP.
        </p></div><p>
        If you specify <code class="literal">MASTER_HOST</code> or
        <code class="literal">MASTER_PORT</code>, the slave assumes that the
        master server is different from before (even if you specify a
        host or port value that is the same as the current value.) In
        this case, the old values for the master binary log name and
        position are considered no longer applicable, so if you do not
        specify <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> in the statement,
        <code class="literal">MASTER_LOG_FILE=''</code> and
        <code class="literal">MASTER_LOG_POS=4</code> are silently appended to it.
      </p><p>
        Setting <code class="literal">MASTER_HOST=''</code> — that is,
        setting its value explicitly to an empty string — is
        <span class="emphasis"><em>not</em></span> the same as not setting it at all.
        Setting this option to an empty string causes
        <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> subsequently to fail.
        (<a href="http://bugs.mysql.com/28796" target="_top">Bug#28796</a>)
      </p><p>
        <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> are the coordinates at which
        the slave I/O thread should begin reading from the master the
        next time the thread starts. If you specify either of them, you
        cannot specify <code class="literal">RELAY_LOG_FILE</code> or
        <code class="literal">RELAY_LOG_POS</code>. If neither of
        <code class="literal">MASTER_LOG_FILE</code> or
        <code class="literal">MASTER_LOG_POS</code> are specified, the slave uses
        the last coordinates of the <span class="emphasis"><em>slave SQL
        thread</em></span> before <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER
        TO</code></a> was issued. This ensures that there is no
        discontinuity in replication, even if the slave SQL thread was
        late compared to the slave I/O thread, when you merely want to
        change, say, the password to use.
      </p><p>
        <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a>
        <span class="emphasis"><em>deletes all relay log files</em></span> and starts a
        new one, unless you specify <code class="literal">RELAY_LOG_FILE</code> or
        <code class="literal">RELAY_LOG_POS</code>. In that case, relay logs are
        kept; the <a href="server-administration.html#sysvar_relay_log_purge"><code class="literal">relay_log_purge</code></a>
        global variable is set silently to 0.
      </p><p>
        <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE MASTER TO</code></a> is useful for
        setting up a slave when you have the snapshot of the master and
        have recorded the log and the offset corresponding to it. After
        loading the snapshot into the slave, you can run <code class="literal">CHANGE
        MASTER TO
        MASTER_LOG_FILE='<em class="replaceable"><code>log_name_on_master</code></em>',
        MASTER_LOG_POS=<em class="replaceable"><code>log_offset_on_master</code></em></code>
        on the slave.
      </p><p>
        The following example changes the master and master's binary log
        coordinates. This is used when you want to set up the slave to
        replicate the master:
      </p><pre class="programlisting">CHANGE MASTER TO
  MASTER_HOST='master2.mycompany.com',
  MASTER_USER='replication',
  MASTER_PASSWORD='bigs3cret',
  MASTER_PORT=3306,
  MASTER_LOG_FILE='master2-bin.001',
  MASTER_LOG_POS=4,
  MASTER_CONNECT_RETRY=10;
</pre><p>
        The next example shows an operation that is less frequently
        employed. It is used when the slave has relay logs that you want
        it to execute again for some reason. To do this, the master need
        not be reachable. You need only use <a href="sql-syntax.html#change-master-to" title="12.6.2.1. CHANGE MASTER TO Syntax"><code class="literal">CHANGE
        MASTER TO</code></a> and start the SQL thread (<code class="literal">START
        SLAVE SQL_THREAD</code>):
      </p><pre class="programlisting">CHANGE MASTER TO
  RELAY_LOG_FILE='slave-relay-bin.006',
  RELAY_LOG_POS=4025;
</pre><p>
        You can even use the second operation in a nonreplication setup
        with a standalone, nonslave server for recovery following a
        crash. Suppose that your server has crashed and you have
        restored a backup. You want to replay the server's own binary
        logs (not relay logs, but regular binary logs), named (for
        example) <code class="filename">myhost-bin.*</code>. First, make a backup
        copy of these binary logs in some safe place, in case you don't
        exactly follow the procedure below and accidentally have the
        server purge the binary logs. Use <code class="literal">SET GLOBAL
        relay_log_purge=0</code> for additional safety. Then start
        the server without the <a href="replication.html#option_mysqld_log-bin"><code class="option">--log-bin</code></a>
        option, Instead, use the
        <a href="replication.html#option_mysqld_replicate-same-server-id"><code class="option">--replicate-same-server-id</code></a>,
        <a href="replication.html#option_mysqld_relay-log"><code class="option">--relay-log=myhost-bin</code></a> (to make
        the server believe that these regular binary logs are relay
        logs) and <a href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a>
        options. After the server starts, issue these statements:
      </p><pre class="programlisting">CHANGE MASTER TO
  RELAY_LOG_FILE='myhost-bin.153',
  RELAY_LOG_POS=410,
  MASTER_HOST='some_dummy_string';
START SLAVE SQL_THREAD;
</pre><p>
        The server reads and executes its own binary logs, thus
        achieving crash recovery. Once the recovery is finished, run
        <a href="sql-syntax.html#stop-slave" title="12.6.2.8. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a>, shut down the server,
        delete the <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> files, and restart the
        server with its original options.
      </p><p>
        Specifying the <code class="literal">MASTER_HOST</code> option (even with
        a dummy value) is required to make the server think it is a
        slave.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="load-data-from-master"></a>12.6.2.2. <code class="literal">LOAD DATA FROM MASTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2126542"></a><pre class="programlisting">LOAD DATA FROM MASTER
</pre><p class="deprecated"><span class="bold"><strong>This feature is deprecated and should be avoided. It is subject to removal in a future version of MySQL.</strong></span></p><p>
        Since the current implementation of <code class="literal">LOAD DATA FROM
        MASTER</code> and <code class="literal">LOAD TABLE FROM MASTER</code>
        is very limited, these statements are deprecated in versions 4.1
        of MySQL and above. We will introduce a more advanced technique
        (called “<span class="quote">online backup</span>”) in a future version. That
        technique will have the additional advantage of working with
        more storage engines.
      </p><p>
        For MySQL 5.1 and earlier, the recommended alternative solution
        to using <code class="literal">LOAD DATA FROM MASTER</code> or
        <code class="literal">LOAD TABLE FROM MASTER</code> is using
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> or <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a>.
        The latter requires Perl and two Perl modules
        (<code class="literal">DBI</code> and <code class="literal">DBD:mysql</code>) and
        works for <code class="literal">MyISAM</code> and
        <code class="literal">ARCHIVE</code> tables only. With
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>, you can create SQL dumps on the
        master and pipe (or copy) these to a <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>
        client on the slave. This has the advantage of working for all
        storage engines, but can be quite slow, since it works using
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>.
      </p><p>
        This statement takes a snapshot of the master and copies it to
        the slave. It updates the values of
        <code class="literal">MASTER_LOG_FILE</code> and
        <code class="literal">MASTER_LOG_POS</code> so that the slave starts
        replicating from the correct position. Any table and database
        exclusion rules specified with the
        <code class="option">--replicate-*-do-*</code> and
        <code class="option">--replicate-*-ignore-*</code> options are honored.
        <a href="replication.html#option_mysqld_replicate-rewrite-db"><code class="option">--replicate-rewrite-db</code></a> is
        <span class="emphasis"><em>not</em></span> taken into account because a user could
        use this option to set up a nonunique mapping such as
        <a href="replication.html#option_mysqld_replicate-rewrite-db"><code class="option">--replicate-rewrite-db="db1-&gt;db3"</code></a>
        and
        <a href="replication.html#option_mysqld_replicate-rewrite-db"><code class="option">--replicate-rewrite-db="db2-&gt;db3"</code></a>,
        which would confuse the slave when loading tables from the
        master.
      </p><p>
        Use of this statement is subject to the following conditions:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            It works only for <code class="literal">MyISAM</code> tables.
            Attempting to load a non-<code class="literal">MyISAM</code> table
            results in the following error:
          </p><pre class="programlisting">ERROR 1189 (08S01): Net error reading from master
</pre></li><li><p>
            It acquires a global read lock on the master while taking
            the snapshot, which prevents updates on the master during
            the load operation.
          </p></li></ul></div><p>
        If you are loading large tables, you might have to increase the
        values of <a href="server-administration.html#sysvar_net_read_timeout"><code class="literal">net_read_timeout</code></a> and
        <a href="server-administration.html#sysvar_net_write_timeout"><code class="literal">net_write_timeout</code></a> on both the
        master and slave servers. See
        <a href="server-administration.html#server-system-variables" title="5.1.3. Server System Variables">Section 5.1.3, “Server System Variables”</a>.
      </p><p>
        Note that <code class="literal">LOAD DATA FROM MASTER</code> does
        <span class="emphasis"><em>not</em></span> copy any tables from the
        <code class="literal">mysql</code> database. This makes it easy to have
        different users and privileges on the master and the slave.
      </p><p>
        To use <code class="literal">LOAD DATA FROM MASTER</code>, the replication
        account that is used to connect to the master must have the
        <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a> and
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privileges on the master
        and the <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for all
        master tables you want to load. All master tables for which the
        user does not have the <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a>
        privilege are ignored by <code class="literal">LOAD DATA FROM
        MASTER</code>. This is because the master hides them from the
        user: <code class="literal">LOAD DATA FROM MASTER</code> calls
        <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW DATABASES</code></a> to know the master
        databases to load, but <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax"><code class="literal">SHOW
        DATABASES</code></a> returns only databases for which the user
        has some privilege. See <a href="sql-syntax.html#show-databases" title="12.5.5.11. SHOW DATABASES Syntax">Section 12.5.5.11, “<code class="literal">SHOW DATABASES</code> Syntax”</a>. On the
        slave side, the user that issues <code class="literal">LOAD DATA FROM
        MASTER</code> must have privileges for dropping and creating
        the databases and tables that are copied.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="load-table-from-master"></a>12.6.2.3. <code class="literal">LOAD TABLE <em class="replaceable"><code>tbl_name</code></em> FROM
        MASTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2126925"></a><pre class="programlisting">LOAD TABLE <em class="replaceable"><code>tbl_name</code></em> FROM MASTER
</pre><p class="deprecated"><span class="bold"><strong>This feature is deprecated and should be avoided. It is subject to removal in a future version of MySQL.</strong></span></p><p>
        Since the current implementation of <code class="literal">LOAD DATA FROM
        MASTER</code> and <code class="literal">LOAD TABLE FROM MASTER</code>
        is very limited, these statements are deprecated in versions 4.1
        of MySQL and above. We will introduce a more advanced technique
        (called “<span class="quote">online backup</span>”) in a future version. That
        technique will have the additional advantage of working with
        more storage engines.
      </p><p>
        For MySQL 5.1 and earlier, the recommended alternative solution
        to using <code class="literal">LOAD DATA FROM MASTER</code> or
        <code class="literal">LOAD TABLE FROM MASTER</code> is using
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a> or <a href="programs.html#mysqlhotcopy" title="4.6.9. mysqlhotcopy — A Database Backup Program"><span><strong class="command">mysqlhotcopy</strong></span></a>.
        The latter requires Perl and two Perl modules
        (<code class="literal">DBI</code> and <code class="literal">DBD:mysql</code>) and
        works for <code class="literal">MyISAM</code> and
        <code class="literal">ARCHIVE</code> tables only. With
        <a href="programs.html#mysqldump" title="4.5.4. mysqldump — A Database Backup Program"><span><strong class="command">mysqldump</strong></span></a>, you can create SQL dumps on the
        master and pipe (or copy) these to a <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>
        client on the slave. This has the advantage of working for all
        storage engines, but can be quite slow, since it works using
        <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>.
      </p><p>
        Transfers a copy of the table from the master to the slave. This
        statement is implemented mainly debugging <code class="literal">LOAD DATA
        FROM MASTER</code> operations. To use <code class="literal">LOAD
        TABLE</code>, the account used for connecting to the master
        server must have the <a href="server-administration.html#priv_reload"><code class="literal">RELOAD</code></a> and
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privileges on the master
        and the <a href="server-administration.html#priv_select"><code class="literal">SELECT</code></a> privilege for the
        master table to load. On the slave side, the user that issues
        <code class="literal">LOAD TABLE FROM MASTER</code> must have privileges
        for dropping and creating the table.
      </p><p>
        The conditions for <code class="literal">LOAD DATA FROM MASTER</code>
        apply here as well. For example, <code class="literal">LOAD TABLE FROM
        MASTER</code> works only for <code class="literal">MyISAM</code>
        tables. The timeout notes for <code class="literal">LOAD DATA FROM
        MASTER</code> apply as well.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="master-pos-wait"></a>12.6.2.4. <code class="literal">MASTER_POS_WAIT()</code> Syntax</h4></div></div></div><a class="indexterm" name="id2127163"></a><pre class="programlisting">SELECT MASTER_POS_WAIT('<em class="replaceable"><code>master_log_file</code></em>', <em class="replaceable"><code>master_log_pos</code></em> [, <em class="replaceable"><code>timeout</code></em>])
</pre><p>
        This is actually a function, not a statement. It is used to
        ensure that the slave has read and executed events up to a given
        position in the master's binary log. See
        <a href="functions.html#miscellaneous-functions" title="11.10.4. Miscellaneous Functions">Section 11.10.4, “Miscellaneous Functions”</a>, for a full
        description.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="reset-slave"></a>12.6.2.5. <code class="literal">RESET SLAVE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2127210"></a><pre class="programlisting">RESET SLAVE
</pre><p>
        <a href="sql-syntax.html#reset-slave" title="12.6.2.5. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a> makes the slave
        forget its replication position in the master's binary logs.
        This statement is meant to be used for a clean start: It deletes
        the <code class="filename">master.info</code> and
        <code class="filename">relay-log.info</code> files, all the relay logs,
        and starts a new relay log.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          All relay logs are deleted, even if they have not been
          completely executed by the slave SQL thread. (This is a
          condition likely to exist on a replication slave if you have
          issued a <a href="sql-syntax.html#stop-slave" title="12.6.2.8. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> statement
          or if the slave is highly loaded.)
        </p></div><p>
        Connection information stored in the
        <code class="filename">master.info</code> file is immediately reset using
        any values specified in the corresponding startup options. This
        information includes values such as master host, master port,
        master user, and master password. If the slave SQL thread was in
        the middle of replicating temporary tables when it was stopped,
        and <a href="sql-syntax.html#reset-slave" title="12.6.2.5. RESET SLAVE Syntax"><code class="literal">RESET SLAVE</code></a> is issued, these
        replicated temporary tables are deleted on the slave.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-global-sql-slave-skip-counter"></a>12.6.2.6. <code class="literal">SET GLOBAL SQL_SLAVE_SKIP_COUNTER</code> Syntax</h4></div></div></div><a class="indexterm" name="id2127324"></a><a class="indexterm" name="id2127333"></a><a class="indexterm" name="id2127342"></a><a class="indexterm" name="id2127351"></a><pre class="programlisting">SET GLOBAL SQL_SLAVE_SKIP_COUNTER = <em class="replaceable"><code>N</code></em>
</pre><p>
        This statement skips the next <em class="replaceable"><code>N</code></em>
        events from the master. This is useful for recovering from
        replication stops caused by a statement.
      </p><p>
        This statement is valid only when the slave thread is not
        running. Otherwise, it produces an error.
      </p><p>
        When using this statement, it is important to understand that
        the binary log is actually organized as a sequence of groups
        known as <em class="firstterm">event groups</em>. Each event group
        consists of a sequence of events.
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            For transactional tables, an event group corresponds to a
            transaction.
          </p></li><li><p>
            For nontransactional tables, an event group corresponds to a
            single SQL statement.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          A single transaction can contain changes to both transactional
          and nontransactional tables.
        </p></div><p>
        When you use <code class="literal">SET GLOBAL
        SQL_SLAVE_SKIP_COUNTER</code> to skip events and the result
        is in the middle of a group, the slave continues to skip events
        until it reaches the end of the group. Execution then starts
        with the next event group.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="start-slave"></a>12.6.2.7. <code class="literal">START SLAVE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2127468"></a><pre class="programlisting">START SLAVE [<em class="replaceable"><code>thread_type</code></em> [, <em class="replaceable"><code>thread_type</code></em>] ... ]
START SLAVE [SQL_THREAD] UNTIL
    MASTER_LOG_FILE = '<em class="replaceable"><code>log_name</code></em>', MASTER_LOG_POS = <em class="replaceable"><code>log_pos</code></em>
START SLAVE [SQL_THREAD] UNTIL
    RELAY_LOG_FILE = '<em class="replaceable"><code>log_name</code></em>', RELAY_LOG_POS = <em class="replaceable"><code>log_pos</code></em>

<em class="replaceable"><code>thread_type</code></em>: IO_THREAD | SQL_THREAD
</pre><p>
        <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> with no
        <em class="replaceable"><code>thread_type</code></em> options starts both of
        the slave threads. The I/O thread reads queries from the master
        server and stores them in the relay log. The SQL thread reads
        the relay log and executes the queries.
        <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> requires the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
      </p><p>
        If <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> succeeds in
        starting the slave threads, it returns without any error.
        However, even in that case, it might be that the slave threads
        start and then later stop (for example, because they do not
        manage to connect to the master or read its binary logs, or some
        other problem). <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> does
        not warn you about this. You must check the slave's error log
        for error messages generated by the slave threads, or check that
        they are running satisfactorily with <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW
        SLAVE STATUS</code></a>.
      </p><p>
        <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> sends an
        acknowledgement to the user after both the IO thread and the SQL
        thread have started. However, the IO thread may not yet have
        connected. For this reason, a successful
        <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> causes
        <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> to show
        <code class="literal">Slave_SQL_Running=Yes</code>, but this does not
        guarantee that <code class="literal">Slave_IO_Running=Yes</code> (because
        <code class="literal">Slave_IO_Running=Yes</code> only if the IO thread is
        running <span class="emphasis"><em>and connected</em></span>). For more
        information, see <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax">Section 12.5.5.31, “<code class="literal">SHOW SLAVE STATUS</code> Syntax”</a>, and
        <a href="replication.html#replication-administration-status" title="16.1.3.1. Checking Replication Status">Section 16.1.3.1, “Checking Replication Status”</a>.
      </p><p>
        You can add <code class="literal">IO_THREAD</code> and
        <code class="literal">SQL_THREAD</code> options to the statement to name
        which of the threads to start.
      </p><p>
        An <code class="literal">UNTIL</code> clause may be added to specify that
        the slave should start and run until the SQL thread reaches a
        given point in the master binary logs or in the slave relay
        logs. When the SQL thread reaches that point, it stops. If the
        <code class="literal">SQL_THREAD</code> option is specified in the
        statement, it starts only the SQL thread. Otherwise, it starts
        both slave threads. If the SQL thread is running, the
        <code class="literal">UNTIL</code> clause is ignored and a warning is
        issued.
      </p><p>
        For an <code class="literal">UNTIL</code> clause, you must specify both a
        log file name and position. Do not mix master and relay log
        options.
      </p><p>
        Any <code class="literal">UNTIL</code> condition is reset by a subsequent
        <a href="sql-syntax.html#stop-slave" title="12.6.2.8. STOP SLAVE Syntax"><code class="literal">STOP SLAVE</code></a> statement, a
        <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a> statement that
        includes no <code class="literal">UNTIL</code> clause, or a server
        restart.
      </p><p>
        The <code class="literal">UNTIL</code> clause can be useful for debugging
        replication, or to cause replication to proceed until just
        before the point where you want to avoid having the slave
        replicate a statement. For example, if an unwise
        <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a> statement was executed
        on the master, you can use <code class="literal">UNTIL</code> to tell the
        slave to execute up to that point but no farther. To find what
        the event is, use <a href="programs.html#mysqlbinlog" title="4.6.7. mysqlbinlog — Utility for Processing Binary Log Files"><span><strong class="command">mysqlbinlog</strong></span></a> with the master
        logs or slave relay logs, or by using a
        <a href="sql-syntax.html#show-binlog-events" title="12.5.5.2. SHOW BINLOG EVENTS Syntax"><code class="literal">SHOW BINLOG EVENTS</code></a> statement.
      </p><p>
        If you are using <code class="literal">UNTIL</code> to have the slave
        process replicated queries in sections, it is recommended that
        you start the slave with the
        <a href="replication.html#option_mysqld_skip-slave-start"><code class="option">--skip-slave-start</code></a> option to
        prevent the SQL thread from running when the slave server
        starts. It is probably best to use this option in an option file
        rather than on the command line, so that an unexpected server
        restart does not cause it to be forgotten.
      </p><p>
        The <a href="sql-syntax.html#show-slave-status" title="12.5.5.31. SHOW SLAVE STATUS Syntax"><code class="literal">SHOW SLAVE STATUS</code></a> statement
        includes output fields that display the current values of the
        <code class="literal">UNTIL</code> condition.
      </p><p>
        In old versions of MySQL (before 4.0.5), this statement was
        called <code class="literal">SLAVE START</code>. This usage is still
        accepted in MySQL 5.0 for backward compatibility,
        but is deprecated.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="stop-slave"></a>12.6.2.8. <code class="literal">STOP SLAVE</code> Syntax</h4></div></div></div><a class="indexterm" name="id2127833"></a><pre class="programlisting">STOP SLAVE [<em class="replaceable"><code>thread_type</code></em> [, <em class="replaceable"><code>thread_type</code></em>] ... ]

<em class="replaceable"><code>thread_type</code></em>: IO_THREAD | SQL_THREAD
</pre><p>
        Stops the slave threads. <a href="sql-syntax.html#stop-slave" title="12.6.2.8. STOP SLAVE Syntax"><code class="literal">STOP
        SLAVE</code></a> requires the
        <a href="server-administration.html#priv_super"><code class="literal">SUPER</code></a> privilege.
      </p><p>
        Like <a href="sql-syntax.html#start-slave" title="12.6.2.7. START SLAVE Syntax"><code class="literal">START SLAVE</code></a>, this statement
        may be used with the <code class="literal">IO_THREAD</code> and
        <code class="literal">SQL_THREAD</code> options to name the thread or
        threads to be stopped.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The transactional behavior of <a href="sql-syntax.html#stop-slave" title="12.6.2.8. STOP SLAVE Syntax"><code class="literal">STOP
          SLAVE</code></a> changed in MySQL 5.0.82. Previously, it took
          effect immediately; beginning with MySQL 5.0.82, it waits
          until the current replication event group (if any) has
          finished executing, or until the user issues a
          <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL QUERY</code></a> or
          <a href="sql-syntax.html#kill" title="12.5.6.3. KILL Syntax"><code class="literal">KILL
          CONNECTION</code></a> statement. (<a href="http://bugs.mysql.com/319" target="_top">Bug#319</a>, <a href="http://bugs.mysql.com/38205" target="_top">Bug#38205</a>)
        </p></div><p>
        In old versions of MySQL (before 4.0.5), this statement was
        called <code class="literal">SLAVE STOP</code>. This usage is still
        accepted in MySQL 5.0 for backward compatibility,
        but is deprecated.
      </p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-prepared-statements"></a>12.7. SQL Syntax for Prepared Statements</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#prepare">12.7.1. <code class="literal">PREPARE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#execute">12.7.2. <code class="literal">EXECUTE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#deallocate-prepare">12.7.3. <code class="literal">DEALLOCATE PREPARE</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2127990"></a><a class="indexterm" name="id2127999"></a><a class="indexterm" name="id2128008"></a><a class="indexterm" name="id2128017"></a><p>
    MySQL 5.0 provides support for server-side prepared
    statements. This support takes advantage of the efficient
    client/server binary protocol implemented in MySQL 4.1, provided
    that you use an appropriate client programming interface. Candidate
    interfaces include the MySQL C API client library (for C programs),
    MySQL Connector/J (for Java programs), and MySQL Connector/NET. For
    example, the C API provides a set of function calls that make up its
    prepared statement API. See
    <a href="connectors-apis.html#c-api-prepared-statements" title="20.9.4. C API Prepared Statements">Section 20.9.4, “C API Prepared Statements”</a>. Other language
    interfaces can provide support for prepared statements that use the
    binary protocol by linking in the C client library, one example
    being the
    <a href="http://php.net/mysqli" target="_top"><code class="literal">mysqli</code>
    extension</a>, available in PHP 5.0 and later.
  </p><p>
    An alternative SQL interface to prepared statements is available.
    This interface is not as efficient as using the binary protocol
    through a prepared statement API, but requires no programming
    because it is available directly at the SQL level:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        You can use it when no programming interface is available to
        you.
      </p></li><li><p>
        You can use it from any program that allows you to send SQL
        statements to the server to be executed, such as the
        <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a> client program.
      </p></li><li><p>
        You can use it even if the client is using an old version of the
        client library. The only requirement is that you be able to
        connect to a server that is recent enough to support SQL syntax
        for prepared statements.
      </p></li></ul></div><p>
    SQL syntax for prepared statements is intended to be used for
    situations such as these:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        You want to test how prepared statements work in your
        application before coding it.
      </p></li><li><p>
        An application has problems executing prepared statements and
        you want to determine interactively what the problem is.
      </p></li><li><p>
        You want to create a test case that describes a problem you are
        having with prepared statements, so that you can file a bug
        report.
      </p></li><li><p>
        You need to use prepared statements but do not have access to a
        programming API that supports them.
      </p></li></ul></div><p>
    SQL syntax for prepared statements is based on three SQL statements:
  </p><div class="itemizedlist"><ul type="disc"><li><p>
        <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> prepares a statement for
        execution (see <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax">Section 12.7.1, “<code class="literal">PREPARE</code> Syntax”</a>).
      </p></li><li><p>
        <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> executes a prepared
        statement (see <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax">Section 12.7.2, “<code class="literal">EXECUTE</code> Syntax”</a>).
      </p></li><li><p>
        <a href="sql-syntax.html#deallocate-prepare" title="12.7.3. DEALLOCATE PREPARE Syntax"><code class="literal">DEALLOCATE PREPARE</code></a> releases a
        prepared statement (see <a href="sql-syntax.html#deallocate-prepare" title="12.7.3. DEALLOCATE PREPARE Syntax">Section 12.7.3, “<code class="literal">DEALLOCATE PREPARE</code> Syntax”</a>).
      </p></li></ul></div><p>
    The following examples show two equivalent ways of preparing a
    statement that computes the hypotenuse of a triangle given the
    lengths of the two sides.
  </p><p>
    The first example shows how to create a prepared statement by using
    a string literal to supply the text of the statement:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>PREPARE stmt1 FROM 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse';</code></strong>
mysql&gt; <strong class="userinput"><code>SET @a = 3;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @b = 4;</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE stmt1 USING @a, @b;</code></strong>
+------------+
| hypotenuse |
+------------+
|          5 |
+------------+
mysql&gt; <strong class="userinput"><code>DEALLOCATE PREPARE stmt1;</code></strong>
</pre><p>
    The second example is similar, but supplies the text of the
    statement as a user variable:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @s = 'SELECT SQRT(POW(?,2) + POW(?,2)) AS hypotenuse';</code></strong>
mysql&gt; <strong class="userinput"><code>PREPARE stmt2 FROM @s;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @a = 6;</code></strong>
mysql&gt; <strong class="userinput"><code>SET @b = 8;</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE stmt2 USING @a, @b;</code></strong>
+------------+
| hypotenuse |
+------------+
|         10 |
+------------+
mysql&gt; <strong class="userinput"><code>DEALLOCATE PREPARE stmt2;</code></strong>
</pre><p>
    Here is an additional example which demonstrates how to choose the
    table on which to perform a query at run time, by storing the name
    of the table as a user variable:
  </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (a INT NOT NULL);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES (4), (8), (11), (32), (80);</code></strong>

mysql&gt; <strong class="userinput"><code>SET @table = 't1';</code></strong>
mysql&gt; <strong class="userinput"><code>SET @s = CONCAT('SELECT * FROM ', @table);</code></strong>

mysql&gt; <strong class="userinput"><code>PREPARE stmt3 FROM @s;</code></strong>
mysql&gt; <strong class="userinput"><code>EXECUTE stmt3;</code></strong>
+----+
| a  |
+----+
|  4 |
|  8 |
| 11 |
| 32 |
| 80 |
+----+

mysql&gt; <strong class="userinput"><code>DEALLOCATE PREPARE stmt3;</code></strong>
</pre><p>
    A prepared statement is specific to the session in which it was
    created. If you terminate a session without deallocating a
    previously prepared statement, the server deallocates it
    automatically.
  </p><p>
    A prepared statement is also global to the session. If you create a
    prepared statement within a stored routine, it is not deallocated
    when the stored routine ends.
  </p><p>
    To guard against too many prepared statements being created
    simultaneously, set the
    <a href="server-administration.html#sysvar_max_prepared_stmt_count"><code class="literal">max_prepared_stmt_count</code></a> system
    variable. To prevent the use of prepared statements, set the value
    to 0.
  </p><p>
    The following SQL statements can be used in prepared statements:
    <a href="sql-syntax.html#alter-table" title="12.1.4. ALTER TABLE Syntax"><code class="literal">ALTER TABLE</code></a>,
    <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>,
    <a href="sql-syntax.html#commit" title="12.4.1. START TRANSACTION,
      COMMIT, and
      ROLLBACK Syntax"><code class="literal">COMMIT</code></a>, <a href="sql-syntax.html#create-index" title="12.1.8. CREATE INDEX Syntax"><code class="literal">CREATE
    INDEX</code></a>, <a href="sql-syntax.html#create-table" title="12.1.10. CREATE TABLE Syntax"><code class="literal">CREATE TABLE</code></a>,
    <a href="sql-syntax.html#delete" title="12.2.2. DELETE Syntax"><code class="literal">DELETE</code></a>,
    <a href="sql-syntax.html#do" title="12.2.3. DO Syntax"><code class="literal">DO</code></a>, <a href="sql-syntax.html#drop-index" title="12.1.15. DROP INDEX Syntax"><code class="literal">DROP
    INDEX</code></a>, <a href="sql-syntax.html#drop-table" title="12.1.17. DROP TABLE Syntax"><code class="literal">DROP TABLE</code></a>,
    <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a>, <a href="sql-syntax.html#rename-table" title="12.1.20. RENAME TABLE Syntax"><code class="literal">RENAME
    TABLE</code></a>, <a href="sql-syntax.html#replace" title="12.2.7. REPLACE Syntax"><code class="literal">REPLACE</code></a>,
    <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a>,
    <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>,
    <a href="sql-syntax.html#update" title="12.2.11. UPDATE Syntax"><code class="literal">UPDATE</code></a>, and most
    <a href="sql-syntax.html#show" title="12.5.5. SHOW Syntax"><code class="literal">SHOW</code></a> statements.
    <a href="sql-syntax.html#analyze-table" title="12.5.2.1. ANALYZE TABLE Syntax"><code class="literal">ANALYZE TABLE</code></a>,
    <a href="sql-syntax.html#optimize-table" title="12.5.2.5. OPTIMIZE TABLE Syntax"><code class="literal">OPTIMIZE TABLE</code></a>, and
    <a href="sql-syntax.html#repair-table" title="12.5.2.6. REPAIR TABLE Syntax"><code class="literal">REPAIR TABLE</code></a> are also supported as of
    MySQL 5.0.23.
  </p><p>
    Other statements are not yet supported.
  </p><p>
    Statements not allowed in SQL prepared statements are generally also
    not permitted in stored routines. Any exceptions to this rule are
    noted in <a href="stored-programs-views.html#stored-routines" title="18.2. Using Stored Routines (Procedures and Functions)">Section 18.2, “Using Stored Routines (Procedures and Functions)”</a>.
  </p><p>
    As of MySQL 5.0.7, placeholders can be used for the arguments of the
    <code class="literal">LIMIT</code> clause when using prepared statements. See
    <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax">Section 12.2.8, “<code class="literal">SELECT</code> Syntax”</a>.
  </p><p>
    In prepared <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a> statements used with
    <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> and
    <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>, placeholder support for
    <code class="literal">OUT</code> and <code class="literal">INOUT</code> parameters is
    not available in MySQL 5.0. See <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax">Section 12.2.1, “<code class="literal">CALL</code> Syntax”</a>,
    for an example and a workaround. Placeholders can be used for
    <code class="literal">IN</code> parameters regardless of version.
  </p><p>
    SQL syntax for prepared statements cannot be used in nested fashion.
    That is, a statement passed to
    <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> cannot itself be a
    <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a>,
    <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>, or
    <a href="sql-syntax.html#deallocate-prepare" title="12.7.3. DEALLOCATE PREPARE Syntax"><code class="literal">DEALLOCATE PREPARE</code></a> statement.
  </p><p>
    SQL syntax for prepared statements is distinct from using prepared
    statement API calls. For example, you cannot use the
    <a href="connectors-apis.html#mysql-stmt-prepare" title="20.9.7.20. mysql_stmt_prepare()"><code class="literal">mysql_stmt_prepare()</code></a> C API function
    to prepare a <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a>,
    <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>, or
    <a href="sql-syntax.html#deallocate-prepare" title="12.7.3. DEALLOCATE PREPARE Syntax"><code class="literal">DEALLOCATE PREPARE</code></a> statement.
  </p><p>
    SQL syntax for prepared statements cannot be used within stored
    routines (procedures or functions), or triggers. This restriction is
    lifted as of MySQL 5.0.13 for stored procedures, but not for stored
    functions or triggers. However, a cursor cannot be used for a
    dynamic statement that is prepared and executed with
    <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> and
    <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a>. The statement for a cursor
    is checked at cursor creation time, so the statement cannot be
    dynamic.
  </p><p>
    SQL syntax for prepared statements does not support multi-statements
    (that is, multiple statements within a single string separated by
    “<span class="quote"><code class="literal">;</code></span>” characters).
  </p><p>
    To write C programs that use the <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
    SQL statement to execute stored procedures that contain prepared
    statements, the <code class="literal">CLIENT_MULTI_RESULTS</code> flag must be
    enabled. This is because each <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax"><code class="literal">CALL</code></a>
    returns a result to indicate the call status, in addition to any
    result sets that might be returned by statements executed within the
    procedure.
  </p><p>
    <code class="literal">CLIENT_MULTI_RESULTS</code> can be enabled when you call
    <a href="connectors-apis.html#mysql-real-connect" title="20.9.3.52. mysql_real_connect()"><code class="literal">mysql_real_connect()</code></a>, either
    explicitly by passing the <code class="literal">CLIENT_MULTI_RESULTS</code>
    flag itself, or implicitly by passing
    <code class="literal">CLIENT_MULTI_STATEMENTS</code> (which also enables
    <code class="literal">CLIENT_MULTI_RESULTS</code>). For additional
    information, see <a href="sql-syntax.html#call" title="12.2.1. CALL Syntax">Section 12.2.1, “<code class="literal">CALL</code> Syntax”</a>.
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="prepare"></a>12.7.1. <code class="literal">PREPARE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2128752"></a><a class="indexterm" name="id2128761"></a><pre class="programlisting">PREPARE <em class="replaceable"><code>stmt_name</code></em> FROM <em class="replaceable"><code>preparable_stmt</code></em>
</pre><p>
      The <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a> statement prepares a
      statement and assigns it a name,
      <em class="replaceable"><code>stmt_name</code></em>, by which to refer to the
      statement later. Statement names are not case sensitive.
      <em class="replaceable"><code>preparable_stmt</code></em> is either a string
      literal or a user variable that contains the text of the
      statement. The text must represent a single SQL statement, not
      multiple statements. Within the statement,
      “<span class="quote"><code class="literal">?</code></span>” characters can be used as
      parameter markers to indicate where data values are to be bound to
      the query later when you execute it. The
      “<span class="quote"><code class="literal">?</code></span>” characters should not be
      enclosed within quotes, even if you intend to bind them to string
      values. Parameter markers can be used only where data values
      should appear, not for SQL keywords, identifiers, and so forth.
    </p><p>
      If a prepared statement with the given name already exists, it is
      deallocated implicitly before the new statement is prepared. This
      means that if the new statement contains an error and cannot be
      prepared, an error is returned and no statement with the given
      name exists.
    </p><p>
      A prepared statement is executed with
      <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> and released with
      <a href="sql-syntax.html#deallocate-prepare" title="12.7.3. DEALLOCATE PREPARE Syntax"><code class="literal">DEALLOCATE PREPARE</code></a>.
    </p><p>
      The scope of a prepared statement is the session within which it
      is created. Other sessions cannot see it.
    </p><p>
      For examples, see
      <a href="sql-syntax.html#sql-syntax-prepared-statements" title="12.7. SQL Syntax for Prepared Statements">Section 12.7, “SQL Syntax for Prepared Statements”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="execute"></a>12.7.2. <code class="literal">EXECUTE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2128898"></a><a class="indexterm" name="id2128907"></a><pre class="programlisting">EXECUTE <em class="replaceable"><code>stmt_name</code></em>
    [USING @<em class="replaceable"><code>var_name</code></em> [, @<em class="replaceable"><code>var_name</code></em>] ...]
</pre><p>
      After preparing a statement with
      <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a>, you execute it with an
      <a href="sql-syntax.html#execute" title="12.7.2. EXECUTE Syntax"><code class="literal">EXECUTE</code></a> statement that refers to
      the prepared statement name. If the prepared statement contains
      any parameter markers, you must supply a <code class="literal">USING</code>
      clause that lists user variables containing the values to be bound
      to the parameters. Parameter values can be supplied only by user
      variables, and the <code class="literal">USING</code> clause must name
      exactly as many variables as the number of parameter markers in
      the statement.
    </p><p>
      You can execute a given prepared statement multiple times, passing
      different variables to it or setting the variables to different
      values before each execution.
    </p><p>
      For examples, see
      <a href="sql-syntax.html#sql-syntax-prepared-statements" title="12.7. SQL Syntax for Prepared Statements">Section 12.7, “SQL Syntax for Prepared Statements”</a>.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="deallocate-prepare"></a>12.7.3. <code class="literal">DEALLOCATE PREPARE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2129021"></a><a class="indexterm" name="id2129030"></a><a class="indexterm" name="id2129039"></a><pre class="programlisting">{DEALLOCATE | DROP} PREPARE <em class="replaceable"><code>stmt_name</code></em>
</pre><p>
      To deallocate a prepared statement produced with
      <a href="sql-syntax.html#prepare" title="12.7.1. PREPARE Syntax"><code class="literal">PREPARE</code></a>, use a
      <a href="sql-syntax.html#deallocate-prepare" title="12.7.3. DEALLOCATE PREPARE Syntax"><code class="literal">DEALLOCATE PREPARE</code></a> statement that
      refers to the prepared statement name. Attempting to execute a
      prepared statement after deallocating it results in an error.
    </p><p>
      For examples, see
      <a href="sql-syntax.html#sql-syntax-prepared-statements" title="12.7. SQL Syntax for Prepared Statements">Section 12.7, “SQL Syntax for Prepared Statements”</a>.
    </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sql-syntax-compound-statements"></a>12.8. MySQL Compound-Statement Syntax</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#begin-end">12.8.1. <code class="literal">BEGIN ... END</code> Compound Statement Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#declare">12.8.2. <code class="literal">DECLARE</code> Syntax</a></span></dt><dt><span class="section"><a href="sql-syntax.html#variables-in-stored-programs">12.8.3. Variables in Stored Programs</a></span></dt><dt><span class="section"><a href="sql-syntax.html#conditions-and-handlers">12.8.4. Conditions and Handlers</a></span></dt><dt><span class="section"><a href="sql-syntax.html#cursors">12.8.5. Cursors</a></span></dt><dt><span class="section"><a href="sql-syntax.html#flow-control-constructs">12.8.6. Flow Control Constructs</a></span></dt><dt><span class="section"><a href="sql-syntax.html#return">12.8.7. <code class="literal">RETURN</code> Syntax</a></span></dt></dl></div><a class="indexterm" name="id2129125"></a><a class="indexterm" name="id2129134"></a><a class="indexterm" name="id2129147"></a><a class="indexterm" name="id2129156"></a><p>
    This section describes the syntax for the <code class="literal">BEGIN ...
    END</code> compound statement and other statements that can be
    used in the body of stored programs: Stored procedures and functions
    and triggers. These objects are defined in terms of SQL code that is
    stored on the server for later invocation (see
    <a href="stored-programs-views.html" title="Chapter 18. Stored Programs and Views">Chapter 18, <i>Stored Programs and Views</i></a>).
  </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="begin-end"></a>12.8.1. <code class="literal">BEGIN ... END</code> Compound Statement Syntax</h3></div></div></div><a class="indexterm" name="id2129204"></a><a class="indexterm" name="id2129213"></a><pre class="programlisting">[<em class="replaceable"><code>begin_label</code></em>:] BEGIN
    [<em class="replaceable"><code>statement_list</code></em>]
END [<em class="replaceable"><code>end_label</code></em>]
</pre><p>
      <code class="literal">BEGIN ... END</code> syntax is used for writing
      compound statements, which can appear within stored programs. A
      compound statement can contain multiple statements, enclosed by
      the <code class="literal">BEGIN</code> and <code class="literal">END</code> keywords.
      <em class="replaceable"><code>statement_list</code></em> represents a list of one
      or more statements, each terminated by a semicolon
      (<code class="literal">;</code>) statement delimiter.
      <em class="replaceable"><code>statement_list</code></em> is optional, which means
      that the empty compound statement (<code class="literal">BEGIN END</code>)
      is legal.
    </p><p>
      Use of multiple statements requires that a client is able to send
      statement strings containing the <code class="literal">;</code> statement
      delimiter. This is handled in the <a href="programs.html#mysql" title="4.5.1. mysql — The MySQL Command-Line Tool"><span><strong class="command">mysql</strong></span></a>
      command-line client with the <code class="literal">delimiter</code> command.
      Changing the <code class="literal">;</code> end-of-statement delimiter (for
      example, to <code class="literal">//</code>) allows <code class="literal">;</code> to
      be used in a program body. For an example, see
      <a href="stored-programs-views.html#stored-programs-defining" title="18.1. Defining Stored Programs">Section 18.1, “Defining Stored Programs”</a>.
    </p><p>
      A compound statement can be labeled.
      <em class="replaceable"><code>end_label</code></em> cannot be given unless
      <em class="replaceable"><code>begin_label</code></em> also is present. If both
      are present, they must be the same.
    </p><p>
      The optional <code class="literal">[NOT] ATOMIC</code> clause is not
      supported. This means that no transactional savepoint is set at
      the start of the instruction block and the
      <code class="literal">BEGIN</code> clause used in this context has no effect
      on the current transaction.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="declare"></a>12.8.2. <code class="literal">DECLARE</code> Syntax</h3></div></div></div><a class="indexterm" name="id2129392"></a><p>
      The <a href="sql-syntax.html#declare" title="12.8.2. DECLARE Syntax"><code class="literal">DECLARE</code></a> statement is used to
      define various items local to a program:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Local variables. See
          <a href="sql-syntax.html#variables-in-stored-programs" title="12.8.3. Variables in Stored Programs">Section 12.8.3, “Variables in Stored Programs”</a>.
        </p></li><li><p>
          Conditions and handlers. See
          <a href="sql-syntax.html#conditions-and-handlers" title="12.8.4. Conditions and Handlers">Section 12.8.4, “Conditions and Handlers”</a>.
        </p></li><li><p>
          Cursors. See <a href="sql-syntax.html#cursors" title="12.8.5. Cursors">Section 12.8.5, “Cursors”</a>.
        </p></li></ul></div><p>
      The <a href="http://dev.mysql.com/doc/refman/5.4/en/signal.html" target="_top"><code class="literal">SIGNAL</code></a> and
      <a href="http://dev.mysql.com/doc/refman/5.4/en/resignal.html" target="_top"><code class="literal">RESIGNAL</code></a> statements are not
      supported until MySQL 6.0.
    </p><p>
      <a href="sql-syntax.html#declare" title="12.8.2. DECLARE Syntax"><code class="literal">DECLARE</code></a> is allowed only inside a
      <code class="literal">BEGIN ... END</code> compound statement and must be at
      its start, before any other statements.
    </p><p>
      Declarations must follow a certain order. Cursors must be declared
      before declaring handlers, and variables and conditions must be
      declared before declaring either cursors or handlers.
    </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="variables-in-stored-programs"></a>12.8.3. Variables in Stored Programs</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#declare-local-variable">12.8.3.1. <code class="literal">DECLARE</code> for Local Variables</a></span></dt><dt><span class="section"><a href="sql-syntax.html#set-statement">12.8.3.2. Variable <code class="literal">SET</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#select-into-statement">12.8.3.3. <code class="literal">SELECT ... INTO</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#local-variable-scope">12.8.3.4. Scope and Resolution of Local Variables</a></span></dt></dl></div><p>
      You may declare and use variables within stored programs.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="declare-local-variable"></a>12.8.3.1. <code class="literal">DECLARE</code> for Local Variables</h4></div></div></div><pre class="programlisting">DECLARE <em class="replaceable"><code>var_name</code></em> [, <em class="replaceable"><code>var_name</code></em>] ... <em class="replaceable"><code>type</code></em> [DEFAULT <em class="replaceable"><code>value</code></em>]
</pre><p>
        This statement is used to declare local variables within stored
        programs. To provide a default value for the variable, include a
        <code class="literal">DEFAULT</code> clause. The value can be specified as
        an expression; it need not be a constant. If the
        <code class="literal">DEFAULT</code> clause is missing, the initial value
        is <code class="literal">NULL</code>.
      </p><p>
        Local variables are treated like stored routine parameters with
        respect to data type and overflow checking. See
        <a href="sql-syntax.html#create-procedure" title="12.1.9. CREATE PROCEDURE and
      CREATE FUNCTION Syntax">Section 12.1.9, “<code class="literal">CREATE PROCEDURE</code> and
      <code class="literal">CREATE FUNCTION</code> Syntax”</a>.
      </p><p>
        Local variable names are not case sensitive.
      </p><p>
        The scope of a local variable is within the <code class="literal">BEGIN ...
        END</code> block where it is declared. The variable can be
        referred to in blocks nested within the declaring block, except
        those blocks that declare a variable with the same name.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="set-statement"></a>12.8.3.2. Variable <code class="literal">SET</code> Statement</h4></div></div></div><a class="indexterm" name="id2129623"></a><pre class="programlisting">SET <em class="replaceable"><code>var_name</code></em> = <em class="replaceable"><code>expr</code></em> [, <em class="replaceable"><code>var_name</code></em> = <em class="replaceable"><code>expr</code></em>] ...
</pre><p>
        The <code class="literal">SET</code> statement in stored programs is an
        extended version of the general
        <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
        statement (see <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax">Section 12.5.4, “<code class="literal">SET</code> Syntax”</a>). Referenced
        variables may be ones declared inside a stored program, global
        system variables, or user-defined variables.
      </p><p>
        The <code class="literal">SET</code> statement in stored programs is
        implemented as part of the pre-existing
        <a href="sql-syntax.html#set-option" title="12.5.4. SET Syntax"><code class="literal">SET</code></a>
        syntax. This allows an extended syntax of <code class="literal">SET a=x, b=y,
        ...</code> where different variable types (locally declared
        variables, global and session server variables, user-defined
        variables) can be mixed. This also allows combinations of local
        variables and some options that make sense only for system
        variables; in that case, the options are recognized but ignored.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="select-into-statement"></a>12.8.3.3. <code class="literal">SELECT ... INTO</code> Statement</h4></div></div></div><a class="indexterm" name="id2129739"></a><pre class="programlisting">SELECT <em class="replaceable"><code>col_name</code></em> [, <em class="replaceable"><code>col_name</code></em>] ...
    INTO <em class="replaceable"><code>var_name</code></em> [, <em class="replaceable"><code>var_name</code></em>] ...
    <em class="replaceable"><code>table_expr</code></em>
</pre><p>
        <code class="literal">SELECT ... INTO</code> syntax enables selected
        columns to be stored directly into variables. The query should
        return a single row. If the query returns no rows, a warning
        with error code 1329 occurs (<code class="literal">No data</code>), and
        the variable values remain unchanged. If the query returns
        multiple rows, error 1172 occurs (<code class="literal">Result consisted of
        more than one row</code>). If it is possible that the
        statement may retrieve multiple rows, you can use <code class="literal">LIMIT
        1</code> to limit the result set to a single row.
      </p><pre class="programlisting">SELECT id,data INTO x,y FROM test.t1 LIMIT 1;
</pre><p>
        User variable names are not case sensitive. See
        <a href="language-structure.html#user-variables" title="8.4. User-Defined Variables">Section 8.4, “User-Defined Variables”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="local-variable-scope"></a>12.8.3.4. Scope and Resolution of Local Variables</h4></div></div></div><p>
        The scope of a local variable is within the <code class="literal">BEGIN ...
        END</code> block where it is declared. The variable can be
        referred to in blocks nested within the declaring block, except
        those blocks that declare a variable with the same name.
      </p><p>
        Local variable names should not be the same as column names. If
        an SQL statement, such as a <code class="literal">SELECT ... INTO</code>
        statement, contains a reference to a column and a declared local
        variable with the same name, MySQL currently interprets the
        reference as the name of a variable. For example, in the
        following statement, <code class="literal">xname</code> is interpreted as
        a reference to the <code class="literal">xname</code>
        <span class="emphasis"><em>variable</em></span> rather than the
        <code class="literal">xname</code> <span class="emphasis"><em>column</em></span>:
      </p><pre class="programlisting">CREATE PROCEDURE sp1 (x VARCHAR(5))
  BEGIN
    DECLARE xname VARCHAR(5) DEFAULT 'bob';
    DECLARE newname VARCHAR(5);
    DECLARE xid INT;

    SELECT xname,id INTO newname,xid
      FROM table1 WHERE xname = xname;
    SELECT newname;
  END;
</pre><p>
        When this procedure is called, the <code class="literal">newname</code>
        variable returns the value <code class="literal">'bob'</code> regardless
        of the value of the <code class="literal">table1.xname</code> column.
      </p><p>
        See also <a href="restrictions.html#stored-program-restrictions" title="D.1. Restrictions on Stored Routines and Triggers">Section D.1, “Restrictions on Stored Routines and Triggers”</a>.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="conditions-and-handlers"></a>12.8.4. Conditions and Handlers</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#declare-condition">12.8.4.1. <code class="literal">DECLARE</code> for Conditions</a></span></dt><dt><span class="section"><a href="sql-syntax.html#declare-handler">12.8.4.2. <code class="literal">DECLARE</code> for Handlers</a></span></dt></dl></div><p>
      Certain conditions may require specific handling. These conditions
      can relate to errors or warnings, as well as to general flow
      control inside a stored program.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="declare-condition"></a>12.8.4.1. <code class="literal">DECLARE</code> for Conditions</h4></div></div></div><a class="indexterm" name="id2129969"></a><pre class="programlisting">DECLARE <em class="replaceable"><code>condition_name</code></em> CONDITION FOR <em class="replaceable"><code>condition_value</code></em>

<em class="replaceable"><code>condition_value</code></em>:
    SQLSTATE [VALUE] <em class="replaceable"><code>sqlstate_value</code></em>
  | <em class="replaceable"><code>mysql_error_code</code></em>
</pre><p>
        The <code class="literal">DECLARE ... CONDITION</code> statement defines a
        named error condition. It specifies a condition that needs
        specific handling and associates a name with that condition. The
        name can be referred to in a subsequence <code class="literal">DECLARE ...
        HANDLER</code> statement. See
        <a href="sql-syntax.html#declare-handler" title="12.8.4.2. DECLARE for Handlers">Section 12.8.4.2, “<code class="literal">DECLARE</code> for Handlers”</a>.
      </p><p>
        A <em class="replaceable"><code>condition_value</code></em> for
        <code class="literal">DECLARE ... CONDITION</code> can be an SQLSTATE
        value (a 5-character string literal) or a MySQL error code (a
        number). You should not use SQLSTATE value
        <code class="literal">'00000'</code> or MySQL error code 0, because those
        indicate sucess rather than an error condition. For a list of
        SQLSTATE values and MySQL error codes, see
        <a href="error-handling.html#error-messages-server" title="B.3. Server Error Codes and Messages">Section B.3, “Server Error Codes and Messages”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="declare-handler"></a>12.8.4.2. <code class="literal">DECLARE</code> for Handlers</h4></div></div></div><a class="indexterm" name="id2130087"></a><pre class="programlisting">DECLARE <em class="replaceable"><code>handler_type</code></em> HANDLER
    FOR <em class="replaceable"><code>condition_value</code></em> [, <em class="replaceable"><code>condition_value</code></em>] ...
    <em class="replaceable"><code>statement</code></em>

<em class="replaceable"><code>handler_type</code></em>:
    CONTINUE
  | EXIT
  | UNDO

<em class="replaceable"><code>condition_value</code></em>:
    SQLSTATE [VALUE] <em class="replaceable"><code>sqlstate_value</code></em>
  | <em class="replaceable"><code>condition_name</code></em>
  | SQLWARNING
  | NOT FOUND
  | SQLEXCEPTION
  | <em class="replaceable"><code>mysql_error_code</code></em>
</pre><p>
        The <code class="literal">DECLARE ... HANDLER</code> statement specifies
        handlers that each may deal with one or more conditions. If one
        of these conditions occurs, the specified
        <em class="replaceable"><code>statement</code></em> is executed.
        <em class="replaceable"><code>statement</code></em> can be a simple statement
        (for example, <code class="literal">SET <em class="replaceable"><code>var_name</code></em> =
        <em class="replaceable"><code>value</code></em></code>), or it can be a
        compound statement written using <code class="literal">BEGIN</code> and
        <code class="literal">END</code> (see <a href="sql-syntax.html#begin-end" title="12.8.1. BEGIN ... END Compound Statement Syntax">Section 12.8.1, “<code class="literal">BEGIN ... END</code> Compound Statement Syntax”</a>).
      </p><p>
        For a <code class="literal">CONTINUE</code> handler, execution of the
        current program continues after execution of the handler
        statement. For an <code class="literal">EXIT</code> handler, execution
        terminates for the <code class="literal">BEGIN ... END</code> compound
        statement in which the handler is declared. (This is true even
        if the condition occurs in an inner block.) The
        <code class="literal">UNDO</code> handler type statement is not supported.
      </p><p>
        If a condition occurs for which no handler has been declared,
        the default action is <code class="literal">EXIT</code>.
      </p><p>
        A <em class="replaceable"><code>condition_value</code></em> for
        <code class="literal">DECLARE ... HANDLER</code> can be any of the
        following values:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            An SQLSTATE value (a 5-character string literal) or a MySQL
            error code (a number). You should not use SQLSTATE value
            <code class="literal">'00000'</code> or MySQL error code 0, because
            those indicate sucess rather than an error condition. For a
            list of SQLSTATE values and MySQL error codes, see
            <a href="error-handling.html#error-messages-server" title="B.3. Server Error Codes and Messages">Section B.3, “Server Error Codes and Messages”</a>.
          </p></li><li><p>
            A condition name previously specified with <code class="literal">DECLARE
            ... CONDITION</code>. See
            <a href="sql-syntax.html#declare-condition" title="12.8.4.1. DECLARE for Conditions">Section 12.8.4.1, “<code class="literal">DECLARE</code> for Conditions”</a>.
          </p></li><li><p>
            <code class="literal">SQLWARNING</code> is shorthand for the class of
            SQLSTATE values that begin with <code class="literal">'01'</code>.
          </p></li><li><p>
            <code class="literal">NOT FOUND</code> is shorthand for the class of
            SQLSTATE values that begin with <code class="literal">'02'</code>.
            This is relevant only the context of cursors and is used to
            control what happens when a cursor reaches the end of a data
            set. If no more rows are available, a No Data condition
            occurs with SQLSTATE value 02000. To detect this condition,
            you can set up a handler for it (or for a <code class="literal">NOT
            FOUND</code> condition). An example is shown in
            <a href="sql-syntax.html#cursors" title="12.8.5. Cursors">Section 12.8.5, “Cursors”</a>. This condition also occurs for
            <code class="literal">SELECT ... INTO
            <em class="replaceable"><code>var_list</code></em></code> statements
            that retrieve no rows.
          </p><p></p></li><li><p>
            <code class="literal">SQLEXCEPTION</code> is shorthand for the class
            of SQLSTATE values that do not begin with
            <code class="literal">'00'</code>, <code class="literal">'01'</code>, or
            <code class="literal">'02'</code>.
          </p></li></ul></div><p>
        Example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE test.t (s1 INT, PRIMARY KEY (s1));</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>delimiter //</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE PROCEDURE handlerdemo ()</code></strong>
    -&gt; <strong class="userinput"><code>BEGIN</code></strong>
    -&gt;   <strong class="userinput"><code>DECLARE CONTINUE HANDLER FOR SQLSTATE '23000' SET @x2 = 1;</code></strong>
    -&gt;   <strong class="userinput"><code>SET @x = 1;</code></strong>
    -&gt;   <strong class="userinput"><code>INSERT INTO test.t VALUES (1);</code></strong>
    -&gt;   <strong class="userinput"><code>SET @x = 2;</code></strong>
    -&gt;   <strong class="userinput"><code>INSERT INTO test.t VALUES (1);</code></strong>
    -&gt;   <strong class="userinput"><code>SET @x = 3;</code></strong>
    -&gt; <strong class="userinput"><code>END;</code></strong>
    -&gt; <strong class="userinput"><code>//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL handlerdemo()//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @x//</code></strong>
    +------+
    | @x   |
    +------+
    | 3    |
    +------+
    1 row in set (0.00 sec)
</pre><p>
        The example associates a handler with SQLSTATE value
        <code class="literal">'23000'</code>, which occurs for a duplicate-key
        error. Notice that <code class="literal">@x</code> is <code class="literal">3</code>
        after the procedure executes, which shows that execution
        continued to the end of the procedure. If the <code class="literal">DECLARE
        ... HANDLER</code> statement had not been present, MySQL
        would have taken the default path (<code class="literal">EXIT</code>)
        after the second <a href="sql-syntax.html#insert" title="12.2.5. INSERT Syntax"><code class="literal">INSERT</code></a> failed
        due to the <code class="literal">PRIMARY KEY</code> constraint, and
        <code class="literal">SELECT @x</code> would have returned
        <code class="literal">2</code>.
      </p><p>
        If you want to ignore a condition, you can declare a
        <code class="literal">CONTINUE</code> handler for it and associate it with
        an empty block. For example:
      </p><pre class="programlisting">DECLARE CONTINUE HANDLER FOR SQLWARNING BEGIN END;
</pre><p>
        The statement associated with a handler cannot use
        <a href="sql-syntax.html#iterate-statement" title="12.8.6.5. ITERATE
        Statement"><code class="literal">ITERATE</code></a>
        or
        <a href="sql-syntax.html#leave-statement" title="12.8.6.4. LEAVE
        Statement"><code class="literal">LEAVE</code></a>
        to refer to labels for blocks that enclose the handler
        declaration. That is, the scope of a block label does not
        include the code for handlers declared within the block.
        Consider the following example, where the
        <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>
        block has a label of <code class="literal">retry</code>:
      </p><pre class="programlisting">CREATE PROCEDURE p ()
BEGIN
  DECLARE i INT DEFAULT 3;
  retry:
    REPEAT
      BEGIN
        DECLARE CONTINUE HANDLER FOR SQLWARNING
          BEGIN
            ITERATE retry;  # illegal
          END;
      END;
      IF i &lt; 0 THEN
        LEAVE retry;        # legal
      END IF;
      SET i = i - 1;
    UNTIL FALSE END REPEAT;
END;
</pre><p>
        The label is in scope for the
        <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a>
        statement within the block. It is not in scope for the
        <code class="literal">CONTINUE</code> handler, so the reference there is
        invalid and results in an error:
      </p><pre class="programlisting">ERROR 1308 (42000): LEAVE with no matching label: retry
</pre><p>
        To avoid using references to outer labels in handlers, you can
        use these strategies:
      </p><div class="itemizedlist"><ul type="disc"><li><p>
            To leave the block, use an <code class="literal">EXIT</code> handler:
          </p><pre class="programlisting">DECLARE EXIT HANDLER FOR SQLWARNING BEGIN END;
</pre></li><li><p>
            To iterate, set a status variable in the handler that can be
            checked in the enclosing block to determine whether the
            handler was invoked. The following example uses the variable
            <code class="literal">done</code> for this purpose:
          </p><pre class="programlisting">CREATE PROCEDURE p ()
BEGIN
  DECLARE i INT DEFAULT 3;
  DECLARE done INT DEFAULT FALSE;
  retry:
    REPEAT
      BEGIN
        DECLARE CONTINUE HANDLER FOR SQLWARNING
          BEGIN
            SET done = TRUE;
          END;
      END;
      IF NOT done AND i &lt; 0 THEN
        LEAVE retry;
      END IF;
      SET i = i - 1;
    UNTIL FALSE END REPEAT;
END;
</pre></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="cursors"></a>12.8.5. Cursors</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#declare-cursor">12.8.5.1. <code class="literal">DECLARE</code> for Cursors</a></span></dt><dt><span class="section"><a href="sql-syntax.html#open">12.8.5.2. Cursor <code class="literal">OPEN</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#fetch">12.8.5.3. Cursor <code class="literal">FETCH</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#close">12.8.5.4. Cursor <code class="literal">CLOSE</code> Statement</a></span></dt></dl></div><a class="indexterm" name="id2130706"></a><p>
      Cursors are supported inside stored procedures and functions and
      triggers. The syntax is as in embedded SQL. Cursors in MySQL have
      these properties:
    </p><div class="itemizedlist"><ul type="disc"><li><p>
          Asensitive: The server may or may not make a copy of its
          result table
        </p></li><li><p>
          Read only: Not updatable
        </p></li><li><p>
          Nonscrollable: Can be traversed only in one direction and
          cannot skip rows
        </p></li></ul></div><p>
      Cursors must be declared before declaring handlers. Variables and
      conditions must be declared before declaring either cursors or
      handlers.
    </p><p>
      Example:
    </p><pre class="programlisting">CREATE PROCEDURE curdemo()
BEGIN
  DECLARE done INT DEFAULT 0;
  DECLARE a CHAR(16);
  DECLARE b,c INT;
  DECLARE cur1 CURSOR FOR SELECT id,data FROM test.t1;
  DECLARE cur2 CURSOR FOR SELECT i FROM test.t2;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

  OPEN cur1;
  OPEN cur2;

  REPEAT
    FETCH cur1 INTO a, b;
    FETCH cur2 INTO c;
    IF NOT done THEN
       IF b &lt; c THEN
          INSERT INTO test.t3 VALUES (a,b);
       ELSE
          INSERT INTO test.t3 VALUES (a,c);
       END IF;
    END IF;
  UNTIL done END REPEAT;

  CLOSE cur1;
  CLOSE cur2;
END
</pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="declare-cursor"></a>12.8.5.1. <code class="literal">DECLARE</code> for Cursors</h4></div></div></div><pre class="programlisting">DECLARE <em class="replaceable"><code>cursor_name</code></em> CURSOR FOR <em class="replaceable"><code>select_statement</code></em>
</pre><p>
        This statement declares a cursor. Multiple cursors may be
        declared in a stored program, but each cursor in a given block
        must have a unique name.
      </p><p>
        The <a href="sql-syntax.html#select" title="12.2.8. SELECT Syntax"><code class="literal">SELECT</code></a> statement cannot have
        an <code class="literal">INTO</code> clause.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="open"></a>12.8.5.2. Cursor <code class="literal">OPEN</code> Statement</h4></div></div></div><a class="indexterm" name="id2130848"></a><pre class="programlisting">OPEN <em class="replaceable"><code>cursor_name</code></em>
</pre><p>
        This statement opens a previously declared cursor.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="fetch"></a>12.8.5.3. Cursor <code class="literal">FETCH</code> Statement</h4></div></div></div><a class="indexterm" name="id2130908"></a><pre class="programlisting">FETCH <em class="replaceable"><code>cursor_name</code></em> INTO <em class="replaceable"><code>var_name</code></em> [, <em class="replaceable"><code>var_name</code></em>] ...
</pre><p>
        This statement fetches the next row (if a row exists) using the
        specified open cursor, and advances the cursor pointer.
      </p><p>
        If no more rows are available, a No Data condition occurs with
        SQLSTATE value 02000. To detect this condition, you can set up a
        handler for it (or for a <code class="literal">NOT FOUND</code>
        condition). An example is shown in <a href="sql-syntax.html#cursors" title="12.8.5. Cursors">Section 12.8.5, “Cursors”</a>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="close"></a>12.8.5.4. Cursor <code class="literal">CLOSE</code> Statement</h4></div></div></div><a class="indexterm" name="id2130992"></a><pre class="programlisting">CLOSE <em class="replaceable"><code>cursor_name</code></em>
</pre><p>
        This statement closes a previously opened cursor.
      </p><p>
        If not closed explicitly, a cursor is closed at the end of the
        compound statement in which it was declared.
      </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="flow-control-constructs"></a>12.8.6. Flow Control Constructs</h3></div></div></div><div class="toc"><dl><dt><span class="section"><a href="sql-syntax.html#if-statement">12.8.6.1. <code class="literal">IF</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#case-statement">12.8.6.2. <code class="literal">CASE</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#loop-statement">12.8.6.3. <code class="literal">LOOP</code> Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#leave-statement">12.8.6.4. <code class="literal">LEAVE</code>
        Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#iterate-statement">12.8.6.5. <code class="literal">ITERATE</code>
        Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#repeat-statement">12.8.6.6. <code class="literal">REPEAT</code>
        Statement</a></span></dt><dt><span class="section"><a href="sql-syntax.html#while-statement">12.8.6.7. <code class="literal">WHILE</code>
        Statement</a></span></dt></dl></div><p>
      MySQL supports the
      <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a>,
      <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>,
      <a href="sql-syntax.html#iterate-statement" title="12.8.6.5. ITERATE
        Statement"><code class="literal">ITERATE</code></a>,
      <a href="sql-syntax.html#leave-statement" title="12.8.6.4. LEAVE
        Statement"><code class="literal">LEAVE</code></a>
      <a href="sql-syntax.html#loop-statement" title="12.8.6.3. LOOP Statement"><code class="literal">LOOP</code></a>,
      <a href="sql-syntax.html#while-statement" title="12.8.6.7. WHILE
        Statement"><code class="literal">WHILE</code></a>,
      and
      <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>
      constructs for flow control within stored programs.
    </p><p>
      Many of these constructs contain other statements, as indicated by
      the grammar specifications in the following sections. Such
      constructs may be nested. For example, an
      <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a>
      statement might contain a
      <a href="sql-syntax.html#while-statement" title="12.8.6.7. WHILE
        Statement"><code class="literal">WHILE</code></a>
      loop, which itself contains a
      <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>
      statement.
    </p><p>
      <code class="literal">FOR</code> loops are not supported.
    </p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="if-statement"></a>12.8.6.1. <code class="literal">IF</code> Statement</h4></div></div></div><a class="indexterm" name="id2131153"></a><pre class="programlisting">IF <em class="replaceable"><code>search_condition</code></em> THEN <em class="replaceable"><code>statement_list</code></em>
    [ELSEIF <em class="replaceable"><code>search_condition</code></em> THEN <em class="replaceable"><code>statement_list</code></em>] ...
    [ELSE <em class="replaceable"><code>statement_list</code></em>]
END IF
</pre><p>
        <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a>
        implements a basic conditional construct. If the
        <em class="replaceable"><code>search_condition</code></em> evaluates to true,
        the corresponding SQL statement list is executed. If no
        <em class="replaceable"><code>search_condition</code></em> matches, the
        statement list in the <code class="literal">ELSE</code> clause is
        executed. Each <em class="replaceable"><code>statement_list</code></em>
        consists of one or more statements.
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          There is also an <a href="functions.html#function_if"><code class="literal">IF()</code></a>
          <span class="emphasis"><em>function</em></span>, which differs from the
          <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a>
          <span class="emphasis"><em>statement</em></span> described here. See
          <a href="functions.html#control-flow-functions" title="11.3. Control Flow Functions">Section 11.3, “Control Flow Functions”</a>.
        </p></div><p>
        An <code class="literal">IF ... END IF</code> block, like all other
        flow-control blocks used within stored programs, must be
        terminated with a semicolon, as shown in this example:

</p><pre class="programlisting">DELIMITER //

CREATE FUNCTION SimpleCompare(n INT, m INT)
  RETURNS VARCHAR(20)

  BEGIN
    DECLARE s VARCHAR(20);

    IF n &gt; m THEN SET s = '&gt;';
    ELSEIF n = m THEN SET s = '=';
    ELSE SET s = '&lt;';
    END IF;

    SET s = CONCAT(n, ' ', s, ' ', m);

    RETURN s;
  END //

DELIMITER ;
</pre><p>
      </p><p>
        As with other flow-control constructs, <code class="literal">IF ... END
        IF</code> blocks may be nested within other flow-control
        constructs, including other
        <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a>
        statements. Each
        <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a> must
        be terminated by its own <code class="literal">END IF</code> followed by a
        semicolon. You can use indentation to make nested flow-control
        blocks more easily readable by humans (although this is not
        required by MySQL), as shown here:

</p><pre class="programlisting">DELIMITER //

CREATE FUNCTION VerboseCompare (n INT, m INT)
  RETURNS VARCHAR(50)

  BEGIN
    DECLARE s VARCHAR(50);

    IF n = m THEN SET s = 'equals';
    ELSE
      IF n &gt; m THEN SET s = 'greater';
      ELSE SET s = 'less';
      END IF;

      SET s = CONCAT('is ', s, ' than');
    END IF;

    SET s = CONCAT(n, ' ', s, ' ', m, '.');

    RETURN s;
  END //

DELIMITER ;
</pre><p>

        In this example, the inner
        <a href="sql-syntax.html#if-statement" title="12.8.6.1. IF Statement"><code class="literal">IF</code></a> is
        evaluated only if <code class="literal">n</code> is not equal to
        <code class="literal">m</code>.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="case-statement"></a>12.8.6.2. <code class="literal">CASE</code> Statement</h4></div></div></div><a class="indexterm" name="id2131372"></a><pre class="programlisting">CASE <em class="replaceable"><code>case_value</code></em>
    WHEN <em class="replaceable"><code>when_value</code></em> THEN <em class="replaceable"><code>statement_list</code></em>
    [WHEN <em class="replaceable"><code>when_value</code></em> THEN <em class="replaceable"><code>statement_list</code></em>] ...
    [ELSE <em class="replaceable"><code>statement_list</code></em>]
END CASE
</pre><p>
        Or:
      </p><pre class="programlisting">CASE
    WHEN <em class="replaceable"><code>search_condition</code></em> THEN <em class="replaceable"><code>statement_list</code></em>
    [WHEN <em class="replaceable"><code>search_condition</code></em> THEN <em class="replaceable"><code>statement_list</code></em>] ...
    [ELSE <em class="replaceable"><code>statement_list</code></em>]
END CASE
</pre><p>
        The
        <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>
        statement for stored programs implements a complex conditional
        construct. If a <em class="replaceable"><code>search_condition</code></em>
        evaluates to true, the corresponding SQL statement list is
        executed. If no search condition matches, the statement list in
        the <code class="literal">ELSE</code> clause is executed. Each
        <em class="replaceable"><code>statement_list</code></em> consists of one or
        more statements.
      </p><p>
        If no <em class="replaceable"><code>when_value</code></em> or
        <em class="replaceable"><code>search_condition</code></em> matches the value
        tested and the
        <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>
        statement contains no <code class="literal">ELSE</code> clause, a
        <span class="errortext">Case not found for CASE statement</span> error
        results.
      </p><p>
        Each <em class="replaceable"><code>statement_list</code></em> consists of one
        or more statements; an empty
        <em class="replaceable"><code>statement_list</code></em> is not allowed. To
        handle situations where no value is matched by any
        <code class="literal">WHEN</code> clause, use an <code class="literal">ELSE</code>
        containing an empty <code class="literal">BEGIN ... END</code> block, as
        shown in this example:

</p><pre class="programlisting">DELIMITER |

CREATE PROCEDURE p()
  BEGIN
    DECLARE v INT DEFAULT 1;

    CASE v
      WHEN 2 THEN SELECT v;
      WHEN 3 THEN SELECT 0;
      ELSE
        BEGIN
        END;
    END CASE;
  END;
  |
</pre><p>

        (The indentation used here in the <code class="literal">ELSE</code> clause
        is for purposes of clarity only, and is not otherwise
        significant.)
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The syntax of the
          <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>
          <span class="emphasis"><em>statement</em></span> used inside stored programs
          differs slightly from that of the SQL
          <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>
          <span class="emphasis"><em>expression</em></span> described in
          <a href="functions.html#control-flow-functions" title="11.3. Control Flow Functions">Section 11.3, “Control Flow Functions”</a>. The
          <a href="sql-syntax.html#case-statement" title="12.8.6.2. CASE Statement"><code class="literal">CASE</code></a>
          statement cannot have an <code class="literal">ELSE NULL</code> clause,
          and it is terminated with <code class="literal">END CASE</code> instead
          of <code class="literal">END</code>.
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="loop-statement"></a>12.8.6.3. <code class="literal">LOOP</code> Statement</h4></div></div></div><a class="indexterm" name="id2131636"></a><pre class="programlisting">[<em class="replaceable"><code>begin_label</code></em>:] LOOP
    <em class="replaceable"><code>statement_list</code></em>
END LOOP [<em class="replaceable"><code>end_label</code></em>]
</pre><p>
        <a href="sql-syntax.html#loop-statement" title="12.8.6.3. LOOP Statement"><code class="literal">LOOP</code></a>
        implements a simple loop construct, enabling repeated execution
        of the statement list, which consists of one or more statements,
        each terminated by a semicolon (<code class="literal">;</code>) statement
        delimiter. The statements within the loop are repeated until the
        loop is exited; usually this is accomplished with a
        <a href="sql-syntax.html#leave-statement" title="12.8.6.4. LEAVE
        Statement"><code class="literal">LEAVE</code></a>
        statement.
      </p><p>
        A <a href="sql-syntax.html#loop-statement" title="12.8.6.3. LOOP Statement"><code class="literal">LOOP</code></a>
        statement can be labeled. <em class="replaceable"><code>end_label</code></em>
        cannot be given unless <em class="replaceable"><code>begin_label</code></em>
        also is present. If both are present, they must be the same.
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="leave-statement"></a>12.8.6.4. <code class="literal">LEAVE</code>
        Statement</h4></div></div></div><a class="indexterm" name="id2131743"></a><pre class="programlisting">LEAVE <em class="replaceable"><code>label</code></em>
</pre><p>
        This statement is used to exit the flow control construct that
        has the given label. It can be used within <code class="literal">BEGIN ...
        END</code> or loop constructs
        (<a href="sql-syntax.html#loop-statement" title="12.8.6.3. LOOP Statement"><code class="literal">LOOP</code></a>,
        <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>,
        <a href="sql-syntax.html#while-statement" title="12.8.6.7. WHILE
        Statement"><code class="literal">WHILE</code></a>).
      </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="iterate-statement"></a>12.8.6.5. <code class="literal">ITERATE</code>
        Statement</h4></div></div></div><a class="indexterm" name="id2131830"></a><pre class="programlisting">ITERATE <em class="replaceable"><code>label</code></em>
</pre><p>
        <a href="sql-syntax.html#iterate-statement" title="12.8.6.5. ITERATE
        Statement"><code class="literal">ITERATE</code></a>
        can appear only within
        <a href="sql-syntax.html#loop-statement" title="12.8.6.3. LOOP Statement"><code class="literal">LOOP</code></a>,
        <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>,
        and
        <a href="sql-syntax.html#while-statement" title="12.8.6.7. WHILE
        Statement"><code class="literal">WHILE</code></a>
        statements.
        <a href="sql-syntax.html#iterate-statement" title="12.8.6.5. ITERATE
        Statement"><code class="literal">ITERATE</code></a>
        means “<span class="quote">do the loop again.</span>”
      </p><p>
        Example:
      </p><pre class="programlisting">CREATE PROCEDURE doiterate(p1 INT)
BEGIN
  label1: LOOP
    SET p1 = p1 + 1;
    IF p1 &lt; 10 THEN ITERATE label1; END IF;
    LEAVE label1;
  END LOOP label1;
  SET @x = p1;
END
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="repeat-statement"></a>12.8.6.6. <code class="literal">REPEAT</code>
        Statement</h4></div></div></div><a class="indexterm" name="id2131947"></a><a class="indexterm" name="id2131956"></a><pre class="programlisting">[<em class="replaceable"><code>begin_label</code></em>:] REPEAT
    <em class="replaceable"><code>statement_list</code></em>
UNTIL <em class="replaceable"><code>search_condition</code></em>
END REPEAT [<em class="replaceable"><code>end_label</code></em>]
</pre><p>
        The statement list within a
        <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>
        statement is repeated until the
        <em class="replaceable"><code>search_condition</code></em> is true. Thus, a
        <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>
        always enters the loop at least once.
        <em class="replaceable"><code>statement_list</code></em> consists of one or
        more statements, each terminated by a semicolon
        (<code class="literal">;</code>) statement delimiter.
      </p><p>
        A
        <a href="sql-syntax.html#repeat-statement" title="12.8.6.6. REPEAT
        Statement"><code class="literal">REPEAT</code></a>
        statement can be labeled. <em class="replaceable"><code>end_label</code></em>
        cannot be given unless <em class="replaceable"><code>begin_label</code></em>
        also is present. If both are present, they must be the same.
      </p><p>
        Example:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>delimiter //</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE PROCEDURE dorepeat(p1 INT)</code></strong>
    -&gt; <strong class="userinput"><code>BEGIN</code></strong>
    -&gt;   <strong class="userinput"><code>SET @x = 0;</code></strong>
    -&gt;   <strong class="userinput"><code>REPEAT SET @x = @x + 1; UNTIL @x &gt; p1 END REPEAT;</code></strong>
    -&gt; <strong class="userinput"><code>END</code></strong>
    -&gt; <strong class="userinput"><code>//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL dorepeat(1000)//</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @x//</code></strong>
+------+
| @x   |
+------+
| 1001 |
+------+
1 row in set (0.00 sec)
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="while-statement"></a>12.8.6.7. <code class="literal">WHILE</code>
        Statement</h4></div></div></div><a class="indexterm" name="id2132147"></a><pre class="programlisting">[<em class="replaceable"><code>begin_label</code></em>:] WHILE <em class="replaceable"><code>search_condition</code></em> DO
    <em class="replaceable"><code>statement_list</code></em>
END WHILE [<em class="replaceable"><code>end_label</code></em>]
</pre><p>
        The statement list within a
        <a href="sql-syntax.html#while-statement" title="12.8.6.7. WHILE
        Statement"><code class="literal">WHILE</code></a>
        statement is repeated as long as the
        <em class="replaceable"><code>search_condition</code></em> is true.
        <em class="replaceable"><code>statement_list</code></em> consists of one or
        more statements.
      </p><p>
        A
        <a href="sql-syntax.html#while-statement" title="12.8.6.7. WHILE
        Statement"><code class="literal">WHILE</code></a>
        statement can be labeled. <em class="replaceable"><code>end_label</code></em>
        cannot be given unless <em class="replaceable"><code>begin_label</code></em>
        also is present. If both are present, they must be the same.
      </p><p>
        Example:
      </p><pre class="programlisting">CREATE PROCEDURE dowhile()
BEGIN
  DECLARE v1 INT DEFAULT 5;

  WHILE v1 &gt; 0 DO
    ...
    SET v1 = v1 - 1;
  END WHILE;
END
</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="return"></a>12.8.7. <code class="literal">RETURN</code> Syntax</h3></div></div></div><a class="indexterm" name="id2132271"></a><pre class="programlisting">RETURN <em class="replaceable"><code>expr</code></em>
</pre><p>
      The <a href="sql-syntax.html#return" title="12.8.7. RETURN Syntax"><code class="literal">RETURN</code></a> statement terminates
      execution of a stored function and returns the value
      <em class="replaceable"><code>expr</code></em> to the function caller. There must
      be at least one <a href="sql-syntax.html#return" title="12.8.7. RETURN Syntax"><code class="literal">RETURN</code></a> statement in
      a stored function. There may be more than one if the function has
      multiple exit points.
    </p><p>
      This statement is not used in stored procedures or triggers.
    </p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="storage-engines.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 11. Functions and Operators </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 13. Storage Engines</td></tr></table></div></body></html>
