!function(a){var b={},c={},d=function(a,b){function c(b,c){var d=a[b];a[b]=a[c],a[c]=d}function d(b,d,f){var g=d,h=a[b];c(b,f);for(var i=d;f>i;i++)(e(a[i],h)||!e(h,a[i])&&i%2==1)&&(c(i,g),g++);return c(f,g),g}var e=null,a=b?a.slice(0):a;this.setCompare=function(a){e=a},this.run=function(b,c){var e=null;return"number"!=typeof b&&(b=0),"number"!=typeof c&&(c=a.length-1),c>b&&(e=b+Math.ceil(.5*(c-b)),newPivot=d(e,b,c),this.run(b,newPivot-1),this.run(newPivot+1,c)),a}},e=function(){this.isIndexDepth=function(a){return"string"==typeof a&&-1!=a.indexOf(".")?!0:!1},this.getIndexList=function(a){var b=[],c=""+a;if(1==c.length)b[0]=parseInt(a);else for(var d=c.split("."),e=0;e<d.length;e++)b[e]=parseInt(d[e]);return b},this.changeIndex=function(a,b,c){for(var d=this.getIndexList(c).length,e=this.getIndexList(a),f=this.getIndexList(b),g=0;d>g;g++)e.shift();return f.concat(e).join(".")},this.getNextIndex=function(a){var b=this.getIndexList(a),c=b.pop()+1;return b.push(c),b.join(".")},this.getParentIndex=function(a){if(!this.isIndexDepth(a))return null;var b=this.getIndexList(a);return 2==b.length?""+b[0]:b.length>2?(b.pop(),b.join(".")):void 0}},f={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,g,h,i,j="",k=0;for(a=f._utf8_encode(a);k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=b>>2,g=(3&b)<<4|c>>4,h=(15&c)<<2|d>>6,i=63&d,isNaN(c)?h=i=64:isNaN(d)&&(i=64),j=j+f._keyStr.charAt(e)+f._keyStr.charAt(g)+f._keyStr.charAt(h)+f._keyStr.charAt(i);return j},decode:function(a){var b,c,d,e,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)e=f._keyStr.indexOf(a.charAt(k++)),g=f._keyStr.indexOf(a.charAt(k++)),h=f._keyStr.indexOf(a.charAt(k++)),i=f._keyStr.indexOf(a.charAt(k++)),b=e<<2|g>>4,c=(15&g)<<4|h>>2,d=(3&h)<<6|i,j+=String.fromCharCode(b),64!=h&&(j+=String.fromCharCode(c)),64!=i&&(j+=String.fromCharCode(d));return j=f._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b=String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191),c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},g=function(a,b,c){var d={},e={},f=Array.prototype,g=f.slice,h=f.forEach,i={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var j in i)i[i[j]]=j;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,l=/\\(\\|'|r|n|t|u2028|u2029)/g,m=/.^/,n=function(a){return a.replace(l,function(a,b){return i[b]})},o=d.each=d.forEach=function(a,b,c){if(null!=a)if(h&&a.forEach===h)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;g>f;f++)if(f in a&&b.call(c,a[f],f,a)===e)return}else for(var i in a)if(d.has(a,i)&&b.call(c,a[i],i,a)===e)return};return d.has=function(a,b){return hasOwnProperty.call(a,b)},d.defaults=function(a){return o(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},d.templateSettings={evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g},d.template=function(a,b,c){c=d.defaults(c||{},d.templateSettings);var e="__p+='"+a.replace(k,function(a){return"\\"+i[a]}).replace(c.escape||m,function(a,b){return"'+\n_.escape("+n(b)+")+\n'"}).replace(c.interpolate||m,function(a,b){return"'+\n("+n(b)+")+\n'"}).replace(c.evaluate||m,function(a,b){return"';\n"+n(b)+"\n;__p+='"})+"';\n";c.variable||(e="with(obj||{}){\n"+e+"}\n"),e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n";var f=new Function(c.variable||"obj","_",e);if(b)return f(b,d);var g=function(a){return f.call(this,a,d)};return g.source="function("+(c.variable||"obj")+"){\n"+e+"}",g},d.template(a,b,c)},h=b.util={browser:{webkit:window.webkitURL?!0:!1,mozilla:window.mozInnerScreenX?!0:!1,msie:-1!=navigator.userAgent.indexOf("Trident")?!0:!1},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),scrollWidth:function(){var a=$(".jui").size()>0&&this.browser.webkit?!0:!1,b=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');$("body").append(b);var c=$("div",b).innerWidth();b.css("overflow-y","auto");var d=$("div",b).innerWidth();return $(b).remove(),a?10:c-d},inherit:function(a,b){a.prototype=new b,a.prototype.constructor=a,a.prototype.parent=a.prototype},extend:function(a,b){if(!b||"object"!=typeof b)return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a},pxToInt:function(a){return"string"==typeof a&&-1!=a.indexOf("px")?parseInt(a.split("px").join("")):a},clone:function(a){var b=$.isArray(a)?[]:{};for(var c in a)b[c]="object"==typeof a[c]?this.clone(a[c]):a[c];return b},sort:function(a){return new d(a)},runtime:function(a,b){var c=(new Date).getTime();b();var d=(new Date).getTime();console.log(a+" : "+(d-c)+"ms")},template:function(a,b){return b?g(a,b):g(a)},resize:function(a,b){var c=function(){var c=0;return function(){clearTimeout(c),c=setTimeout(a,b)}}();$(window).resize(function(){c()})},index:function(){return new e},chunk:function(a,b){for(var c=[],d=0,e=a.length;e>d;)c.push(a.slice(d,d+=b));return c},typeCheck:function(a,b){function c(a,b){return{string:"string"==typeof b?!0:!1,integer:"number"==typeof b&&b%1==0?!0:!1,"float":"number"==typeof b&&b%1!=0?!0:!1,number:"number"==typeof b?!0:!1,object:"object"==typeof b?!0:!1,"function":"function"==typeof b?!0:!1,array:null!=b&&"object"==typeof b&&"number"==typeof b.length?!0:!1,"boolean":"boolean"==typeof b?!0:!1,undefined:"undefined"==typeof b?!0:!1,"null":null===b?!0:!1}[a]}if("object"==typeof a&&a.length){for(var d=a,e=0;e<d.length;e++)if(c(d[e],b))return!0;return!1}return c(a,b)},typeCheckObj:function(a,b){if("object"==typeof a){var c=this;for(var d in a){var e=a[d];"function"==typeof e&&!function(d,e){a[d]=function(){for(var a=arguments,f=b[d],g=0;g<a.length;g++)if(!c.typeCheck(f[g],a[g]))throw new Error("JUI_CRITICAL_ERR: the "+g+"th parameter is not a "+f[g]+" ("+name+")");return e.apply(this,a)}}(d,e)}}},dataToCsv:function(a,b,c){for(var d="",e=c?c:b.length,f=-1;e>f;f++){for(var g=[],h=0;h<a.length;h++)a[h]&&g.push(-1==f?a[h]:b[f][a[h]]);d+=g.join(",")+"\n"}return d},dataToCsv2:function(a){for(var b="",c=$.extend({fields:null,rows:null,names:null,count:this.typeCheck("integer",a.count)?a.count:a.rows.length},a),d=-1;d<c.count;d++){for(var e=[],f=0;f<c.fields.length;f++)c.fields[f]&&e.push(-1==d?c.names&&c.names[f]?c.names[f]:c.fields[f]:c.rows[d][c.fields[f]]);b+=e.join(",")+"\n"}return b},fileToCsv:function(a,b){var c=new FileReader;c.onload=function(a){"function"==typeof b&&b(a.target.result)},c.readAsText(a)},csvToBase64:function(a){return"data:application/octet-stream;base64,"+f.encode(a)},csvToData:function(a,b){for(var c=[],d=b.split("\n"),e=1;e<d.length;e++)if(""!=d[e]){for(var f=d[e].split(","),g={},h=0;h<a.length;h++)g[a[h]]=f[h];c.push(g)}return c},getCsvFields:function(a,b){for(var c=b?b:a,d=0;d<c.length;d++)isNaN(c[d])||(c[d]=a[c[d]]);return c},dateFormat:function(a,b,c){function d(a,b){var c=a+"";for(b=b||2;c.length<b;)c="0"+c;return c}var e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],f=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=c?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+i),b=b.replace(/(^|[^\\])yy/g,"$1"+i.toString().substr(2,2)),b=b.replace(/(^|[^\\])y/g,"$1"+i);var j=(c?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]),b=b.replace(/(^|[^\\])MMM/g,"$1"+f[0]),b=b.replace(/(^|[^\\])MM/g,"$1"+d(j)),b=b.replace(/(^|[^\\])M/g,"$1"+j);var k=c?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+g[0]),b=b.replace(/(^|[^\\])ddd/g,"$1"+h[0]),b=b.replace(/(^|[^\\])dd/g,"$1"+d(k)),b=b.replace(/(^|[^\\])d/g,"$1"+k);var l=c?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+d(l)),b=b.replace(/(^|[^\\])H/g,"$1"+l);var m=l>12?l-12:0==l?12:l;b=b.replace(/(^|[^\\])hh+/g,"$1"+d(m)),b=b.replace(/(^|[^\\])h/g,"$1"+m);var n=c?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,"$1"+d(n)),b=b.replace(/(^|[^\\])m/g,"$1"+n);var o=c?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+d(o)),b=b.replace(/(^|[^\\])s/g,"$1"+o);var p=c?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+d(p,3)),p=Math.round(p/10),b=b.replace(/(^|[^\\])ff/g,"$1"+d(p)),p=Math.round(p/10),b=b.replace(/(^|[^\\])f/g,"$1"+p);var q=12>l?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+q),b=b.replace(/(^|[^\\])T/g,"$1"+q.charAt(0));var r=q.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+r),b=b.replace(/(^|[^\\])t/g,"$1"+r.charAt(0));var s=-a.getTimezoneOffset(),t=c||!s?"Z":s>0?"+":"-";if(!c){s=Math.abs(s);var u=Math.floor(s/60),v=s%60;t+=d(u)+":"+d(v)}b=b.replace(/(^|[^\\])K/g,"$1"+t);var w=(c?a.getUTCDay():a.getDay())+1;return b=b.replace(new RegExp(g[0],"g"),g[w]),b=b.replace(new RegExp(h[0],"g"),h[w]),b=b.replace(new RegExp(e[0],"g"),e[j]),b=b.replace(new RegExp(f[0],"g"),f[j]),b=b.replace(/\\(.)/g,"$1")},btoa:f.encode,atob:f.decode},i=function(a){for(var c=[],d=0;d<a.length;d++)if(c.push(b[a[d]]),!h.typeCheck(["function","object"],c[d]))throw new Error("JUI_CRITICAL_ERR: '"+a[d]+"' is not loaded");return c};a.jui={ready:function(){var a=[],c=2==arguments.length?arguments[1]:arguments[0],d=2==arguments.length?arguments[0]:null;if(!h.typeCheck(["array","null"],d)||!h.typeCheck("function",c))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");$(function(){a=d?i(d):[b.ui,b.uix,h],c.apply(null,a)})},defineUI:function(a,d,e,f){if(!(h.typeCheck("string",a)&&h.typeCheck("array",d)&&h.typeCheck("function",e)&&h.typeCheck("string",f)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(h.typeCheck("function",b[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");if(!h.typeCheck("function",b[f]))throw new Error("JUI_CRITICAL_ERR: Parents are the only function");if(c[f]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");if(-1==a.indexOf("."))throw new Error("JUI_CRITICAL_ERR: UI grouping rule must be followed");var g=i(d),j=a.split("."),k=e.apply(null,g);if(2!=j.length)throw new Error("JUI_CRITICAL_ERR: UI naming rule is incorrect");h.typeCheck("undefined",b[j[0]])&&(b[j[0]]={}),h.inherit(k,b[f]),b[j[0]][j[1]]=b.core.init({type:j[1],"class":k}),b[a]=b[j[0]][j[1]]},define:function(a,d,e,f){if(!(h.typeCheck("string",a)&&h.typeCheck("array",d)&&h.typeCheck("function",e)&&h.typeCheck(["string","undefined"],f)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(h.typeCheck("function",b[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");var g=i(d),j=e.apply(null,g);if(h.typeCheck("function",b[f])){if(c[f]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");h.inherit(j,b[f])}b[a]=j,c[a]=!0},include:function(a){return b[a]},includeAll:function(){var a=[];for(var c in b)a.push(b[c]);return a},log:function(){var a=window.open(this.logUrl,"JUIM","width=800, height=600, toolbar=no, menubar=no, resizable=yes");return jui.debugAll(function(b,c){a.log(b,c)}),a},logUrl:"jui.mng.html"}}(window),jui.define("core",["util"],function(a){var b=new function(){var a=[],c=[];this.add=function(b){a.push(b)},this.get=function(b){var c=[];if(!isNaN(b))return a[b];if("string"==typeof b)for(var d=0;d<a.length;d++)b==a[d].type&&c.push(a[d]);return c},this.getAll=function(){return a},this.size=function(){return a.length},this.debug=function(a,b,c,d){if(a.__proto__){var e=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var f in a){var g=a[f];"function"==typeof g&&-1==$.inArray(f,e)&&!function(c,e,f,g){a.__proto__[c]=function(){var a=Date.now(),h=e.apply(this,arguments),i=Date.now();return"function"==typeof d?d({type:jui.get(b).type,name:c,c_index:f,u_index:g,time:i-a},arguments):(console.log(isNaN(f)||isNaN(g)?"NAME("+c+"), TIME("+(i-a)+"ms), ARGUMENTS...":"TYPE("+jui.get(b).type+"), NAME("+c+"), INDEX("+f+":"+g+"), TIME("+(i-a)+"ms), ARGUMENTS..."),console.log(arguments),console.log("")),h}}(f,g,b,c)}}},this.debugAll=function(b){for(var c=0;c<a.length;c++)for(var d=a[c].list,e=0;e<d.length;e++)this.debug(d[e],c,e,b)},this.addClass=function(a){c.push(a)},this.getClass=function(a){if(!isNaN(a))return c[a];if("string"==typeof a)for(var b=0;b<c.length;b++)if(a==c[b].type)return c[b];return null},this.getClassAll=function(){return c},this.create=function(a,c,d){var e=b.getClass(a)["class"];return e(c,d)}},c=function(){function b(a){for(var b=["webkit","moz","MS","o",""],c=0;c<b.length;c++){var d=a.type;b[c]||(d=d.toLowerCase()),$(a.target).on(b[c]+d,a.callback)}f.push(a)}function c(a){a.callback&&!a.children?$(a.target).on(a.type,a.callback):$(a.target).on(a.type,a.children,a.callback),f.push(a)}function d(a){a.callback&&!a.children?$(a.target).on(e(a.type),a.callback):$(a.target).on(e(a.type),a.children,a.callback),f.push(a)}function e(a){return{click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}[a]}var f=[];this.add=function(e){var f={target:e[0],type:e[1]};a.typeCheck("function",e[2])?f=$.extend(f,{callback:e[2]}):a.typeCheck("string",e[2])&&(f=$.extend(f,{children:e[2],callback:e[3]}));for(var g=a.typeCheck("array",f.type)?f.type:[f.type],h=0;h<g.length;h++)f.type=g[h],-1!=f.type.toLowerCase().indexOf("animation")?b(f):("body"!=f.target&&f.target!=window&&$(f.target).unbind(f.type),a.isTouch?d(f):c(f))},this.trigger=function(b,c){$(b).trigger(a.isTouch?e(c):c)},this.get=function(a){return f[a]},this.getAll=function(){return f},this.size=function(){return f.length}},d=function(){var b=null;this.emit=function(a,b){for(var c=null,d=0;d<this.event.length;d++){var e=this.event[d];e.type==a.toLowerCase()&&(c="object"==typeof b&&void 0!=b.length?e.callback.apply(this,b):e.callback.call(this,b))}return c},this.on=function(a,b){("string"==typeof a||"object"==typeof b)&&this.event.push({type:a.toLowerCase(),callback:b})},this.addEvent=function(){this.listen.add(arguments)},this.addTrigger=function(a,b){this.listen.trigger(a,b)},this.addValid=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){for(var e=arguments,f=0;f<e.length;f++)if(!a.typeCheck(c[f],e[f]))throw new Error("JUI_CRITICAL_ERR: the "+f+"th parameter is not a "+c[f]+" ("+b+")");return d.apply(this,e)}}},this.callBefore=function(a,b){if(this.__proto__){var c=this.__proto__[a];this.__proto__[a]=function(){var a=arguments;return"function"!=typeof b?c.apply(this,a):b.apply(this,a)!==!1?c.apply(this,a):void 0}}},this.callAfter=function(a,b){if(this.__proto__){var c=this.__proto__[a];this.__proto__[a]=function(){var a=arguments,d=c.apply(this,a);return"function"==typeof b&&d!==!1&&b.apply(this,a),d}}},this.callDelay=function(a,b){function c(a,c){var e=d.apply(a,c);"function"==typeof b.after&&e!==!1&&b.after.apply(a,c)}if(this.__proto__){var d=this.__proto__[a],e=isNaN(b.delay)?0:b.delay;this.__proto__[a]=function(){var a=this,d=arguments;"function"==typeof b.before&&b.before.apply(a,d),e>0?setTimeout(function(){c(a,d)},e):c(a,d)}}},this.setTpl=function(b,c){this.tpl[b]=a.template(c)},this.setVo=function(){this.options.vo&&(null!=b&&b.reload(),b=$(this.selector).jbinder(),this.bind=b)},this.setOption=function(a,b){if("object"==typeof a)for(var c in a)this.options[c]=a[c];else this.options[a]=b}};return d.build=function(d){function e(a,b){var c=["event","tpl","vo"],d=[],e=[];for(var f in a)d.push(f);for(var f in b)e.push(f);for(var g=0;g<e.length;g++){var h=e[g];if(-1==$.inArray(h,d)&&-1==$.inArray(h,c))throw new Error("JUI_CRITICAL_ERR: '"+h+"' is not an option")}}return function(f,g){var h=$(f),i=[],j=a.typeCheck("function",d["class"].setting)?d["class"].setting():{};return h.each(function(b){var k=new d["class"],l=a.typeCheck("object",j.options)?j.options:{};e(l,g);var m=$.extend(!0,l,g);if(m.tpl=a.typeCheck("object",m.tpl)?m.tpl:{},k.init.prototype=k,k.init.prototype.selector=h.selector,k.init.prototype.root=this,k.init.prototype.options=m,k.init.prototype.tpl={},k.init.prototype.event=new Array,k.init.prototype.listen=new c,k.init.prototype.timestamp=Date.now(),k.init.prototype.index=0==h.size()?null:b,$("script").each(function(){if(f==$(this).data("jui")||f==$(this).data("vo")){var a=$(this).data("tpl");if(""==a)throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required");m.tpl[a]=$(this).html()}}),a.typeCheck("object",m.tpl))for(var n in m.tpl){var o=m.tpl[n];a.typeCheck("string",o)&&""!=o&&(k.init.prototype.tpl[n]=a.template(o))}var p=new k.init,q=a.typeCheck("object",j.valid)?j.valid:{},r=a.typeCheck("object",j.animate)?j.animate:{};if(a.typeCheck("object",p.options.event))for(var s in p.options.event)p.on(s,p.options.event[s]);for(var s in q)a.typeCheck("array",q[s])&&p.addValid(s,q[s]);if(m.animate===!0)for(var s in r)a.typeCheck("object",r[s])&&p.callDelay(s,r[s]);i[b]=p}),b.add({type:d.type,list:i,selector:f,options:g,index:b.size()}),1==i.length?i[0]:i}},d.init=function(a){var c=null;return"object"==typeof a&&(c=d.build(a),b.addClass({type:a.type,"class":c})),c},window.jui="object"==typeof jui?$.extend(jui,b):b,d}),jui.defineUI("ui.button",[],function(){var a=function(a,b,c){this.data={index:0,value:"",elem:null},this.ui=a,this.element=b,this.options=$.extend({index:0,value:""},c),this._setting=function(a,b,c){function d(a,b){var c=$(b).attr("value"),d=$(b).text();f.data={index:a,value:c,text:d},$(b).addClass(g)}function e(a){$(a).removeClass(g)}var f=this,g="active",h=this.options.index,i=this.options.value;$(f.element).find(".btn").each(function(f){"event"==a?b.currentTarget==this?d(f,this):e(this):"init"==a&&("value"==c?i==$(this).attr("value")?d(f,this):e(this):h==f?d(f,this):e(this))})},this.init=function(){var a=this;this.ui.addEvent(a.element,"click",".btn",function(b){a._setting("event",b),a.ui.emit("change",[a.data,b]),b.preventDefault()}),""!=this.options.value?this._setting("init",this.options.value,"value"):this._setting("init",this.options.index,"index")}},b=function(){this.data=[],this.options=$.extend({index:[],value:[]},this.options),this._setting=function(a,b,c){function d(a,b){var c=$(b).attr("value"),d=$(b).text();g.data[a]={index:a,value:c,text:d},$(b).addClass(h)}function e(a,b){g.data[a]=null,$(b).removeClass(h)}function f(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}var g=this,h="active",i=this.options.index,j=this.options.value;$(g.element).find(".btn").each(function(g){"init"==a?"value"==c?f(j,$(this).attr("value"))?d(g,this):e(g,this):f(i,g)?d(g,this):e(g,this):b.currentTarget==this&&($(this).hasClass("active")?e(g,this):d(g,this))})}},c=function(){var c={};this.init=function(){var d=this,e=this.options;"radio"==e.type?(c[e.type]=new a(d,this.root,d.options),c[e.type].init()):"check"==e.type&&(b.prototype=new a(d,this.root,d.options),c[e.type]=new b,c[e.type].init())},this.setIndex=function(a){c[this.options.type].options.index=a,c[this.options.type]._setting("init",null,"index")},this.setValue=function(a){c[this.options.type].options.value=a,c[this.options.type]._setting("init",null,"value")},this.getData=function(){return c[this.options.type].data},this.getValue=function(){return c[this.options.type].data.value},this.reload=function(){c[this.options.type]._setting("init")}};return c.setting=function(){return{options:{type:"radio",index:0,value:""},valid:{setIndex:[["integer","array"]],setValue:[["integer","string","array","boolean"]]}}},c},"core"),jui.defineUI("ui.combo",["util"],function(a){var b=function(){for(var a=jui.get("combo"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)"open"==c[d].type&&c[d].fold()};$(function(){$("body").on("click",function(){b()})});var c=function(){function c(a,b){var c=h.root,e=h.text,f=h.drop,g=f.children("li");g.each(function(f){var g=d(this),h=$(g).attr("value"),j=$(g).text();h||(h=j,$(g).attr("value",h)),("index"==a&&b==f||"value"==a&&b==h)&&(i={index:f,value:h,text:j},c.attr("value",h),e.html(j),c.select&&c.select[0]&&(c.select[0].selectedIndex=f))}),0==g.size()&&(i=null)}function d(a){return $(a).children("a").size()>0?$(a).children("a")[0]:a}function e(a){a.options.keydown&&a.addEvent(window,"keydown",function(b){if("hide"!=a.type){var c=h.drop.children("li");return 38==b.which?(1>j?j=c.size()-1:j--,f(a,function(){j--,f(a)}),!1):40==b.which?(j<c.size()-1?j++:j=0,f(a,function(){j++,f(a)}),!1):void(13==b.which&&(c.eq(j).trigger("click"),j=-1))}})}function f(a,b){var c=h.drop.children("li"),d=c.eq(j);c.removeClass("active"),""!=d.val()||""!=d.html()?(d.addClass("active"),a.options.height>0&&h.drop.scrollTop(j*d.outerHeight())):"function"==typeof b&&b()}function g(b){if(a.isTouch){var c=h.root;if(c.select&&c.select[0]){var d=c.select;d.empty()}else{var d=$("<select></select>").css({position:"absolute",opacity:.01});c.find("ul").after(d),b.addEvent(d,"change",function(a){var c=$(a.currentTarget).find("option:selected").data("elem");b.addTrigger(c,"touchstart")}),c.select=d}c.find("ul > li").each(function(a,b){var c=$(b).data("value"),e=$(b).text();d.append($("<option></option>").val(c).text(e).data("elem",b))})}}var h=null,i=null,j=-1;this.init=function(){var c=this,f=this.options,g=$(this.root),j=g.children(".btn").not(".btn-toggle"),k=g.children(".btn-toggle"),l=g.children(".btn"),m=g.children("ul");m.insertAfter(j),f.width>0&&(j.outerWidth(f.width-k.outerWidth()+1),j.css({overflow:"hidden","white-space":"nowrap"})),f.height>0&&m.css({maxHeight:f.height,overflow:"auto"}),this.addEvent(l,"click",function(d){if(a.isTouch)g.select.focus();else{if("open"==c.type)return;b(),c.open(d)}return!1}),this.addEvent(m,"click","li",function(a){b();var e=d(a.target),f=$(e).attr("value"),h=$(e).html();i={value:f,text:h,element:e},j.html(h),g.attr("value",f),c.emit("change",[i,a]),a.preventDefault()}),h={root:g,text:j,drop:m,toggle:k},this.type="fold",this.reload(),e(this)},this.setIndex=function(a){c("index",a),this.emit("change",[i])},this.setValue=function(a){c("value",a),this.emit("change",[i])},this.getData=function(){return i},this.getValue=function(){return null!=i?i.value:null},this.getText=function(){return null!=i?i.text:null},this.open=function(a){if(h.toggle.addClass("active"),h.drop.outerWidth(h.root.outerWidth()-1),"top"==this.options.position){var b=h.drop.outerHeight();h.drop.animate({top:"-"+b,height:"toggle"},100)}else h.drop.slideDown(100);this.emit("open",a),this.type="open"},this.fold=function(){h.drop.hide(),h.toggle.removeClass("active"),"top"==this.options.position&&h.drop.css("top",0),this.emit("fold"),this.type="fold"},this.reload=function(){""!=this.options.value?c("value",this.options.value):c("index",this.options.index),g(this),this.emit("reload",i)}};return c.setting=function(){return{options:{index:0,value:"",width:0,height:100,keydown:!1,position:"bottom"},valid:{setIndex:["integer"],setValue:[["integer","string","boolean"]]}}},c},"core"),jui.defineUI("ui.datepicker",["util"],function(a){var b=function(){function b(a){a.addEvent(q.children(".prev"),"click",function(b){a.prev(b)}),a.addEvent(q.children(".next"),"click",function(b){a.next(b)})}function c(a,b){var c=a.options;if("daily"==c.type){var d=10>l?"0"+l:l,e=10>b?"0"+b:b;o=new Date(k+"/"+d+"/"+e)}else if("monthly"==c.type){var d=10>l?"0"+l:l;o=new Date(k+"/"+d+"/01")}else"yearly"==c.type&&(o=new Date(b+"/01/01"))}function e(a){var b=a.options,c=null;if("daily"==b.type){var d=10>l?"0"+l:l;c=new Date(k+"/"+d+"/01")}else"monthly"==b.type?c=new Date(k+"/01/01"):"yearly"==b.type&&(c=new Date);return c}function f(a,b){function d(a){return"daily"==e.type?(a+1)%7==0:(a+1)%3==0}var e=a.options,f="",g=[];p={};for(var h=0;h<b.objs.length;h++)g.push(b.nums[h]),d(h)&&(f+=a.tpl.dates({dates:g}),g=[]);var i=$(f);return i.find("td").each(function(d){$(this).addClass(b.objs[d].type),a.addEvent(this,"click",function(e){"none"!=b.objs[d].type&&(r.find("td").removeClass("active"),$(this).addClass("active"),c(a,b.objs[d].no),a.emit("select",[a.getFormat(),e]))}),"none"!=b.objs[d].type&&(p[b.objs[d].no]=this)}),i}function g(a,b){if(2==b)return a%100==0||a%4!=0&&a%400!=0?28:29;var c=[31,0,31,30,31,30,31,31,30,31,30,31];return c[b-1]}function h(a,b){for(var c=[],d=[],e=1,f=new Date,h=new Date(a+"-"+(10>b?"0"+b:b)).getDay(),i=g(a,b),j=1==b?a-1:a,k=1==b?12:b-1,l=g(j,k),m=0;h>m;m++)d[m]=l-h+(m+1),c[m]={type:"none",no:d[m]};for(var m=h;42>m;m++)i>=e?(d[m]=e,c[m]={type:f.getMonth()+1==b&&f.getDate()==e?"now":"",no:d[m]},e++):(d[m]=e-i,c[m]={type:"none",no:d[m]},e++);return{objs:c,nums:d}}function i(){for(var a=[],b=[],c=new Date,d=1;12>=d;d++)b.push(d),a.push({type:c.getFullYear()==k&&c.getMonth()+1==d?"now":"",no:d});return{objs:a,nums:b}}function j(a){for(var b=[],c=[],d=a-4,e=new Date,f=d;d+12>f;f++)c.push(f),b.push({type:e.getFullYear()==f?"now":"",no:f});return{objs:b,nums:c}}var k=null,l=null,n=null,o=null,p={},q=null,r=null;this.init=function(){var a=(this.options,new Date);k=a.getFullYear(),l=a.getMonth()+1,n=a.getDate(),q=$(this.root).children(".head"),r=$(this.root).children(".body"),b(this),this.page(k,l),this.select()},this.page=function(b,c){if(0!=arguments.length){var d=this.options;"daily"==d.type?(k=b,l=c,r.find("tr:not(:first-child)").remove(),r.append(f(this,h(k,l)))):"monthly"==d.type?(k=b,r.find("tr").remove(),r.append(f(this,i(k)))):"yearly"==d.type&&(k=b,r.find("tr").remove(),r.append(f(this,j(k)))),q.children(".title").html(a.dateFormat(e(this),d.titleFormat))}},this.prev=function(a){var b=this.options;if("daily"==b.type){var c=1==l?k-1:k,d=1==l?12:l-1;this.page(c,d)}else"monthly"==b.type?this.page(k-1):"yearly"==b.type&&this.page(k-12);this.emit("prev",[a])},this.next=function(a){var b=this.options;if("daily"==b.type){var c=12==l?k+1:k,d=12==l?1:l+1;this.page(c,d)}else"monthly"==b.type?this.page(k+1):"yearly"==b.type&&this.page(k+12);this.emit("next",[a])},this.select=function(){var a=this.options,b=arguments;if(0==b.length)y=k,m=l,d=n;else if(3==b.length)y=b[0],m=b[1],d=b[2];else if(1==b.length){var c=new Date(b[0]);y=c.getFullYear(),m=c.getMonth()+1,d=c.getDate()}"daily"==a.type?(this.page(y,m),this.addTrigger(p[d],"click")):"monthly"==a.type?(this.page(y),this.addTrigger(p[m],"click")):"yearly"==a.type&&(this.page(y),this.addTrigger(p[y],"click"))},this.addTime=function(a){o=new Date(this.getTime()+a),this.select(this.getTime())},this.getDate=function(){return o},this.getTime=function(){return o.getTime()},this.getFormat=function(b){return a.dateFormat(o,"string"==typeof b?b:this.options.format)}};return b.setting=function(){return{options:{type:"daily",titleFormat:"yyyy.MM",format:"yyyy-MM-dd",animate:!1},valid:{page:["integer","integer"],select:["integer","integer","integer"],addTime:["integer"],getFormat:["string"]},animate:{page:{after:function(){var a=this;$body.find("tr").each(function(b){var c=200*(b+1);$(this).addClass("fadeIn").css({"animation-duration":c+"ms"}),function(b){a.addEvent(this,"AnimationEnd",function(){$(b).removeClass("fadeIn")})}(this)})}}}}},b},"core"),jui.defineUI("ui.dropdown",[],function(){var a=function(){var a=b();null!=a&&a.hide()},b=function(){for(var a=jui.get("dropdown"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)if("show"==c[d].type)return c[d];return null};$(function(){$("body").on("click",function(b){var c=b.target.tagName;"LI"!=c&&"INPUT"!=c&&"A"!=c&&"BUTTON"!=c&&"I"!=c&&a()}),$(window).on("keydown",function(a){var c=b();null!=c&&c.wheel(a.which,function(){a.preventDefault()})})});var c=function(){function b(b){function c(a){var b=0;return e.each(function(c){a==this&&(b=c)}),b}var e=$(d.menu).find("li");e.unbind("click").unbind("hover"),b.addEvent(e,"click",function(d){if(!$(this).hasClass("divider")){var e=c(this),f=$(this).text(),g=$(this).attr("value");b.emit("change",[{index:e,value:g,text:f},d]),b.options.close&&a(),"A"==d.target.tagName&&d.preventDefault()}}),b.addEvent(e,"hover",function(){e.removeClass("active")})}function c(a,b){var c=d.menu.find("li"),f=c.eq(e);c.removeClass("active"),""!=f.val()||""!=f.html()?(f.addClass("active"),a.options.height>0&&d.menu.scrollTop(e*f.outerHeight())):"function"==typeof b&&b()}var d=null,e=-1;this.init=function(){var a=this.options,c=$(this.root),e=c.find("ul"),f=c.find(".anchor");e=0==e.size()?c:e,d={root:c,menu:e,anchor:f},d.root.outerWidth(d.menu.outerWidth()),a.width>0&&e.outerWidth(a.width),a.height>0&&e.css({maxHeight:a.height,overflow:"auto"}),a.left>0&&c.css("left",a.left),a.top>0&&c.css("top",a.top),e.css({display:"block"}),c.css({position:"absolute",display:"none"}),a.nodes.length>0?this.update(a.nodes):b(this),this.type="hide"},this.update=function(a){if(this.tpl.node){$(d.menu).empty();for(var c=0;c<a.length;c++)$(d.menu).append(this.tpl.node(a[c]));b(this)}},this.hide=function(){d.root.hide(),this.emit("hide"),this.type="hide"},this.show=function(b,c){a(),d.root.show(),d.anchor.size()>0&&d.root.css("margin-top","10px"),2==arguments.length&&this.move(b,c),this.emit("show"),this.type="show"},this.move=function(a,b){d.root.css("left",a),d.root.css("top",b)},this.wheel=function(a,b){if(this.options.keydown){var f=this,g=d.menu.find("li");(38==a||-1==a)&&(1>e?e=g.size()-1:e--,c(this,function(){e--,c(f)}),b&&b()),(40==a||1==a)&&(e<g.size()-1?e++:e=0,c(f,function(){e++,c(f)}),b&&b()),13!=a&&0!=a&&a||(f.addTrigger(g.eq(e),"click"),e=-1,b&&b())}},this.reload=function(){this.init(),this.emit("reload")}};return c.setting=function(){return{options:{close:!0,keydown:!1,left:0,top:0,width:0,height:0,nodes:[]},valid:{update:["array"],show:["number","number"],move:["number","number"],wheel:["integer","function"]}}},c},"core"),jui.defineUI("ui.modal",["util"],function(a){var b=0;a.resize(function(){if(b!=$(window).width()){for(var a=jui.get("modal"),c=0;c<a.length;c++)for(var d=a[c].list,e=0;e<d.length;e++)"show"==d[e].type&&d[e].resize();b=$(window).width()}},300);var c=function(){function a(a){f={position:$(a.root).css("position"),left:$(a.root).css("left"),top:$(a.root).css("top"),"z-index":$(a.root).css("z-index"),display:$(a.root).css("display")},g={position:$(a.options.target).css("position")}}function b(a){var b="auto",c="auto",d=0,e=a.options.target,f="body"==e?window:e,g="body"==e?"fixed":"absolute",h="body"==e?null:"relative";if(b=$(f).width()/2-$(a.root).width()/2,c=$(f).height()/2-$(a.root).height()/2,d=$(e).outerHeight(),d=d>0?d:$(f).outerHeight(),null!=h){var i=$(f)[0].scrollHeight;d=i>d?i:d,c+=$(f).scrollTop()}return{x:b,y:c,pos:g,tPos:h,h:d}}function c(a,b){null==d&&(d=$("<div id='MODAL_"+a.timestamp+"'></div>").css({position:"absolute",width:"100%",height:b,left:0,top:0,opacity:a.options.opacity,"background-color":a.options.color,"z-index":h+a.options.index-1}),$(a.options.target).append(d),"body"!=a.options.target&&$(a.root).insertAfter(d),a.addEvent(d,"click",function(){return a.options.autoHide&&a.hide(),!1}))}var d=null,e=null,f=null,g=null,h=5e3;this.init=function(){a(this),this.type="hide"},this.hide=function(){"none"!=f.display&&(e.remove(),e=null),$(this.options.target).css("position",g.position),$(this.root).css(f),d&&(d.remove(),d=null),this.type="hide"
},this.show=function(){var a=b(this);"none"!=f.display&&(e=$(this.root).clone(),e.insertAfter($(this.root))),this.resize(),$(this.options.target).css("position",a.tPos),$(this.root).show(),c(this,a.h),this.type="show"},this.resize=function(){var a=b(this);$(this.root).css({position:a.pos,left:a.x,top:a.y,"z-index":h+this.options.index}),null!=d&&d.height(a.h)}};return c.setting=function(){return{options:{color:"black",opacity:.4,target:"body",index:0,autoHide:!0}}},c},"core"),jui.defineUI("ui.notify",[],function(){var a=12,b=function(){var b=null;this.init=function(){var c=this.options,d="object"==typeof c.padding?a:c.padding,e={top:{top:d,bottom:null,left:d,right:d},"top-right":{top:d,bottom:null,left:null,right:d},"top-left":{top:d,bottom:null,left:d,right:null},bottom:{top:null,bottom:d,left:d,right:d},"bottom-right":{top:null,bottom:d,left:null,right:d},"bottom-left":{top:null,bottom:d,left:d,right:d}},f=e[c.position];return"object"==typeof c.padding&&(f=$.extend(f,c.padding)),"body"!=this.selector&&$(this.selector).css("position","relative"),b=$("<div></div>").css($.extend({position:"absolute","z-index":3e3},f)),$(this.root).append(b),this},this.add=function(c,d){function e(){null!=j&&(j.animate({opacity:0},h.hideDuration,h.hideEasing),j.slideUp(h.hideEasing,function(){g.emit("hide",[c]),j.remove(),j=null}))}function f(){return-1!=h.position.indexOf("top-")?!0:!1}var g=this,h=this.options,i=isNaN(d)?h.timeout:d,j=$(this.tpl.alarm(c)).css({"margin-bottom":h.distance});("top"==h.position||"bottom"==h.position)&&j.outerWidth(b.width()-3*("object"==typeof h.padding&&h.padding.right?h.padding.right:a)),f()?b.prepend(j):b.append(j);var k=j.css("opacity");j.css({opacity:0}).animate({opacity:k},h.showDuration,h.showEasing,function(){g.emit("show",[c])}),this.addEvent(j,"click",function(a){return g.emit("select",[c,a]),e(),!1}),i>0&&setTimeout(e,i)},this.reset=function(){b.empty()}};return b.setting=function(){return{options:{position:"top-right",padding:a,distance:5,timeout:3e3,showDuration:500,hideDuration:500,showEasing:"swing",hideEasing:"linear"},valid:{add:["object","integer"]}}},b},"core"),jui.defineUI("ui.paging",[],function(){var a=function(){function a(a){a.addEvent($(a.root).find(".prev"),"click",function(){return a.prev(),!1}),a.addEvent($(a.root).find(".next"),"click",function(){return a.next(),!1})}function b(a){a.addEvent(g.find(".page"),"click",function(b){var c=parseInt($(b.currentTarget).text());return a.page(c),!1})}function c(a,b){var c=g.find(".page");c.each(function(){$(this).text()==b?$(this).addClass("active"):$(this).removeClass("active")})}function d(d,h){var i=[],j=f<d.options.screenCount?f:d.options.screenCount,k=h-Math.ceil(j/2)+1,k=1>k?1:k;if(e=h>f?f:h,e=1>h?1:h,k+j+1>f){for(var l=f-j+1;f+1>l;l++)i.push(l);e>f&&(e=f)}else for(var l=k;k+j>l;l++)i.push(l);g.html(d.tpl.pages({pages:i,lastPage:f})),a(d),b(d),c(d,e)}var e=1,f=1,g=null;this.init=function(){{var a=this;this.options}return g=$(a.root).find(".list"),g=0==g.size()?$(a.root):g,this.reload(),this},this.reload=function(a){var a=a?a:this.options.count;e=1,f=Math.ceil(a/this.options.pageCount),d(this,e),this.emit("reload")},this.page=function(a){return a?(d(this,a),void this.emit("page",[e])):e},this.next=function(){this.page(e+1)},this.prev=function(){this.page(e-1)},this.first=function(){this.page(1)},this.last=function(){this.page(f)}};return a.setting=function(){return{options:{count:0,pageCount:10,screenCount:5},valid:{reload:["integer","null"],page:["integer","null"]}}},a},"core"),jui.defineUI("ui.tooltip",[],function(){var a=function(){function a(a){c=$("<div id='TOOLTIP_"+a.timestamp+"' class='tooltip tooltip-"+a.options.position+" tooltip-"+a.options.color+"'><div class='anchor'></div><div class='title'>"+(a.options.title?a.options.title:e)+"</div></div>"),a.options.width&&c.css("max-width",a.options.width),a.options.align&&c.css("text-align",a.options.align),$("body").append(c),b(a)}function b(a){var b=$(a.root).offset(),e=$(a.root).outerWidth(),f=$(a.root).outerHeight(),g=c.outerWidth(),h=c.outerHeight(),i=0,j=0,k=a.options.position;"left"==k?(i=b.left-g,j=b.top-(h-f)/2):"right"==k?(i=b.left+e,j=b.top-(h-f)/2):"bottom"==k?(i=b.left-g/2+e/2,j=b.top+f):(i=b.left-g/2+e/2,j=b.top-h),d={x:1>i?1:i,y:1>j?1:j}}var c=null,d={},e="",f=null;this.init=function(){var a=this,b=this.options;return e=$(this.root).attr("title"),$(this.root).removeAttr("title"),$(this.root).unbind(b.type).unbind("mouseout"),this.addEvent(this.root,b.type,function(d){return f=setTimeout(function(){a.show(),null!=c&&a.emit("show",[c.get(0),d])},b.delay),!1}),this.addEvent(this.root,"mouseout",function(b){return clearTimeout(f),a.hide(),null==c&&a.emit("hide",[b]),!1}),this},this.hide=function(){null!=c&&(c.remove(),c=null,d={})},this.show=function(){c&&this.hide(),a(this),c.css({left:d.x,top:d.y})}};return a.setting=function(){return{options:{color:"black",position:"top",width:150,align:"left",delay:0,type:"mouseover",title:""}}},a},"core"),jui.defineUI("ui.layout",["util"],function(){var a=function(){function a(a,b,c,d){a.mousedown(function(e){a.data("mousedown",!0);var f=a.clone();a.data("shadow",f),a.after(f),c.call(this,e),f.css("opacity",.3),$(document).on("mousemove",b),$(document).on("mouseup",function g(c){$(document).off("mousemove",b),$(document).off("mouseup",g),d.call(this,c),a.data("mousedown",!1),f.remove(),$("body :not(.resize)").css({"user-select":""})}),$("body :not(.resize)").css({"user-select":"none"})})}function b(b){var e,g;e=c[b],g=e.resizer,g.css({cursor:f[b]}),g.data("event")||("top"==b?a(g,function(a){if(g.data("mousedown")){var b=a.clientY-g.data("current"),c=d.top.min,e=d.top.max;b>=c&&e>b&&g.css({top:b+"px"})}},function(a){var b=g.position().top;g.data("current",a.clientY-b)},function(){var a=g.position().top,b=(g.height(),a),d=a+g.height()+"px",e=c.top.height();c.top.height(b);var f=e-b,h=c.center.height()+f;c.center.css({top:d}).height(h),c.left.css({top:d}).height(h),c.left.resizer.css({top:d}).height(h),c.right.css({top:d}).height(h),c.right.resizer.css({top:d}).height(h)}):"bottom"==b?a(g,function(a){if(g.data("mousedown")){var b=a.clientY-g.data("current"),c=d.bottom.min,f=d.bottom.max,h=e.position().top-(b+d.barSize),i=h+e.height();i>=c&&f>=i&&g.css({top:b+"px"})}},function(a){var b=g.position().top;g.data("current",a.clientY-b)},function(){var a=g.position().top+g.height(),b=(c.root.height(),parseFloat(c.bottom.position().top)-a);c.bottom.css({top:a+"px"}),c.bottom.height(c.bottom.height()+b);var d=c.center.height()-b;c.center.height(d),c.left.height(d),c.left.resizer.height(d),c.right.height(d),c.right.resizer.height(d)}):"left"==b?a(g,function(a){if(g.data("mousedown")){var b=a.clientX-g.data("current"),c=d.left.min,e=d.left.max;b>=c&&e>b&&g.css({left:b+"px"})}},function(a){var b=g.position().left;g.data("left",b).data("current",a.clientX-b)},function(){if(g.data("mousedown")){var a=g.position().left,b=g.data("left"),e=b-a;c.left.css({width:a+"px"}),c.center.css({left:a+d.barSize+"px"}),c.center.width(c.center.width()+e)}}):"right"==b&&a(g,function(a){if(g.data("mousedown")){var b=a.clientX-g.data("current"),f=d.right.min,h=d.right.max,i=c.left.width()+c.left.resizer.width(),j=c.center.width(),k=e.width()-(b-(i+j));k>=f&&h>k&&g.css({left:b+"px"})}},function(a){var b=g.position().left;g.data("left",b).data("current",a.clientX-b)},function(){if(g.data("mousedown")){var a=g.position().left,b=g.data("left"),d=b-a;c.right.css({left:a+g.width()+"px",width:c.right.width()+d+"px"}),c.center.width(c.center.width()-d)}}),g.data("event",!0))}var c=null,d={},e=["top","left","right","bottom","center"],f={top:"n-resize",bottom:"n-resize",right:"e-resize",left:"e-resize"};this.init=function(){var a,b,e,f,g,h,i=this,j=this.options;return a=$(this.root).css("position","relative"),null!=j.width&&a.outerWidth(j.width),null!=j.height&&a.outerHeight(j.height),b=j.top.el?$(j.top.el):a.find("> .top"),0==b.length&&(b=null),e=j.left.el?$(j.left.el):a.find("> .left"),0==e.length&&(e=null),f=j.right.el?$(j.right.el):a.find("> .right"),0==f.length&&(f=null),g=j.bottom.el?$(j.bottom.el):a.find("> .bottom"),0==g.length&&(g=null),h=j.center.el?$(j.center.el):a.find("> .center"),0==h.length&&(h=null),c={root:a,top:b,left:e,right:f,bottom:g,center:h},d=j,this.update(),$(window).on("resize",function(){i.resize()}),this},this.update=function(){for(var a=0,f=e.length;f>a;a++){var g=c[e[a]];g&&(c.root.append(g),"center"!=e[a]&&d[e[a]].resize&&(g.resizer||(g.resizer=$("<div class='resize "+e[a]+"' />")),c.root.append(g.resizer),b(e[a])))}this.resize()},this.resize=function(){var a=null,b=null,d=0,e=0,f=0;a=c.top,b=this.options.top,a&&(a.css({position:"absolute",top:"0px",left:"0px",width:"100%",height:b.size||b.min}),d=a.height(),b.resize?(a.resizer.css({position:"absolute",top:d,left:"0px",width:"100%",background:this.options.barColor,height:this.options.barSize}),d+=this.options.barSize):a.resizer&&a.resizer.remove()),a=c.bottom,b=this.options.bottom;var g=c.root.height();if(a){a.css({position:"absolute",left:"0px",width:"100%",height:b.size||b.min});var h=d-a.height()+d;b.resize?(a.resizer.css({position:"absolute",top:h,left:"0px",width:"100%",background:this.options.barColor,height:this.options.barSize}),h+=this.options.barSize):a.resizer&&a.resizer.remove(),a.css("top",h+"px")}a=c.left,b=this.options.left;var i=g;c.top&&(i-=c.top.height(),c.top.resizer&&(i-=c.top.resizer.height())),c.bottom&&(i-=c.bottom.height(),c.bottom.resizer&&(i-=c.bottom.resizer.height())),a&&(a.css({position:"absolute",top:d,left:"0px",height:i,width:b.size||b.min,"max-width":"100%",overflow:"auto"}),e=a.width(),b.resize?(a.resizer.css({position:"absolute",top:d,height:a.height(),left:e,background:this.options.barColor,width:this.options.barSize}),e+=this.options.barSize):a.resizer&&a.resizer.remove()),a=c.right,b=this.options.right;var j=c.root.width(),k=j;c.left&&(k-=c.left.width(),c.left.resizer&&(k-=c.left.resizer.width())),a&&(a.css({position:"absolute",top:d,height:i,width:b.size||b.min,"max-width":"100%"}),b.resize?(a.resizer.css({position:"absolute",top:d,height:a.height(),background:this.options.barColor,width:this.options.barSize}),f+=this.options.barSize):a.resizer&&a.resizer.remove(),k-=c.right.width(),c.right.resizer&&(k-=c.right.resizer.width()),a.resizer.css({left:e+k+"px"}),a.css({left:e+k+a.resizer.width()+"px"})),a=c.center,b=this.options.center,a&&a.css({position:"absolute",top:d,height:i,left:e,width:k,overflow:"auto"})}};return a.setting=function(){return{options:{barColor:"#d6d6d6",barSize:3,width:null,height:null,top:{el:null,size:null,min:50,max:200,resize:!0},left:{el:null,size:null,min:50,max:200,resize:!0},right:{el:null,size:null,min:50,max:200,resize:!0},bottom:{el:null,size:null,min:50,max:200,resize:!0},center:{el:null}}}},a},"core"),jui.defineUI("uix.autocomplete",["util","ui.dropdown"],function(a,b){var c=function(){function a(a,c){if(0==c.length)return void(e&&e.hide());e&&$(e.root).remove();var d=$(a.root).offset(),g=$(a.tpl.words({words:c}));$("body").append(g),e=b(g,{keydown:!0,width:$(a.root).outerWidth(),left:d.left,top:d.top+$(a.root).outerHeight(),event:{change:function(b,c){$(f).val(b.text),a.emit("change",[b.text,c])}}}),e.show()}function c(a,b){var c=a.options.words,d=[];if(""!=b)for(var e=0;e<c.length;e++){var f=c[e],g=c[e].toLowerCase(),h=b.toLowerCase();-1!=g.indexOf(h)&&d.push(f)}return d}function d(b){b.addEvent(f,"keyup",function(d){return 38!=d.which&&40!=d.which&&13!=d.which?(a(b,c(b,$(this).val())),!1):void 0})}var e=null,f=null;this.init=function(){var a=this.options;f=null==a.target?this.root:$(this.root).find(a.target),d(this)},this.update=function(a){this.options.words=a}};return c.setting=function(){return{options:{target:null,words:[]},valid:{update:["array"]}}},c},"core"),jui.defineUI("uix.tab",["util","ui.dropdown"],function(a,b){var c=function(){function a(a){var b=$(a.root).children("li");b.removeClass("active")}function c(a,b){var c=$(b).offset();$(b).parent().addClass("menu-keep"),j.show(c.left,c.top+$(a.root).height())}function d(a){var b=$(a.root).children("li"),c=b.eq(l);c.removeClass("menu-keep")}function e(b,c){a(b);var d=$(b.root).children("li"),e=d.eq(c).addClass("active");k.appendTo(e),f(b.options.target,e[0])}function f(a,b){var c=$(b).find("[href*=#]").attr("href");$(a).children("*").each(function(){var a=this;"#"+a.id==c?$(a).show():$(a).hide()})}function g(a){$(a.root).children("li").each(function(b){$(this).hasClass("menu")&&(l=b),a.addEvent(this,["click","contextmenu"],function(d){var g=$.trim($(this).text()),h=$(this).val();if(b!=l){if(b!=m){var i=[{index:b,text:g,value:h},d];"click"==d.type?(""!=a.options.target&&f(a.options.target,this),m=b,a.emit("change",i),a.emit("click",i),e(a,b)):"contextmenu"==d.type&&a.emit("rclick",i)}}else a.emit("menu",[{index:b,text:g},d]),"show"!=j.type&&c(a,this);return!1})}),i(a),h(a)}function h(a){if(a.options.drag){var b=$(a.root).children("li"),c=null,d=null,e=null,f=null;b.each(function(g){a.addEvent(this,"mousedown",function(b){return c=$(this),d=c.clone().css("opacity","0.5"),e=g,a.emit("dragstart",[e,b]),!1}),a.addEvent(this,"mousemove",function(){null!=e&&(f=g,e>f?0==f?d.insertBefore(b.eq(0)):d.insertAfter(b.eq(f-1)):f==b.size()-1?d.insertAfter(b.eq(f)):d.insertBefore(b.eq(f+1)),c.hide())})}),a.addEvent(a.root,"mouseup",function(b){null!=c&&c.show(),null!=d&&d.remove(),null!=e&&null!=f&&(a.move(e,f),a.emit("dragend",[f,b])),e=null,f=null})}}function i(a){var b=$(a.root).children("li"),c=b.filter(".active"),d=b.eq(m),f=1==d.size()?d:c;0==f.size()&&(f=b.eq(0)),k.appendTo(f),e(a,b.index(f))}var j=null,k=null,l=-1,m=0;this.init=function(){var a=this,c=this.options;if(m=c.index,k=$("<div class='anchor'></div>"),c.nodes.length>0?this.update(c.nodes):g(this),this.tpl.menu){var e=$(this.tpl.menu());e.insertAfter($(a.root)),j=b(e,{event:{change:function(b,c){d(a),a.emit("changeMenu",[b,c])},hide:function(){d(a)}}})}return this},this.update=function(a){if(this.tpl.node){$(this.root).empty();for(var b=0;b<a.length;b++)$(this.root).append(this.tpl.node(a[b]));g(this)}},this.insert=function(a,b){if(this.tpl.node){var c=this.tpl.node(b),d=$(this.root).children("li");a==d.size()?$(c).insertAfter(d.eq(a-1)):$(c).insertBefore(d.eq(a)),g(this)}},this.append=function(a){if(this.tpl.node){var b=this.tpl.node(a);-1!=l?($(b).insertBefore($(this.root).find(".menu")),l++):$(this.root).append(b),g(this)}},this.prepend=function(a){this.tpl.node&&($(this.root).prepend(this.tpl.node(a)),g(this))},this.remove=function(a){$(this.root).children("li").eq(a).remove(),g(this)},this.move=function(a,b){if(a!=b){var c=$(this.root).children("li"),d=c.eq(a);a>b?0==b?d.insertBefore(c.eq(0)):d.insertAfter(c.eq(b-1)):b==c.size()-1?d.insertAfter(c.eq(b)):d.insertBefore(c.eq(b+1)),m=b,g(this)}},this.show=function(a){if(a!=l&&a!=m){m=a;var b=$(this.root).children("li").eq(a);this.emit("change",[{index:a,text:$.trim(b.text()),value:b.val()}]),e(this,a)}},this.activeIndex=function(){return m}};return c.setting=function(){return{options:{target:"",index:0,drag:!1,nodes:[]},valid:{update:["array"],insert:["integer","object"],append:["object"],prepend:["object"],remove:["integer"],show:["integer"]}}},c},"core"),jui.define("uix.table.column",[],function(){var a=function(a){this.element=null,this.list=[],this.order="asc",this.name=null,this.data=[],this.index=a,this.type="show",this.width=null,this.hide=function(){this.type="hide",$(this.element).hide()},this.show=function(){this.type="show",$(this.element).show()}};return a}),jui.define("uix.table.row",[],function(){var a=function(a,b,c){function d(a){j.rownum=isNaN(a)?j.rownum:a,j.index=j.parent?j.parent.index+"."+j.rownum:""+j.rownum,j.parent&&"string"==typeof j.index&&(j.depth=j.index.split(".").length-1),j.isLeaf()||e(j)}function e(a){for(var b=a.childrens,c=0;c<b.length;c++)b[c].reload(c),b[c].isLeaf()||e(b[c])}function f(){j.list=[],$(j.element).find("td").each(function(a){j.list[a]=this,k[a]&&(this.style.display="none")})}function g(){if(!b)return j.element;var a=$(b($.extend({row:{index:j.index,data:j.data,depth:j.depth}},j.data))).get(0);return a}function h(a){$(a.element).remove();for(var b=0;b<a.childrens.length;b++){var c=a.childrens[b];c.isLeaf()?$(c.element).remove():h(c)}}function i(){for(var a=0;a<j.childrens.length;a++)j.childrens[a].reload(a)}var j=this,k={};this.data=a,this.rownum=null,this.index=null,this.element=null,this.list=[],this.parent=c?c:null,this.childrens=[],this.depth=0,this.type="fold",this.reload=function(a,b,c){if(b||d(a),null!=this.element){var e=g();$(e).insertAfter(this.element),$(this.element).remove(),this.element=e}else this.element=g();null!=c&&this.hideCells(c),f()},this.destroy=function(){null!=this.parent?this.parent.removeChild(this.index):(h(this),$(this.element).remove())},this.isLeaf=function(){return 0==this.childrens.length?!0:!1},this.fold=function(){this.type="fold";for(var a=0;a<this.childrens.length;a++){var b=this.childrens[a];$(b.element).hide(),b.isLeaf()||b.fold()}},this.open=function(){this.type="open";for(var a=0;a<this.childrens.length;a++){var b=this.childrens[a];$(b.element).show(),b.isLeaf()||b.open()}},this.appendChild=function(a){var b=this.isLeaf()?this.element:this.lastChildLeaf().element;$(a.element).insertAfter(b),this.childrens.push(a)},this.insertChild=function(a,b){var c=this.element;if(a>0){var d=this.childrens[a-1];c=d.isLeaf()&&this.childrens.length!=a+1?d.element:d.lastChildLeaf().element}$(b.element).insertAfter(c);var e=this.childrens.splice(0,a);e.push(b),this.childrens=e.concat(this.childrens),i()},this.removeChild=function(a){for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];c.index==a&&(this.childrens.splice(b,1),h(c))}i()},this.lastChild=function(){return this.isLeaf()?null:this.childrens[this.childrens.length-1]},this.lastChildLeaf=function(a){var b=a?a:this.lastChild();return b.isLeaf()?b:this.lastChildLeaf(b.lastChild())},this.showCell=function(a){k[a]=!1,$(this.list[a]).show()},this.hideCell=function(a){k[a]=!0,$(this.list[a]).hide()},this.hideCells=function(a){for(var b=0;b<a.length;b++)"hide"==a[b].type&&this.hideCell(b)}};return a}),jui.define("uix.table.base",["util","uix.table.column","uix.table.row"],function(a,b,c){var d=function(d,e){function f(){q(),g()}function g(){var a=[];s.thead.find("tr:last > th").each(function(){a.push(this)});for(var c=0;c<a.length;c++){var d=new b(c);u[c]?(d.element=u[c].element,d.order=u[c].order,d.name=u[c].name,d.data=u[c].data,d.type=u[c].type,d.width=u[c].width):(d.element=a[c],($(d.element).attr("width")||$(d.element).attr("style")&&-1!=$(d.element).attr("style").indexOf("width"))&&(d.width=$(d.element).outerWidth()),e&&e[c]&&(d.name=e[c]));for(var f=0;f<v.length;f++)d.list.push(v[f].list[c]),d.data.push(v[f].data[d.name]);u[c]=d}}function h(a,b){if("reload"==a)for(var c=0;c<u.length;c++)u[c].list[b.index]=b.list[c],u[c].data[b.index]=b.data[u[c].name];else if("append"==a)for(var c=0;c<u.length;c++)u[c].list.push(b.list[c]),u[c].data.push(b.data[u[c].name]);else if("remove"==a)for(var c=0;c<u.length;c++)u[c].list.splice(b.index,1),u[c].data.splice(b.index,1);else g()}function i(a,b,d){var e=new c(a,t.row,d);return e.reload(b,!1,u),e}function j(a,b){var c=b.childrens;if(c.length>0)for(var d=0;d<c.length;d++)a.push(c[d]),c[d].childrens.length>0&&j(a,c[d])}function k(a,b){if(!b)return null;var c=a.shift();return void 0==c?b:k(a,b.childrens[c])}function l(){var a=arguments[0],b=arguments[1];"function"==typeof a?(b=a,a=0):a=isNaN(a)?0:a;for(var c=a;c<v.length;c++)v[c].reload(c),h("reload",v[c]),"function"==typeof b&&b(c)}function m(a,b){var c=i(b,a),d=c;if(v.length!=a||0==a&&1==v.length)$(c.element).insertBefore(v[a].element);else{var e=v[a-1];$(c.element).insertAfter(0==e.childrens.length?e.element:e.lastChildLeaf().element)}return d=v.splice(0,a),d.push(c),v=d.concat(v),l(a),c}function n(a,b){var c=y.getIndexList(a),d=r.getRowParent(a),e=c[c.length-1];return row=i(b,e,d),d.insertChild(e,row),row}function o(a){var b=i(a,v.length);return v.push(b),s.tbody.append(b.element),h("append",b),b}function p(a,b){var c=r.getRow(a),d=i(b,c.childrens.length,c);return c.appendChild(d),d}function q(){return"function"!=typeof t.none?!1:(x?v.length>0&&(s.tbody.find("tr:first").remove(),x=!1):0==v.length&&(s.tbody.html(t.none()),x=!0),!0)}var r=this,s=d.$obj,t=d.$tpl,u=[],v=[],w={},x=!1,y=a.index();this.appendRow=function(){var a=arguments[0],b=arguments[1],c=null;return c=b?p(a,b):o(a),q(),c},this.insertRow=function(a,b){var c=null;return c=y.isIndexDepth(a)?n(a,b):0==v.length&&0==parseInt(a)?this.appendRow(b):m(a,b),q(),c},this.updateRow=function(a,b){var c=this.getRow(a);for(var d in b)c.data[d]=b[d];return c.reload(null,!0),h("reload",c),c},this.moveRow=function(b,c){if(b!=c){var d=this.getRowAll(b),e=d[0],f=a.clone(e.data);if(d.length>1)for(var g=0;g<d.length;g++){var b=y.changeIndex(d[g].index,c,d[0].index);this.insertRow(b,d[g].data)}else this.insertRow(c,f);this.removeRow(e.index)}},this.removeRow=function(a){var b=this.getRow(a);y.isIndexDepth(a)?b.destroy():(b.destroy(),h("remove",v[a]),v.splice(a,1),l(a)),q()},this.openRow=function(a){this.getRow(a).open(),w[a]=!1;for(var b in w)if(w[b]!==!1){var c=this.getRow(w[b]);null!=c&&c.fold()}},this.openRowAll=function(){for(var a=this.getRowAll(),b=0;b<a.length;b++)a[b].isLeaf()||(a[b].open(),w[a[b].index]=!1)},this.foldRow=function(a){this.getRow(a).fold(),w[a]=a},this.foldRowAll=function(){for(var a=this.getRowAll(),b=0;b<a.length;b++)a[b].isLeaf()||(a[b].fold(),w[a[b].index]=a[b].index)},this.removeRows=function(){v=[],q()||s.tbody.html(""),h()},this.sortRows=function(b,c){function d(a){var c=a.data[b];return isNaN(c)||null==c?"string"==typeof c?c.toLowerCase():"":parseInt(c)}var e=a.sort(v);e.setCompare(c?function(a,b){return d(a)>d(b)?!0:!1}:function(a,b){return d(a)<d(b)?!0:!1}),e.run(),s.tbody.html(""),l(function(a){s.tbody.append(v[a].element)})},this.appendColumn=function(a,b){var c=u.length,d=$(t[a]({rows:b})),e=d.filter("thead").find("tr");e.each(function(a){var b=s.thead.find("tr").eq(a);$(this).find("th").each(function(){b.append(this),e.size()-1==a&&u.push({element:this,list:[]})})});for(var f=0;f<v.length;f++)d.filter("tbody").find("tr").eq(f).find("td").each(function(a){$(v[f].element).append(this),u[c+a].list.push(this),v[f].list.push(this),$.extend(v[f].data,b[f])})},this.removeColumn=function(a){for(var b=0;b<u[a].list.length;b++)$(u[a].element).remove(),$(u[a].list[b]).remove();for(var c=0;c<v.length;c++)v[c].list.splice(a,1);u.splice(a,1)},this.hideColumn=function(a){if("hide"!=u[a].type){for(var b=this.getRowAll(),c=0;c<b.length;c++)b[c].hideCell(a);u[a].hide()}},this.showColumn=function(a){if("show"!=u[a].type){for(var b=this.getRowAll(),c=0;c<b.length;c++)b[c].showCell(a);u[a].show()}},this.getColumnCount=function(){return u.length},this.getRowCount=function(){return v.length},this.getColumn=function(a){return null==a?u:u[a]},this.getRow=function(a){if(null==a)return v;if(y.isIndexDepth(a)){var b=y.getIndexList(a);return k(b,v[b.shift()])}return v[a]?v[a]:null},this.getRowAll=function(a){for(var b=[],c=null==a?v:[this.getRow(a)],d=0;d<c.length;d++)c[d]&&(b.push(c[d]),c[d].childrens.length>0&&j(b,c[d]));return b},this.getRowParent=function(a){return y.isIndexDepth(a)?this.getRow(y.getParentIndex(a)):null},this.setColumn=function(a,b){u[a]=b},this.setRow=function(a,b){v[a]=b},this.printInfo=function(){console.log(u),console.log(v)},f()};return d}),jui.defineUI("uix.table",["util","ui.dropdown","uix.table.base"],function(a,b,c){a.resize(function(){for(var a=jui.get("table"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)c[d].resize()},1e3);var d=function(){function d(a){return"<tr class='expand' style='display: none;'><td id='EXPAND_"+a.timestamp+"'></td></tr>"}function e(a,b){for(var c=[],d=0;d<b.length;d++)if("string"==typeof b[d]){var e=a.getColumn(b[d]);c.push(e.index)}else c.push(b[d]);return c}function f(a){var b=a.options.colshow,c=a.uit.getColumnCount();if(b===!0){a.options.colshow=b=[];for(var d=0;c>d;d++)b.push(d)}else b=e(a,b);for(var d=0;c>d;d++)-1==$.inArray(d,b)?a.uit.hideColumn(d):a.uit.showColumn(d)}function g(a){for(var c=null,d=a.listColumn(),e=[],f=0;f<d.length;f++)e.push($(d[f].element).text());c=$(a.tpl.menu({columns:e})),$("body").append(c),r=b(c,{close:!1}),$(r.root).find("input[type=checkbox]").each(function(b){this.checked="show"==d[b].type?!0:!1,a.addEvent(this,"click",function(c){var d=$(r.root).find("input[type=checkbox]:checked").size();this.checked?a.showColumn(b,c):d>0?a.hideColumn(b,c):this.checked=!0,a.hideExpand(),a.scroll()})})}function h(b){for(var c=q.table.outerWidth(),d=b.uit.getColumnCount(),e=!1,f=d-1;f>=0;f--){var g=b.getColumn(f),h=$(g.element).outerWidth();"none"==$(g.element).css("display")||e||(h-=a.scrollWidth(),e=!0),$(g.list[0]).outerWidth(h)}q.tbody.outerWidth(c)}function i(a){$(a.root).hasClass("table-scroll")||a.scroll(),q.tbody.unbind("scroll").scroll(function(b){return q.tbody.scrollTop()+a.options.scrollHeight==q.tbody.get(0).scrollHeight?(a.emit("scroll",b),!1):void 0})}function j(a,b){a.uit.getRowCount()<1||(b&&(a.options.expand&&q.tbody.prepend(d(a)),a.scroll()),a.options.scroll&&i(a),a.setVo())}function k(a,b){for(var b=b?b:a.uit.getRow(),c=0;c<b.length;c++)!function(b){b.childrens.length>0?(l(a,b),k(a,b.childrens)):l(a,b)}(b[c])}function l(a,b){if(a.addEvent(b.element,"click",function(c){if(a.emit("select",[b,c]),a.emit("click",[b,c]),a.options.expand){if(a.options.expandEvent===!1)return;s===b.index?a.hideExpand(c):(null!=s&&a.hideExpand(c),a.showExpand(b.index,void 0,c))}}),a.addEvent(b.element,"dblclick",function(c){a.emit("dblclick",[b,c])}),a.addEvent(b.element,"contextmenu",function(c){return a.emit("rowmenu",[b,c]),!1}),a.options.fields&&a.options.editCell){if(a.options.editEvent===!1)return;$(b.element).find("td").each(function(c){var d=this;!function(c){a.addEvent(d,"dblclick",function(d){"TD"==d.target.tagName&&m(a,d.currentTarget,b,c),a.emit("editstart",[b,d])})}(c)})}if(a.options.fields&&a.options.editRow){if(a.options.editEvent===!1)return;a.addEvent(b.element,"dblclick",function(c){("TD"==c.target.tagName||"TR"==c.target.tagName)&&a.showEditRow(b.index,c)})}}function m(a,b,c,d,f,g){function h(){if("function"==typeof g)g();else{var b={};b[i.name]=l.val();var d=a.emit("editend",[b]);d!==!1&&(a.update(c.index,b),l.remove())}}var i=a.getColumn(d),j=i.name?i.data[c.index]:$(b).html(),k=g?a.options.editRow:a.options.editCell,l=$("<input type='text' class='edit' />").val(j).css("width","100%");$(b).html(l),(!i.name||k!==!0&&-1==$.inArray(d,e(a,k)))&&l.attr("disabled",!0),f&&f.target==b&&l.focus(),a.addEvent(l,"keypress",function(a){13==a.which&&h(a)}),a.addEvent(q.tbody.find("tr"),"click",function(a){("TD"==a.target.tagName||"TR"==a.target.tagName)&&h(a)})}function n(a){for(var b=a.options,c=a.uit.getColumnCount(),d=0;c>d;d++){var e=a.getColumn(d);!function(c,d){b.fields&&b.sort&&b.sortEvent===!0||a.addEvent(d.element,"click",function(b){a.emit("colclick",[d,b])}),a.addEvent(d.element,"dblclick",function(b){a.emit("coldblclick",[d,b])}),a.addEvent(d.element,"contextmenu",function(b){return a.emit("colmenu",[d,b]),!1})}(d,e)}}function o(a){for(var b=a.options.sort,c=b===!0?a.uit.getColumnCount():b.length,d=0;c>d;d++){var e=b===!0?d:b[d],f=a.getColumn(e);null!=f.element&&(!function(b){a.addEvent(f.element,"click",function(c){return $(c.target).hasClass("resize")?void 0:(a.sort(b,void 0,c),a.emit("colclick",[f,c]),!1)})}(e,f.name),$(f.element).css("cursor","pointer"))}}function p(b){function c(a){for(var c=a+1;c<b.uit.getColumnCount();c++){var d=b.getColumn(c).element;if(!$(d).is(":hidden"))return b.getColumn(c)}}function d(b,c){var d=30;if(!(d>h+c||d>i-c)&&($(f.element).outerWidth(h+c),$(g.element).outerWidth(i-c),b.options.scroll)){var e=$(g.element).outerWidth()-(f.index==b.uit.getColumnCount()-2?a.scrollWidth():0);$(f.list[0]).outerWidth($(f.element).outerWidth()),$(g.list[0]).outerWidth(e)}}var e=0,f=null,g=null,h=0,i=0,j=null;q.thead.find(".resize").remove();for(var k=0;k<b.uit.getColumnCount()-1;k++){var l=$(b.getColumn(k).element),m=$("<div class='resize'></div>"),n=l.position();m.css({position:"absolute",width:"8px",height:l.outerHeight(),left:l.outerWidth()+n.left-1+"px",top:n.top+"px",cursor:"w-resize","z-index":"1"}),l.append(m),function(a){b.addEvent(m,"mousedown",function(d){return 0==e&&(e=d.pageX),f=b.getColumn(a),g=c(a),h=$(f.element).outerWidth(),i=$(g.element).outerWidth(),j=this,!1})}(k)}b.addEvent("body","mousemove",function(a){e>0&&d(b,a.pageX-e)}),b.addEvent("body","mouseup",function(a){if(e>0){b.emit("colresize",[f,a]),e=0;var c=$(f.element).position().left;return $(j).css("left",$(f.element).outerWidth()+c-1),!1}})}var q=null,r=null,s=null,t={};this.init=function(){var a=this.options;if(q={table:$(this.root),thead:$(this.root).find("thead"),tbody:$(this.root).find("tbody")},this.uit=new c({$obj:q,$tpl:this.tpl},a.fields),a.fields&&a.colshow&&f(this),a.fields&&this.tpl.menu&&g(this),a.resize&&p(this),a.fields&&a.sort&&a.sortEvent===!0&&o(this),a.rows.length>0?this.update(a.rows):this.setVo(),a.width>0&&q.table.outerWidth(a.width),!a.fields&&(a.sort||a.colshow||a.editCell||a.editRow))throw new Error("JUI_CRITICAL_ERR: 'fields' option is required");n(this)},this.update=function(){var a=1==arguments.length?arguments[0]:arguments[1],b=2==arguments.length?arguments[0]:null;if(null!=b){var c=this.uit.updateRow(b,a);l(this,c),0==parseInt(b)&&this.scroll()}else this.uit.removeRows(),this.scroll(),this.append(a),this.options.sortIndex&&this.sort(this.options.sortIndex,this.options.sortOrder,null)},this.updateTree=function(b){var c=a.index();this.uit.removeRows();for(var d=0;d<b.length;d++){var e=c.getParentIndex(b[d].index);null==e?this.uit.appendRow(b[d].data):this.uit.appendRow(e,b[d].data)}j(this,!0),k(this)},this.append=function(){var a=this.count()>0?!1:!0,b=1==arguments.length?arguments[0]:arguments[1],c=2==arguments.length?arguments[0]:null;b=void 0==b.length?[b]:b;for(var d=0;d<b.length;d++){var e=null;e=null!=c?this.uit.appendRow(c,b[d]):this.uit.appendRow(b[d]),a||l(this,e)}j(this,a),a&&k(this)},this.insert=function(a,b){for(var c=this.count()>0?!1:!0,b=void 0==b.length?[b]:b,d=0;d<b.length;d++)this.uit.insertRow(a,b[d]);j(this,c),k(this)},this.select=function(a){var b=this.get(a);return this.hideExpand(),this.hideEditRow(),this.uncheckAll(),$(b.element).parent().find(".selected").removeClass("selected"),$(b.element).addClass("selected"),s=a,b},this.unselect=function(){if(null!=s){var a=this.get(s);return $(a.element).removeClass("selected"),s=null,a}},this.check=function(a){var b=this.get(a);this.hideExpand(),this.hideEditRow(),this.unselect(),t[a]=b,$(b.element).addClass("checked")},this.uncheck=function(a){var b=this.get(a);t[a]=null,$(b.element).removeClass("checked")},this.uncheckAll=function(){t={},q.tbody.find(".checked").removeClass("checked")},this.remove=function(a){return null==a?null:(this.uit.removeRow(a),k(this),void this.scroll())},this.reset=function(){this.uit.removeRows(),this.scroll()},this.move=function(a,b){this.uit.moveRow(a,b),k(this),(0==parseInt(a)||0==parseInt(b))&&this.scroll()},this.sort=function(a,b,c){if(this.options.fields&&this.options.sort){var d=this.getColumn(a);"string"==typeof d.name&&(d.order=b?b:"asc"==d.order?"desc":"asc",this.uit.setColumn(a,d),this.uit.sortRows(d.name,"desc"==d.order?!0:!1),this.emit("sort",[d,c]),j(this,!0),k(this))}},this.scroll=function(a){if(this.options.scroll){var b=this,c=a&&a>0?a:this.options.scrollHeight,c=c>0?c:200;this.options.scrollHeight=c,q.tbody.css("maxHeight",c+"px"),setTimeout(function(){q.tbody.outerHeight()<c?(q.table.css({"table-layout":""}),q.tbody.css({display:"",overflow:""})):(q.table.css({"table-layout":"fixed"}),q.tbody.css({display:"block",overflow:"auto"})),h(b)},10)}},this.open=function(a){null!=a&&(this.uit.openRow(a),this.emit("open",[this.get(a)]))},this.fold=function(a){null!=a&&(this.uit.foldRow(a),this.emit("fold",[this.get(a)]))},this.openAll=function(){this.uit.openRowAll(),this.emit("openall")
},this.foldAll=function(){this.uit.foldRowAll(),this.emit("foldall")},this.resize=function(){this.scroll(),this.options.resize&&p(this)},this.resizeColumns=function(){for(var a=this.listColumn(),b=0;b<a.length;b++)null==a[b].width&&$(a[b].element).outerWidth("auto")},this.size=function(){return this.uit.getRowCount()},this.count=function(){return this.uit.getRowCount()},this.list=function(){return this.uit.getRow()},this.listAll=function(){return this.uit.getRowAll()},this.listChecked=function(){var a=[];for(var b in t)null!=t[b]&&a.push(t[b]);return a},this.listColumn=function(){return this.uit.getColumn()},this.get=function(a){return null==a?null:this.uit.getRow(a)},this.getAll=function(a){return null==a?null:this.uit.getRowAll(a)},this.getColumn=function(a){return null==a?null:this.uit.getColumn("string"==typeof a?$.inArray(a,this.options.fields):a)},this.showColumn=function(a,b){if(this.options.fields){var c=this.getColumn(a);this.uit.showColumn(c.index),this.scroll(),this.resizeColumns(),this.options.resize&&p(this),this.emit("colshow",[c,b])}},this.hideColumn=function(a,b){if(this.options.fields){var c=this.getColumn(a);this.uit.hideColumn(c.index),this.scroll(),this.resizeColumns(),this.options.resize&&p(this),this.emit("colhide",[c,b])}},this.initColumns=function(a){"object"==typeof a&&(this.options.colshow=a,f(this),this.scroll(),this.resizeColumns(),this.options.resize&&p(this))},this.columnMenu=function(a){if(this.options.fields&&r){var b=this.listColumn(),c=q.thead.offset(),d=c.left+q.table.outerWidth()-$(r.root).outerWidth();a=isNaN(a)||a>d+c.left?d:a,a=0>a?0:a,$(r.root).find("input[type=checkbox]").each(function(a){this.checked="show"==b[a].type?!0:!1}),r.move(a,c.top+q.thead.outerHeight()),r.show()}},this.showExpand=function(a,b,c){if(this.options.expand){this.unselect(),this.hideEditRow();var d="#EXPAND_"+this.timestamp,e=this.get(a),b="object"!=typeof b?$.extend({row:e},e.data):b,f=$(d).parent().show();q.tbody.find("tr").removeClass("open"),f.insertAfter($(e.element).addClass("open")),$(d).attr("colspan",q.thead.find("tr:last > th:visible").size()).html(this.tpl.expand(b)),this.scroll(),this.setVo(),s=a,this.emit("expand",[e,c])}},this.hideExpand=function(a){if(this.options.expand&&null!=s){var b=this.get(s);$("#EXPAND_"+this.timestamp).parent().hide(),q.tbody.find("tr").removeClass("open"),this.scroll(),s=null,this.emit("expandend",[b,a])}},this.getExpand=function(){return this.options.expand?null==s?null:this.get(s):void 0},this.showEditRow=function(a,b){if(this.options.editRow){this.unselect(),this.hideExpand();var c=this,d=this.get(a),e=$(d.element).find("td");e.each(function(a){m(c,this,d,a,b,function(){var a={};e.each(function(b){var d=c.getColumn(b);null!=d.name&&(a[d.name]=$(this).find(".edit").val())});var b=c.emit("editend",[a]);b!==!1&&c.update(d.index,a)})}),s=a,c.emit("editstart",[d,b])}},this.hideEditRow=function(){if(this.options.editRow&&null!=s){var a=this.get(s);s=null,this.emit("editend",[a.data]),this.update(a.index,a.data)}},this.getEditRow=function(){return this.options.editRow?null==s?null:this.get(s):void 0},this.setCsv=function(){if(this.options.fields||this.options.csv){var b=1==arguments.length?arguments[0]:arguments[1],c=2==arguments.length?arguments[0]:null,d=a.getCsvFields(this.options.fields,this.options.csv),e=a.csvToData(d,b);if(null==c)this.update(e);else{this.reset();for(var f=0;f<e.length;f++){var g=e[f][c];g&&this.insert(g,e[f])}}}},this.setCsvFile=function(){if(this.options.fields||this.options.csv){var b=this,c=1==arguments.length?arguments[0]:arguments[1],d=2==arguments.length?arguments[0]:null;a.fileToCsv(c,function(a){null==d?b.setCsv(a):b.setCsv(d,a)})}},this.getCsv=function(b){if(this.options.fields||this.options.csv){for(var c=a.getCsvFields(this.options.fields,this.options.csv),d=[],e=b?this.listAll():this.list(),f=0;f<e.length;f++)d.push(e[f].data);return a.dataToCsv2({fields:c,rows:d,names:this.options.csvNames})}},this.getCsvBase64=function(b){return this.options.fields||this.options.csv?a.csvToBase64(this.getCsv(b)):void 0},this.activeIndex=function(){return s}};return d.setting=function(){function b(a,b){for(var e=c-1,f=0;f<b.length;f++)e=c>e?(f+1)*d:c,$(b[f].element).addClass("fadeInLeft").css({"animation-duration":e+"ms"}),function(c){a.addEvent(b[c].element,"AnimationEnd",function(){$(b[c].element).removeClass("fadeInLeft")})}(f)}var c=2500,d=70;return{options:{fields:null,csv:null,csvNames:null,rows:[],colshow:!1,scroll:!1,scrollHeight:200,width:0,expand:!1,expandEvent:!0,editCell:!1,editRow:!1,editEvent:!0,resize:!1,sort:!1,sortIndex:null,sortOrder:"asc",sortEvent:!0,animate:!1},valid:{update:[["integer","string","array"],"object"],updateTree:["array"],append:[["integer","string","object","array"],["object","array"]],insert:[["integer","string"],["object","array"]],select:[["integer","string"]],check:[["integer","string"]],uncheck:[["integer","string"]],remove:[["integer","string"]],move:[["integer","string"],["integer","string"]],sort:[["integer","string"],["string","undefined"],["object","undefined"]],scroll:["integer"],open:[["integer","string"]],fold:[["integer","string"]],get:[["integer","string"]],getAll:[["integer","string"]],getColumn:[["integer","string"]],showColumn:[["integer","string"],["object","undefined"]],hideColumn:[["integer","string"],["object","undefined"]],initColumns:["array"],showExpand:[["integer","string"],["object","undefined"],["object","undefined"]],hideExpand:[["object","undefined"]],showEditRow:[["integer","string"],["object","undefined"]],setCsv:["string","string"],setCsvFile:[["string","object"],"object"],getCsv:[["boolean","undefined"]],getCsvBase64:[["boolean","undefined"]]},animate:{update:{after:function(){if(1==arguments.length){if(!a.browser.webkit&&!a.browser.mozilla)return;b(this,this.listAll())}}},updateTree:{after:function(){(a.browser.webkit||a.browser.mozilla)&&b(this,this.listAll())}},remove:{before:function(a){var b=this.get(a);$(b.element).addClass("fadeOutDown").css({"animation-duration":"350ms","animation-timing-function":"ease-out"})},delay:200},reset:{before:function(){for(var a=this.listAll(),b=2e3,c=b/a.length<50?50:b/a.length,d=0;d<a.length;d++)b-=c,$(a[d].element).addClass("fadeOutRight").css({"animation-duration":(b>0?b:50)+"ms","animation-fill-mode":"both"})},delay:1e3}}}},d},"core"),jui.define("uix.tree.node",[],function(){var a=function(a,b){function c(a){h.nodenum=isNaN(a)?h.nodenum:a,h.parent&&(h.index=null==h.parent.index?""+h.nodenum:h.parent.index+"."+h.nodenum),h.parent&&"string"==typeof h.index&&(h.depth=h.index.split(".").length),h.childrens.length>0&&d(h)}function d(a){for(var b=a.childrens,c=0;c<b.length;c++)b[c].reload(c),b[c].childrens.length>0&&d(b[c])}function e(){if(!b)return h.element;try{var a=$(b($.extend({node:{index:h.index,data:h.data,depth:h.depth}},h.data))).get(0)}catch(c){console.log(c)}return a}function f(a){$(a.element).remove();for(var b=0;b<a.childrens.length;b++){var c=a.childrens[b];c.childrens.length>0?f(c):$(c.element).remove()}}function g(a){for(var b=0;b<a.childrens.length;b++){var c=a.childrens[b];c.reload(b),c.childrens.length>0&&g(c)}}var h=this;this.data=a,this.element=null,this.index=null,this.nodenum=null,this.parent=null,this.childrens=[],this.depth=0,this.type="open",this.reload=function(a,b){if(c(a),null!=this.element){var d=e();b?$(d).insertAfter(this.element):$(this.parent.element).children("ul").append(d),$(this.element).remove(),this.element=d}else this.element=e()},this.reloadChildrens=function(){g(this)},this.destroy=function(){null!=this.parent?this.parent.removeChild(this.index):(f(this),$(this.element).remove())},this.isLeaf=function(){return 0==this.childrens.length?!0:!1},this.fold=function(){$(this.element).children("ul").hide(),this.type="fold"},this.open=function(){$(this.element).children("ul").show(),this.type="open"},this.appendChild=function(a){$(this.element).children("ul").append(a.element),this.childrens.push(a)},this.insertChild=function(a,b){0==a?0==this.childrens.length?$(this.element).children("ul").append(b.element):$(b.element).insertBefore(this.childrens[0].element):$(b.element).insertAfter(this.childrens[a-1].element);var c=this.childrens.splice(0,a);c.push(b),this.childrens=c.concat(this.childrens),g(this)},this.removeChild=function(a){for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];c.index==a&&(this.childrens.splice(b,1),f(c))}g(this)},this.lastChild=function(){return this.childrens.length>0?this.childrens[this.childrens.length-1]:null},this.lastChildLeaf=function(a){var b=a?a:this.lastChild();return b.isLeaf()?b:this.lastChildLeaf(b.lastChild())}};return a}),jui.define("uix.tree.base",["util","uix.tree.node"],function(a,b){var c=function(c){function d(a,c,d){var e=new b(a,n.node);return e.parent=d?d:null,e.reload(c),e}function e(a,b){var c=b.childrens;if(c.length>0)for(var d=0;d<c.length;d++)a.push(c[d]),c[d].childrens.length>0&&e(a,c[d])}function f(a,b){if(!b)return null;var c=a.shift();return void 0==c?b:f(a,b.childrens[c])}function g(a,b){var c=o.getIndexList(a),e=k.getNodeParent(a),f=c[c.length-1];return node=d(b,f,e),e.insertChild(f,node),node}function h(a){if(null==l)l=d(a),m.tree.append(l.element);else{var b=d(a,l.childrens.length,l);l.appendChild(b)}return b}function i(a,b){var c=k.getNode(a),e=d(b,c.childrens.length,c);return c.appendChild(e),e}function j(a,b){for(var c=[];;){var d=b.parent;if(!d)break;c.push(d),b=d}for(var e=0;e<c.length;e++)if(a==c[e])return!0;return!1}var k=this,l=null,m=c.$obj,n=c.$tpl,o=a.index();this.appendNode=function(){var a=arguments[0],b=arguments[1];return b?i(a,b):h(a)},this.insertNode=function(a,b){return 0==l.childrens.length&&0==parseInt(a)?this.appendNode(b):g(a,b)},this.updateNode=function(a,b){var c=this.getNode(a);for(var d in b)c.data[d]=b[d];return c.reload(c.nodenum,!0),c.reloadChildrens(),c},this.removeNode=function(a){this.getNode(a).destroy()},this.removeNodes=function(){var a=l.childrens;if(a.length>0){var b=a.pop();b.parent=null,b.destroy(),this.removeNodes()}},this.openNode=function(a){null==a?this.getRoot().open():this.getNode(a).open()},this.foldNode=function(a){null==a?this.getRoot().fold():this.getNode(a).fold()},this.openNodeAll=function(a){for(var b=this.getNodeAll(a),c=0;c<b.length;c++)b[c].open();null==a&&this.getRoot().open()},this.foldNodeAll=function(a){for(var b=this.getNodeAll(a),c=0;c<b.length;c++)b[c].fold();null==a&&this.getRoot().fold()},this.moveNode=function(a,b){if(a!=b){var c=this.getNode(a),d=this.getNodeParent(b),e=o.getIndexList(b);if(tNo=e[e.length-1],!j(c,d)){c.parent.childrens.splice(c.nodenum,1),c.parent.reloadChildrens(),c.parent=d;var f=d.childrens.splice(0,tNo);f.push(c),d.childrens=f.concat(d.childrens),d.reloadChildrens()}}},this.getNode=function(a){if(null==a)return l.childrens;var b=l.childrens;if(o.isIndexDepth(a)){var c=o.getIndexList(a);return f(c,b[c.shift()])}return b[a]?b[a]:null},this.getNodeAll=function(a){for(var b=[],c=null==a?l.childrens:[this.getNode(a)],d=0;d<c.length;d++)c[d]&&(b.push(c[d]),c[d].childrens.length>0&&e(b,c[d]));return b},this.getNodeParent=function(a){var b=o.getIndexList(a);return 1==b.length?l:2==b.length?this.getNode(b[0]):b.length>2?(b.pop(),this.getNode(b.join("."))):void 0},this.getRoot=function(){return l}};return c}),jui.defineUI("uix.tree",["util","uix.tree.base"],function(a,b){var c=function(){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];$(d.element).removeClass("open fold leaf last"),d.parent&&d.isLeaf()?$(d.element).addClass("leaf"):"open"==d.type?($(d.element).addClass("open"),d.open()):($(d.element).addClass("fold"),d.fold()),d.parent?d.parent.lastChild()==d&&$(d.element).addClass("last"):$(d.element).addClass("root"),$(d.element).children("i:first-child").remove(),$(d.element).prepend($("<i></i>"))}}function d(a,b,c){if(null==b)if(a.options.rootHide){for(var d=a.uit.getRoot().childrens,e=0;e<d.length;e++)c(d[e].index);j(a,!1)}else c(b),j(a,!0);else c(b),j(a,!1)}function e(a,b){for(var c=0;c<b.length;c++)!function(b){var c=$(b.element);a.addEvent(c.children("i:first-child"),"click",function(c){"open"==b.type?a.fold(b.index,c):a.open(b.index,c),c.stopPropagation()}),a.addEvent(c.children("a,span,div")[0],"click",function(c){a.emit("select",[b,c]),c.stopPropagation()})}(b[c])}function f(a,b){if(a.options.drag){var c=a.uit.getRoot();$("body").unbind("mousemove").unbind("mouseup");for(var d=0;d<b.length;d++)!function(b){$(b.element).unbind("mousedown").unbind("mouseup"),a.addEvent(b.element,"mousedown",function(c){return"I"!=c.target.tagName?(null==k.start&&(k.start=b.index,a.emit("dragstart",[b.index,c])),!1):void 0}),a.addEvent(b.element,"mouseup",function(c){if("I"!=c.target.tagName){if(a.options.dragChild!==!1&&k.start&&k.start!=b.index){var d=b.lastChild(),e=d?l.getNextIndex(d.index):b.index+".0";a.move(k.start,e),a.emit("dragend",[e,c])}return k.start=null,k.end=null,!1}}),a.addEvent(c.element,"mouseup",function(b){if("I"!=b.target.tagName){if(a.options.dragChild!==!1&&k.start){var d=""+c.childrens.length;a.move(k.start,d),a.emit("dragend",[d,b])}return k.start=null,k.end=null,!1}})}(b[d]);a.addEvent("body","mouseup",function(b){return k.start&&k.end&&(a.move(k.start,k.end),a.emit("dragend",[k.end,b])),k.start=null,k.end=null,!1})}}function g(a){if(a.options.drag){$(a.root).find(".drag").remove();for(var b=a.listAll(),c=0;c<b.length;c++){var d=b[c],e=$(d.element).position();e.top>0&&i(a,d,e)}}}function h(a){if(a.options.drag)for(var b=a.listAll(),c=0;c<b.length;c++){var d=b[c],e=$(d.element).position();e.top>0&&d.parent&&d.parent.lastChild()==d&&(e.top=e.top+$(d.element).outerHeight(),i(a,d,e,!0))}}function i(a,b,c,d){if(a.options.drag){var e=d?l.getNextIndex(b.index):b.index,f=$("<div class='drag'></div>").attr("data-index",e).css(c).outerWidth($(b.element).outerWidth());$(a.root).append(f),a.addEvent(f,"mouseover",function(){k.start&&(k.end=e,f.addClass("on"))}),a.addEvent(f,"mouseout",function(){k.start&&f.removeClass("on")})}}function j(a,b){var d=a.listAll();c(a,d),e(a,d),f(a,d),g(a),h(a),b&&(c(a,[a.uit.getRoot()]),e(a,[a.uit.getRoot()]))}var k={start:null,end:null},l=a.index();this.init=function(){var a=this.options;if(this.uit=new b({$obj:{tree:$(this.root)},$tpl:this.tpl}),!a.root)throw new Error("JUI_CRITICAL_ERROR: root data is required");if(this.uit.appendNode(a.root),j(this,!0),a.rootHide){var c=this.uit.getRoot();$(c.element).css("padding-left","0px"),$(c.element).children("*:not(ul)").hide()}a.rootFold&&this.fold()},this.update=function(a,b){this.uit.updateNode(a,b),j(this)},this.append=function(){var a=1==arguments.length?arguments[0]:arguments[1],b=2==arguments.length?arguments[0]:null;a=void 0==a.length?[a]:a;for(var c=0;c<a.length;c++)null!=b?this.uit.appendNode(b,a[c]):this.uit.appendNode(a[c]);j(this)},this.insert=function(a,b){for(var c=void 0==b.length?[b]:b,d=0;d<c.length;d++)this.uit.insertNode(a,c[d]);j(this)},this.select=function(a){var b=null==a?this.uit.getRoot():this.get(a);return $(this.root).find("li").removeClass("active"),$(b.element).addClass("active"),b},this.remove=function(a){this.uit.removeNode(a),j(this)},this.reset=function(){this.uit.removeNodes(),j(this)},this.move=function(a,b){this.uit.moveNode(a,b),j(this)},this.open=function(a,b){if(null!=a||!this.options.rootHide){var c=null==a;this.uit.openNode(a),j(this,c),this.emit("open",[c?this.uit.getRoot():this.get(a),b])}},this.fold=function(a,b){if(null!=a||!this.options.rootHide){var c=null==a;this.uit.foldNode(a),j(this,c),this.emit("fold",[c?this.uit.getRoot():this.get(a),b])}},this.openAll=function(a){var b=this,c=null==a;d(this,a,function(a){b.uit.openNodeAll(a)}),this.emit("openall",[c?this.uit.getRoot():this.get(a)])},this.foldAll=function(a){var b=this,c=null==a;d(this,a,function(a){b.uit.foldNodeAll(a)}),this.emit("foldall",[c?this.uit.getRoot():this.get(a)])},this.list=function(){return this.uit.getNode()},this.listAll=function(){return this.uit.getNodeAll()},this.listParents=function(a){function b(a){null!=a.index&&(d.push(a),null!=a.parent&&b(a.parent))}var c=this.get(a),d=[];return c.parent&&b(c.parent),d.reverse()},this.get=function(a){return null==a?null:this.uit.getNode(a)},this.getAll=function(a){return null==a?null:this.uit.getNodeAll(a)}};return c.setting=function(){return{options:{root:null,rootHide:!1,rootFold:!1,drag:!1,dragChild:!0},valid:{update:["string","object"],append:[["string","object","array"],["object","array"]],insert:["string",["object","array"]],select:["string"],remove:["string"],move:["string","string"],open:[["string","null"],["object","undefined"]],fold:[["string","null"],["object","undefined"]],openAll:["string"],foldAll:["string"],listParents:["string"],get:["string"],getAll:["string"]}}},c},"core"),jui.defineUI("uix.window",["util","ui.modal"],function(a,b){var c=function(){function a(){var a=g.$foot.length<1?5:g.$foot.outerHeight();g.$body.outerHeight(g.$root.outerHeight()-g.$head.outerHeight()-a)}var c=2e3,d=null,e={},f={},g={},h=null;this.init=function(){var i=this,j=this.options,k=$(this.root),l=$(this.root).children(".head"),m=$(this.root).children(".body"),n=$(this.root).children(".foot"),o=$("body");j.modal&&(j.move=!1,j.resize=!1),g={$root:k,$head:l,$body:m,$foot:n},o.children(this.selector).remove(),k.css(j).appendTo(o),j.move&&this.addEvent(l,"mousedown",function(a){d=k,e.check=!0,e.disX=a.pageX-d.offset().left,e.disY=a.pageY-d.offset().top}),j.resize&&(k.append("<i class='icon-resize resize'></i>"),this.addEvent(k.children(".resize"),"mousedown",function(){return d=k,f.check=!0,f.disX=d.width()+d.offset().left,f.disWidth=d.width(),f.disY=d.height()+d.offset().top,f.disHeight=d.height(),!1})),j.modal||i.addEvent(k,"mousedown",function(a){k.css("z-index",++c),a.stopPropagation()}),this.addEvent(l.find(".close"),"click",function(){return i.hide(),!1}),this.addEvent("body","mousemove",function(b){if(e.check){var c=b.pageX-e.disX,g=b.pageY-e.disY;$(d).css({left:c+"px",top:g+"px"})}if(f.check){var h=b.pageX-f.disX,i=b.pageY-f.disY;d.width(f.disWidth+h),d.height(f.disHeight+i),a()}}),this.addEvent("body","mouseup",function(a){e.check&&i.emit("move",a),f.check&&i.emit("resize",a),e.check=!1,f.check=!1}),this.type="hide",a(),setTimeout(function(){if(k.hide(),j.modal){var a=j.modalIndex>0?{index:j.modalIndex}:{};h=b(i.selector,$.extend({autoHide:!1},a))}},10)},this.hide=function(){h?h.hide():g.$root.hide(),this.emit("hide"),this.type="hide"},this.show=function(a,b){h?h.show():g.$root.show(),(a||b)&&this.move(a,b),this.emit("show"),this.type="show"},this.move=function(a,b){g.$root.css("left",a),g.$root.css("top",b)},this.update=function(a){g.$body.empty().html(a)},this.setTitle=function(a){g.$head.find(".title").empty().html(a)},this.setSize=function(b,c){g.$root.width(b),g.$root.height(c),a()},this.resize=function(){a()},this.resizeModal=function(){h&&h.resize()}};return c.setting=function(){function a(a,b){$(a.root).addClass(b).css({"animation-duration":"500ms","animation-fill-mode":"both"}),a.addEvent(a.root,"AnimationEnd",function(){$(a.root).removeClass(b)})}return{options:{width:400,height:300,left:"auto",top:"auto",right:"auto",bottom:"auto",modal:!1,move:!0,resize:!0,modalIndex:0,animate:!1},valid:{show:["number","number"],move:["number","number"],update:["string"],setTitle:["string"],setSize:["integer","integer"]},animate:{show:{after:function(){a(this,"fadeInDown")}},hide:{before:function(){a(this,"fadeOutUp")},after:function(){$(this.root).removeClass("fadeOutUp")},delay:500},move:{after:function(){a(this,"shake")}}}}},c},"core"),jui.defineUI("uix.xtable",["util","ui.modal","uix.table"],function(a,b,c){var d=null;a.resize(function(){for(var a=jui.get("xtable"),b=0;b<a.length;b++)for(var c=a[b].list,d=0;d<c.length;d++)c[d].resize()},1e3);var e=function(){function e(a){function b(a,b){var c={};for(var d in a.options)-1==$.inArray(d,b)&&(c[d]=a.options[d]);return c}function d(a,b,c){var d=a.options;if($(a.root).css({position:"relative"}),$(b.root).css({position:"absolute",top:"0","border-bottom-width":"0",margin:"0"}),$(c.root).css({margin:"0"}),d.width>0&&$(a.root).outerWidth(d.width),d.scrollWidth>0){var e=$(a.root).outerWidth();$(a.root).css({"max-width":a.options.scrollWidth,"overflow-x":"auto"}),$(b.root).outerWidth(e),$(c.root).parent().outerWidth(e)}}function e(a,b){var c=$(b.root).clone(),d=b.listColumn();$(b.root).wrap("page"!=a.options.buffer?"<div class='body' style='max-height: "+a.options.scrollHeight+"px'></div>":"<div class='body'></div>"),$(b.root).find("thead > tr").not(":last-child").remove();for(var e=0;e<d.length;e++){var f=$(d[e].element);f.html("").outerHeight(0).attr("style",f.attr("style")+"border-top-width: 0px !important;border-bottom-width: 0px !important;padding-top: 0px !important;padding-bottom: 0px !important")}c.children("tbody").remove(),$(a.root).append(c.addClass("head")),$(a.root).css("padding-top",c.height())}var f=["buffer","bufferCount","csvCount","sortLoading","sortCache","sortIndex","sortOrder","event","rows","scrollWidth","width"];j=c($(a.root).children("table"),b(a,f.concat("resize"))),e(a,j),i=c($(a.root).children("table.head"),b(a,f)),d(a,i,j)}function f(a){i.on("colresize",function(b,c){for(var d=i.listColumn(),e=j.listColumn(),f=!1,g=d.length-1;g>=0;g--){var h=$(d[g].element).outerWidth();"page"==a.options.buffer||"show"!=d[g].type||f?($(d[g].element).outerWidth(h),$(e[g].element).outerWidth(h)):($(e[g].element).outerWidth("auto"),f=!0)}a.emit("colresize",[b,c])}),i.on("colshow",function(b,c){j.uit.showColumn(b.index),a.resize(),a.emit("colshow",[b,c])}),i.on("colhide",function(b,c){j.uit.hideColumn(b.index),a.resize(),a.emit("colhide",[b,c])}),i.on("colclick",function(b,c){a.emit("colclick",[b,c])}),i.on("coldblclick",function(b,c){a.emit("coldblclick",[b,c])}),i.on("colmenu",function(b,c){a.emit("colmenu",[b,c])}),i.on("sort",function(b,c){a.sort(b.index,b.order,c),a.emit("sort",[b,c]),a.options.sortCache&&a.setOption({sortIndex:b.index,sortOrder:b.order})}),j.on("select",function(b,c){a.emit("select",[b,c])}),j.on("rowmenu",function(b,c){a.emit("rowmenu",[b,c])}),j.on("expand",function(b,c){a.emit("expand",[b,c])}),j.on("expandend",function(b,c){a.emit("expandend",[b,c])})}function g(a){var b=$(a.root).children(".body");b.unbind("scroll").scroll(function(c){return this.scrollTop+a.options.scrollHeight>=b.get(0).scrollHeight?(a.next(),a.emit("scroll",c),!1):void 0})}function h(a,b,c){null==l?l=k:k=l;for(var d=k.slice(),e=[],f=0,g=d.length;g>f;f++)c(d[f][b])&&e.push(d[f]);a.update(e),a.emit("filter",[e])}var i=null,j=null,k=[],l=null,m=null,n=!1,o=1;this.init=function(){var a=this.options;if("TABLE"==this.root.tagName){var c=$(this.root).wrap("<div class='xtable'></div>");this.root=c.parent().get(0)}if(e(this),f(this),"page"!=a.buffer){var d=$(this.root).children(".body");d.css({"overflow-y":"scroll","overflow-x":"hidden"}),d.children("table").css({"border-bottom-width":"0"})}if("scroll"==a.buffer&&g(this),a.rows&&this.update(a.rows),a.tpl.loading){var h=$(a.tpl.loading);$(this.root).append(h),m=b(h,{target:this.selector,opacity:.1,autoHide:!1}),a.sortLoading=a.sortLoading===!0?500:a.sortLoading}a.resize&&(i.resizeColumns(),i.resize())},this.select=function(a){return j.select(a)},this.update=function(a){k=a,this.clear(),this.next(),this.emit("update"),i.emit("colresize"),this.options.sortIndex&&this.sort(this.options.sortIndex,this.options.sortOrder,void 0,!0)},this.next=function(){var a=(o-1)*this.options.bufferCount,b=a+this.options.bufferCount;if(b=b>k.length?k.length:b,b<=k.length){for(var c=[],d=a;b>d;d++)c.push(k[d]);j.append(c),this.emit("next",[o]),c.length>0&&o++}},this.page=function(a){return"scroll"==this.options.buffer?!1:this.getPage()==a?!1:(d=o>a?"prev":"next",this.clear(),o=1>a?1:a,void this.next())},this.sort=function(b,c,d,e){function f(){var b=a.sort(k);b.setCompare("desc"==j.order?function(a,b){return g(a)>g(b)?!0:!1}:function(a,b){return g(a)<g(b)?!0:!1}),b.run(),h.emit("sortend",[j,d]),h.clear(),h.next(),h.hideLoading()}function g(a){var b=a[j.name];return isNaN(b)||null==b?"string"==typeof b?b.toLowerCase():"":parseInt(b)}if(this.options.fields&&this.options.sort){var h=this,j=i.getColumn(b);"string"==typeof j.name&&(j.order=c?c:"asc"==j.order?"desc":"asc",i.uit.setColumn(b,j),this.options.sortLoading&&!e?(h.showLoading(),setTimeout(function(){f()},this.options.sortLoading)):f())}},this.filter=function(a,b,c){if(this.options.fields){this.rollback();var d=i.getColumn(a);d.name&&b?h(this,d.name,function(a){if("function"==typeof c){if(c(a,b))return!0}else if(-1!=(""+a).indexOf(""+b))return!0;return!1}):this.emit("filter",[k])}},this.rollback=function(){null!=l&&(this.update(l),l=null)},this.clear=function(){o=1,j.uit.removeRows(),j.scroll()},this.reset=function(){this.clear(),k=[]},this.resize=function(){i.resizeColumns(),i.resize(),i.emit("colresize")},this.height=function(a){"scroll"==this.options.buffer&&(this.options.scrollHeight=a,$(this.root).find(".body").css("max-height",a+"px"),g(this))},this.size=function(){return k.length},this.count=function(){return k.length},this.list=function(){return j.list()},this.listColumn=function(){return i.listColumn()},this.listData=function(){return k},this.get=function(a){return null==a?null:j.get(a)},this.getColumn=function(a){return i.getColumn(a)},this.getData=function(a){return k[a]},this.showColumn=function(a){i.showColumn(a)},this.hideColumn=function(a){i.hideColumn(a)},this.initColumns=function(a){i.initColumns(a),j.initColumns(a),i.emit("colresize")},this.columnMenu=function(a){i.columnMenu(a)},this.showExpand=function(a,b){j.showExpand(a,b)},this.hideExpand=function(a){a?j.hideExpand(a):j.hideExpand()},this.getExpand=function(){return j.getExpand()},this.showLoading=function(a){if(m&&!n&&(m.show(),n=!0,a>0)){var b=this;setTimeout(function(){b.hideLoading()},a)}},this.hideLoading=function(){m&&n&&(m.hide(),n=!1)},this.setCsv=function(b){if(this.options.fields||this.options.csv){var c=a.getCsvFields(this.options.fields,this.options.csv);this.update(a.csvToData(c,b))}},this.setCsvFile=function(b){if(this.options.fields||this.options.csv){var c=this;a.fileToCsv(b,function(a){c.setCsv(a)})}},this.getCsv=function(){if(this.options.fields||this.options.csv){var b=a.getCsvFields(this.options.fields,this.options.csv),c=k.length>this.options.csvCount?this.options.csvCount:k.length;return a.dataToCsv2({fields:b,rows:k,count:c,names:this.options.csvNames})}},this.getCsvBase64=function(){return this.options.fields||this.options.csv?a.csvToBase64(this.getCsv()):void 0},this.rowFunc=function(a,b,c){if(this.options.fields){var d="function"==typeof c?!0:!1,e=0,f=d?0:k.length,g=i.getColumn(b);if(g.name)for(var h=0;h<k.length;h++){var j=k[h][g.name];isNaN(j)||(d?c(k[h])&&(e+=j,f++):e+=j)}return"sum"==a?e:"avg"==a?e/f:null}},this.getPage=function(){return o-1},this.activeIndex=function(){return j.activeIndex()}};return e.setting=function(){function b(a,b,d){for(var f=c-1,g=0;g<b.length;g++)f=c>f?(g+1)*e:c,$(b[g].element).addClass(d).css({"animation-duration":f+"ms"}),function(c){a.addEvent(b[c].element,"AnimationEnd",function(){$(b[c].element).removeClass(d)})}(g)}var c=2500,e=70;return{options:{fields:null,csv:null,csvNames:null,csvCount:1e4,rows:[],colshow:!1,expand:!1,expandEvent:!0,resize:!1,scrollHeight:200,scrollWidth:0,width:0,buffer:"scroll",bufferCount:100,sort:!1,sortLoading:!1,sortCache:!1,sortIndex:null,sortOrder:"asc",sortEvent:!0,animate:!1},valid:{select:[["integer","string"]],update:["array"],page:["integer"],sort:[["integer","string"],["string","undefined"],["object","undefined"],["boolean","undefined"]],filter:[["integer","string"],["integer","string","boolean"],"function"],height:["integer"],getColumn:[["integer","string"]],getData:[["integer","string"]],showColumn:[["integer","string"]],hideColumn:[["integer","string"]],initColumns:["array"],columnMenu:["integer"],showExpand:[["integer","string"],"object"],hideExpand:[["integer","string"]],showLoading:["integer"],setCsv:["string"],setCsvFile:["object"],rowFunc:["string",["integer","string"],"function"]},animate:{update:{after:function(){(a.browser.webkit||a.browser.mozilla)&&b(this,this.list(),"fadeInLeft")}},page:{after:function(){b(this,this.list(),"next"==d?"fadeInLeft":"fadeInRight")}},reset:{before:function(){for(var a=this.list(),b=2e3,c=b/a.length<50?50:b/a.length,d=0;d<a.length;d++)b-=c,$(a[d].element).addClass("fadeOutRight").css({"animation-duration":(b>0?b:50)+"ms","animation-fill-mode":"both"})},delay:1e3},filter:{after:function(){b(this,this.list(),"flipInX")}}}}},e},"core");